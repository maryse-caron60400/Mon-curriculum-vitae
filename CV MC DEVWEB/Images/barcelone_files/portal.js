var twig={};twig.inherits=function(){};var Templates={overlay:{},mixins:{},IndexView:{},BaseView:{},header:{},itinerary:{action:{},overview:{},roadbook:{},summary:{}},left:{ItineraryFormView:{},app:{},form:{},tab:{}},center:{pushes:{},AdWrapperView:{},AddressView:{},TooltipView:{},partner:{},GeoentityView:{contentWidgets:{HotelContentWidgetView:{}}}}};!function e(t,i,o){function r(n,a){if(!i[n]){if(!t[n]){var p="function"==typeof require&&require;if(!a&&p)return p(n,!0);if(s)return s(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};t[n][0].call(c.exports,function(e){var i=t[n][1][e];return r(i?i:e)},c,c.exports,e,t,i,o)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<o.length;n++)r(o[n]);return r}({1:[function(e,t,i){t.exports={"public":{version:"SNAPSHOT",user_agent:"WebFixe/SNAPSHOT",domain:"mappydev.com",servicesdomain:"mappysnap.net",filterMinScore:75,axeToken:"aRjYy8tqadUyMFb5REsAjn6CI/ZX7buZht+16G831ScBVn3j6SLoDRKxpP++G9q3mMRDcqmSMP9MUnVqV554fg==",size:3,sizes:{tiny:0,small:1,medium:2,normal:3,large:4,xxl:5},services:{bucket:"//app.mappydev.net/front/portal/SNAPSHOT/",frontservices:"/front-services/",poiassets:"//poiassets.mappysnap.net/",logotc:"//logotc.mappysnap.net/pictos/web/",indoor:"//iit.mappysnap.net/",geoentity:"//uws2.mappysnap.net/data/poi/5.3/",images:"//uws2.mappysnap.net/data/image/1.2/image/",pano:"//uws2.mappysnap.net/data/pano/1.10/",tile:"//imt1.mappysnap.net/tile/",raster:"//map1.mappysnap.net/raster/1.0/slab/",suggest:"//suggest.mappysnap.net/suggest/1.1/suggest",search:"//search.mappysnap.net/search/1.1/find",abtest:"//ab.mappysnap.net/",axe:"//axe.mappysnap.net/",loc:"//uws2.mappysnap.net/data/map/1.0/loc/get.aspx?",rmm:"//routemm.mappysnap.net/route/1.5/roadbook?",rmmveh:"//routemm.mappysnap.net/route_vehicle/1.5/roadbook?",shopping:"//shopping.mappysnap.com",buc:"//log.mappysnap.net/log/1.0/log/buc/?",audience:"//log.mappysnap.net/log/1.0/audience/categorie/?",errorjs:"//log.mappysnap.net/log/1.0/log/error/js/"},redirectIds:{large:{"booking-aid":"324859","accor-host":"www.accorhotels.com","accor-merchantid":"RT-FR018152-","lafourchette-sourceid":"9301-484","bestwestern-iata":"00222394","bestwestern-sob":"A18",epi2:"desk","mcdonalds-host":"https://www.restaurants.mcdonalds.fr","mcdonalds-esp-host":"https://www.restaurants.mcdonalds.fr","pjdoc-xtor":"371"},small:{"booking-aid":"343652","accor-host":"m.accorhotels.com","accor-merchantid":"RT-FR018152-","lafourchette-sourceid":"15968-015","bestwestern-iata":"00222394","bestwestern-sob":"A18",epi2:"mobi","mcdonalds-host":"https://m.restaurants.mcdonalds.fr","mcdonalds-esp-host":"https://m.restaurants.mcdonalds.fr","pjdoc-xtor":"371"}},gasCosts:{sp98:1.32,sp95:1.281,go:1.013,gpl:.721},share:{facebook:{appId:"180724705420105",ogtype:"mappy_dev"},email:{max_length:5e3,max_per_ip:5}},stats:{xtsitePJ:"488471",aladinUrl:"//www.pagesjaunes.fr/stat/p/mappyTest?"},suggest:{delay:250,minChars:1},push_auto_promo:[{category:"mode",rubricId:"mode"},{category:"hotel-hebergement",rubricId:"hotel"},{category:"resto-bar",rubricId:"restaurant"}],iview:{accessorHost:"//uws2.mappysnap.net/data/map/1.0/",geoServiceHost:"uws2.mappysnap.net",mapServiceHost:"mws%25n.mappysnap.net",mapSlabsHost:"map%25n.mappysnap.net",tileHost:"imt%25n.mappysnap.net"},locales:{fr_FR:{xtsite:"509858",siteid:"14351",mob_siteid:"19834",advertising:{discovery:"110494",itinerary:"110494",itinerary_print:"110494",itinerary_hp:"110494",shopping_hp:"110494",search:"110494",search_print:"110494",address:"110494",roadbook:"110494",mob_interstitiel:"223487",mob_itinerary:"223487",mob_results_list:"223487"},services:{search:{favorite_country:250,language:"FRE"},loc:{"opt.favoriteCountry":250,"opt.language":"fre"},route:{"opt.language":"fre"}},entryPoint:{zoomLevel:6,location:{address:{country:"France",countryNumericCode:250},geoPosition:{lat:"46.73563851",lng:"2.361111111"}},viewDirection:{yaw:151.1206123,pitch:6.113090106},geoBox:{ne:{lat:"49.47947985450217",lng:"5.942986328125016"},sw:{lat:"43.51605046468249",lng:"-5.122999023437501"}}}},fr_BE:{xtsite:"549923",siteid:"14537",mob_siteid:"72296",advertising:{discovery:"487569",itinerary:"487569",itinerary_print:"487569",itinerary_hp:"487569",search:"487569",search_print:"487569",roadbook:"487569",mob_interstitiel:"547608",mob_itinerary:"547608",mob_results_list:"547608"},services:{search:{favorite_country:56,language:"FRE"},loc:{"opt.favoriteCountry":56,"opt.language":"fre"},route:{"opt.language":"fre"}},entryPoint:{location:{address:{country:"Belgique",countryNumericCode:56},geoPosition:{lng:"4.354715",lat:"50.846275"}},zoomLevel:7}},nl_BE:{xtsite:"549922",siteid:"16040",mob_siteid:"72298",advertising:{discovery:"487571",itinerary:"487571",itinerary_print:"487571",itinerary_hp:"487571",search:"487571",search_print:"487571",roadbook:"487571",mob_interstitiel:"547556",mob_itinerary:"547556",mob_results_list:"547556"},services:{search:{favorite_country:56,language:"DUT"},loc:{"opt.favoriteCountry":56,"opt.language":"dut"},route:{"opt.language":"dut"}},entryPoint:{location:{address:{country:"Belgie",countryNumericCode:56},geoPosition:{lng:"4.354715",lat:"50.846275"}},zoomLevel:7}},en_GB:{xtsite:"549924",siteid:"14534",mob_siteid:"72299",advertising:{discovery:"487573",itinerary:"487573",itinerary_print:"487573",itinerary_hp:"487573",search:"487573",search_print:"487573",roadbook:"487573",mob_interstitiel:"547557",mob_itinerary:"547557",mob_results_list:"547557"},services:{search:{favorite_country:826,language:"ENG"},loc:{"opt.favoriteCountry":826,"opt.language":"eng"},route:{"opt.language":"eng"}},entryPoint:{location:{address:{country:"United Kingdom",countryNumericCode:826},geoPosition:{lat:"51.500152",lng:"-0.126236"}},zoomLevel:5}}}},"private":{reviews:{id:"8e5da423",key:"128f61cb3f37dc1ff827cdfa31f5bd49"},mop:{url:"http://mpp.mappysnap.net/mpp/",id:"mappySocloz",salt:"mappySoclozREC"},seo:{restricted:!0,open_cities_count:1500,open_cities_for_itineraries_count:100,open_cities_for_itineraries_count_foreign:11,open_cities_for_pois_directory:200,directory_items_by_page:200,itinerary_cities_split:200},uber:{service:"https://api.uber.com/v1/",server_token:"3Ds1AjyMnL4gsy3v2-ZLUn70vtrjG1N8SKset_A6"},ouibus:{service:"https://api.idbus.com/v1/",server_token:"GX5rhHWA0QfQpBCbL-lOCw"},formstack:{service:"https://www.formstack.com/api/v2/form/{formid}/field.json",service_post:"https://www.formstack.com/api/v2/form/{formid}/submission.json",server_token:"e71e11bd39910023e4853229c70dd787",forms:{"supermarches-hypermarches":2397286,"station-service":2400825,restaurant:2400835,"bar-club":2400841,garage:2400842,parking:2400848,banque:2400854,"vetements-femme":2400860,"pharmacie-parapharmacie":2400863}},mailer_host:"10.0.1.73"}}},{}],2:[function(e,t,i){"use strict";function o(e){this.params=e||{}}o.IMG_SIZE_IN_PX="600",o.MAP_GEOBOX_SIZE_IN_METER=2500,o.EARTH_RADIUS_EQUITORIAL=6378137,o.EARTH_RADIUS_POLAR=6356752.3,o.prototype.getRasterUrl=function(e){var t=e.get("lat"),i=e.get("lng"),r={northWest:this.getDistantPoint(t,i,o.MAP_GEOBOX_SIZE_IN_METER,o.MAP_GEOBOX_SIZE_IN_METER),southEast:this.getDistantPoint(t,i,-o.MAP_GEOBOX_SIZE_IN_METER,-o.MAP_GEOBOX_SIZE_IN_METER)},s=parameters.services.raster+"standard/"+o.IMG_SIZE_IN_PX+"x"+o.IMG_SIZE_IN_PX+"/"+Math.round(1e6*r.southEast.lng)/1e6+";"+Math.round(1e6*r.southEast.lat)/1e6+";"+Math.round(1e6*r.northWest.lng)/1e6+";"+Math.round(1e6*r.northWest.lat)/1e6;return s},o.prototype.getDistantPoint=function(e,t,i,r){var s=Math.pow(o.EARTH_RADIUS_EQUITORIAL,2),n=r/o.EARTH_RADIUS_EQUITORIAL,a=Math.pow(Math.tan(e,Math.PI/180),2),p=i*Math.sqrt(s+o.EARTH_RADIUS_POLAR*a)/s;return{lat:e-180*n/Math.PI,lng:t-180*p/Math.PI}},t.exports=new o},{}],3:[function(e,t,i){},{}],4:[function(e,t,i){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],5:[function(e,t,i){(function(e){function t(e,t){for(var i=0,o=e.length-1;o>=0;o--){var r=e[o];"."===r?e.splice(o,1):".."===r?(e.splice(o,1),i++):i&&(e.splice(o,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function o(e,t){if(e.filter)return e.filter(t);for(var i=[],o=0;o<e.length;o++)t(e[o],o,e)&&i.push(e[o]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return r.exec(e).slice(1)};i.resolve=function(){for(var i="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var n=s>=0?arguments[s]:e.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(i=n+"/"+i,r="/"===n.charAt(0))}return i=t(o(i.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+i||"."},i.normalize=function(e){var r=i.isAbsolute(e),s="/"===n(e,-1);return e=t(o(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},i.isAbsolute=function(e){return"/"===e.charAt(0)},i.join=function(){var e=Array.prototype.slice.call(arguments,0);return i.normalize(o(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},i.relative=function(e,t){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=i.resolve(e).substr(1),t=i.resolve(t).substr(1);for(var r=o(e.split("/")),s=o(t.split("/")),n=Math.min(r.length,s.length),a=n,p=0;n>p;p++)if(r[p]!==s[p]){a=p;break}for(var l=[],p=a;p<r.length;p++)l.push("..");return l=l.concat(s.slice(a)),l.join("/")},i.sep="/",i.delimiter=":",i.dirname=function(e){var t=s(e),i=t[0],o=t[1];return i||o?(o&&(o=o.substr(0,o.length-1)),i+o):"."},i.basename=function(e,t){var i=s(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},i.extname=function(e){return s(e)[3]};var n="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return 0>t&&(t=e.length+t),e.substr(t,i)}}).call(this,e("_process"))},{_process:6}],6:[function(e,t,i){function o(){y&&c&&(y=!1,c.length?u=c.concat(u):h=-1,u.length&&r())}function r(){if(!y){var e=a(o);y=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,y=!1,p(e)}}function s(e,t){this.fun=e,this.array=t}function n(){}var a,p,l=t.exports={};!function(){try{a=setTimeout}catch(e){a=function(){throw new Error("setTimeout is not defined")}}try{p=clearTimeout}catch(e){p=function(){throw new Error("clearTimeout is not defined")}}}();var c,u=[],y=!1,h=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];u.push(new s(e,t)),1!==u.length||y||a(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=n,l.addListener=n,l.once=n,l.off=n,l.removeListener=n,l.removeAllListeners=n,l.emit=n,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],7:[function(e,t,i){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],8:[function(e,t,i){(function(t,o){function r(e,t){var o={seen:[],stylize:n};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),g(t)?o.showHidden=t:t&&i._extend(o,t),T(o.showHidden)&&(o.showHidden=!1),T(o.depth)&&(o.depth=2),T(o.colors)&&(o.colors=!1),T(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=s),p(o,e,o.depth)}function s(e,t){var i=r.styles[t];return i?"["+r.colors[i][0]+"m"+e+"["+r.colors[i][1]+"m":e}function n(e,t){return e}function a(e){var t={};return e.forEach(function(e,i){t[e]=!0}),t}function p(e,t,o){if(e.customInspect&&t&&M(t.inspect)&&t.inspect!==i.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(o,e);return w(r)||(r=p(e,r,o)),r}var s=l(e,t);if(s)return s;var n=Object.keys(t),g=a(n);if(e.showHidden&&(n=Object.getOwnPropertyNames(t)),C(t)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return c(t);if(0===n.length){if(M(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return c(t)}var v="",f=!1,_=["{","}"];if(d(t)&&(f=!0,_=["[","]"]),M(t)){var T=t.name?": "+t.name:"";v=" [Function"+T+"]"}if(b(t)&&(v=" "+RegExp.prototype.toString.call(t)),k(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+c(t)),0===n.length&&(!f||0==t.length))return _[0]+v+_[1];if(0>o)return b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return x=f?u(e,t,o,g,n):n.map(function(i){return y(e,t,o,g,i,f)}),e.seen.pop(),h(x,v,_)}function l(e,t){if(T(t))return e.stylize("undefined","undefined");if(w(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return f(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,i,o,r){for(var s=[],n=0,a=t.length;a>n;++n)s.push(A(t,String(n))?y(e,t,i,o,String(n),!0):"");return r.forEach(function(r){r.match(/^\d+$/)||s.push(y(e,t,i,o,r,!0))}),s}function y(e,t,i,o,r,s){var n,a,l;if(l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},l.get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),A(o,r)||(n="["+r+"]"),a||(e.seen.indexOf(l.value)<0?(a=m(i)?p(e,l.value,null):p(e,l.value,i-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),T(n)){if(s&&r.match(/^\d+$/))return a;n=JSON.stringify(""+r),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=e.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=e.stylize(n,"string"))}return n+": "+a}function h(e,t,i){var o=0,r=e.reduce(function(e,t){return o++,t.indexOf("\n")>=0&&o++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function f(e){return"number"==typeof e}function w(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function T(e){return void 0===e}function b(e){return x(e)&&"[object RegExp]"===I(e)}function x(e){return"object"==typeof e&&null!==e}function k(e){return x(e)&&"[object Date]"===I(e)}function C(e){return x(e)&&("[object Error]"===I(e)||e instanceof Error)}function M(e){return"function"==typeof e}function V(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function I(e){return Object.prototype.toString.call(e)}function S(e){return 10>e?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P=/%[sdj%]/g;i.format=function(e){if(!w(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(r(arguments[i]));return t.join(" ")}for(var i=1,o=arguments,s=o.length,n=String(e).replace(P,function(e){if("%%"===e)return"%";if(i>=s)return e;switch(e){case"%s":return String(o[i++]);case"%d":return Number(o[i++]);case"%j":try{return JSON.stringify(o[i++])}catch(t){return"[Circular]"}default:return e}}),a=o[i];s>i;a=o[++i])n+=m(a)||!x(a)?" "+a:" "+r(a);return n},i.deprecate=function(e,r){function s(){if(!n){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}if(T(o.process))return function(){return i.deprecate(e,r).apply(this,arguments)};if(t.noDeprecation===!0)return e;var n=!1;return s};var E,R={};i.debuglog=function(e){if(T(E)&&(E=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(E)){var o=t.pid;R[e]=function(){var t=i.format.apply(i,arguments);console.error("%s %d: %s",e,o,t)}}else R[e]=function(){};return R[e]},i.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=d,i.isBoolean=g,i.isNull=m,i.isNullOrUndefined=v,i.isNumber=f,i.isString=w,i.isSymbol=_,i.isUndefined=T,i.isRegExp=b,i.isObject=x,i.isDate=k,i.isError=C,i.isFunction=M,i.isPrimitive=V,i.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",L(),i.format.apply(i,arguments))},i.inherits=e("inherits"),i._extend=function(e,t){if(!t||!x(t))return e;for(var i=Object.keys(t),o=i.length;o--;)e[i[o]]=t[i[o]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":7,_process:6,inherits:4}],9:[function(e,t,i){(function(i){var o=function(e){return e.VERSION="0.8.9",e}(o||{}),o=function(e){"use strict";function t(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e}return e.trace=!1,e.debug=!1,e.cache=!0,e.placeholders={parent:"{{|PARENT|}}"},e.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(void 0===e||null===e)throw new TypeError;var i=Object(e),o=i.length>>>0;if(0===o)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=o)return-1;for(var s=r>=0?r:Math.max(o-Math.abs(r),0);o>s;s++)if(s in i&&i[s]===t)return s;return e==t?0:-1},e.forEach=function(e,t,i){if(Array.prototype.forEach)return e.forEach(t,i);var o,r;if(null==e)throw new TypeError(" this is null or not defined");var s=Object(e),n=s.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(i&&(o=i),r=0;n>r;){var a;r in s&&(a=s[r],t.call(o,a,r,s)),r++}},e.merge=function(t,i,o){return e.forEach(Object.keys(i),function(e){(!o||e in t)&&(t[e]=i[e])}),t},e.Error=function(e){this.message=e,this.name="TwigException",this.type="TwigException"},e.Error.prototype.toString=function(){var e=this.name+": "+this.message;return e},e.log={trace:function(){e.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){e.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?"undefined"!=typeof console.error?e.log.error=function(){console.error.apply(console,arguments)}:"undefined"!=typeof console.log&&(e.log.error=function(){console.log.apply(console,arguments)}):e.log.error=function(){},e.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},e.token={},e.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},e.token.definitions=[{type:e.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:e.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:e.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:e.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:e.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:e.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:e.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:e.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:e.token.type.output,open:"{{",close:"}}"},{type:e.token.type.logic,open:"{%",close:"%}"},{type:e.token.type.comment,open:"{#",close:"#}"}],e.token.strings=['"',"'"],e.token.findStart=function(t){var i,o,r,s,n={position:null,close_position:null,def:null};for(i=0;i<e.token.definitions.length;i++)o=e.token.definitions[i],r=t.indexOf(o.open),s=t.indexOf(o.close),e.log.trace("Twig.token.findStart: ","Searching for ",o.open," found at ",r),r>=0&&o.open.length!==o.close.length&&0>s||(r>=0&&(null===n.position||r<n.position)?(n.position=r,n.def=o,n.close_position=s):r>=0&&null!==n.position&&r===n.position&&(o.open.length>n.def.open.length?(n.position=r,n.def=o,n.close_position=s):o.open.length===n.def.open.length&&(o.close.length>n.def.close.length?s>=0&&s<n.close_position&&(n.position=r,n.def=o,n.close_position=s):s>=0&&s<n.close_position&&(n.position=r,n.def=o,n.close_position=s))));return delete n.close_position,n},e.token.findEnd=function(t,i,o){for(var r,s,n=null,a=!1,p=0,l=null,c=null,u=null,y=null,h=null,d=null;!a;){if(l=null,c=null,u=t.indexOf(i.close,p),!(u>=0))throw new e.Error("Unable to find closing bracket '"+i.close+"' opened near template position "+o);if(n=u,a=!0,i.type===e.token.type.comment)break;if(i.type===e.token.type.raw)break;for(s=e.token.strings.length,r=0;s>r;r+=1)h=t.indexOf(e.token.strings[r],p),h>0&&u>h&&(null===l||l>h)&&(l=h,c=e.token.strings[r]);if(null!==l)for(y=l+1,n=null,a=!1;;){if(d=t.indexOf(c,y),0>d)throw"Unclosed string in template";if("\\"!==t.substr(d-1,1)){p=d+1;break}y=d+1}}return n},e.tokenize=function(t){for(var i=[],o=0,r=null,s=null;t.length>0;)if(r=e.token.findStart(t),e.log.trace("Twig.tokenize: ","Found token: ",r),null!==r.position){if(r.position>0&&i.push({type:e.token.type.raw,value:t.substring(0,r.position)}),t=t.substr(r.position+r.def.open.length),o+=r.position+r.def.open.length,s=e.token.findEnd(t,r.def,o),e.log.trace("Twig.tokenize: ","Token ends at ",s),i.push({type:r.def.type,value:t.substring(0,s).trim()}),"\n"===t.substr(s+r.def.close.length,1))switch(r.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":s+=1}t=t.substr(s+r.def.close.length),o+=s+r.def.close.length}else i.push({type:e.token.type.raw,value:t}),t="";return i},e.compile=function(t){try{for(var i=[],o=[],r=[],s=null,n=null,a=null,p=null,l=null,c=null,u=null,y=null,h=null,d=null,g=null,m=null,v=function(t){e.expression.compile.apply(this,[t]),o.length>0?r.push(t):i.push(t)},f=function(t){if(n=e.logic.compile.apply(this,[t]),d=n.type,g=e.logic.handler[d].open,m=e.logic.handler[d].next,e.log.trace("Twig.compile: ","Compiled logic token to ",n," next is: ",m," open is : ",g),void 0!==g&&!g){if(p=o.pop(),u=e.logic.handler[p.type],e.indexOf(u.next,d)<0)throw new Error(d+" not expected after a "+p.type);p.output=p.output||[],p.output=p.output.concat(r),r=[],h={type:e.token.type.logic,token:p},o.length>0?r.push(h):i.push(h)}void 0!==m&&m.length>0?(e.log.trace("Twig.compile: ","Pushing ",n," to logic stack."),o.length>0&&(p=o.pop(),p.output=p.output||[],p.output=p.output.concat(r),o.push(p),r=[]),o.push(n)):void 0!==g&&g&&(h={type:e.token.type.logic,token:n},o.length>0?r.push(h):i.push(h))};t.length>0;){switch(s=t.shift(),l=i[i.length-1],c=r[r.length-1],y=t[0],e.log.trace("Compiling token ",s),s.type){case e.token.type.raw:o.length>0?r.push(s):i.push(s);break;case e.token.type.logic:f.call(this,s);break;case e.token.type.comment:break;case e.token.type.output:v.call(this,s);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:switch(s.type!==e.token.type.output_whitespace_post&&s.type!==e.token.type.logic_whitespace_post&&(l&&l.type===e.token.type.raw&&(i.pop(),null===l.value.match(/^\s*$/)&&(l.value=l.value.trim(),i.push(l))),c&&c.type===e.token.type.raw&&(r.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),r.push(c)))),s.type){case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:v.call(this,s);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:f.call(this,s)}s.type!==e.token.type.output_whitespace_pre&&s.type!==e.token.type.logic_whitespace_pre&&y&&y.type===e.token.type.raw&&(t.shift(),null===y.value.match(/^\s*$/)&&(y.value=y.value.trim(),t.unshift(y)))}e.log.trace("Twig.compile: "," Output: ",i," Logic Stack: ",o," Pending Output: ",r)}if(o.length>0)throw a=o.pop(),new Error("Unable to find an end tag for "+a.type+", expecting one of "+a.next);return i}catch(w){if(e.log.error("Error compiling twig template "+this.id+": "),e.log.error(w.stack?w.stack:w.toString()),this.options.rethrow)throw w}},e.parse=function(t,i){try{var o=[],r=!0,s=this;return e.forEach(t,function(t){switch(e.log.debug("Twig.parse: ","Parsing token: ",t),t.type){case e.token.type.raw:o.push(e.filters.raw(t.value));break;case e.token.type.logic:var n=t.token,a=e.logic.parse.apply(s,[n,i,r]);void 0!==a.chain&&(r=a.chain),void 0!==a.context&&(i=a.context),void 0!==a.output&&o.push(a.output);break;case e.token.type.comment:break;case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:case e.token.type.output:e.log.debug("Twig.parse: ","Output token: ",t.stack),o.push(e.expression.parse.apply(s,[t.stack,i]))}}),e.output.apply(this,[o])}catch(n){if(e.log.error("Error parsing twig template "+this.id+": "),e.log.error(n.stack?n.stack:n.toString()),this.options.rethrow)throw n;if(e.debug)return n.toString()}},e.prepare=function(t){var i,o;return e.log.debug("Twig.prepare: ","Tokenizing ",t),o=e.tokenize.apply(this,[t]),e.log.debug("Twig.prepare: ","Compiling ",o),i=e.compile.apply(this,[o]),e.log.debug("Twig.prepare: ","Compiled ",i),i},e.output=function(t){if(!this.options.autoescape)return t.join("");var i="html";"string"==typeof this.options.autoescape&&(i=this.options.autoescape);var o=[];return e.forEach(t,function(t){t&&t.twig_markup!==!0&&t.twig_markup!=i&&(t=e.filters.escape(t,[i])),o.push(t)}),e.Markup(o.join(""))},e.Templates={loaders:{},parsers:{},registry:{}},e.validateId=function(t){if("prototype"===t)throw new e.Error(t+" is not a valid twig identifier");if(e.cache&&e.Templates.registry.hasOwnProperty(t))throw new e.Error("There is already a template with the ID "+t);return!0},e.Templates.registerLoader=function(t,i,o){if("function"!=typeof i)throw new e.Error("Unable to add loader for "+t+": Invalid function reference given.");o&&(i=i.bind(o)),this.loaders[t]=i},e.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},e.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},e.Templates.registerParser=function(t,i,o){if("function"!=typeof i)throw new e.Error("Unable to add parser for "+t+": Invalid function regerence given.");o&&(i=i.bind(o)),this.parsers[t]=i},e.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},e.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error("Unable to save template with no id");e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,i,o,r){var s;return void 0===i.async&&(i.async=!0),void 0===i.id&&(i.id=t),e.cache&&e.Templates.registry.hasOwnProperty(i.id)?("function"==typeof o&&o(e.Templates.registry[i.id]),e.Templates.registry[i.id]):(i.parser=i.parser||"twig",s=this.loaders[i.method]||this.loaders.fs,s.apply(this,arguments))},e.Template=function(i){var o=i.data,r=i.id,s=i.blocks,n=i.macros||{},a=i.base,p=i.path,l=i.url,c=i.name,u=i.method,y=i.options;this.id=r,this.method=u,this.base=a,this.path=p,this.url=l,this.name=c,this.macros=n,this.options=y,this.reset(s),this.tokens=t("String",o)?e.prepare.apply(this,[o]):o,void 0!==r&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:t||{}},this.extend=null},e.Template.prototype.render=function(t,i){i=i||{};var o,r;if(this.context=t||{},this.reset(),i.blocks&&(this.blocks=i.blocks),i.macros&&(this.macros=i.macros),o=e.parse.apply(this,[this.tokens,this.context]),this.extend){var s;return this.options.allowInlineIncludes&&(s=e.Templates.load(this.extend),s&&(s.options=this.options)),s||(r=e.path.parsePath(this,this.extend),s=e.Templates.loadRemote(r,{method:this.getLoaderMethod(),base:this.base,async:!1,id:r,options:this.options})),this.parent=s,this.parent.render(this.context,{blocks:this.blocks})}return"blocks"==i.output?this.blocks:"macros"==i.output?this.macros:o},e.Template.prototype.importFile=function(t){var i,o;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?this.path+"/"+t:t,o=e.Templates.load(t),!o&&(o=e.Templates.loadRemote(i,{id:t,method:this.getLoaderMethod(),async:!1,options:this.options}),!o))throw new e.Error("Unable to find the template "+t);return o.options=this.options,o}return i=e.path.parsePath(this,t),o=e.Templates.loadRemote(i,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:i})},e.Template.prototype.importBlocks=function(t,i){var o=this.importFile(t),r=this.context,s=this;i=i||!1,o.render(r),e.forEach(Object.keys(o.blocks),function(e){(i||void 0===s.blocks[e])&&(s.blocks[e]=o.blocks[e],s.importedBlocks.push(e))})},e.Template.prototype.importMacros=function(t){var i=e.path.parsePath(this,t),o=e.Templates.loadRemote(i,{method:this.getLoaderMethod(),async:!1,id:i});return o},e.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e.Markup=function(e,t){return"undefined"==typeof t&&(t=!0),"string"==typeof e&&e.length>0&&(e=new String(e),e.twig_markup=t),e},e}(o||{});!function(e){"use strict";e.Templates.registerLoader("ajax",function(t,i,o,r){var s,n,a=i.precompiled,p=this.parsers[i.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new e.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return n=new XMLHttpRequest,n.onreadystatechange=function(){var l=null;4===n.readyState&&(200===n.status||window.cordova&&0==n.status?(e.log.debug("Got template ",n.responseText),l=a===!0?JSON.parse(n.responseText):n.responseText,i.url=t,i.data=l,s=p.call(this,i),"function"==typeof o&&o(s)):"function"==typeof r&&r(n))},n.open("GET",t,!!i.async),n.send(),i.async?!0:s})}(o),function(t){"use strict";var i,o;try{i=e("fs"),o=e("path")}catch(r){}t.Templates.registerLoader("fs",function(e,r,s,n){var a,p=null,l=r.precompiled,c=this.parsers[r.parser]||this.parser.twig;if(!i||!o)throw new t.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var u=function(t,i){return t?void("function"==typeof n&&n(t)):(l===!0&&(i=JSON.parse(i)),r.data=i,r.path=r.path||e,a=c.call(this,r),void("function"==typeof s&&s(a)))};if(r.path=r.path||e,r.async)return i.stat(r.path,function(o,s){if(o||!s.isFile())throw new t.Error("Unable to find template file "+e);i.readFile(r.path,"utf8",u)}),!0;if(!i.statSync(r.path).isFile())throw new t.Error("Unable to find template file "+e);

return p=i.readFileSync(r.path,"utf8"),u(void 0,p),a})}(o),function(e){"use strict";e.Templates.registerParser("source",function(e){return e.data||""})}(o),function(e){"use strict";e.Templates.registerParser("twig",function(t){return new e.Template(t)})}(o),function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i})}();var o=function(e){e.lib={};var t=function(){function e(){var t=arguments[0],i=e.cache;return i[t]&&i.hasOwnProperty(t)||(i[t]=e.parse(t)),e.format.call(null,i[t],arguments)}function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e,t){return Array(t+1).join(e)}var o={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};e.format=function(r,s){var n,a,p,l,c,u,y,h=1,d=r.length,g="",m=[],v=!0,f="";for(a=0;d>a;a++)if(g=t(r[a]),"string"===g)m[m.length]=r[a];else if("array"===g){if(l=r[a],l[2])for(n=s[h],p=0;p<l[2].length;p++){if(!n.hasOwnProperty(l[2][p]))throw new Error(e("[sprintf] property '%s' does not exist",l[2][p]));n=n[l[2][p]]}else n=l[1]?s[l[1]]:s[h++];if("function"==t(n)&&(n=n()),o.not_string.test(l[8])&&o.not_json.test(l[8])&&"number"!=t(n)&&isNaN(n))throw new TypeError(e("[sprintf] expecting number but found %s",t(n)));switch(o.number.test(l[8])&&(v=n>=0),l[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,l[6]?parseInt(l[6]):0);break;case"e":n=l[7]?n.toExponential(l[7]):n.toExponential();break;case"f":n=l[7]?parseFloat(n).toFixed(l[7]):parseFloat(n);break;case"g":n=l[7]?parseFloat(n).toPrecision(l[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&l[7]?n.substring(0,l[7]):n;break;case"u":n>>>=0;break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}o.json.test(l[8])?m[m.length]=n:(!o.number.test(l[8])||v&&!l[3]?f="":(f=v?"+":"-",n=n.toString().replace(o.sign,"")),u=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",y=l[6]-(f+n).length,c=l[6]&&y>0?i(u,y):"",m[m.length]=l[5]?f+n+c:"0"===u?f+c+n:c+f+n)}return m.join("")},e.cache={},e.parse=function(e){for(var t=e,i=[],r=[],s=0;t;){if(null!==(i=o.text.exec(t)))r[r.length]=i[0];else if(null!==(i=o.modulo.exec(t)))r[r.length]="%";else{if(null===(i=o.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){s|=1;var n=[],a=i[2],p=[];if(null===(p=o.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(n[n.length]=p[1];""!==(a=a.substring(p[0].length));)if(null!==(p=o.key_access.exec(a)))n[n.length]=p[1];else{if(null===(p=o.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");n[n.length]=p[1]}i[2]=n}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=i}t=t.substring(i[0].length)}return r};var r=function(t,i,o){return o=(i||[]).slice(0),o.splice(0,0,t),e.apply(null,o)};return{sprintf:e,vsprintf:r}}(),i=t.sprintf,o=t.vsprintf;return e.lib.sprintf=i,e.lib.vsprintf=o,function(){function t(e){return(e=Math.abs(e)%100)%10==1&&11!=e?"st":e%10==2&&12!=e?"nd":e%10==3&&13!=e?"rd":"th"}function i(e){var t=new Date(e.getFullYear()+1,0,4);return 7>(t-e)/864e5&&(e.getDay()+6)%7<(t.getDay()+6)%7?t.getFullYear():e.getMonth()>0||e.getDate()>=4?e.getFullYear():e.getFullYear()-((e.getDay()+6)%7-e.getDate()>2?1:0)}function o(e){var t=new Date(i(e),0,4);return t.setDate(t.getDate()-(t.getDay()+6)%7),parseInt((e-t)/6048e5)+1}var r="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),s="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),n="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),a="January,February,March,April,May,June,July,August,September,October,November,December".split(",");e.lib.formatDate=function(e,p){if("string"!=typeof p||/^\s*$/.test(p))return e+"";var l=new Date(e.getFullYear(),0,1),c=e;return p.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisuU]/g,function(e){switch(e){case"d":return("0"+c.getDate()).replace(/^.+(..)$/,"$1");case"D":return r[c.getDay()];case"j":return c.getDate();case"l":return s[c.getDay()];case"N":return(c.getDay()+6)%7+1;case"S":return t(c.getDate());case"w":return c.getDay();case"z":return Math.ceil((l-c)/864e5);case"W":return("0"+o(c)).replace(/^.(..)$/,"$1");case"F":return a[c.getMonth()];case"m":return("0"+(c.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return n[c.getMonth()];case"n":return c.getMonth()+1;case"t":return new Date(c.getFullYear(),c.getMonth()+1,-1).getDate();case"L":return 29==new Date(c.getFullYear(),1,29).getDate()?1:0;case"o":return i(c);case"Y":return c.getFullYear();case"y":return(c.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return c.getHours()<12?"am":"pm";case"A":return c.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((c.getUTCHours()+1)%24+c.getUTCMinutes()/60+c.getUTCSeconds()/3600)/24);case"g":return c.getHours()%12!=0?c.getHours()%12:12;case"G":return c.getHours();case"h":return("0"+(c.getHours()%12!=0?c.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+c.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+c.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+c.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return c.getMilliseconds();case"U":return c.getTime()/1e3}})}}(),e.lib.strip_tags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(o,"").replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})},e.lib.parseISO8601Date=function(e){var t=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,i=[];if(i=e.match(t),!i)throw"Couldn't parse ISO 8601 date string '"+e+"'";var o=[1,2,3,4,5,6,10,11];for(var r in o)i[o[r]]=parseInt(i[o[r]],10);i[7]=parseFloat(i[7]);var s=Date.UTC(i[1],i[2]-1,i[3],i[4],i[5],i[6]);if(i[7]>0&&(s+=Math.round(1e3*i[7])),"Z"!=i[8]&&i[10]){var n=60*i[10]*60*1e3;i[11]&&(n+=60*i[11]*1e3),"-"==i[9]?s-=n:s+=n}return new Date(s)},e.lib.strtotime=function(e,t){function i(e,t,i){var o,r=l[t];"undefined"!=typeof r&&(o=r-p.getDay(),0===o?o=7*i:o>0&&"last"===e?o-=7:0>o&&"next"===e&&(o+=7),p.setDate(p.getDate()+o))}function o(e){var t=e.split(" "),o=t[0],r=t[1].substring(0,3),s=/\d+/.test(o),n="ago"===t[2],a=("last"===o?-1:1)*(n?-1:1);if(s&&(a*=parseInt(o,10)),c.hasOwnProperty(r)&&!t[1].match(/^mon(day|\.)?$/i))return p["set"+c[r]](p["get"+c[r]]()+a);if("wee"===r)return p.setDate(p.getDate()+7*a);if("next"===o||"last"===o)i(o,r,a);else if(!s)return!1;return!0}var r,s,n,a,p,l,c,u,y,h,d,g=!1;if(!e)return g;if(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase(),s=e.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/),s&&s[2]===s[4])if(s[1]>1901)switch(s[2]){case"-":return s[3]>12||s[5]>31?g:new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case".":return g;case"/":return s[3]>12||s[5]>31?g:new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else if(s[5]>1901)switch(s[2]){case"-":return s[3]>12||s[1]>31?g:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case".":return s[3]>12||s[1]>31?g:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case"/":return s[1]>12||s[3]>31?g:new Date(s[5],parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else switch(s[2]){case"-":return s[3]>12||s[5]>31||s[1]<70&&s[1]>38?g:(a=s[1]>=0&&s[1]<=38?+s[1]+2e3:s[1],new Date(a,parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case".":return s[5]>=70?s[3]>12||s[1]>31?g:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3:s[5]<60&&!s[6]?s[1]>23||s[3]>59?g:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),s[1]||0,s[3]||0,s[5]||0,s[9]||0)/1e3):g;case"/":return s[1]>12||s[3]>31||s[5]<70&&s[5]>38?g:(a=s[5]>=0&&s[5]<=38?+s[5]+2e3:s[5],new Date(a,parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case":":return s[1]>23||s[3]>59||s[5]>59?g:(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),s[1]||0,s[3]||0,s[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(r=Date.parse(e)))return r/1e3|0;if((s=e.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/))&&("z"==s[4]?s[4]="Z":s[4].match(/^([\+-][0-9]{2})$/)&&(s[4]=s[4]+":00"),!isNaN(r=Date.parse(s[1]+"T"+s[2]+s[4]))))return r/1e3|0;if(p=t?new Date(1e3*t):new Date,l={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},c={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},y="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",h="([+-]?\\d+\\s"+y+"|(last|next)\\s"+y+")(\\sago)?",s=e.match(new RegExp(h,"gi")),!s)return g;for(d=0,u=s.length;u>d;d++)if(!o(s[d]))return g;return p.getTime()/1e3},e.lib.is=function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e},e.lib.copy=function(e){var t,i={};for(t in e)i[t]=e[t];return i},e.lib.replaceAll=function(e,t,i){return e.split(t).join(i)},e.lib.chunkArray=function(t,i){var o=[],r=0,s=t.length;if(1>i||!e.lib.is("Array",t))return[];for(;s>r;)o.push(t.slice(r,r+=i));return o},e.lib.round=function(e,t,i){var o,r,s,n;if(t|=0,o=Math.pow(10,t),e*=o,n=e>0|-(0>e),s=e%1===.5*n,r=Math.floor(e),s)switch(i){case"PHP_ROUND_HALF_DOWN":e=r+(0>n);break;case"PHP_ROUND_HALF_EVEN":e=r+r%2*n;break;case"PHP_ROUND_HALF_ODD":e=r+!(r%2);break;default:e=r+(n>0)}return(s?e:Math.round(e))/o},e.lib.max=function(){var e,t,i=0,o=0,r=arguments,s=r.length,n=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},a=function(e,t){var i=0,o=0,r=0,s=0,p=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=n(e),t=n(t),p=e.length,s=t.length,s>p)return 1;if(p>s)return-1;for(i=0,o=p;o>i;++i){if(r=a(e[i],t[i]),1==r)return 1;if(-1==r)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:0>e?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===s)throw new Error("At least one value should be passed to max()");if(1===s){if("object"!=typeof r[0])throw new Error("Wrong parameter count for max()");if(e=n(r[0]),0===e.length)throw new Error("Array must contain at least one element for max()")}else e=r;for(t=e[0],i=1,o=e.length;o>i;++i)1==a(t,e[i])&&(t=e[i]);return t},e.lib.min=function(){var e,t,i=0,o=0,r=arguments,s=r.length,n=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},a=function(e,t){var i=0,o=0,r=0,s=0,p=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=n(e),t=n(t),p=e.length,s=t.length,s>p)return 1;if(p>s)return-1;for(i=0,o=p;o>i;++i){if(r=a(e[i],t[i]),1==r)return 1;if(-1==r)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:0>e?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===s)throw new Error("At least one value should be passed to min()");if(1===s){if("object"!=typeof r[0])throw new Error("Wrong parameter count for min()");if(e=n(r[0]),0===e.length)throw new Error("Array must contain at least one element for min()")}else e=r;for(t=e[0],i=1,o=e.length;o>i;++i)-1==a(t,e[i])&&(t=e[i]);return t},e}(o||{}),o=function(e){"use strict";for(e.logic={},e.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,o){var r="",s=e.expression.parse.apply(this,[t.stack,i]);return o=!0,s&&(o=!1,r=e.parse.apply(this,[t.output,i])),{chain:o,output:r}}},{type:e.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,o){var r="";return o&&e.expression.parse.apply(this,[t.stack,i])===!0&&(o=!1,r=e.parse.apply(this,[t.output,i])),{chain:o,output:r}}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,i,o){var r="";return o&&(r=e.parse.apply(this,[t.output,i])),{chain:o,output:r}}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var i=t.match[1],o=t.match[2],r=t.match[3],s=null;if(t.key_var=null,t.value_var=null,i.indexOf(",")>=0){if(s=i.split(","),2!==s.length)throw new e.Error("Invalid expression in for loop: "+i);t.key_var=s[0].trim(),t.value_var=s[1].trim()}else t.value_var=i;return t.expression=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack,r&&(t.conditional=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack),delete t.match,t},parse:function(t,i,o){var r,s,n=e.expression.parse.apply(this,[t.expression,i]),a=[],p=0,l=this,c=t.conditional,u=function(e,t){var o=void 0!==c;return{index:e+1,index0:e,revindex:o?void 0:t-e,revindex0:o?void 0:t-e-1,first:0===e,last:o?void 0:e===t-1,length:o?void 0:t,parent:i}},y=function(o,s){var n=e.ChildContext(i);n[t.value_var]=s,t.key_var&&(n[t.key_var]=o),n.loop=u(p,r),(void 0===c||e.expression.parse.apply(l,[c,n]))&&(a.push(e.parse.apply(l,[t.output,n])),p+=1),delete n.loop,delete n[t.value_var],delete n[t.key_var],e.merge(i,n,!0)};return e.lib.is("Array",n)?(r=n.length,e.forEach(n,function(e){var t=p;y(t,e)})):e.lib.is("Object",n)&&(s=void 0!==n._keys?n._keys:Object.keys(n),r=s.length,e.forEach(s,function(e){"_keys"!==e&&y(e,n[e])})),o=0===a.length,{chain:o,output:e.output.apply(this,[a])}}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),o=t.match[2],r=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack;return t.key=i,t.expression=r,delete t.match,t},parse:function(t,i,o){var r=e.expression.parse.apply(this,[t.expression,i]),s=t.key;return i[s]=r,{chain:o,context:i}}},{type:e.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[e.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(t,i,o){var r=e.parse.apply(this,[t.output,i]),s=t.key;return this.context[s]=r,i[s]=r,{chain:o,context:i}}},{type:e.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:e.logic.type.filter,regex:/^filter\s+(.+)$/,next:[e.logic.type.endfilter],open:!0,compile:function(t){var i="|"+t.match[1].trim();return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,o){var r=e.parse.apply(this,[t.output,i]),s=[{type:e.expression.type.string,value:r}].concat(t.stack),n=e.expression.parse.apply(this,[s,i]);return{chain:o,output:n}}},{type:e.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:e.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,i,o){var r,s,n=e.indexOf(this.importedBlocks,t.block)>-1,a=this.blocks[t.block]&&e.indexOf(this.blocks[t.block],e.placeholders.parent)>-1;return(void 0===this.blocks[t.block]||n||a||i.loop||t.overwrite)&&(r=t.expression?e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.expression.parse.apply(this,[t.output,i])},i]):e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.parse.apply(this,[t.output,i])},i]),n&&this.importedBlocks.splice(this.importedBlocks.indexOf(t.block),1),this.blocks[t.block]=a?e.Markup(this.blocks[t.block].replace(e.placeholders.parent,r)):r,this.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}),s=this.child.blocks[t.block]?this.child.blocks[t.block]:this.blocks[t.block],{chain:o,output:s}}},{type:e.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(t){return t.expression=t.match[2].trim(),t.output=e.expression.compile({type:e.expression.type.expression,value:t.expression}).stack,t.block=t.match[1].trim(),delete t.match,t},parse:function(t,i,o){return e.logic.handler[e.logic.type.block].parse.apply(this,arguments)}},{type:e.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,o){var r=e.expression.parse.apply(this,[t.stack,i]);return this.extend=r,{chain:o,output:""}}},{type:e.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,o){var r=e.expression.parse.apply(this,[t.stack,i]);return this.importBlocks(r),{chain:o,output:""}}},{type:e.logic.type.include,regex:/^include\s+(ignore missing\s+)?(.+?)\s*(?:with\s+([\S\s]+?))?\s*(only)?$/,next:[],open:!0,compile:function(t){var i=t.match,o=void 0!==i[1],r=i[2].trim(),s=i[3],n=void 0!==i[4]&&i[4].length;return delete t.match,t.only=n,t.includeMissing=o,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack,void 0!==s&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:s.trim()}]).stack),t},parse:function(t,i,o){var r,s,n,a={};if(t.only||(a=e.ChildContext(i)),void 0!==t.withStack){r=e.expression.parse.apply(this,[t.withStack,i]);for(s in r)r.hasOwnProperty(s)&&(a[s]=r[s])}var p=e.expression.parse.apply(this,[t.stack,a]);return n=p instanceof e.Template?p:this.importFile(p),{chain:o,output:n.render(a)}}},{type:e.logic.type.spaceless,regex:/^spaceless$/,next:[e.logic.type.endspaceless],open:!0,parse:function(t,i,o){var r=e.parse.apply(this,[t.output,i]),s=/>\s+</g,n=r.replace(s,"><").trim();return{chain:o,output:n}}},{type:e.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:e.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[e.logic.type.endmacro],open:!0,compile:function(t){for(var i=t.match[1],o=t.match[2].split(/[\s,]+/),r=0;r<o.length;r++)for(var s=0;s<o.length;s++)if(o[r]===o[s]&&r!==s)throw new e.Error("Duplicate arguments for parameter: "+o[r]);return t.macroName=i,t.parameters=o,delete t.match,t},parse:function(t,i,o){var r=this;return this.macros[t.macroName]=function(){for(var i={_self:r.macros},o=0;o<t.parameters.length;o++){var s=t.parameters[o];i[s]="undefined"!=typeof arguments[o]?arguments[o]:void 0}return e.parse.apply(r,[t.output,i])},{chain:o,output:""}}},{type:e.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:e.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),o=t.match[2].trim();return delete t.match,t.expression=i,t.contextName=o,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,o){if("_self"!==t.expression){var r=e.expression.parse.apply(this,[t.stack,i]),s=this.importFile(r||t.expression);i[t.contextName]=s.render({},{output:"macros"})}else i[t.contextName]=this.macros;return{chain:o,output:""}}},{type:e.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(t){for(var i=t.match[1].trim(),o=t.match[2].trim().split(/[ ,]+/),r={},s=0;s<o.length;s++){var n=o[s],a=n.match(/^([a-zA-Z0-9_]+)\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/);a?r[a[1].trim()]=a[2].trim():n.match(/^([a-zA-Z0-9_]+)$/)&&(r[n]=n)}return delete t.match,t.expression=i,t.macroNames=r,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,o){var r;if("_self"!==t.expression){var s=e.expression.parse.apply(this,[t.stack,i]),n=this.importFile(s||t.expression);r=n.render({},{output:"macros"})}else r=this.macros;for(var a in t.macroNames)r.hasOwnProperty(a)&&(i[t.macroNames[a]]=r[a]);return{chain:o,output:""}}},{type:e.logic.type.embed,regex:/^embed\s+(ignore missing\s+)?(.+?)\s*(?:with\s+(.+?))?\s*(only)?$/,next:[e.logic.type.endembed],open:!0,compile:function(t){var i=t.match,o=void 0!==i[1],r=i[2].trim(),s=i[3],n=void 0!==i[4]&&i[4].length;return delete t.match,t.only=n,t.includeMissing=o,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack,void 0!==s&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:s.trim()}]).stack),t},parse:function(t,i,o){var r,s,n,a={};if(!t.only)for(s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);if(void 0!==t.withStack){r=e.expression.parse.apply(this,[t.withStack,i]);for(s in r)r.hasOwnProperty(s)&&(a[s]=r[s])}var p=e.expression.parse.apply(this,[t.stack,a]);n=p instanceof e.Template?p:this.importFile(p),this.blocks={};e.parse.apply(this,[t.output,a]);return{chain:o,output:n.render(a,{blocks:this.blocks})}}},{type:e.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],e.logic.handler={},e.logic.extendType=function(t,i){i=i||"Twig.logic.type"+t,e.logic.type[t]=i},e.logic.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.logic.extendType(t.type),e.logic.handler[t.type]=t};e.logic.definitions.length>0;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var i=t.value.trim(),o=e.logic.tokenize.apply(this,[i]),r=e.logic.handler[o.type];return r.compile&&(o=r.compile.apply(this,[o]),e.log.trace("Twig.logic.compile: ","Compiled logic token to ",o)),o},e.logic.tokenize=function(t){var i={},o=null,r=null,s=null,n=null,a=null,p=null;t=t.trim();for(o in e.logic.handler)if(e.logic.handler.hasOwnProperty(o))for(r=e.logic.handler[o].type,s=e.logic.handler[o].regex,n=[],s instanceof Array?n=s:n.push(s);n.length>0;)if(a=n.shift(),p=a.exec(t.trim()),null!==p)return i.type=r,i.match=p,e.log.trace("Twig.logic.tokenize: ","Matched a ",r," regular expression of ",p),i;throw new e.Error("Unable to parse '"+t.trim()+"'")},e.logic.parse=function(t,i,o){var r,s="";return i=i||{},e.log.debug("Twig.logic.parse: ","Parsing logic token ",t),r=e.logic.handler[t.type],r.parse&&(s=r.parse.apply(this,[t,i,o])),s},e}(o||{}),o=function(e){"use strict";e.expression={},e.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context"],e.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets]),e.expression.fn={compile:{push:function(e,t,i){i.push(e)},push_both:function(e,t,i){i.push(e),t.push(e)}},parse:{push:function(e,t,i){t.push(e)},push_value:function(e,t,i){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(t,i,o){var r=i.pop(),s=t.params&&e.expression.parse.apply(this,[t.params,o]),n=e.test(t.filter,r,s);i.push("not"==t.modifier?!n:n)}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,i,o){var r,s=i.length-1;for(delete t.match,delete t.value;s>=0;s--){if(r=i.pop(),r.type===e.expression.type.object.start||r.type===e.expression.type.parameter.start||r.type===e.expression.type.array.start){i.push(r);break}o.push(r)}o.push(t)}},{type:e.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.)/,next:e.expression.set.expressions.concat([e.expression.type.operator.unary]),compile:function(t,i,o){delete t.match,t.value=t.value.trim();var r=t.value,s=e.expression.operator.lookup(r,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",s," from ",r);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(s.associativity===e.expression.operator.leftToRight&&s.precidence>=i[i.length-1].precidence||s.associativity===e.expression.operator.rightToLeft&&s.precidence>i[i.length-1].precidence);){var n=i.pop();o.push(n)}if(":"===r){if(!i[i.length-1]||"?"!==i[i.length-1].value){var a=o.pop();if(a.type===e.expression.type.string||a.type===e.expression.type.variable)t.key=a.value;else if(a.type===e.expression.type.number)t.key=a.value.toString();else{if(a.type!==e.expression.type.parameter.end||!a.expression)throw new e.Error("Unexpected value before ':' of "+a.type+" = "+a.value);t.params=a.params}return void o.push(t)}}else i.push(s)},parse:function(t,i,o){t.key?i.push(t):t.params?(t.key=e.expression.parse.apply(this,[t.params,o]),i.push(t),delete t.params):e.expression.operator.parse(t.value,i)}},{type:e.expression.type.operator.unary,regex:/(^not\s+)/,next:e.expression.set.expressions,compile:function(t,i,o){delete t.match,t.value=t.value.trim();var r=t.value,s=e.expression.operator.lookup(r,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",s," from ",r);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(s.associativity===e.expression.operator.leftToRight&&s.precidence>=i[i.length-1].precidence||s.associativity===e.expression.operator.rightToLeft&&s.precidence>i[i.length-1].precidence);){var n=i.pop();o.push(n)}i.push(s)},parse:function(t,i,o){e.expression.operator.parse(t.value,i)}},{type:e.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:e.expression.set.operations,compile:function(t,i,o){var r=t.value;delete t.match,r='"'===r.substring(0,1)?r.replace('\\"','"'):r.replace("\\'","'"),t.value=r.substring(1,r.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),e.log.trace("Twig.expression.compile: ","String value: ",t.value),o.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.parameter.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\)/,next:e.expression.set.operations_extended,compile:function(t,i,o){var r,s=t;for(r=i.pop();i.length>0&&r.type!=e.expression.type.parameter.start;)o.push(r),r=i.pop();for(var n=[];t.type!==e.expression.type.parameter.start;)n.unshift(t),t=o.pop();n.unshift(t);t=o[o.length-1],void 0===t||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets&&t.type!==e.expression.type.key.period?(s.expression=!0,n.pop(),n.shift(),s.params=n,o.push(s)):(s.expression=!1,t.params=n)},parse:function(t,i,o){var r=[],s=!1,n=null;if(t.expression)n=e.expression.parse.apply(this,[t.params,o]),i.push(n);else{for(;i.length>0;){if(n=i.pop(),n&&n.type&&n.type==e.expression.type.parameter.start){s=!0;break}r.unshift(n)}if(!s)throw new e.Error("Expected end of parameter set.");i.push(r)}}},{type:e.expression.type.array.start,regex:/^\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\]/,next:e.expression.set.operations_extended,compile:function(t,i,o){for(var r,s=i.length-1;s>=0&&(r=i.pop(),r.type!==e.expression.type.array.start);s--)o.push(r);o.push(t)},parse:function(t,i,o){for(var r=[],s=!1,n=null;i.length>0;){if(n=i.pop(),n.type&&n.type==e.expression.type.array.start){s=!0;break}r.unshift(n)}if(!s)throw new e.Error("Expected end of array.");i.push(r)}},{type:e.expression.type.object.start,regex:/^\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\}/,next:e.expression.set.operations_extended,compile:function(t,i,o){for(var r,s=i.length-1;s>=0&&(r=i.pop(),!r||r.type!==e.expression.type.object.start);s--)o.push(r);o.push(t)},parse:function(t,i,o){for(var r={},s=!1,n=null,a=!1,p=null;i.length>0;){if(n=i.pop(),n&&n.type&&n.type===e.expression.type.object.start){s=!0;break}if(n&&n.type&&(n.type===e.expression.type.operator.binary||n.type===e.expression.type.operator.unary)&&n.key){if(!a)throw new e.Error("Missing value for key '"+n.key+"' in object definition.");r[n.key]=p,void 0===r._keys&&(r._keys=[]),
r._keys.unshift(n.key),p=null,a=!1}else a=!0,p=n}if(!s)throw new e.Error("Unexpected end of object.");i.push(r)}},{type:e.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.value=e.match[1],i.push(e)},parse:function(t,i,o){var r=i.pop(),s=t.params&&e.expression.parse.apply(this,[t.params,o]);i.push(e.filter.apply(this,[t.value,r,s]))}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:e.expression.type.parameter.start,transform:function(e,t){return"("},compile:function(e,t,i){var o=e.match[1];e.fn=o,delete e.match,delete e.value,i.push(e)},parse:function(t,i,o){var r,s=t.params&&e.expression.parse.apply(this,[t.params,o]),n=t.fn;if(e.functions[n])r=e.functions[n].apply(this,s);else{if("function"!=typeof o[n])throw new e.Error(n+" function does not exist and is not defined in the context");r=o[n].apply(o,s)}i.push(r)}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t,i){return e.indexOf(e.expression.reservedWords,t[0])<0},parse:function(t,i,o){var r=e.expression.resolve(o[t.value],o);i.push(r)}},{type:e.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.key=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(t,i,o){var r,s=t.params&&e.expression.parse.apply(this,[t.params,o]),n=t.key,a=i.pop();if(null===a||void 0===a){if(this.options.strict_variables)throw new e.Error("Can't access a key "+n+" on an null or undefined object.");return null}var p=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};r="object"==typeof a&&n in a?a[n]:void 0!==a["get"+p(n)]?a["get"+p(n)]:void 0!==a["is"+p(n)]?a["is"+p(n)]:void 0,i.push(e.expression.resolve(r,a,s))}},{type:e.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,i,o){var r=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:r}).stack,o.push(t)},parse:function(t,i,o){var r,s=t.params&&e.expression.parse.apply(this,[t.params,o]),n=e.expression.parse.apply(this,[t.stack,o]),a=i.pop();if(null===a||void 0===a){if(this.options.strict_variables)throw new e.Error("Can't access a key "+n+" on an null or undefined object.");return null}r="object"==typeof a&&n in a?a[n]:null,i.push(e.expression.resolve(r,a,s))}},{type:e.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:e.expression.set.operations,compile:function(e,t,i){delete e.match,e.value=null,i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,i){t.push(i)}},{type:e.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:e.expression.set.operations,compile:function(e,t,i){e.value=Number(e.value),i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:e.expression.set.operations,compile:function(e,t,i){e.value="true"===e.match[0].toLowerCase(),delete e.match,i.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolve=function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},e.expression.handler={},e.expression.extendType=function(t){e.expression.type[t]="Twig.expression.type."+t},e.expression.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.expression.handler[t.type]=t};for(;e.expression.definitions.length>0;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var i,o,r,s,n,a,p=[],l=0,c=null,u=[];for(a=function(){{var t=Array.prototype.slice.apply(arguments);t.pop(),t.pop()}return e.log.trace("Twig.expression.tokenize","Matched a ",i," regular expression of ",t),c&&e.indexOf(c,i)<0?(u.push(i+" cannot follow a "+p[p.length-1].type+" at template:"+l+" near '"+t[0].substring(0,20)+"...'"),t[0]):e.expression.handler[i].validate&&!e.expression.handler[i].validate(t,p)?t[0]:(u=[],p.push({type:i,value:t[0],match:t}),n=!0,c=s,l+=t[0].length,e.expression.handler[i].transform?e.expression.handler[i].transform(t,p):"")},e.log.debug("Twig.expression.tokenize","Tokenizing expression ",t);t.length>0;){t=t.trim();for(i in e.expression.handler)if(e.expression.handler.hasOwnProperty(i)){for(s=e.expression.handler[i].next,o=e.expression.handler[i].regex,r=o instanceof Array?o:[o],n=!1;r.length>0;)o=r.pop(),t=t.replace(o,a);if(n)break}if(!n)throw new e.Error(u.length>0?u.join(" OR "):"Unable to parse '"+t+"' at template position"+l)}return e.log.trace("Twig.expression.tokenize","Tokenized to ",p),p},e.expression.compile=function(t){var i=t.value,o=e.expression.tokenize(i),r=null,s=[],n=[],a=null;for(e.log.trace("Twig.expression.compile: ","Compiling ",i);o.length>0;)r=o.shift(),a=e.expression.handler[r.type],e.log.trace("Twig.expression.compile: ","Compiling ",r),a.compile&&a.compile(r,n,s),e.log.trace("Twig.expression.compile: ","Stack is",n),e.log.trace("Twig.expression.compile: ","Output is",s);for(;n.length>0;)s.push(n.pop());return e.log.trace("Twig.expression.compile: ","Final output is",s),t.stack=s,delete t.value,t},e.expression.parse=function(t,i){var o=this;t instanceof Array||(t=[t]);var r=[],s=null;return e.forEach(t,function(t){s=e.expression.handler[t.type],s.parse&&s.parse.apply(o,[t,r,i])}),r.pop()},e}(o||{}),o=function(e){"use strict";e.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var t=function(e,t){if(void 0===t||null===t)return null;if(void 0!==t.indexOf)return e===t||""!==e&&t.indexOf(e)>-1;var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1};return e.expression.operator.lookup=function(t,i){switch(t){case"..":case"not in":case"in":i.precidence=20,i.associativity=e.expression.operator.leftToRight;break;case",":i.precidence=18,i.associativity=e.expression.operator.leftToRight;break;case"?":case":":i.precidence=16,i.associativity=e.expression.operator.rightToLeft;break;case"or":i.precidence=14,i.associativity=e.expression.operator.leftToRight;break;case"and":i.precidence=13,i.associativity=e.expression.operator.leftToRight;break;case"==":case"!=":i.precidence=9,i.associativity=e.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":i.precidence=8,i.associativity=e.expression.operator.leftToRight;break;case"~":case"+":case"-":i.precidence=6,i.associativity=e.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":i.precidence=5,i.associativity=e.expression.operator.leftToRight;break;case"not":i.precidence=3,i.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error(t+" is an unknown operator.")}return i.operator=t,i},e.expression.operator.parse=function(i,o){e.log.trace("Twig.expression.operator.parse: ","Handling ",i);var r,s,n;switch(i){case":":break;case"?":n=o.pop(),s=o.pop(),r=o.pop(),o.push(r?s:n);break;case"+":s=parseFloat(o.pop()),r=parseFloat(o.pop()),o.push(r+s);break;case"-":s=parseFloat(o.pop()),r=parseFloat(o.pop()),o.push(r-s);break;case"*":s=parseFloat(o.pop()),r=parseFloat(o.pop()),o.push(r*s);break;case"/":s=parseFloat(o.pop()),r=parseFloat(o.pop()),o.push(r/s);break;case"//":s=parseFloat(o.pop()),r=parseFloat(o.pop()),o.push(parseInt(r/s));break;case"%":s=parseFloat(o.pop()),r=parseFloat(o.pop()),o.push(r%s);break;case"~":s=o.pop(),r=o.pop(),o.push((null!=r?r.toString():"")+(null!=s?s.toString():""));break;case"not":case"!":o.push(!o.pop());break;case"<":s=o.pop(),r=o.pop(),o.push(s>r);break;case"<=":s=o.pop(),r=o.pop(),o.push(s>=r);break;case">":s=o.pop(),r=o.pop(),o.push(r>s);break;case">=":s=o.pop(),r=o.pop(),o.push(r>=s);break;case"===":s=o.pop(),r=o.pop(),o.push(r===s);break;case"==":s=o.pop(),r=o.pop(),o.push(r==s);break;case"!==":s=o.pop(),r=o.pop(),o.push(r!==s);break;case"!=":s=o.pop(),r=o.pop(),o.push(r!=s);break;case"or":s=o.pop(),r=o.pop(),o.push(r||s);break;case"and":s=o.pop(),r=o.pop(),o.push(r&&s);break;case"**":s=o.pop(),r=o.pop(),o.push(Math.pow(r,s));break;case"not in":s=o.pop(),r=o.pop(),o.push(!t(r,s));break;case"in":s=o.pop(),r=o.pop(),o.push(t(r,s));break;case"..":s=o.pop(),r=o.pop(),o.push(e.functions.range(r,s));break;default:throw new e.Error(i+" is an unknown operator.")}},e}(o||{}),o=function(e){function t(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e}return e.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,i){return t+i.toUpperCase()})},length:function(t){return e.lib.is("Array",t)||"string"==typeof t?t.length:e.lib.is("Object",t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t("Array",e))return e.reverse();if(t("String",e))return e.split("").reverse().join("");if(t("Object",e)){var i=e._keys||Object.keys(e).reverse();return e._keys=i,e}},sort:function(e){if(t("Array",e))return e.sort();if(t("Object",e)){delete e._keys;var i=Object.keys(e),o=i.sort(function(t,i){var o;return e[t]>e[i]==!(e[t]<=e[i])?e[t]>e[i]?1:e[t]<e[i]?-1:0:isNaN(o=parseFloat(e[t]))||isNaN(b1=parseFloat(e[i]))?"string"==typeof e[t]?e[t]>e[i].toString()?1:e[t]<e[i].toString()?-1:0:"string"==typeof e[i]?e[t].toString()>e[i]?1:e[t].toString()<e[i]?-1:0:null:o>b1?1:o<b1?-1:0});return e._keys=o,e}},keys:function(t){if(void 0!==t&&null!==t){var i=t._keys||Object.keys(t),o=[];return e.forEach(i,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&o.push(e)}),o}},url_encode:function(e){if(void 0!==e&&null!==e){var t=encodeURIComponent(e);return t=t.replace("'","%27")}},join:function(i,o){if(void 0!==i&&null!==i){var r="",s=[],n=null;return o&&o[0]&&(r=o[0]),t("Array",i)?s=i:(n=i._keys||Object.keys(i),e.forEach(n,function(e){"_keys"!==e&&i.hasOwnProperty(e)&&s.push(i[e])})),s.join(r)}},"default":function(t,i){if(void 0!==i&&i.length>1)throw new e.Error("default filter expects one argument");return void 0===t||null===t||""===t?void 0===i?"":i[0]:t},json_encode:function(i){if(void 0===i||null===i)return"null";if("object"==typeof i&&t("Array",i))return r=[],e.forEach(i,function(t){r.push(e.filters.json_encode(t))}),"["+r.join(",")+"]";if("object"==typeof i){var o=i._keys||Object.keys(i),r=[];return e.forEach(o,function(t){r.push(JSON.stringify(t)+":"+e.filters.json_encode(i[t]))}),"{"+r.join(",")+"}"}return JSON.stringify(i)},merge:function(i,o){var r=[],s=0,n=[];if(t("Array",i)?e.forEach(o,function(e){t("Array",e)||(r={})}):r={},t("Array",r)||(r._keys=[]),t("Array",i)?e.forEach(i,function(e){r._keys&&r._keys.push(s),r[s]=e,s++}):(n=i._keys||Object.keys(i),e.forEach(n,function(e){r[e]=i[e],r._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&t>=s&&(s=t+1)})),e.forEach(o,function(i){t("Array",i)?e.forEach(i,function(e){r._keys&&r._keys.push(s),r[s]=e,s++}):(n=i._keys||Object.keys(i),e.forEach(n,function(e){r[e]||r._keys.push(e),r[e]=i[e];var t=parseInt(e,10);!isNaN(t)&&t>=s&&(s=t+1)}))}),0===o.length)throw new e.Error("Filter merge expects at least one parameter");return r},date:function(t,i){var o=e.functions.date(t),r=i&&i.length?i[0]:"F j, Y H:i";return e.lib.formatDate(o,r)},date_modify:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||1!==i.length)throw new e.Error("date_modify filter expects 1 argument");var o,r=i[0];return e.lib.is("Date",t)&&(o=e.lib.strtotime(r,t.getTime()/1e3)),e.lib.is("String",t)&&(o=e.lib.strtotime(r,e.lib.strtotime(t))),e.lib.is("Number",t)&&(o=e.lib.strtotime(r,t)),new Date(1e3*o)}},replace:function(t,i){if(void 0!==t&&null!==t){var o,r=i[0];for(o in r)r.hasOwnProperty(o)&&"_keys"!==o&&(t=e.lib.replaceAll(t,o,r[o]));return t}},format:function(t,i){return void 0!==t&&null!==t?e.lib.vsprintf(t,i):void 0},striptags:function(t){return void 0!==t&&null!==t?e.lib.strip_tags(t):void 0},escape:function(t,i){if(void 0!==t&&null!==t){var o="html";if(i&&i.length&&i[0]!==!0&&(o=i[0]),"html"==o){var r=t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e.Markup(r,"html")}if("js"==o){for(var r=t.toString(),s="",n=0;n<r.length;n++)if(r[n].match(/^[a-zA-Z0-9,\._]$/))s+=r[n];else{var a=r.charCodeAt(n);s+=128>a?"\\x"+a.toString(16).toUpperCase():e.lib.sprintf("\\u%04s",a.toString(16).toUpperCase())}return e.Markup(s,"js")}if("css"==o){for(var r=t.toString(),s="",n=0;n<r.length;n++)if(r[n].match(/^[a-zA-Z0-9]$/))s+=r[n];else{var a=r.charCodeAt(n);s+="\\"+a.toString(16).toUpperCase()+" "}return e.Markup(s,"css")}if("url"==o){var s=e.filters.url_encode(t);return e.Markup(s,"url")}if("html_attr"==o){for(var r=t.toString(),s="",n=0;n<r.length;n++)if(r[n].match(/^[a-zA-Z0-9,\.\-_]$/))s+=r[n];else if(r[n].match(/^[&<>"]$/))s+=r[n].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var a=r.charCodeAt(n);s+=31>=a&&9!=a&&10!=a&&13!=a?"&#xFFFD;":128>a?e.lib.sprintf("&#x%02s;",a.toString(16).toUpperCase()):e.lib.sprintf("&#x%04s;",a.toString(16).toUpperCase())}return e.Markup(s,"html_attr")}throw new e.Error("escape strategy unsupported")}},e:function(t,i){return e.filters.escape(t,i)},nl2br:function(t){if(void 0!==t&&null!==t){var i="BACKSLASH_n_replace",o="<br />"+i;return t=e.filters.escape(t).replace(/\r\n/g,o).replace(/\r/g,o).replace(/\n/g,o),t=e.lib.replaceAll(t,i,"\n"),e.Markup(t)}},number_format:function(e,t){var i=e,o=t&&t[0]?t[0]:void 0,r=t&&void 0!==t[1]?t[1]:".",s=t&&void 0!==t[2]?t[2]:",";i=(i+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+i)?+i:0,a=isFinite(+o)?Math.abs(o):0,p="",l=function(e,t){var i=Math.pow(10,t);return""+Math.round(e*i)/i};return p=(a?l(n,a):""+Math.round(n)).split("."),p[0].length>3&&(p[0]=p[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(p[1]||"").length<a&&(p[1]=p[1]||"",p[1]+=new Array(a-p[1].length+1).join("0")),p.join(r)},trim:function(t,i){if(void 0!==t&&null!==t){var o,r=e.filters.escape(""+t);o=i&&i[0]?""+i[0]:" \n\r	\f            ​\u2028\u2029　";for(var s=0;s<r.length;s++)if(-1===o.indexOf(r.charAt(s))){r=r.substring(s);break}for(s=r.length-1;s>=0;s--)if(-1===o.indexOf(r.charAt(s))){r=r.substring(0,s+1);break}return-1===o.indexOf(r.charAt(0))?r:""}},truncate:function(e,t){var i=30,o=!1,r="...";if(e+="",t&&(t[0]&&(i=t[0]),t[1]&&(o=t[1]),t[2]&&(r=t[2])),e.length>i){if(o&&(i=e.indexOf(" ",i),-1===i))return e;e=e.substr(0,i)+r}return e},slice:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||i.length<1)throw new e.Error("slice filter expects at least 1 argument");var o=i[0]||0,r=i.length>1?i[1]:t.length,s=o>=0?o:Math.max(t.length+o,0);if(e.lib.is("Array",t)){for(var n=[],a=s;s+r>a&&a<t.length;a++)n.push(t[a]);return n}if(e.lib.is("String",t))return t.substr(s,r);throw new e.Error("slice filter expects value to be an array or string")}},abs:function(e){return void 0!==e&&null!==e?Math.abs(e):void 0},first:function(e){if(t("Array",e))return e[0];if(t("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||i.length<1||i.length>2)throw new e.Error("split filter expects 1 or 2 argument");if(e.lib.is("String",t)){var o=i[0],r=i[1],s=t.split(o);if(void 0===r)return s;if(0>r)return t.split(o,s.length+r);var n=[];if(""==o)for(;s.length>0;){for(var a="",p=0;r>p&&s.length>0;p++)a+=s.shift();n.push(a)}else{for(var p=0;r-1>p&&s.length>0;p++)n.push(s.shift());s.length>0&&n.push(s.join(o))}return n}throw new e.Error("split filter expects value to be a string")}},last:function(t){if(e.lib.is("Object",t)){var i;return i=void 0===t._keys?Object.keys(t):t._keys,t[i[i.length-1]]}return t[t.length-1]},raw:function(t){return e.Markup(t)},batch:function(t,i){var o,r,s,n=i.shift(),a=i.shift();if(!e.lib.is("Array",t))throw new e.Error("batch filter expects items to be an array");if(!e.lib.is("Number",n))throw new e.Error("batch filter expects size to be a number");if(n=Math.ceil(n),o=e.lib.chunkArray(t,n),a&&t.length%n!=0){for(r=o.pop(),s=n-r.length;s--;)r.push(a);o.push(r)}return o},round:function(t,i){i=i||[];var o=i.length>0?i[0]:0,r=i.length>1?i[1]:"common";if(t=parseFloat(t),o&&!e.lib.is("Number",o))throw new e.Error("round filter expects precision to be a number");if("common"===r)return e.lib.round(t,o);if(!e.lib.is("Function",Math[r]))throw new e.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[r](t*Math.pow(10,o))/Math.pow(10,o)}},e.filter=function(t,i,o){if(!e.filters[t])throw"Unable to find filter "+t;return e.filters[t].apply(this,[i,o])},e.filter.extend=function(t,i){e.filters[t]=i},e}(o||{}),o=function(e){var o='Template "{name}" is not defined.';return e.functions={range:function(e,t,i){var o,r,s,n=[],a=i||1,p=!1;if(isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(p=!0,o=e.charCodeAt(0),r=t.charCodeAt(0)):(o=isNaN(e)?0:e,r=isNaN(t)?0:t):(o=parseInt(e,10),r=parseInt(t,10)),s=o>r?!1:!0)for(;r>=o;)n.push(p?String.fromCharCode(o):o),o+=a;else for(;o>=r;)n.push(p?String.fromCharCode(o):o),o-=a;return n},cycle:function(e,t){var i=t%e.length;return e[i]},dump:function(){var t="\n",i="  ",o=0,r="",s=Array.prototype.slice.call(arguments),n=function(e){for(var t="";e>0;)e--,t+=i;return t},a=function(e){r+=n(o),"object"==typeof e?p(e):"function"==typeof e?r+="function()"+t:"string"==typeof e?r+="string("+e.length+') "'+e+'"'+t:"number"==typeof e?r+="number("+e+")"+t:"boolean"==typeof e&&(r+="bool("+e+")"+t)},p=function(e){var i;if(null===e)r+="NULL"+t;else if(void 0===e)r+="undefined"+t;else if("object"==typeof e){r+=n(o)+typeof e,o++,r+="("+function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(e)+") {"+t;for(i in e)r+=n(o)+"["+i+"]=> "+t,a(e[i]);o--,r+=n(o)+"}"+t}else a(e)};return 0==s.length&&s.push(this.context),e.forEach(s,function(e){p(e)}),r},date:function(t,i){var o;if(void 0===t)o=new Date;else if(e.lib.is("Date",t))o=t;else if(e.lib.is("String",t))o=new Date(t.match(/^[0-9]+$/)?1e3*t:1e3*e.lib.strtotime(t));else{if(!e.lib.is("Number",t))throw new e.Error("Unable to parse date "+t);o=new Date(1e3*t)}return o},block:function(t){return this.originalBlockTokens[t]?e.logic.parse.apply(this,[this.originalBlockTokens[t],this.context]).output:this.blocks[t]},parent:function(){return e.placeholders.parent},attribute:function(t,i,o){return e.lib.is("Object",t)&&t.hasOwnProperty(i)?"function"==typeof t[i]?t[i].apply(void 0,o):t[i]:t[i]||void 0},max:function(t){return e.lib.is("Object",t)?(delete t._keys,e.lib.max(t)):e.lib.max.apply(null,arguments)},min:function(t){return e.lib.is("Object",t)?(delete t._keys,e.lib.min(t)):e.lib.min.apply(null,arguments)},template_from_string:function(t){return void 0===t&&(t=""),e.Templates.parsers.twig({options:this.options,data:t})},random:function(t){function i(e){var t=Math.floor(Math.random()*o),i=[0,e],r=Math.min.apply(null,i),s=Math.max.apply(null,i);return r+Math.floor((s-r+1)*t/o)}var o=2147483648;if(e.lib.is("Number",t))return i(t);if(e.lib.is("String",t))return t.charAt(i(t.length-1));if(e.lib.is("Array",t))return t[i(t.length-1)];if(e.lib.is("Object",t)){var r=Object.keys(t);return t[r[i(r.length-1)]]}return i(o-1)},source:function(r,s){var n,a,p,l=!1,c="undefined"!=typeof t&&"undefined"!=typeof t.exports&&"undefined"==typeof window;c?(a="fs",p=i+"/"+r):(a="ajax",p=r);var u={id:r,path:p,method:a,parser:"source",async:!1,fetchTemplateSource:!0};"undefined"==typeof s&&(s=!1);try{n=e.Templates.loadRemote(r,u),"undefined"==typeof n||null===n?n="":l=!0}catch(y){e.log.debug("Twig.functions.source: ","Problem loading template  ",y)}return l||s?n:o.replace("{name}",r)}},e._function=function(t,i,o){if(!e.functions[t])throw"Unable to find function "+t;return e.functions[t](i,o)},e._function.extend=function(t,i){e.functions[t]=i},e}(o||{}),o=function(t){"use strict";return t.path={},t.path.parsePath=function(e,i){var o=null,i=i||"";if("object"==typeof e&&"object"==typeof e.options&&(o=e.options.namespaces),"object"==typeof o&&i.indexOf("::")>0||i.indexOf("@")>=0){for(var r in o)o.hasOwnProperty(r)&&(i=i.replace(r+"::",o[r]),i=i.replace("@"+r,o[r]));return i}return t.path.relativePath(e,i)},t.path.relativePath=function(i,o){var r,s,n,a="/",p=[],o=o||"";if(i.url)r="undefined"!=typeof i.base?i.base+("/"===i.base.charAt(i.base.length-1)?"":"/"):i.url;else if(i.path){var l=e("path"),c=l.sep||a,u=new RegExp("^\\.{1,2}"+c.replace("\\","\\\\"));o=o.replace(/\//g,c),void 0!==i.base&&null==o.match(u)?(o=o.replace(i.base,""),r=i.base+c):r=l.normalize(i.path),r=r.replace(c+c,c),a=c}else{if(!i.name&&!i.id||!i.method||"fs"===i.method||"ajax"===i.method)throw new t.Error("Cannot extend an inline template.");r=i.base||i.name||i.id}for(s=r.split(a),s.pop(),s=s.concat(o.split(a));s.length>0;)n=s.shift(),"."==n||(".."==n&&p.length>0&&".."!=p[p.length-1]?p.pop():p.push(n));return p.join(a)},t}(o||{}),o=function(e){"use strict";return e.tests={empty:function(e){if(null===e||void 0===e)return!0;if("number"==typeof e)return!1;if(e.length&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2===1},even:function(e){return e%2===0},divisibleby:function(e,t){return e%t[0]===0},defined:function(e){return void 0!==e},none:function(e){return null===e},"null":function(e){return this.none(e)},sameas:function(e,t){return e===t[0]},iterable:function(t){return t&&(e.lib.is("Array",t)||e.lib.is("Object",t))}},e.test=function(t,i,o){if(!e.tests[t])throw"Test "+t+" is not defined.";return e.tests[t](i,o)},e.test.extend=function(t,i){e.tests[t]=i},e}(o||{}),o=function(e){"use strict";return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){var i=t.id,o={strict_variables:t.strict_variables||!1,autoescape:null!=t.autoescape&&t.autoescape||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1,namespaces:t.namespaces};if(e.cache&&i&&e.validateId(i),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return e.Templates.parsers.twig({data:t.data,path:t.hasOwnProperty("path")?t.path:void 0,module:t.module,id:i,options:o});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error("Both ref and id cannot be set on a twig.js template.");return e.Templates.load(t.ref)}if(void 0!==t.method){if(!e.Templates.isRegisteredLoader(t.method))throw new e.Error('Loader for "'+t.method+'" is not defined.');return e.Templates.loadRemote(t.name||t.href||t.path||i||void 0,{id:i,method:t.method,parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:o},t.load,t.error)}return void 0!==t.href?e.Templates.loadRemote(t.href,{id:i,method:"ajax",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:o},t.load,t.error):void 0!==t.path?e.Templates.loadRemote(t.path,{id:i,method:"fs",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:o},t.load,t.error):void 0},e.exports.extendFilter=function(t,i){e.filter.extend(t,i)},e.exports.extendFunction=function(t,i){e._function.extend(t,i)},e.exports.extendTest=function(t,i){e.test.extend(t,i)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,i){var o,r=i.filename,s=i.filename;return o=new e.Template({data:t,path:s,id:r,options:i.settings["twig options"]}),function(e){return o.render(e)}},e.exports.renderFile=function(t,i,o){"function"==typeof i&&(o=i,i={}),i=i||{};var r=i.settings||{},s={path:t,base:r.views,load:function(e){o(null,e.render(i))}},n=r["twig options"];if(n)for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);e.exports.twig(s)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e.exports.path=e.path,e}(o||{}),o=function(e){return e.compiler={module:{}},e.compiler.compile=function(t,i){var o,r=JSON.stringify(t.tokens),s=t.id;if(i.module){if(void 0===e.compiler.module[i.module])throw new e.Error("Unable to find module type "+i.module);o=e.compiler.module[i.module](s,r,i.twig)}else o=e.compiler.wrap(s,r);return o},e.compiler.module={amd:function(t,i,o){return'define(["'+o+'"], function (Twig) {\n	var twig, templates;\ntwig = Twig.twig;\ntemplates = '+e.compiler.wrap(t,i)+"\n	return templates;\n});"},node:function(t,i){return'var twig = require("twig").twig;\nexports.template = '+e.compiler.wrap(t,i)},cjs2:function(t,i,o){return'module.declare([{ twig: "'+o+'" }], function (require, exports, module) {\n	var twig = require("twig").twig;\n	exports.template = '+e.compiler.wrap(t,i)+"\n});"}},e.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},e}(o||{});"undefined"!=typeof t&&t.declare?t.declare([],function(e,t,i){for(key in o.exports)o.exports.hasOwnProperty(key)&&(t[key]=o.exports[key])}):"function"==typeof define&&define.amd?define(function(){return o.exports}):"undefined"!=typeof t&&t.exports?t.exports=o.exports:(window.twig=o.exports.twig,window.Twig=o.exports)}).call(this,"/node_modules/twig")},{fs:3,path:5}],10:[function(e,t,i){!function(e){"undefined"==typeof e&&(e={getCenter:L.Map.prototype.getCenter,setView:L.Map.prototype.setView,setZoomAround:L.Map.prototype.setZoomAround,getBoundsZoom:L.Map.prototype.getBoundsZoom,scaleUpdate:L.Control.Scale.prototype._update}),L.Map.include({getBounds:function(){if(this._viewport)return this.getViewportLatLngBounds();var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new L.LatLngBounds(t,i)},getViewport:function(){return this._viewport},getViewportBounds:function(){var e=this._viewport,t=L.point(e.offsetLeft,e.offsetTop),i=L.point(e.clientWidth,e.clientHeight);return(0===i.x||0===i.y)&&(e=this.getContainer(),e&&(t=L.point(0,0),i=L.point(e.clientWidth,e.clientHeight))),L.bounds(t,t.add(i))},getViewportLatLngBounds:function(){var e=this.getViewportBounds();return L.latLngBounds(this.containerPointToLatLng(e.min),this.containerPointToLatLng(e.max))},getOffset:function(){var e=this.getSize().divideBy(2),t=this.getViewportBounds().getCenter();return e.subtract(t)},getCenter:function(){var t=e.getCenter.call(this);if(this.getViewport()){var i=this.getZoom(),o=this.project(t,i);o=o.subtract(this.getOffset()),t=this.unproject(o,i)}return t},setView:function(t,i,o){if(t=L.latLng(t),i=i||this.getZoom(),this.getViewport()){var r=this.project(t,this._limitZoom(i));r=r.add(this.getOffset()),t=this.unproject(r,this._limitZoom(i))}return e.setView.call(this,t,i,o)},setZoomAround:function(t,i,o){var r=this.getViewport();if(r){var s=this.getZoomScale(i),n=this.getViewportBounds().getCenter(),a=t instanceof L.Point?t:this.latLngToContainerPoint(t),p=a.subtract(n).multiplyBy(1-1/s),l=this.containerPointToLatLng(n.add(p));return this.setView(l,i,{zoom:o})}return e.setZoomAround.call(this,t,i,o)},getBoundsZoom:function(e,t,i){e=L.latLngBounds(e);var o,r=this.getMinZoom()-(t?1:0),s=this.getMaxZoom(),n=this.getViewport(),a=n?L.point(n.clientWidth,n.clientHeight):this.getSize(),p=e.getNorthWest(),l=e.getSouthEast(),c=!0;i=L.point(i||[0,0]);do r++,o=this.project(l,r).subtract(this.project(p,r)).add(i),c=t?o.x<a.x||o.y<a.y:a.contains(o);while(c&&s>=r);return c&&t?null:t?r:r-1}}),L.Control.Scale.include({_update:function(){if(this._map._viewport){var t=this._map.getBounds(),i=t.getCenter().lat,o=6378137*Math.PI*Math.cos(i*Math.PI/180),r=o*(t.getNorthEast().lng-t.getSouthWest().lng)/180,s=this._map.getSize(),n=this.options,a=0,s=new L.Point(this._map._viewport.clientWidth,this._map._viewport.clientHeight);s.x>0&&(a=r*(n.maxWidth/s.x)),this._updateScales(n,a)}else e.scaleUpdate.call(this)}}),L.Map.include({setActiveArea:function(e){if(!this._viewport){var t=this.getContainer();this._viewport=L.DomUtil.create("div",""),t.insertBefore(this._viewport,t.firstChild)}return"string"==typeof e?this._viewport.className=e:L.extend(this._viewport.style,e),this}})}(window.leafletActiveAreaPreviousMethods)},{}],11:[function(e,t,i){L.Rrose=L.Popup.extend({_initLayout:function(){var e,t,i="leaflet-rrose",o=this._container=L.DomUtil.create("div",i+" "+this.options.className+" leaflet-zoom-animated");this.options.closeButton&&(e=this._closeButton=L.DomUtil.create("a",i+"-close-button",o),e.href="#close",e.innerHTML="&#215;",L.DomEvent.on(e,"click",this._onCloseButtonClick,this));var r=L.bounds([80,80],this._map.getSize().subtract([80,80]));this.options.bounds&&(r=this.options.bounds),this.options.position="n";var s=r.min.y-this._map.latLngToContainerPoint(this._latlng).y;s>0&&(this.options.position="s");var n=this._map.latLngToContainerPoint(this._latlng).x-r.max.x;n>0?this.options.position+="w":(n=r.min.x-this._map.latLngToContainerPoint(this._latlng).x,n>0&&(this.options.position+="e")),/s/.test(this.options.position)?("s"===this.options.position?(this._tipContainer=L.DomUtil.create("div",i+"-tip-container",o),t=this._wrapper=L.DomUtil.create("div",i+"-content-wrapper",o)):(this._tipContainer=L.DomUtil.create("div",i+"-tip-container "+i+"-tip-container-"+this.options.position,o),t=this._wrapper=L.DomUtil.create("div",i+"-content-wrapper "+i+"-content-wrapper-"+this.options.position,o)),this._tip=L.DomUtil.create("div",i+"-tip "+i+"-tip-"+this.options.position,this._tipContainer),L.DomEvent.disableClickPropagation(t),this._contentNode=L.DomUtil.create("div",i+"-content",t),L.DomEvent.on(this._contentNode,"mousewheel",L.DomEvent.stopPropagation)):("n"===this.options.position?(t=this._wrapper=L.DomUtil.create("div",i+"-content-wrapper",o),this._tipContainer=L.DomUtil.create("div",i+"-tip-container",o)):(t=this._wrapper=L.DomUtil.create("div",i+"-content-wrapper "+i+"-content-wrapper-"+this.options.position,o),this._tipContainer=L.DomUtil.create("div",i+"-tip-container "+i+"-tip-container-"+this.options.position,o)),L.DomEvent.disableClickPropagation(t),this._contentNode=L.DomUtil.create("div",i+"-content",t),L.DomEvent.on(this._contentNode,"mousewheel",L.DomEvent.stopPropagation),this._tip=L.DomUtil.create("div",i+"-tip "+i+"-tip-"+this.options.position,this._tipContainer))},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng),t=L.Browser.any3d,i=this.options.offset;t&&L.DomUtil.setPosition(this._container,e),this._containerBottom=/s/.test(this.options.position)?-this._container.offsetHeight-(t?0:e.y):-i.y-(t?0:e.y),this._containerLeft=/e/.test(this.options.position)?i.x+(t?0:e.x):/w/.test(this.options.position)?-Math.round(this._containerWidth)+i.x+(t?0:e.x):-Math.round(this._containerWidth/2)+i.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}})},{}],12:[function(e,t,i){(function(t){!function(o){var r="object"==typeof self&&self.self==self&&self||"object"==typeof t&&t.global==t&&t;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(e,t,i){r.Backbone=o(r,i,e,t)});else if("undefined"!=typeof i){var s,n=e("./../underscore/underscore.js");try{s=e("./../jquery/dist/jquery.js")}catch(a){}o(r,i,n,s)}else r.Backbone=o(r,{},r._,r.jQuery||r.Zepto||r.ender||r.$)}(function(e,t,i,o){var r=e.Backbone,s=Array.prototype.slice;t.VERSION="1.2.3",t.$=o,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var n=function(e,t,o){switch(e){case 1:return function(){return i[t](this[o])};case 2:return function(e){return i[t](this[o],e)};case 3:return function(e,r){return i[t](this[o],p(e,this),r)};case 4:return function(e,r,s){return i[t](this[o],p(e,this),r,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[o]),
i[t].apply(i,e)}}},a=function(e,t,o){i.each(t,function(t,r){i[r]&&(e.prototype[r]=n(t,r,o))})},p=function(e,t){return i.isFunction(e)?e:i.isObject(e)&&!t._isModel(e)?l(e):i.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=i.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},u=/\s+/,y=function(e,t,o,r,s){var n,a=0;if(o&&"object"==typeof o){void 0!==r&&"context"in s&&void 0===s.context&&(s.context=r);for(n=i.keys(o);a<n.length;a++)t=y(e,t,n[a],o[n[a]],s)}else if(o&&u.test(o))for(n=o.split(u);a<n.length;a++)t=e(t,n[a],r,s);else t=e(t,o,r,s);return t};c.on=function(e,t,i){return h(this,e,t,i)};var h=function(e,t,i,o,r){if(e._events=y(d,e._events||{},t,i,{context:o,ctx:e,listening:r}),r){var s=e._listeners||(e._listeners={});s[r.id]=r}return e};c.listenTo=function(e,t,o){if(!e)return this;var r=e._listenId||(e._listenId=i.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),n=s[r];if(!n){var a=this._listenId||(this._listenId=i.uniqueId("l"));n=s[r]={obj:e,objId:r,id:a,listeningTo:s,count:0}}return h(e,t,o,this,n),this};var d=function(e,t,i,o){if(i){var r=e[t]||(e[t]=[]),s=o.context,n=o.ctx,a=o.listening;a&&a.count++,r.push({callback:i,context:s,ctx:s||n,listening:a})}return e};c.off=function(e,t,i){return this._events?(this._events=y(g,this._events,e,t,{context:i,listeners:this._listeners}),this):this},c.stopListening=function(e,t,o){var r=this._listeningTo;if(!r)return this;for(var s=e?[e._listenId]:i.keys(r),n=0;n<s.length;n++){var a=r[s[n]];if(!a)break;a.obj.off(t,o,this)}return i.isEmpty(r)&&(this._listeningTo=void 0),this};var g=function(e,t,o,r){if(e){var s,n=0,a=r.context,p=r.listeners;if(t||o||a){for(var l=t?[t]:i.keys(e);n<l.length;n++){t=l[n];var c=e[t];if(!c)break;for(var u=[],y=0;y<c.length;y++){var h=c[y];o&&o!==h.callback&&o!==h.callback._callback||a&&a!==h.context?u.push(h):(s=h.listening,s&&0===--s.count&&(delete p[s.id],delete s.listeningTo[s.objId]))}u.length?e[t]=u:delete e[t]}return i.size(e)?e:void 0}for(var d=i.keys(p);n<d.length;n++)s=p[d[n]],delete p[s.id],delete s.listeningTo[s.objId]}};c.once=function(e,t,o){var r=y(m,{},e,t,i.bind(this.off,this));return this.on(r,void 0,o)},c.listenToOnce=function(e,t,o){var r=y(m,{},t,o,i.bind(this.stopListening,this,e));return this.listenTo(e,r)};var m=function(e,t,o,r){if(o){var s=e[t]=i.once(function(){r(t,s),o.apply(this,arguments)});s._callback=o}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),i=Array(t),o=0;t>o;o++)i[o]=arguments[o+1];return y(v,this._events,e,void 0,i),this};var v=function(e,t,i,o){if(e){var r=e[t],s=e.all;r&&s&&(s=s.slice()),r&&f(r,o),s&&f(s,[t].concat(o))}return e},f=function(e,t){var i,o=-1,r=e.length,s=t[0],n=t[1],a=t[2];switch(t.length){case 0:for(;++o<r;)(i=e[o]).callback.call(i.ctx);return;case 1:for(;++o<r;)(i=e[o]).callback.call(i.ctx,s);return;case 2:for(;++o<r;)(i=e[o]).callback.call(i.ctx,s,n);return;case 3:for(;++o<r;)(i=e[o]).callback.call(i.ctx,s,n,a);return;default:for(;++o<r;)(i=e[o]).callback.apply(i.ctx,t);return}};c.bind=c.on,c.unbind=c.off,i.extend(t,c);var w=t.Model=function(e,t){var o=e||{};t||(t={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(o=this.parse(o,t)||{}),o=i.defaults({},o,i.result(this,"defaults")),this.set(o,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(w.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!i.iteratee(e,this)(this.attributes)},set:function(e,t,o){if(null==e)return this;var r;if("object"==typeof e?(r=e,o=t):(r={})[e]=t,o||(o={}),!this._validate(r,o))return!1;var s=o.unset,n=o.silent,a=[],p=this._changing;this._changing=!0,p||(this._previousAttributes=i.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,u=this._previousAttributes;for(var y in r)t=r[y],i.isEqual(l[y],t)||a.push(y),i.isEqual(u[y],t)?delete c[y]:c[y]=t,s?delete l[y]:l[y]=t;if(this.id=this.get(this.idAttribute),!n){a.length&&(this._pending=o);for(var h=0;h<a.length;h++)this.trigger("change:"+a[h],this,l[a[h]],o)}if(p)return this;if(!n)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger("change",this,o);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var o in this.attributes)t[o]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,o={};for(var r in e){var s=e[r];i.isEqual(t[r],s)||(o[r]=s)}return i.size(o)?o:!1},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=i.extend({parse:!0},e);var t=this,o=e.success;return e.success=function(i){var r=e.parse?t.parse(i,e):i;return t.set(r,e)?(o&&o.call(e.context,t,i,e),void t.trigger("sync",t,i,e)):!1},z(this,e),this.sync("read",this,e)},save:function(e,t,o){var r;null==e||"object"==typeof e?(r=e,o=t):(r={})[e]=t,o=i.extend({validate:!0,parse:!0},o);var s=o.wait;if(r&&!s){if(!this.set(r,o))return!1}else if(!this._validate(r,o))return!1;var n=this,a=o.success,p=this.attributes;o.success=function(e){n.attributes=p;var t=o.parse?n.parse(e,o):e;return s&&(t=i.extend({},r,t)),t&&!n.set(t,o)?!1:(a&&a.call(o.context,n,e,o),void n.trigger("sync",n,e,o))},z(this,o),r&&s&&(this.attributes=i.extend({},p,r));var l=this.isNew()?"create":o.patch?"patch":"update";"patch"!==l||o.attrs||(o.attrs=r);var c=this.sync(l,this,o);return this.attributes=p,c},destroy:function(e){e=e?i.clone(e):{};var t=this,o=e.success,r=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(i){r&&s(),o&&o.call(e.context,t,i,e),t.isNew()||t.trigger("sync",t,i,e)};var n=!1;return this.isNew()?i.defer(e.success):(z(this,e),n=this.sync("delete",this,e)),r||s(),n},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var o=this.validationError=this.validate(e,t)||null;return o?(this.trigger("invalid",this,o,i.extend(t,{validationError:o})),!1):!0}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(w,_,"attributes");var T=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},k=function(e,t,i){i=Math.min(Math.max(i,0),e.length);for(var o=Array(e.length-i),r=t.length,s=0;s<o.length;s++)o[s]=e[s+i];for(s=0;r>s;s++)e[s+i]=t[s];for(s=0;s<o.length;s++)e[s+r+i]=o[s]};i.extend(T.prototype,c,{model:w,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,x))},remove:function(e,t){t=i.extend({},t);var o=!i.isArray(e);e=o?[e]:i.clone(e);var r=this._removeModels(e,t);return!t.silent&&r&&this.trigger("update",this,t),o?r[0]:r},set:function(e,t){if(null!=e){t=i.defaults({},t,b),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var o=!i.isArray(e);e=o?[e]:e.slice();var r=t.at;null!=r&&(r=+r),0>r&&(r+=this.length+1);for(var s,n=[],a=[],p=[],l={},c=t.add,u=t.merge,y=t.remove,h=!1,d=this.comparator&&null==r&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,m=0;m<e.length;m++){s=e[m];var v=this.get(s);if(v){if(u&&s!==v){var f=this._isModel(s)?s.attributes:s;t.parse&&(f=v.parse(f,t)),v.set(f,t),d&&!h&&(h=v.hasChanged(g))}l[v.cid]||(l[v.cid]=!0,n.push(v)),e[m]=v}else c&&(s=e[m]=this._prepareModel(s,t),s&&(a.push(s),this._addReference(s,t),l[s.cid]=!0,n.push(s)))}if(y){for(m=0;m<this.length;m++)s=this.models[m],l[s.cid]||p.push(s);p.length&&this._removeModels(p,t)}var w=!1,_=!d&&c&&y;if(n.length&&_?(w=this.length!=n.length||i.some(this.models,function(e,t){return e!==n[t]}),this.models.length=0,k(this.models,n,0),this.length=this.models.length):a.length&&(d&&(h=!0),k(this.models,a,null==r?this.length:r),this.length=this.models.length),h&&this.sort({silent:!0}),!t.silent){for(m=0;m<a.length;m++)null!=r&&(t.index=r+m),s=a[m],s.trigger("add",s,this,t);(h||w)&&this.trigger("sort",this,t),(a.length||p.length)&&this.trigger("update",this,t)}return o?e[0]:e}},reset:function(e,t){t=t?i.clone(t):{};for(var o=0;o<this.models.length;o++)this._removeReference(this.models[o],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(null==e)return void 0;var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var o=t.length;return i.isFunction(t)&&(t=i.bind(t,this)),1===o||i.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=i.extend({parse:!0},e);var t=e.success,o=this;return e.success=function(i){var r=e.reset?"reset":"set";o[r](i,e),t&&t.call(e.context,o,i,e),o.trigger("sync",o,i,e)},z(this,e),this.sync("read",this,e)},create:function(e,t){t=t?i.clone(t):{};var o=t.wait;if(e=this._prepareModel(e,t),!e)return!1;o||this.add(e,t);var r=this,s=t.success;return t.success=function(e,t,i){o&&r.add(e,i),s&&s.call(i.context,e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?i.clone(t):{},t.collection=this;var o=new this.model(e,t);return o.validationError?(this.trigger("invalid",this,o.validationError,t),!1):o},_removeModels:function(e,t){for(var i=[],o=0;o<e.length;o++){var r=this.get(e[o]);if(r){var s=this.indexOf(r);this.models.splice(s,1),this.length--,t.silent||(t.index=s,r.trigger("remove",r,this,t)),i.push(r),this._removeReference(r,t)}}return i.length?i:!1},_isModel:function(e){return e instanceof w},_addReference:function(e,t){this._byId[e.cid]=e;var i=this.modelId(e.attributes);null!=i&&(this._byId[i]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var i=this.modelId(e.attributes);null!=i&&delete this._byId[i],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,o){if("add"!==e&&"remove"!==e||i===this){if("destroy"===e&&this.remove(t,o),"change"===e){var r=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);r!==s&&(null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=t))}this.trigger.apply(this,arguments)}}});var C={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};a(T,C,"models");var M=t.View=function(e){this.cid=i.uniqueId("view"),i.extend(this,i.pick(e,I)),this._ensureElement(),this.initialize.apply(this,arguments)},V=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];i.extend(M.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=i.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var o=e[t];if(i.isFunction(o)||(o=this[o]),o){var r=t.match(V);this.delegate(r[1],r[2],i.bind(o,this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,o,r){var s=S[e];i.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var n={type:s,dataType:"json"};if(r.url||(n.url=i.result(o,"url")||j()),null!=r.data||!o||"create"!==e&&"update"!==e&&"patch"!==e||(n.contentType="application/json",n.data=JSON.stringify(r.attrs||o.toJSON(r))),r.emulateJSON&&(n.contentType="application/x-www-form-urlencoded",n.data=n.data?{model:n.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){n.type="POST",r.emulateJSON&&(n.data._method=s);var a=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===n.type||r.emulateJSON||(n.processData=!1);var p=r.error;r.error=function(e,t,i){r.textStatus=t,r.errorThrown=i,p&&p.call(r.context,e,t,i)};var l=r.xhr=t.ajax(i.extend(n,r));return o.trigger("request",o,l,r),l};var S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var L=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,E=/\*\w+/g,R=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(L.prototype,c,{initialize:function(){},route:function(e,o,r){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(o)&&(r=o,o=""),r||(r=this[o]);var s=this;return t.history.route(e,function(i){var n=s._extractParameters(e,i);s.execute(r,n,o)!==!1&&(s.trigger.apply(s,["route:"+o].concat(n)),s.trigger("route",o,n),t.history.trigger("route",s,o,n))}),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(R,"\\$&").replace(A,"(?:$1)?").replace(P,function(e,t){return t?e:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var o=e.exec(t).slice(1);return i.map(o,function(e,t){return t===o.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,B=/^\/+|\/+$/g,O=/#.*$/;D.started=!1,i.extend(D.prototype,c,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(F,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(B,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var o=document.body,r=o.insertBefore(this.iframe,o.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),i.some(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})):!1},navigate:function(e,t){if(!D.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var i=this.root;(""===e||"?"===e.charAt(0))&&(i=i.slice(0,-1)||"/");var o=i+e;if(e=this.decodeFragment(e.replace(O,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,o);else{if(!this._wantsHashChange)return this.location.assign(o);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var o=e.href.replace(/(javascript:|#).*$/,"");e.replace(o+"#"+t)}else e.hash="#"+t}}),t.history=new D;var N=function(e,t){var o,r=this;o=e&&i.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},i.extend(o,r,t);var s=function(){this.constructor=o};return s.prototype=r.prototype,o.prototype=new s,e&&i.extend(o.prototype,e),o.__super__=r.prototype,o};w.extend=T.extend=L.extend=M.extend=D.extend=N;var j=function(){throw new Error('A "url" property or function must be specified')},z=function(e,t){var i=t.error;t.error=function(o){i&&i.call(t.context,e,o,t),e.trigger("error",e,o,t)}};return t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../jquery/dist/jquery.js":24,"./../underscore/underscore.js":29}],13:[function(e,t,i){(function(i,o){(function(){"use strict";function r(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function a(e){U=e}function p(e){q=e}function l(){return function(){i.nextTick(d)}}function c(){return function(){H(d)}}function u(){var e=0,t=new J(d),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function y(){var e=new MessageChannel;return e.port1.onmessage=d,function(){e.port2.postMessage(0)}}function h(){return function(){setTimeout(d,1)}}function d(){for(var e=0;Y>e;e+=2){var t=te[e],i=te[e+1];t(i),te[e]=void 0,te[e+1]=void 0}Y=0}function g(){try{var t=e,i=t("vertx");return H=i.runOnLoop||i.runOnContext,c()}catch(o){return h()}}function m(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return se.error=t,se}}function _(e,t,i,o){try{e.call(t,i,o)}catch(r){return r}}function T(e,t,i){q(function(e){var o=!1,r=_(i,t,function(i){o||(o=!0,t!==i?k(e,i):M(e,i))},function(t){o||(o=!0,V(e,t))},"Settle: "+(e._label||" unknown promise"));!o&&r&&(o=!0,V(e,r))},e)}function b(e,t){t._state===oe?M(e,t._result):t._state===re?V(e,t._result):I(t,void 0,function(t){k(e,t)},function(t){V(e,t)})}function x(e,t){if(t.constructor===e.constructor)b(e,t);else{var i=w(t);i===se?V(e,se.error):void 0===i?M(e,t):s(i)?T(e,t,i):M(e,t)}}function k(e,t){e===t?V(e,v()):r(t)?x(e,t):M(e,t)}function C(e){e._onerror&&e._onerror(e._result),S(e)}function M(e,t){e._state===ie&&(e._result=t,e._state=oe,0!==e._subscribers.length&&q(S,e))}function V(e,t){e._state===ie&&(e._state=re,e._result=t,q(C,e))}function I(e,t,i,o){var r=e._subscribers,s=r.length;e._onerror=null,r[s]=t,r[s+oe]=i,r[s+re]=o,0===s&&e._state&&q(S,e)}function S(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var o,r,s=e._result,n=0;n<t.length;n+=3)o=t[n],r=t[n+i],o?P(i,o,r,s):r(s);e._subscribers.length=0}}function L(){this.error=null}function A(e,t){try{return e(t)}catch(i){return ne.error=i,ne}}function P(e,t,i,o){var r,n,a,p,l=s(i);if(l){if(r=A(i,o),r===ne?(p=!0,n=r.error,r=null):a=!0,t===r)return void V(t,f())}else r=o,a=!0;t._state!==ie||(l&&a?k(t,r):p?V(t,n):e===oe?M(t,r):e===re&&V(t,r))}function E(e,t){try{t(function(t){k(e,t)},function(t){V(e,t)})}catch(i){V(e,i)}}function R(e,t){var i=this;i._instanceConstructor=e,i.promise=new e(m),i._validateInput(t)?(i._input=t,i.length=t.length,i._remaining=t.length,i._init(),0===i.length?M(i.promise,i._result):(i.length=i.length||0,i._enumerate(),0===i._remaining&&M(i.promise,i._result))):V(i.promise,i._validationError())}function D(e){return new ae(this,e).promise}function F(e){function t(e){k(r,e)}function i(e){V(r,e)}var o=this,r=new o(m);if(!W(e))return V(r,new TypeError("You must pass an array to race.")),r;for(var s=e.length,n=0;r._state===ie&&s>n;n++)I(o.resolve(e[n]),void 0,t,i);return r}function B(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(m);return k(i,e),i}function O(e){var t=this,i=new t(m);return V(i,e),i}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this._id=ye++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==e&&(s(e)||N(),this instanceof z||j(),E(this,e))}function $(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=e.Promise;(!i||"[object Promise]"!==Object.prototype.toString.call(i.resolve())||i.cast)&&(e.Promise=he)}var G;G=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,U,X,W=G,Y=0,q=({}.toString,function(e,t){te[Y]=e,te[Y+1]=t,Y+=2,2===Y&&(U?U(d):X())}),Z="undefined"!=typeof window?window:void 0,K=Z||{},J=K.MutationObserver||K.WebKitMutationObserver,Q="undefined"!=typeof i&&"[object process]"==={}.toString.call(i),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);X=Q?l():J?u():ee?y():void 0===Z&&"function"==typeof e?g():h();var ie=void 0,oe=1,re=2,se=new L,ne=new L;R.prototype._validateInput=function(e){return W(e)},R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._init=function(){this._result=new Array(this.length)};var ae=R;R.prototype._enumerate=function(){for(var e=this,t=e.length,i=e.promise,o=e._input,r=0;i._state===ie&&t>r;r++)e._eachEntry(o[r],r)},R.prototype._eachEntry=function(e,t){var i=this,o=i._instanceConstructor;n(e)?e.constructor===o&&e._state!==ie?(e._onerror=null,i._settledAt(e._state,t,e._result)):i._willSettleAt(o.resolve(e),t):(i._remaining--,i._result[t]=e)},R.prototype._settledAt=function(e,t,i){var o=this,r=o.promise;r._state===ie&&(o._remaining--,e===re?V(r,i):o._result[t]=i),0===o._remaining&&M(r,o._result)},R.prototype._willSettleAt=function(e,t){var i=this;I(e,void 0,function(e){i._settledAt(oe,t,e)},function(e){i._settledAt(re,t,e)})};var pe=D,le=F,ce=B,ue=O,ye=0,he=z;z.all=pe,z.race=le,z.resolve=ce,z.reject=ue,z._setScheduler=a,z._setAsap=p,z._asap=q,z.prototype={constructor:z,then:function(e,t){var i=this,o=i._state;if(o===oe&&!e||o===re&&!t)return this;var r=new this.constructor(m),s=i._result;if(o){var n=arguments[o-1];q(function(){P(o,r,n,s)})}else I(i,r,e,t);return r},"catch":function(e){return this.then(null,e)}};var de=$,ge={Promise:he,polyfill:de};"function"==typeof define&&define.amd?define(function(){return ge}):"undefined"!=typeof t&&t.exports?t.exports=ge:"undefined"!=typeof this&&(this.ES6Promise=ge),de()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:6}],14:[function(e,t,i){!function(e,i,o){function r(e,t){this.wrapper="string"==typeof e?i.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var o in t)this.options[o]=t[o];this.translateZ=this.options.HWCompositing&&p.hasPerspective?" translateZ(0)":"",this.options.useTransition=p.hasTransition&&this.options.useTransition,this.options.useTransform=p.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?p.ease[this.options.bounceEasing]||p.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function s(e,t,o){var r=i.createElement("div"),s=i.createElement("div");return o===!0&&(r.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator","h"==e?(o===!0&&(r.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),r.className="iScrollHorizontalScrollbar"):(o===!0&&(r.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),r.className="iScrollVerticalScrollbar"),r.style.cssText+=";overflow:hidden",t||(r.style.pointerEvents="none"),r.appendChild(s),r}function n(t,o){this.wrapper="string"==typeof o.el?i.querySelector(o.el):o.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var r in o)this.options[r]=o[r];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(p.addEvent(this.indicator,"touchstart",this),p.addEvent(e,"touchend",this)),this.options.disablePointer||(p.addEvent(this.indicator,p.prefixPointerEvent("pointerdown"),this),p.addEvent(e,p.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(p.addEvent(this.indicator,"mousedown",this),p.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[p.style.transform]=this.scroller.translateZ,this.wrapperStyle[p.style.transitionDuration]=p.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var a=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},p=function(){function t(e){return n===!1?!1:""===n?e:n+e.charAt(0).toUpperCase()+e.substr(1)}var r={},s=i.createElement("div").style,n=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,o=t.length;o>i;i++)if(e=t[i]+"ransform",e in s)return t[i].substr(0,t[i].length-1);return!1}();r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(e,t){for(var i in t)e[i]=t[i]},r.addEvent=function(e,t,i,o){
e.addEventListener(t,i,!!o)},r.removeEvent=function(e,t,i,o){e.removeEventListener(t,i,!!o)},r.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},r.momentum=function(e,t,i,r,s,n){var a,p,l=e-t,c=o.abs(l)/i;return n=void 0===n?6e-4:n,a=e+c*c/(2*n)*(0>l?-1:1),p=c/n,r>a?(a=s?r-s/2.5*(c/8):r,l=o.abs(a-e),p=l/c):a>0&&(a=s?s/2.5*(c/8):0,l=o.abs(e)+a,p=l/c),{destination:o.round(a),duration:p}};var a=t("transform");return r.extend(r,{hasTransform:a!==!1,hasPerspective:t("perspective")in s,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:t("transition")in s}),r.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),r.extend(r.style={},{transform:a,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin")}),r.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)},r.addClass=function(e,t){if(!r.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},r.removeClass=function(e,t){if(r.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},r.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},r.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:e.navigator.userAgent&&e.navigator.userAgent.indexOf("Windows Phone 10.0")>-1?3:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return o.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,i=.4;return 0===e?0:1==e?1:i*o.pow(2,-10*e)*o.sin(2*(e-t/4)*o.PI/t)+1}}}),r.tap=function(e,t){var o=i.createEvent("Event");o.initEvent(t,!0,!0),o.pageX=e.pageX,o.pageY=e.pageY,e.target.dispatchEvent(o)},r.click=function(e){var t,o=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(o.tagName)||(t=i.createEvent("MouseEvents"),t.initMouseEvent("click",!0,!0,e.view,1,o.screenX,o.screenY,o.clientX,o.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),t._constructed=!0,o.dispatchEvent(t))},r}();r.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(!(1!=p.eventType[e.type]&&0!==e.button||!this.enabled||this.initiated&&p.eventType[e.type]!==this.initiated)){!this.options.preventDefault||p.isBadAndroid||p.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,i=e.touches?e.touches[0]:e;this.initiated=p.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=p.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(o.round(t.x),o.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&p.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,i,r,s,n=e.touches?e.touches[0]:e,a=n.pageX-this.pointX,l=n.pageY-this.pointY,c=p.getTime();if(this.pointX=n.pageX,this.pointY=n.pageY,this.distX+=a,this.distY+=l,r=o.abs(this.distX),s=o.abs(this.distY),!(c-this.endTime>300&&10>r&&10>s)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=r>s+this.options.directionLockThreshold?"h":s>=r+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,l=this.hasVerticalScroll?l:0,t=this.x+a,i=this.y+l,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+a/3:t>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+l/3:i>0?0:this.maxScrollY),this.directionX=a>0?-1:0>a?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,i),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(e){if(this.enabled&&p.eventType[e.type]===this.initiated){this.options.preventDefault&&!p.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,i,r=(e.changedTouches?e.changedTouches[0]:e,p.getTime()-this.startTime),s=o.round(this.x),n=o.round(this.y),a=o.abs(s-this.startX),l=o.abs(n-this.startY),c=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=p.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,n),!this.moved)return this.options.tap&&p.tap(e,this.options.tap),this.options.click&&p.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&200>r&&100>a&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>r&&(t=this.hasHorizontalScroll?p.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},i=this.hasVerticalScroll?p.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:n,duration:0},s=t.destination,n=i.destination,c=o.max(t.duration,i.duration),this.isInTransition=1),this.options.snap){var y=this._nearestSnap(s,n);this.currentPage=y,c=this.options.snapSpeed||o.max(o.max(o.min(o.abs(s-y.x),1e3),o.min(o.abs(n-y.y),1e3)),300),s=y.x,n=y.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}return s!=this.x||n!=this.y?((s>0||s<this.maxScrollX||n>0||n<this.maxScrollY)&&(u=p.ease.quadratic),void this.scrollTo(s,n,c,u)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y?!1:(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=p.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;i>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,o){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,o)},scrollTo:function(e,t,i,o){o=o||p.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&o.style?(this._transitionTimingFunction(o.style),this._transitionTime(i),this._translate(e,t)):this._animate(e,t,i,o.fn)},scrollToElement:function(e,t,i,r,s){if(e=e.nodeType?e:this.scroller.querySelector(e)){var n=p.offset(e);n.left-=this.wrapperOffset.left,n.top-=this.wrapperOffset.top,i===!0&&(i=o.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),r===!0&&(r=o.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),n.left-=i||0,n.top-=r||0,n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left,n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top,t=void 0===t||null===t||"auto"===t?o.max(o.abs(this.x-n.left),o.abs(this.y-n.top)):t,this.scrollTo(n.left,n.top,t,s)}},_transitionTime:function(e){if(e=e||0,this.scrollerStyle[p.style.transitionDuration]=e+"ms",!e&&p.isBadAndroid&&(this.scrollerStyle[p.style.transitionDuration]="0.001s"),this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[p.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[p.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=o.round(e),t=o.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(t){var i=t?p.removeEvent:p.addEvent,o=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(o,"mousemove",this),i(o,"mousecancel",this),i(o,"mouseup",this)),p.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,p.prefixPointerEvent("pointerdown"),this),i(o,p.prefixPointerEvent("pointermove"),this),i(o,p.prefixPointerEvent("pointercancel"),this),i(o,p.prefixPointerEvent("pointerup"),this)),p.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(o,"touchmove",this),i(o,"touchcancel",this),i(o,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,o=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(o=o[p.style.transform].split(")")[0].split(", "),t=+(o[12]||o[4]),i=+(o[13]||o[5])):(t=+o.left.replace(/[^-\d.]/g,""),i=+o.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function e(e){for(var t=a.indicators.length;t--;)e.call(a.indicators[t])}var t,i=this.options.interactiveScrollbars,o="string"!=typeof this.options.scrollbars,r=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:s("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),r.push(t)),this.options.scrollX&&(t={el:s("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),r.push(t))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var p=r.length;p--;)this.indicators.push(new n(this,r[p]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){p.addEvent(this.wrapper,"wheel",this),p.addEvent(this.wrapper,"mousewheel",this),p.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){p.removeEvent(this.wrapper,"wheel",this),p.removeEvent(this.wrapper,"mousewheel",this),p.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t,i,r,s,n=this;if(void 0===this.wheelTimeout&&n._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){n._execEvent("scrollEnd"),n.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,i=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,i=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,i=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=i=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=i=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=i,i=0),this.options.snap)return r=this.currentPage.pageX,s=this.currentPage.pageY,t>0?r--:0>t&&r++,i>0?s--:0>i&&s++,void this.goToPage(r,s);r=this.x+o.round(this.hasHorizontalScroll?t:0),s=this.y+o.round(this.hasVerticalScroll?i:0),r>0?r=0:r<this.maxScrollX&&(r=this.maxScrollX),s>0?s=0:s<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(r,s,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,i,r,s,n,a=0,p=0,l=0,c=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(i=o.round(c/2),r=o.round(u/2);l>-this.scrollerWidth;){for(this.pages[a]=[],e=0,s=0;s>-this.scrollerHeight;)this.pages[a][e]={x:o.max(l,this.maxScrollX),y:o.max(s,this.maxScrollY),width:c,height:u,cx:l-i,cy:s-r},s-=u,e++;l-=c,a++}else for(n=this.options.snap,e=n.length,t=-1;e>a;a++)(0===a||n[a].offsetLeft<=n[a-1].offsetLeft)&&(p=0,t++),this.pages[p]||(this.pages[p]=[]),l=o.max(-n[a].offsetLeft,this.maxScrollX),s=o.max(-n[a].offsetTop,this.maxScrollY),i=l-o.round(n[a].offsetWidth/2),r=s-o.round(n[a].offsetHeight/2),this.pages[p][t]={x:l,y:s,width:n[a].offsetWidth,height:n[a].offsetHeight,cx:i,cy:r},l>this.maxScrollX&&p++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=o.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=o.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||o.max(o.max(o.min(o.abs(this.x-this.startX),1e3),o.min(o.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,r=this.pages.length,s=0;if(o.abs(e-this.absStartX)<this.snapThresholdX&&o.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);r>i;i++)if(e>=this.pages[i][0].cx){e=this.pages[i][0].x;break}for(r=this.pages[i].length;r>s;s++)if(t>=this.pages[0][s].cy){t=this.pages[0][s].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),e=this.pages[i][0].x),s==this.currentPage.pageY&&(s+=this.directionY,0>s?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),t=this.pages[0][s].y),{x:e,y:t,pageX:i,pageY:s}},goToPage:function(e,t,i,r){r=r||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:0>e&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:0>t&&(t=0);var s=this.pages[e][t].x,n=this.pages[e][t].y;i=void 0===i?this.options.snapSpeed||o.max(o.max(o.min(o.abs(s-this.x),1e3),o.min(o.abs(n-this.y),1e3)),300):i,this.currentPage={x:s,y:n,pageX:e,pageY:t},this.scrollTo(s,n,i,r)},next:function(e,t){var i=this.currentPage.pageX,o=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,o++),this.goToPage(i,o,e,t)},prev:function(e,t){var i=this.currentPage.pageX,o=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,o--),this.goToPage(i,o,e,t)},_initKeys:function(t){var i,o={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in o)this.options.keyBindings[i]=this.options.keyBindings[i]||o[i];p.addEvent(e,"keydown",this),this.on("destroy",function(){p.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,i=this.options.snap,r=i?this.currentPage.pageX:this.x,s=i?this.currentPage.pageY:this.y,n=p.getTime(),a=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(o.round(t.x),o.round(t.y)),this.isInTransition=!1),this.keyAcceleration=200>n-a?o.min(this.keyAcceleration+l,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?r+=i?1:this.wrapperWidth:s+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?r-=i?1:this.wrapperWidth:s-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:r=i?this.pages.length-1:this.maxScrollX,s=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:r=0,s=0;break;case this.options.keyBindings.left:r+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:r-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(r,s);r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollX&&(r=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(r,s,0),this.keyTime=n}},_animate:function(e,t,i,o){function r(){var y,h,d,g=p.getTime();return g>=u?(s.isAnimating=!1,s._translate(e,t),void(s.resetPosition(s.options.bounceTime)||s._execEvent("scrollEnd"))):(g=(g-c)/i,d=o(g),y=(e-n)*d+n,h=(t-l)*d+l,s._translate(y,h),s.isAnimating&&a(r),void(3==s.options.probeType&&s._execEvent("scroll")))}var s=this,n=this.x,l=this.y,c=p.getTime(),u=c+i;this.isAnimating=!0,r()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},n.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(p.removeEvent(this.indicator,"touchstart",this),p.removeEvent(this.indicator,p.prefixPointerEvent("pointerdown"),this),p.removeEvent(this.indicator,"mousedown",this),p.removeEvent(e,"touchmove",this),p.removeEvent(e,p.prefixPointerEvent("pointermove"),this),p.removeEvent(e,"mousemove",this),p.removeEvent(e,"touchend",this),p.removeEvent(e,p.prefixPointerEvent("pointerup"),this),p.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=p.getTime(),this.options.disableTouch||p.addEvent(e,"touchmove",this),this.options.disablePointer||p.addEvent(e,p.prefixPointerEvent("pointermove"),this),this.options.disableMouse||p.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,o,r,s=e.touches?e.touches[0]:e,n=p.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=s.pageX-this.lastPointX,this.lastPointX=s.pageX,i=s.pageY-this.lastPointY,this.lastPointY=s.pageY,o=this.x+t,r=this.y+i,this._pos(o,r),1==this.scroller.options.probeType&&n-this.startTime>300?(this.startTime=n,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),p.removeEvent(e,"touchmove",this),p.removeEvent(e,p.prefixPointerEvent("pointermove"),this),p.removeEvent(e,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),r=this.options.snapSpeed||o.max(o.max(o.min(o.abs(this.scroller.x-i.x),1e3),o.min(o.abs(this.scroller.y-i.y),1e3)),300);(this.scroller.x!=i.x||this.scroller.y!=i.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,r,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0,this.indicatorStyle[p.style.transitionDuration]=e+"ms",!e&&p.isBadAndroid&&(this.indicatorStyle[p.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[p.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(p.addClass(this.wrapper,"iScrollBothScrollbars"),p.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(p.removeClass(this.wrapper,"iScrollBothScrollbars"),p.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=o.max(o.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=o.max(o.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&o.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&o.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=o.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=o.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=o.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=o.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[p.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){0>e?e=0:e>this.maxPosX&&(e=this.maxPosX),0>t?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?o.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?o.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,o=e?0:300;e=e?"1":"0",this.wrapperStyle[p.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),o)}}},r.utils=p,"undefined"!=typeof t&&t.exports?t.exports=r:e.IScroll=r}(window,document,Math)},{}],15:[function(e,t,i){!function(e,t,i){"use strict";var o={duration:200,easing:"linear"};e.fn.mousewheelStopPropagation=function(t){function i(e){e.preventDefault(),e.stopPropagation(),"function"==typeof t.wheelstop&&t.wheelstop(e)}function r(e,i){t.emulateNaturalScrolling?e.stop(!0).animate({scrollTop:i},o):e.get(0).scrollTop=i}t=e.extend({wheelstop:null,emulateNaturalScrolling:!0},t);var s=navigator.userAgent.toLowerCase(),n=/(trident|msie)/.test(s),a=document.documentElement,p="mousewheel";return"onmousewheel"in a?p="mousewheel":"onwheel"in a?p="wheel":"DOMMouseScroll"in a&&(p="DOMMouseScroll"),p?this.each(function(){var t=this,o=e(t);o.on(p,function(e){var s=e.originalEvent,a=t.scrollTop,p=t.scrollHeight-o.outerHeight(),l=-s.wheelDelta;isNaN(l)&&(l=s.deltaY);var c=0>l;c&&0>=a||!c&&a>=p?i(e):n&&(c&&-l>a?(r(o,0),i(e)):!c&&l>p-a&&(r(o,p),i(e)))})}):this}}(jQuery,window)},{}],16:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,o){var r,s,n,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,s=r.name,t.href&&s&&"map"===r.nodeName.toLowerCase()?(n=e("img[usemap='#"+s+"']")[0],!!n&&i(n)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||o:o)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),o="absolute"===i,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return o&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,o){return!!e.data(t,o[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var o=e.attr(i,"tabindex"),r=isNaN(o);return(r||o>=0)&&t(i,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function o(t,i,o,s){return e.each(r,function(){i-=parseFloat(e.css(t,"padding"+this))||0,o&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),n={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?n["inner"+i].call(this):this.each(function(){e(this).css(s,o(this,t)+"px")})},e.fn["outer"+i]=function(t,r){return"number"!=typeof t?n["outer"+i].call(this,t):this.each(function(){e(this).css(s,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,o){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),o&&o.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";

return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,o,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0}}),e.ui.plugin={add:function(t,i,o){var r,s=e.ui[t].prototype;for(r in o)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,o[r]])},call:function(e,t,i,o){var r,s=e.plugins[t];if(s&&(o||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)e.options[s[r][0]]&&s[r][1].apply(e.element,i)}}})},{}],17:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(o){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var o=this._uiHash();if(this._trigger("drag",t,o)===!1)return this._mouseUp({}),!1;this.position=o.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,o=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(o=e.ui.ddmanager.drop(this,t)),this.dropped&&(o=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!o||"valid"===this.options.revert&&o||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,o)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,o=e.isFunction(i.helper),r=o?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),o&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,o,r=this.options,s=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),i=e(r.containment),o=i[0],void(o&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(o.scrollWidth,o.offsetWidth):o.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(o.scrollHeight,o.offsetHeight):o.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,o=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,o,r,s,n=this.options,a=this._isRootNode(this.scrollParent[0]),p=e.pageX,l=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(o=this.relativeContainer.offset(),i=[this.containment[0]+o.left,this.containment[1]+o.top,this.containment[2]+o.left,this.containment[3]+o.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(p=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(p=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),n.grid&&(r=n.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY,l=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-n.grid[1]:r+n.grid[1]:r,s=n.grid[0]?this.originalPageX+Math.round((p-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX,p=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-n.grid[0]:s+n.grid[0]:s),"y"===n.axis&&(p=this.originalPageX),"x"===n.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,o){return o=o||this._uiHash(),e.ui.plugin.call(this,t,[i,o,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),o.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,o)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,o){var r=e.extend({},i,{item:o.element});o.sortables=[],e(o.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(o.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i,o){var r=e.extend({},i,{item:o.element});o.cancelHelperRemoval=!1,e.each(o.sortables,function(){var e=this;e.isOver?(e.isOver=0,o.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,i,o){e.each(o.sortables,function(){var r=!1,s=this;s.positionAbs=o.positionAbs,s.helperProportions=o.helperProportions,s.offset.click=o.offset.click,s._intersectsWith(s.containerCache)&&(r=!0,e.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(r=!1),r})),r?(s.isOver||(s.isOver=1,o._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=o.offset.click.top,s.offset.click.left=o.offset.click.left,s.offset.parent.left-=o.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=o.offset.parent.top-s.offset.parent.top,o._trigger("toSortable",t),o.dropped=s.element,e.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,s.fromOutside=o),s.currentItem&&(s._mouseDrag(t),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(o._parent),o._refreshOffsets(t),i.position=o._generatePosition(t,!0),o._trigger("fromSortable",t),o.dropped=!1,e.each(o.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,o){var r=e("body"),s=o.options;r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(t,i,o){var r=o.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,o){var r=e(i.helper),s=o.options;r.css("opacity")&&(s._opacity=r.css("opacity")),r.css("opacity",s.opacity)},stop:function(t,i,o){var r=o.options;r._opacity&&e(i.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,o){var r=o.options,s=!1,n=o.scrollParentNotHidden[0],a=o.document[0];n!==a&&"HTML"!==n.tagName?(r.axis&&"x"===r.axis||(o.overflowOffset.top+n.offsetHeight-t.pageY<r.scrollSensitivity?n.scrollTop=s=n.scrollTop+r.scrollSpeed:t.pageY-o.overflowOffset.top<r.scrollSensitivity&&(n.scrollTop=s=n.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(o.overflowOffset.left+n.offsetWidth-t.pageX<r.scrollSensitivity?n.scrollLeft=s=n.scrollLeft+r.scrollSpeed:t.pageX-o.overflowOffset.left<r.scrollSensitivity&&(n.scrollLeft=s=n.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(a).scrollTop()<r.scrollSensitivity?s=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity&&(s=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(a).scrollLeft()<r.scrollSensitivity?s=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity&&(s=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(o,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,o){var r=o.options;o.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),i=t.offset();this!==o.element[0]&&o.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,o){var r,s,n,a,p,l,c,u,y,h,d=o.options,g=d.snapTolerance,m=i.offset.left,v=m+o.helperProportions.width,f=i.offset.top,w=f+o.helperProportions.height;for(y=o.snapElements.length-1;y>=0;y--)p=o.snapElements[y].left-o.margins.left,l=p+o.snapElements[y].width,c=o.snapElements[y].top-o.margins.top,u=c+o.snapElements[y].height,p-g>v||m>l+g||c-g>w||f>u+g||!e.contains(o.snapElements[y].item.ownerDocument,o.snapElements[y].item)?(o.snapElements[y].snapping&&o.options.snap.release&&o.options.snap.release.call(o.element,t,e.extend(o._uiHash(),{snapItem:o.snapElements[y].item})),o.snapElements[y].snapping=!1):("inner"!==d.snapMode&&(r=Math.abs(c-w)<=g,s=Math.abs(u-f)<=g,n=Math.abs(p-v)<=g,a=Math.abs(l-m)<=g,r&&(i.position.top=o._convertPositionTo("relative",{top:c-o.helperProportions.height,left:0}).top),s&&(i.position.top=o._convertPositionTo("relative",{top:u,left:0}).top),n&&(i.position.left=o._convertPositionTo("relative",{top:0,left:p-o.helperProportions.width}).left),a&&(i.position.left=o._convertPositionTo("relative",{top:0,left:l}).left)),h=r||s||n||a,"outer"!==d.snapMode&&(r=Math.abs(c-f)<=g,s=Math.abs(u-w)<=g,n=Math.abs(p-m)<=g,a=Math.abs(l-v)<=g,r&&(i.position.top=o._convertPositionTo("relative",{top:c,left:0}).top),s&&(i.position.top=o._convertPositionTo("relative",{top:u-o.helperProportions.height,left:0}).top),n&&(i.position.left=o._convertPositionTo("relative",{top:0,left:p}).left),a&&(i.position.left=o._convertPositionTo("relative",{top:0,left:l-o.helperProportions.width}).left)),!o.snapElements[y].snapping&&(r||s||n||a||h)&&o.options.snap.snap&&o.options.snap.snap.call(o.element,t,e.extend(o._uiHash(),{snapItem:o.snapElements[y].item})),o.snapElements[y].snapping=r||s||n||a||h)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,o){var r,s=o.options,n=e.makeArray(e(s.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(r=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,o){var r=e(i.helper),s=o.options;r.css("zIndex")&&(s._zIndex=r.css("zIndex")),r.css("zIndex",s.zIndex)},stop:function(t,i,o){var r=o.options;r._zIndex&&e(i.helper).css("zIndex",r._zIndex)}}),e.ui.draggable})},{}],18:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var o=this,r=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){o.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return o._mouseMove(e)},this._mouseUpDelegate=function(e){return o._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),t=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})},{}],19:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,o=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",n=[];for(i=o.values&&o.values.length||1,r.length>i&&(r.slice(i).remove(),r=r.slice(0,i)),t=r.length;i>t;t++)n.push(s);this.handles=r.add(e(n.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,o,r,s,n,a,p,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},o=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(o-c.values(t));(r>i||r===i&&(t===c._lastChangedValue||c.values(t)===u.min))&&(r=i,s=e(this),n=t)}),a=this._start(t,n),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=n,s.addClass("ui-state-active").focus(),p=s.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-p.left-s.width()/2,top:t.pageY-p.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,n,o),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,o,r,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),o=i/t,o>1&&(o=1),0>o&&(o=0),"vertical"===this.orientation&&(o=1-o),r=this._valueMax()-this._valueMin(),s=this._valueMin()+o*r,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var o,r,s;this.options.values&&this.options.values.length?(o=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>o||1===t&&o>i)&&(i=o),i!==this.values(t)&&(r=this.values(),r[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r}),o=this.values(t?0:1),s!==!1&&this.values(t,i))):i!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:i}),s!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var o,r,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(o=this.options.values,r=arguments[0],s=0;s<o.length;s+=1)o[s]=this._trimAlignValue(r[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var o,r=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),o=0;r>o;o+=1)this._change(null,o);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,o;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(i[o]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,o=e-i;return 2*Math.abs(i)>=t&&(o+=i>0?t:-t),parseFloat(o.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,o=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=o+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,o,r,s,n=this.options.range,a=this.options,p=this,l=this._animateOff?!1:a.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(o){i=(p.values(o)-p._valueMin())/(p._valueMax()-p._valueMin())*100,c["horizontal"===p.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](c,a.animate),p.options.range===!0&&("horizontal"===p.orientation?(0===o&&p.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate),1===o&&p.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===o&&p.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate),1===o&&p.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(o=this.value(),r=this._valueMin(),s=this._valueMax(),i=s!==r?(o-r)/(s-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,a.animate),"min"===n&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate),"max"===n&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===n&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate),"max"===n&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(t){var i,o,r,s,n=e(t.target).data("ui-slider-handle-index");

switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,n),i===!1))return}switch(s=this.options.step,o=r=this.options.values&&this.options.values.length?this.values(n):this.value(),t.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;r=this._trimAlignValue(o+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;r=this._trimAlignValue(o-s)}this._slide(t,n,r)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})})},{}],20:[function(e,t,i){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=0,i=Array.prototype.slice;return e.cleanData=function(t){return function(i){var o,r,s;for(s=0;null!=(r=i[s]);s++)try{o=e._data(r,"events"),o&&o.remove&&e(r).triggerHandler("remove")}catch(n){}t(i)}}(e.cleanData),e.widget=function(t,i,o){var r,s,n,a,p={},l=t.split(".")[0];return t=t.split(".")[1],r=l+"-"+t,o||(o=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},s=e[l][t],n=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new n(e,t)},e.extend(n,s,{version:o.version,_proto:e.extend({},o),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(o,function(t,o){return e.isFunction(o)?void(p[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=r,t=o.apply(this,arguments),this._super=i,this._superApply=s,t}}()):void(p[t]=o)}),n.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||t:t},p,{constructor:n,namespace:l,widgetName:t,widgetFullName:r}),s?(e.each(s._childConstructors,function(t,i){var o=i.prototype;e.widget(o.namespace+"."+o.widgetName,n,i._proto)}),delete s._childConstructors):i._childConstructors.push(n),e.widget.bridge(t,n),n},e.widget.extend=function(t){for(var o,r,s=i.call(arguments,1),n=0,a=s.length;a>n;n++)for(o in s[n])r=s[n][o],s[n].hasOwnProperty(o)&&void 0!==r&&(t[o]=e.isPlainObject(r)?e.isPlainObject(t[o])?e.widget.extend({},t[o],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,o){var r=o.prototype.widgetFullName||t;e.fn[t]=function(s){var n="string"==typeof s,a=i.call(arguments,1),p=this;return n?this.each(function(){var i,o=e.data(this,r);return"instance"===s?(p=o,!1):o?e.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,a),i!==o&&void 0!==i?(p=i&&i.jquery?p.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new o(s,this))})),p}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,o){o=e(o||this.defaultElement||this)[0],this.element=e(o),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),o!==this&&(e.data(o,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===o&&this.destroy()}}),this.document=e(o.style?o.ownerDocument:o.document||o),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var o,r,s,n=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(n={},o=t.split("."),t=o.shift(),o.length){for(r=n[t]=e.widget.extend({},this.options[t]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(t=o.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];n[t]=i}return this._setOptions(n),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,o){var r,s=this;"boolean"!=typeof t&&(o=i,i=t,t=!1),o?(i=r=e(i),this.bindings=this.bindings.add(i)):(o=i,i=this.element,r=this.widget()),e.each(o,function(o,n){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof n?s[n]:n).apply(s,arguments):void 0}"string"!=typeof n&&(a.guid=n.guid=n.guid||a.guid||e.guid++);var p=o.match(/^([\w:-]*)\s*(.*)$/),l=p[1]+s.eventNamespace,c=p[2];c?r.delegate(c,l,a):i.bind(l,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?o[e]:e).apply(o,arguments)}var o=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,o){var r,s,n=this.options[t];if(o=o||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(r in s)r in i||(i[r]=s[r]);return this.element.trigger(i,o),!(e.isFunction(n)&&n.apply(this.element[0],[i].concat(o))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(o,r,s){"string"==typeof r&&(r={effect:r});var n,a=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),n=!e.isEmptyObject(r),r.complete=s,r.delay&&o.delay(r.delay),n&&e.effects&&e.effects.effect[a]?o[t](r):a!==t&&o[a]?o[a](r.duration,r.easing,s):o.queue(function(i){e(this)[t](),s&&s.call(o[0]),i()})}}),e.widget})},{}],21:[function(e,t,i){!function(i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(e)}):"object"==typeof t&&"object"==typeof t.exports?t.exports=i(e("./../../jquery/dist/jquery.js")):i(window.jQuery)}(function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],o={},r={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:i[0]||""};if(r.browser&&(o[r.browser]=!0,o.version=r.version,o.versionNumber=parseInt(r.versionNumber,10)),r.platform&&(o[r.platform]=!0),(o.android||o.bb||o.blackberry||o.ipad||o.iphone||o.ipod||o.kindle||o.playbook||o.silk||o["windows phone"])&&(o.mobile=!0),(o.cros||o.mac||o.linux||o.win)&&(o.desktop=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),o.rv||o.iemobile){var s="msie";r.browser=s,o[s]=!0}if(o.edge){delete o.edge;var n="msedge";r.browser=n,o[n]=!0}if(o.safari&&o.blackberry){var a="blackberry";r.browser=a,o[a]=!0}if(o.safari&&o.playbook){var p="playbook";r.browser=p,o[p]=!0}if(o.bb){var l="blackberry";r.browser=l,o[l]=!0}if(o.opr){var c="opera";r.browser=c,o[c]=!0}if(o.safari&&o.android){var u="android";r.browser=u,o[u]=!0}if(o.safari&&o.kindle){var y="kindle";r.browser=y,o[y]=!0}if(o.safari&&o.silk){var h="silk";r.browser=h,o[h]=!0}return o.name=r.browser,o.platform=r.platform,o}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser})},{"./../../jquery/dist/jquery.js":24}],22:[function(e,t,i){!function(e){"use strict";e(["jquery"],function(e){function t(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var i=e.scrollTo=function(t,i,o){return e(window).scrollTo(t,i,o)};return i.defaults={axis:"xy",duration:0,limit:!0},i.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return t;var o=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==o.compatMode?o.body:o.documentElement})},e.fn.scrollTo=function(o,r,s){return"object"==typeof r&&(s=r,r=0),"function"==typeof s&&(s={onAfter:s}),"max"==o&&(o=9e9),s=e.extend({},i.defaults,s),r=r||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(r/=2),s.offset=t(s.offset),s.over=t(s.over),this._scrollable().each(function(){function n(e){l.animate(u,r,s.easing,e&&function(){e.call(this,c,s)})}if(null!=o){var a,p=this,l=e(p),c=o,u={},y=l.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(c)){c=t(c);break}if(c=y?e(c):e(c,this),!c.length)return;case"object":(c.is||c.style)&&(a=(c=e(c)).offset())}var h=e.isFunction(s.offset)&&s.offset(p,c)||s.offset;e.each(s.axis.split(""),function(e,t){var o="x"==t?"Left":"Top",r=o.toLowerCase(),d="scroll"+o,g=p[d],m=i.max(p,t);if(a)u[d]=a[r]+(y?0:g-l.offset()[r]),s.margin&&(u[d]-=parseInt(c.css("margin"+o))||0,u[d]-=parseInt(c.css("border"+o+"Width"))||0),u[d]+=h[r]||0,s.over[r]&&(u[d]+=c["x"==t?"width":"height"]()*s.over[r]);else{var v=c[r];u[d]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*m:v}s.limit&&/^\d+$/.test(u[d])&&(u[d]=u[d]<=0?0:Math.min(u[d],m)),!e&&s.queue&&(g!=u[d]&&n(s.onAfterFirst),delete u[d])}),n(s.onAfter)}}).end()},i.max=function(t,i){var o="x"==i?"Width":"Height",r="scroll"+o;if(!e(t).is("html,body"))return t[r]-e(t)[o.toLowerCase()]();var s="client"+o,n=t.ownerDocument.documentElement,a=t.ownerDocument.body;return Math.max(n[r],a[r])-Math.min(n[s],a[s])},i})}("function"==typeof define&&define.amd?define:function(i,o){"undefined"!=typeof t&&t.exports?t.exports=o(e("./../jquery/dist/jquery.js")):o(jQuery)})},{"./../jquery/dist/jquery.js":24}],23:[function(e,t,i){!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof i?t.exports=o(e("./../jquery/dist/jquery.js")):o(jQuery)}(function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,i=/^get|post$/i,o=new RegExp("^(//|"+location.protocol+")","i");return e.ajaxTransport("* text html xml json",function(r,s,n){if(r.crossDomain&&r.async&&i.test(r.type)&&t.test(r.url)&&o.test(r.url)){var a=null;return{send:function(t,i){var o="",n=(s.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(s.timeout)&&(a.timeout=s.timeout),a.ontimeout=function(){i(500,"timeout")},a.onload=function(){var t="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,o={code:200,message:"success"},r={text:a.responseText};try{if("html"===n||/text\/html/i.test(a.contentType))r.html=a.responseText;else if("json"===n||"text"!==n&&/\/json/i.test(a.contentType))try{r.json=e.parseJSON(a.responseText)}catch(s){o.code=500,o.message="parseerror"}else if("xml"===n||"text"!==n&&/\/xml/i.test(a.contentType)){var p=new ActiveXObject("Microsoft.XMLDOM");p.async=!1;try{p.loadXML(a.responseText)}catch(s){p=void 0}if(!p||!p.documentElement||p.getElementsByTagName("parsererror").length)throw o.code=500,o.message="parseerror","Invalid XML: "+a.responseText;r.xml=p}}catch(l){throw l}finally{i(o.code,o.message,r,t)}},a.onprogress=function(){},a.onerror=function(){i(500,"error",{text:a.responseText})},s.data&&(o="string"===e.type(s.data)?s.data:e.param(s.data)),a.open(r.type,r.url),a.send(o)},abort:function(){a&&a.abort()}}}}),e})},{"./../jquery/dist/jquery.js":24}],24:[function(e,t,i){!function(e,i){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t="length"in e&&e.length,i=re.type(e);return"function"===i||re.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,i){if(re.isFunction(t))return re.grep(e,function(e,o){return!!t.call(e,o,e)!==i});if(t.nodeType)return re.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ye.test(t))return re.filter(t,e,i);t=re.filter(t,e)}return re.grep(e,function(e){return re.inArray(e,t)>=0!==i})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function s(e){var t=_e[e]={};return re.each(e.match(we)||[],function(e,i){t[i]=!0}),t}function n(){de.addEventListener?(de.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1)):(de.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(de.addEventListener||"load"===event.type||"complete"===de.readyState)&&(n(),re.ready())}function p(e,t,i){if(void 0===i&&1===e.nodeType){var o="data-"+t.replace(Ce,"-$1").toLowerCase();if(i=e.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ke.test(i)?re.parseJSON(i):i}catch(r){}re.data(e,t,i)}else i=void 0}return i}function l(e){var t;for(t in e)if(("data"!==t||!re.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,i,o){if(re.acceptData(e)){var r,s,n=re.expando,a=e.nodeType,p=a?re.cache:e,l=a?e[n]:e[n]&&n;if(l&&p[l]&&(o||p[l].data)||void 0!==i||"string"!=typeof t)return l||(l=a?e[n]=Y.pop()||re.guid++:n),p[l]||(p[l]=a?{}:{toJSON:re.noop}),("object"==typeof t||"function"==typeof t)&&(o?p[l]=re.extend(p[l],t):p[l].data=re.extend(p[l].data,t)),s=p[l],o||(s.data||(s.data={}),s=s.data),void 0!==i&&(s[re.camelCase(t)]=i),"string"==typeof t?(r=s[t],null==r&&(r=s[re.camelCase(t)])):r=s,r}}function u(e,t,i){if(re.acceptData(e)){var o,r,s=e.nodeType,n=s?re.cache:e,a=s?e[re.expando]:re.expando;if(n[a]){if(t&&(o=i?n[a]:n[a].data)){re.isArray(t)?t=t.concat(re.map(t,re.camelCase)):t in o?t=[t]:(t=re.camelCase(t),t=t in o?[t]:t.split(" ")),r=t.length;for(;r--;)delete o[t[r]];if(i?!l(o):!re.isEmptyObject(o))return}(i||(delete n[a].data,l(n[a])))&&(s?re.cleanData([e],!0):ie.deleteExpando||n!=n.window?delete n[a]:n[a]=null)}}}function y(){return!0}function h(){return!1}function d(){try{return de.activeElement}catch(e){}}function g(e){var t=Fe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function m(e,t){var i,o,r=0,s=typeof e.getElementsByTagName!==xe?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==xe?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],i=e.childNodes||e;null!=(o=i[r]);r++)!t||re.nodeName(o,t)?s.push(o):re.merge(s,m(o,t));return void 0===t||t&&re.nodeName(e,t)?re.merge([e],s):s}function v(e){Le.test(e.type)&&(e.defaultChecked=e.checked)}function f(e,t){return re.nodeName(e,"table")&&re.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function w(e){return e.type=(null!==re.find.attr(e,"type"))+"/"+e.type,e}function _(e){var t=We.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){for(var i,o=0;null!=(i=e[o]);o++)re._data(i,"globalEval",!t||re._data(t[o],"globalEval"))}function b(e,t){if(1===t.nodeType&&re.hasData(e)){var i,o,r,s=re._data(e),n=re._data(t,s),a=s.events;if(a){delete n.handle,n.events={};for(i in a)for(o=0,r=a[i].length;r>o;o++)re.event.add(t,i,a[i][o])}n.data&&(n.data=re.extend({},n.data))}}function x(e,t){var i,o,r;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ie.noCloneEvent&&t[re.expando]){r=re._data(t);for(o in r.events)re.removeEvent(t,o,r.handle);t.removeAttribute(re.expando)}"script"===i&&t.text!==e.text?(w(t).text=e.text,_(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ie.html5Clone&&e.innerHTML&&!re.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Le.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function k(t,i){var o,r=re(i.createElement(t)).appendTo(i.body),s=e.getDefaultComputedStyle&&(o=e.getDefaultComputedStyle(r[0]))?o.display:re.css(r[0],"display");return r.detach(),s}function C(e){var t=de,i=Qe[e];return i||(i=k(e,t),"none"!==i&&i||(Je=(Je||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Je[0].contentWindow||Je[0].contentDocument).document,t.write(),t.close(),i=k(e,t),Je.detach()),Qe[e]=i),i}function M(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function V(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),o=t,r=yt.length;r--;)if(t=yt[r]+i,t in e)return t;return o}function I(e,t){for(var i,o,r,s=[],n=0,a=e.length;a>n;n++)o=e[n],o.style&&(s[n]=re._data(o,"olddisplay"),i=o.style.display,t?(s[n]||"none"!==i||(o.style.display=""),""===o.style.display&&Ie(o)&&(s[n]=re._data(o,"olddisplay",C(o.nodeName)))):(r=Ie(o),(i&&"none"!==i||!r)&&re._data(o,"olddisplay",r?i:re.css(o,"display"))));for(n=0;a>n;n++)o=e[n],o.style&&(t&&"none"!==o.style.display&&""!==o.style.display||(o.style.display=t?s[n]||"":"none"));return e}function S(e,t,i){var o=pt.exec(t);return o?Math.max(0,o[1]-(i||0))+(o[2]||"px"):t}function L(e,t,i,o,r){for(var s=i===(o?"border":"content")?4:"width"===t?1:0,n=0;4>s;s+=2)"margin"===i&&(n+=re.css(e,i+Ve[s],!0,r)),o?("content"===i&&(n-=re.css(e,"padding"+Ve[s],!0,r)),"margin"!==i&&(n-=re.css(e,"border"+Ve[s]+"Width",!0,r))):(n+=re.css(e,"padding"+Ve[s],!0,r),"padding"!==i&&(n+=re.css(e,"border"+Ve[s]+"Width",!0,r)));return n}function A(e,t,i){var o=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=et(e),n=ie.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=tt(e,t,s),(0>r||null==r)&&(r=e.style[t]),ot.test(r))return r;o=n&&(ie.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+L(e,t,i||(n?"border":"content"),o,s)+"px"}function P(e,t,i,o,r){return new P.prototype.init(e,t,i,o,r)}function E(){return setTimeout(function(){ht=void 0}),ht=re.now()}function R(e,t){var i,o={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i=Ve[r],o["margin"+i]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function D(e,t,i){for(var o,r=(wt[t]||[]).concat(wt["*"]),s=0,n=r.length;n>s;s++)if(o=r[s].call(i,t,e))return o}function F(e,t,i){var o,r,s,n,a,p,l,c,u=this,y={},h=e.style,d=e.nodeType&&Ie(e),g=re._data(e,"fxshow");i.queue||(a=re._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,p=a.empty.fire,a.empty.fire=function(){a.unqueued||p()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,re.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],l=re.css(e,"display"),c="none"===l?re._data(e,"olddisplay")||C(e.nodeName):l,"inline"===c&&"none"===re.css(e,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==C(e.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",ie.shrinkWrapBlocks()||u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(o in t)if(r=t[o],gt.exec(r)){if(delete t[o],s=s||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!g||void 0===g[o])continue;d=!0}y[o]=g&&g[o]||re.style(e,o)}else l=void 0;if(re.isEmptyObject(y))"inline"===("none"===l?C(e.nodeName):l)&&(h.display=l);else{g?"hidden"in g&&(d=g.hidden):g=re._data(e,"fxshow",{}),s&&(g.hidden=!d),d?re(e).show():u.done(function(){re(e).hide()}),u.done(function(){var t;re._removeData(e,"fxshow");for(t in y)re.style(e,t,y[t])});for(o in y)n=D(d?g[o]:0,o,u),o in g||(g[o]=n.start,d&&(n.end=n.start,n.start="width"===o||"height"===o?1:0))}}function B(e,t){var i,o,r,s,n;for(i in e)if(o=re.camelCase(i),r=t[o],s=e[i],re.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==o&&(e[o]=s,delete e[i]),n=re.cssHooks[o],n&&"expand"in n){s=n.expand(s),delete e[o];for(i in s)i in e||(e[i]=s[i],t[i]=r)}else t[o]=r}function O(e,t,i){var o,r,s=0,n=ft.length,a=re.Deferred().always(function(){delete p.elem}),p=function(){if(r)return!1;for(var t=ht||E(),i=Math.max(0,l.startTime+l.duration-t),o=i/l.duration||0,s=1-o,n=0,p=l.tweens.length;p>n;n++)l.tweens[n].run(s);return a.notifyWith(e,[l,s,i]),1>s&&p?i:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:ht||E(),duration:i.duration,tweens:[],createTween:function(t,i){var o=re.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(o),o},stop:function(t){var i=0,o=t?l.tweens.length:0;if(r)return this;for(r=!0;o>i;i++)l.tweens[i].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(B(c,l.opts.specialEasing);n>s;s++)if(o=ft[s].call(l,e,c,l.opts))return o;return re.map(c,D,l),re.isFunction(l.opts.start)&&l.opts.start.call(e,l),re.fx.timer(re.extend(p,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function N(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var o,r=0,s=t.toLowerCase().match(we)||[];if(re.isFunction(i))for(;o=s[r++];)"+"===o.charAt(0)?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(i)):(e[o]=e[o]||[]).push(i)}}function j(e,t,i,o){function r(a){var p;return s[a]=!0,re.each(e[a]||[],function(e,a){var l=a(t,i,o);return"string"!=typeof l||n||s[l]?n?!(p=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),p}var s={},n=e===Gt;return r(t.dataTypes[0])||!s["*"]&&r("*")}function z(e,t){var i,o,r=re.ajaxSettings.flatOptions||{};for(o in t)void 0!==t[o]&&((r[o]?e:i||(i={}))[o]=t[o]);return i&&re.extend(!0,e,i),e}function $(e,t,i){for(var o,r,s,n,a=e.contents,p=e.dataTypes;"*"===p[0];)p.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in a)if(a[n]&&a[n].test(r)){p.unshift(n);break}if(p[0]in i)s=p[0];else{for(n in i){if(!p[0]||e.converters[n+" "+p[0]]){s=n;break}o||(o=n)}s=s||o}return s?(s!==p[0]&&p.unshift(s),i[s]):void 0}function G(e,t,i,o){var r,s,n,a,p,l={},c=e.dataTypes.slice();if(c[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(s=c.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!p&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),p=s,s=c.shift())if("*"===s)s=p;else if("*"!==p&&p!==s){if(n=l[p+" "+s]||l["* "+s],!n)for(r in l)if(a=r.split(" "),a[1]===s&&(n=l[p+" "+a[0]]||l["* "+a[0]])){n===!0?n=l[r]:l[r]!==!0&&(s=a[0],c.unshift(a[1]));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(u){return{state:"parsererror",error:n?u:"No conversion from "+p+" to "+s}}}return{state:"success",data:t}}function H(e,t,i,o){var r;if(re.isArray(t))re.each(t,function(t,r){i||Wt.test(e)?o(e,r):H(e+"["+("object"==typeof r?t:"")+"]",r,i,o)});else if(i||"object"!==re.type(t))o(e,t);else for(r in t)H(e+"["+r+"]",t[r],i,o)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function X(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function W(e){return re.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var Y=[],q=Y.slice,Z=Y.concat,K=Y.push,J=Y.indexOf,Q={},ee=Q.toString,te=Q.hasOwnProperty,ie={},oe="1.11.3",re=function(e,t){return new re.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ne=/^-ms-/,ae=/-([\da-z])/gi,pe=function(e,t){return t.toUpperCase()};re.fn=re.prototype={jquery:oe,constructor:re,selector:"",length:0,toArray:function(){return q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:q.call(this)},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return re.each(this,e,t)},map:function(e){return this.pushStack(re.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:Y.sort,splice:Y.splice},re.extend=re.fn.extend=function(){var e,t,i,o,r,s,n=arguments[0]||{},a=1,p=arguments.length,l=!1;for("boolean"==typeof n&&(l=n,n=arguments[a]||{},a++),"object"==typeof n||re.isFunction(n)||(n={}),a===p&&(n=this,a--);p>a;a++)if(null!=(r=arguments[a]))for(o in r)e=n[o],i=r[o],n!==i&&(l&&i&&(re.isPlainObject(i)||(t=re.isArray(i)))?(t?(t=!1,s=e&&re.isArray(e)?e:[]):s=e&&re.isPlainObject(e)?e:{},n[o]=re.extend(l,s,i)):void 0!==i&&(n[o]=i));return n},re.extend({expando:"jQuery"+(oe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray||function(e){return"array"===re.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!re.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==re.type(e)||e.nodeType||re.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Q[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&re.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ne,"ms-").replace(ae,pe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,o){var r,s=0,n=e.length,a=i(e);if(o){if(a)for(;n>s&&(r=t.apply(e[s],o),r!==!1);s++);else for(s in e)if(r=t.apply(e[s],o),r===!1)break}else if(a)for(;n>s&&(r=t.call(e[s],s,e[s]),r!==!1);s++);else for(s in e)if(r=t.call(e[s],s,e[s]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var o=t||[];return null!=e&&(i(Object(e))?re.merge(o,"string"==typeof e?[e]:e):K.call(o,e)),o},inArray:function(e,t,i){var o;if(t){if(J)return J.call(t,e,i);for(o=t.length,i=i?0>i?Math.max(0,o+i):i:0;o>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,o=0,r=e.length;i>o;)e[r++]=t[o++];if(i!==i)for(;void 0!==t[o];)e[r++]=t[o++];return e.length=r,e},grep:function(e,t,i){for(var o,r=[],s=0,n=e.length,a=!i;n>s;s++)o=!t(e[s],s),o!==a&&r.push(e[s]);return r},map:function(e,t,o){var r,s=0,n=e.length,a=i(e),p=[];if(a)for(;n>s;s++)r=t(e[s],s,o),null!=r&&p.push(r);else for(s in e)r=t(e[s],s,o),null!=r&&p.push(r);return Z.apply([],p)},guid:1,proxy:function(e,t){var i,o,r;return"string"==typeof t&&(r=e[t],t=e,e=r),re.isFunction(e)?(i=q.call(arguments,2),o=function(){return e.apply(t||this,i.concat(q.call(arguments)))},o.guid=e.guid=e.guid||re.guid++,o):void 0},now:function(){return+new Date},support:ie}),re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Q["[object "+t+"]"]=t.toLowerCase()});var le=function(e){function t(e,t,i,o){var r,s,n,a,p,l,u,h,d,g;if((t?t.ownerDocument||t:j)!==P&&A(t),t=t||P,i=i||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return i;if(!o&&R){if(11!==a&&(r=fe.exec(e)))if(n=r[1]){if(9===a){if(s=t.getElementById(n),!s||!s.parentNode)return i;if(s.id===n)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(n))&&O(t,s)&&s.id===n)return i.push(s),i}else{if(r[2])return J.apply(i,t.getElementsByTagName(e)),i;if((n=r[3])&&T.getElementsByClassName)return J.apply(i,t.getElementsByClassName(n)),i}if(T.qsa&&(!D||!D.test(e))){if(h=u=N,d=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=C(e),(u=t.getAttribute("id"))?h=u.replace(_e,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",p=l.length;p--;)l[p]=h+y(l[p]);d=we.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return J.apply(i,d.querySelectorAll(g)),i}catch(m){}finally{u||t.removeAttribute("id")}}}return V(e.replace(pe,"$1"),t,i,o)}function i(){function e(i,o){return t.push(i+" ")>b.cacheLength&&delete e[t.shift()],e[i+" "]=o}var t=[];return e}function o(e){return e[N]=!0,e}function r(e){var t=P.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),o=e.length;o--;)b.attrHandle[i[o]]=t}function n(e,t){var i=t&&e,o=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(o)return o;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function p(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function l(e){return o(function(t){return t=+t,o(function(i,o){for(var r,s=e([],i.length,t),n=s.length;n--;)i[r=s[n]]&&(i[r]=!(o[r]=i[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function y(e){for(var t=0,i=e.length,o="";i>t;t++)o+=e[t].value;return o}function h(e,t,i){var o=t.dir,r=i&&"parentNode"===o,s=$++;return t.first?function(t,i,s){for(;t=t[o];)if(1===t.nodeType||r)return e(t,i,s)}:function(t,i,n){var a,p,l=[z,s];if(n){for(;t=t[o];)if((1===t.nodeType||r)&&e(t,i,n))return!0}else for(;t=t[o];)if(1===t.nodeType||r){if(p=t[N]||(t[N]={}),(a=p[o])&&a[0]===z&&a[1]===s)return l[2]=a[2];if(p[o]=l,l[2]=e(t,i,n))return!0}}}function d(e){return e.length>1?function(t,i,o){
for(var r=e.length;r--;)if(!e[r](t,i,o))return!1;return!0}:e[0]}function g(e,i,o){for(var r=0,s=i.length;s>r;r++)t(e,i[r],o);return o}function m(e,t,i,o,r){for(var s,n=[],a=0,p=e.length,l=null!=t;p>a;a++)(s=e[a])&&(!i||i(s,o,r))&&(n.push(s),l&&t.push(a));return n}function v(e,t,i,r,s,n){return r&&!r[N]&&(r=v(r)),s&&!s[N]&&(s=v(s,n)),o(function(o,n,a,p){var l,c,u,y=[],h=[],d=n.length,v=o||g(t||"*",a.nodeType?[a]:a,[]),f=!e||!o&&t?v:m(v,y,e,a,p),w=i?s||(o?e:d||r)?[]:n:f;if(i&&i(f,w,a,p),r)for(l=m(w,h),r(l,[],a,p),c=l.length;c--;)(u=l[c])&&(w[h[c]]=!(f[h[c]]=u));if(o){if(s||e){if(s){for(l=[],c=w.length;c--;)(u=w[c])&&l.push(f[c]=u);s(null,w=[],l,p)}for(c=w.length;c--;)(u=w[c])&&(l=s?ee(o,u):y[c])>-1&&(o[l]=!(n[l]=u))}}else w=m(w===n?w.splice(d,w.length):w),s?s(null,n,w,p):J.apply(n,w)})}function f(e){for(var t,i,o,r=e.length,s=b.relative[e[0].type],n=s||b.relative[" "],a=s?1:0,p=h(function(e){return e===t},n,!0),l=h(function(e){return ee(t,e)>-1},n,!0),c=[function(e,i,o){var r=!s&&(o||i!==I)||((t=i).nodeType?p(e,i,o):l(e,i,o));return t=null,r}];r>a;a++)if(i=b.relative[e[a].type])c=[h(d(c),i)];else{if(i=b.filter[e[a].type].apply(null,e[a].matches),i[N]){for(o=++a;r>o&&!b.relative[e[o].type];o++);return v(a>1&&d(c),a>1&&y(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(pe,"$1"),i,o>a&&f(e.slice(a,o)),r>o&&f(e=e.slice(o)),r>o&&y(e))}c.push(i)}return d(c)}function w(e,i){var r=i.length>0,s=e.length>0,n=function(o,n,a,p,l){var c,u,y,h=0,d="0",g=o&&[],v=[],f=I,w=o||s&&b.find.TAG("*",l),_=z+=null==f?1:Math.random()||.1,T=w.length;for(l&&(I=n!==P&&n);d!==T&&null!=(c=w[d]);d++){if(s&&c){for(u=0;y=e[u++];)if(y(c,n,a)){p.push(c);break}l&&(z=_)}r&&((c=!y&&c)&&h--,o&&g.push(c))}if(h+=d,r&&d!==h){for(u=0;y=i[u++];)y(g,v,n,a);if(o){if(h>0)for(;d--;)g[d]||v[d]||(v[d]=Z.call(p));v=m(v)}J.apply(p,v),l&&!o&&v.length>0&&h+i.length>1&&t.uniqueSort(p)}return l&&(z=_,I=f),g};return r?o(n):n}var _,T,b,x,k,C,M,V,I,S,L,A,P,E,R,D,F,B,O,N="sizzle"+1*new Date,j=e.document,z=0,$=0,G=i(),H=i(),U=i(),X=function(e,t){return e===t&&(L=!0),0},W=1<<31,Y={}.hasOwnProperty,q=[],Z=q.pop,K=q.push,J=q.push,Q=q.slice,ee=function(e,t){for(var i=0,o=e.length;o>i;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=oe.replace("w","w#"),se="\\["+ie+"*("+oe+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",ne=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",ae=new RegExp(ie+"+","g"),pe=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),ye=new RegExp(ne),he=new RegExp("^"+re+"$"),de={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,we=/[+~]/,_e=/'|\\/g,Te=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),be=function(e,t,i){var o="0x"+t-65536;return o!==o||i?t:0>o?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320)},xe=function(){A()};try{J.apply(q=Q.call(j.childNodes),j.childNodes),q[j.childNodes.length].nodeType}catch(ke){J={apply:q.length?function(e,t){K.apply(e,Q.call(t))}:function(e,t){for(var i=e.length,o=0;e[i++]=t[o++];);e.length=i-1}}}T=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},A=t.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:j;return o!==P&&9===o.nodeType&&o.documentElement?(P=o,E=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",xe,!1):i.attachEvent&&i.attachEvent("onunload",xe)),R=!k(o),T.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=r(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=ve.test(o.getElementsByClassName),T.getById=r(function(e){return E.appendChild(e).id=N,!o.getElementsByName||!o.getElementsByName(N).length}),T.getById?(b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&R){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},b.filter.ID=function(e){var t=e.replace(Te,be);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var t=e.replace(Te,be);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),b.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,o=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[r++];)1===i.nodeType&&o.push(i);return o}return s},b.find.CLASS=T.getElementsByClassName&&function(e,t){return R?t.getElementsByClassName(e):void 0},F=[],D=[],(T.qsa=ve.test(o.querySelectorAll))&&(r(function(e){E.appendChild(e).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+N+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+N+"+*").length||D.push(".#.+[+~]")}),r(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(T.matchesSelector=ve.test(B=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&r(function(e){T.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),F.push("!=",ne)}),D=D.length&&new RegExp(D.join("|")),F=F.length&&new RegExp(F.join("|")),t=ve.test(E.compareDocumentPosition),O=t||ve.test(E.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(i.contains?i.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},X=t?function(e,t){if(e===t)return L=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!T.sortDetached&&t.compareDocumentPosition(e)===i?e===o||e.ownerDocument===j&&O(j,e)?-1:t===o||t.ownerDocument===j&&O(j,t)?1:S?ee(S,e)-ee(S,t):0:4&i?-1:1)}:function(e,t){if(e===t)return L=!0,0;var i,r=0,s=e.parentNode,a=t.parentNode,p=[e],l=[t];if(!s||!a)return e===o?-1:t===o?1:s?-1:a?1:S?ee(S,e)-ee(S,t):0;if(s===a)return n(e,t);for(i=e;i=i.parentNode;)p.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;p[r]===l[r];)r++;return r?n(p[r],l[r]):p[r]===j?-1:l[r]===j?1:0},o):P},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==P&&A(e),i=i.replace(ue,"='$1']"),!(!T.matchesSelector||!R||F&&F.test(i)||D&&D.test(i)))try{var o=B.call(e,i);if(o||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return o}catch(r){}return t(i,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&A(e),O(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&A(e);var i=b.attrHandle[t.toLowerCase()],o=i&&Y.call(b.attrHandle,t.toLowerCase())?i(e,t,!R):void 0;return void 0!==o?o:T.attributes||!R?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],o=0,r=0;if(L=!T.detectDuplicates,S=!T.sortStable&&e.slice(0),e.sort(X),L){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return S=null,e},x=t.getText=function(e){var t,i="",o=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[o++];)i+=x(t);return i},b=t.selectors={cacheLength:50,createPseudo:o,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Te,be),e[3]=(e[3]||e[4]||e[5]||"").replace(Te,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ye.test(i)&&(t=C(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Te,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=G[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&G(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,o){return function(r){var s=t.attr(r,e);return null==s?"!="===i:i?(s+="","="===i?s===o:"!="===i?s!==o:"^="===i?o&&0===s.indexOf(o):"*="===i?o&&s.indexOf(o)>-1:"$="===i?o&&s.slice(-o.length)===o:"~="===i?(" "+s.replace(ae," ")+" ").indexOf(o)>-1:"|="===i?s===o||s.slice(0,o.length+1)===o+"-":!1):!0}},CHILD:function(e,t,i,o,r){var s="nth"!==e.slice(0,3),n="last"!==e.slice(-4),a="of-type"===t;return 1===o&&0===r?function(e){return!!e.parentNode}:function(t,i,p){var l,c,u,y,h,d,g=s!==n?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),f=!p&&!a;if(m){if(s){for(;g;){for(u=t;u=u[g];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[n?m.firstChild:m.lastChild],n&&f){for(c=m[N]||(m[N]={}),l=c[e]||[],h=l[0]===z&&l[1],y=l[0]===z&&l[2],u=h&&m.childNodes[h];u=++h&&u&&u[g]||(y=h=0)||d.pop();)if(1===u.nodeType&&++y&&u===t){c[e]=[z,h,y];break}}else if(f&&(l=(t[N]||(t[N]={}))[e])&&l[0]===z)y=l[1];else for(;(u=++h&&u&&u[g]||(y=h=0)||d.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++y||(f&&((u[N]||(u[N]={}))[e]=[z,y]),u!==t)););return y-=r,y===o||y%o===0&&y/o>=0}}},PSEUDO:function(e,i){var r,s=b.pseudos[e]||b.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[N]?s(i):s.length>1?(r=[e,e,"",i],b.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,t){for(var o,r=s(e,i),n=r.length;n--;)o=ee(e,r[n]),e[o]=!(t[o]=r[n])}):function(e){return s(e,0,r)}):s}},pseudos:{not:o(function(e){var t=[],i=[],r=M(e.replace(pe,"$1"));return r[N]?o(function(e,t,i,o){for(var s,n=r(e,null,o,[]),a=e.length;a--;)(s=n[a])&&(e[a]=!(t[a]=s))}):function(e,o,s){return t[0]=e,r(t,null,s,i),t[0]=null,!i.pop()}}),has:o(function(e){return function(i){return t(e,i).length>0}}),contains:o(function(e){return e=e.replace(Te,be),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:o(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Te,be).toLowerCase(),function(t){var i;do if(i=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===E},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[0>i?i+t:i]}),even:l(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var o=0>i?i+t:i;--o>=0;)e.push(o);return e}),gt:l(function(e,t,i){for(var o=0>i?i+t:i;++o<t;)e.push(o);return e})}},b.pseudos.nth=b.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})b.pseudos[_]=p(_);return u.prototype=b.filters=b.pseudos,b.setFilters=new u,C=t.tokenize=function(e,i){var o,r,s,n,a,p,l,c=H[e+" "];if(c)return i?0:c.slice(0);for(a=e,p=[],l=b.preFilter;a;){(!o||(r=le.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),p.push(s=[])),o=!1,(r=ce.exec(a))&&(o=r.shift(),s.push({value:o,type:r[0].replace(pe," ")}),a=a.slice(o.length));for(n in b.filter)!(r=de[n].exec(a))||l[n]&&!(r=l[n](r))||(o=r.shift(),s.push({value:o,type:n,matches:r}),a=a.slice(o.length));if(!o)break}return i?a.length:a?t.error(e):H(e,p).slice(0)},M=t.compile=function(e,t){var i,o=[],r=[],s=U[e+" "];if(!s){for(t||(t=C(e)),i=t.length;i--;)s=f(t[i]),s[N]?o.push(s):r.push(s);s=U(e,w(r,o)),s.selector=e}return s},V=t.select=function(e,t,i,o){var r,s,n,a,p,l="function"==typeof e&&e,u=!o&&C(e=l.selector||e);if(i=i||[],1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(n=s[0]).type&&T.getById&&9===t.nodeType&&R&&b.relative[s[1].type]){if(t=(b.find.ID(n.matches[0].replace(Te,be),t)||[])[0],!t)return i;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=de.needsContext.test(e)?0:s.length;r--&&(n=s[r],!b.relative[a=n.type]);)if((p=b.find[a])&&(o=p(n.matches[0].replace(Te,be),we.test(s[0].type)&&c(t.parentNode)||t))){if(s.splice(r,1),e=o.length&&y(s),!e)return J.apply(i,o),i;break}}return(l||M(e,u))(o,t,!R,i,we.test(e)&&c(t.parentNode)||t),i},T.sortStable=N.split("").sort(X).join("")===N,T.detectDuplicates=!!L,A(),T.sortDetached=r(function(e){return 1&e.compareDocumentPosition(P.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,i){var o;return i?void 0:e[t]===!0?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null}),t}(e);re.find=le,re.expr=le.selectors,re.expr[":"]=re.expr.pseudos,re.unique=le.uniqueSort,re.text=le.getText,re.isXMLDoc=le.isXML,re.contains=le.contains;var ce=re.expr.match.needsContext,ue=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ye=/^.[^:#\[\.,]*$/;re.filter=function(e,t,i){var o=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?re.find.matchesSelector(o,e)?[o]:[]:re.find.matches(e,re.grep(t,function(e){return 1===e.nodeType}))},re.fn.extend({find:function(e){var t,i=[],o=this,r=o.length;if("string"!=typeof e)return this.pushStack(re(e).filter(function(){for(t=0;r>t;t++)if(re.contains(o[t],this))return!0}));for(t=0;r>t;t++)re.find(e,o[t],i);return i=this.pushStack(r>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&ce.test(e)?re(e):e||[],!1).length}});var he,de=e.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=re.fn.init=function(e,t){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ge.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||he).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof re?t[0]:t,re.merge(this,re.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:de,!0)),ue.test(i[1])&&re.isPlainObject(t))for(i in t)re.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(o=de.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return he.find(e);this.length=1,this[0]=o}return this.context=de,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?"undefined"!=typeof he.ready?he.ready(e):e(re):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))};me.prototype=re.fn,he=re(de);var ve=/^(?:parents|prev(?:Until|All))/,fe={children:!0,contents:!0,next:!0,prev:!0};re.extend({dir:function(e,t,i){for(var o=[],r=e[t];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!re(r).is(i));)1===r.nodeType&&o.push(r),r=r[t];return o},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),re.fn.extend({has:function(e){var t,i=re(e,this),o=i.length;return this.filter(function(){for(t=0;o>t;t++)if(re.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,o=0,r=this.length,s=[],n=ce.test(e)||"string"!=typeof e?re(e,t||this.context):0;r>o;o++)for(i=this[o];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(n?n.index(i)>-1:1===i.nodeType&&re.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?re.unique(s):s)},index:function(e){return e?"string"==typeof e?re.inArray(this[0],re(e)):re.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(re.unique(re.merge(this.get(),re(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return re.dir(e,"parentNode")},parentsUntil:function(e,t,i){return re.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return re.dir(e,"nextSibling")},prevAll:function(e){return re.dir(e,"previousSibling")},nextUntil:function(e,t,i){return re.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return re.dir(e,"previousSibling",i)},siblings:function(e){return re.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return re.sibling(e.firstChild)},contents:function(e){return re.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(i,o){var r=re.map(this,t,i);return"Until"!==e.slice(-5)&&(o=i),o&&"string"==typeof o&&(r=re.filter(o,r)),this.length>1&&(fe[e]||(r=re.unique(r)),ve.test(e)&&(r=r.reverse())),this.pushStack(r)}});var we=/\S+/g,_e={};re.Callbacks=function(e){e="string"==typeof e?_e[e]||s(e):re.extend({},e);var t,i,o,r,n,a,p=[],l=!e.once&&[],c=function(s){for(i=e.memory&&s,o=!0,n=a||0,a=0,r=p.length,t=!0;p&&r>n;n++)if(p[n].apply(s[0],s[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,p&&(l?l.length&&c(l.shift()):i?p=[]:u.disable())},u={add:function(){if(p){var o=p.length;!function s(t){re.each(t,function(t,i){var o=re.type(i);"function"===o?e.unique&&u.has(i)||p.push(i):i&&i.length&&"string"!==o&&s(i)})}(arguments),t?r=p.length:i&&(a=o,c(i))}return this},remove:function(){return p&&re.each(arguments,function(e,i){for(var o;(o=re.inArray(i,p,o))>-1;)p.splice(o,1),t&&(r>=o&&r--,n>=o&&n--)}),this},has:function(e){return e?re.inArray(e,p)>-1:!(!p||!p.length)},empty:function(){return p=[],r=0,this},disable:function(){return p=l=i=void 0,this},disabled:function(){return!p},lock:function(){return l=void 0,i||u.disable(),this},locked:function(){return!l},fireWith:function(e,i){return!p||o&&!l||(i=i||[],i=[e,i.slice?i.slice():i],t?l.push(i):c(i)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(i){re.each(t,function(t,s){var n=re.isFunction(e[t])&&e[t];r[s[1]](function(){var e=n&&n.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===o?i.promise():this,n?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,o):o}},r={};return o.pipe=o.then,re.each(t,function(e,s){var n=s[2],a=s[3];o[s[1]]=n.add,a&&n.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?o:this,arguments),this},r[s[0]+"With"]=n.fireWith}),o.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,o,r=0,s=q.call(arguments),n=s.length,a=1!==n||e&&re.isFunction(e.promise)?n:0,p=1===a?e:re.Deferred(),l=function(e,i,o){return function(r){i[e]=this,o[e]=arguments.length>1?q.call(arguments):r,o===t?p.notifyWith(i,o):--a||p.resolveWith(i,o)}};if(n>1)for(t=new Array(n),i=new Array(n),o=new Array(n);n>r;r++)s[r]&&re.isFunction(s[r].promise)?s[r].promise().done(l(r,o,s)).fail(p.reject).progress(l(r,i,t)):--a;return a||p.resolveWith(o,s),p.promise()}});var Te;re.fn.ready=function(e){return re.ready.promise().done(e),this},re.extend({isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){if(e===!0?!--re.readyWait:!re.isReady){if(!de.body)return setTimeout(re.ready);re.isReady=!0,e!==!0&&--re.readyWait>0||(Te.resolveWith(de,[re]),re.fn.triggerHandler&&(re(de).triggerHandler("ready"),re(de).off("ready")))}}}),re.ready.promise=function(t){if(!Te)if(Te=re.Deferred(),"complete"===de.readyState)setTimeout(re.ready);else if(de.addEventListener)de.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{de.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var i=!1;try{i=null==e.frameElement&&de.documentElement}catch(o){}i&&i.doScroll&&!function r(){if(!re.isReady){try{i.doScroll("left")}catch(e){return setTimeout(r,50)}n(),re.ready()}}()}return Te.promise(t)};var be,xe="undefined";for(be in re(ie))break;ie.ownLast="0"!==be,ie.inlineBlockNeedsLayout=!1,re(function(){var e,t,i,o;i=de.getElementsByTagName("body")[0],i&&i.style&&(t=de.createElement("div"),o=de.createElement("div"),o.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(o).appendChild(t),typeof t.style.zoom!==xe&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(o))}),function(){var e=de.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(t){ie.deleteExpando=!1}}e=null}(),re.acceptData=function(e){var t=re.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return 1!==i&&9!==i?!1:!t||t!==!0&&e.getAttribute("classid")===t};var ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ce=/([A-Z])/g;re.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?re.cache[e[re.expando]]:e[re.expando],!!e&&!l(e)},data:function(e,t,i){return c(e,t,i)},removeData:function(e,t){return u(e,t)},_data:function(e,t,i){return c(e,t,i,!0)},_removeData:function(e,t){return u(e,t,!0)}}),re.fn.extend({data:function(e,t){var i,o,r,s=this[0],n=s&&s.attributes;if(void 0===e){if(this.length&&(r=re.data(s),1===s.nodeType&&!re._data(s,"parsedAttrs"))){for(i=n.length;i--;)n[i]&&(o=n[i].name,0===o.indexOf("data-")&&(o=re.camelCase(o.slice(5)),p(s,o,r[o])));re._data(s,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){re.data(this,e)}):arguments.length>1?this.each(function(){re.data(this,e,t)}):s?p(s,e,re.data(s,e)):void 0},removeData:function(e){return this.each(function(){re.removeData(this,e)})}}),re.extend({queue:function(e,t,i){var o;return e?(t=(t||"fx")+"queue",o=re._data(e,t),i&&(!o||re.isArray(i)?o=re._data(e,t,re.makeArray(i)):o.push(i)),o||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=re.queue(e,t),o=i.length,r=i.shift(),s=re._queueHooks(e,t),n=function(){re.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),o--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,n,s)),!o&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return re._data(e,i)||re._data(e,i,{empty:re.Callbacks("once memory").add(function(){re._removeData(e,t+"queue"),re._removeData(e,i)})})}}),re.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?re.queue(this[0],e):void 0===t?this:this.each(function(){var i=re.queue(this,e,t);re._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,o=1,r=re.Deferred(),s=this,n=this.length,a=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";n--;)i=re._data(s[n],e+"queueHooks"),i&&i.empty&&(o++,i.empty.add(a));return a(),r.promise(t)}});var Me=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ve=["Top","Right","Bottom","Left"],Ie=function(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)},Se=re.access=function(e,t,i,o,r,s,n){var a=0,p=e.length,l=null==i;if("object"===re.type(i)){r=!0;for(a in i)re.access(e,t,a,i[a],!0,s,n)}else if(void 0!==o&&(r=!0,re.isFunction(o)||(n=!0),l&&(n?(t.call(e,o),t=null):(l=t,t=function(e,t,i){return l.call(re(e),i)})),t))for(;p>a;a++)t(e[a],i,n?o:o.call(e[a],a,t(e[a],i)));return r?e:l?t.call(e):p?t(e[0],i):s},Le=/^(?:checkbox|radio)$/i;!function(){var e=de.createElement("input"),t=de.createElement("div"),i=de.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===t.firstChild.nodeType,ie.tbody=!t.getElementsByTagName("tbody").length,ie.htmlSerialize=!!t.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==de.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),ie.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ie.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(o){ie.deleteExpando=!1}}}(),function(){var t,i,o=de.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(ie[t+"Bubbles"]=i in e)||(o.setAttribute(i,"t"),ie[t+"Bubbles"]=o.attributes[i].expando===!1);o=null}();var Ae=/^(?:input|select|textarea)$/i,Pe=/^key/,Ee=/^(?:mouse|pointer|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(e,t,i,o,r){var s,n,a,p,l,c,u,y,h,d,g,m=re._data(e);if(m){for(i.handler&&(p=i,i=p.handler,r=p.selector),i.guid||(i.guid=re.guid++),(n=m.events)||(n=m.events={}),(c=m.handle)||(c=m.handle=function(e){return typeof re===xe||e&&re.event.triggered===e.type?void 0:re.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(we)||[""],a=t.length;a--;)s=De.exec(t[a])||[],h=g=s[1],d=(s[2]||"").split(".").sort(),h&&(l=re.event.special[h]||{},h=(r?l.delegateType:l.bindType)||h,l=re.event.special[h]||{},u=re.extend({type:h,origType:g,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:d.join(".")},p),(y=n[h])||(y=n[h]=[],y.delegateCount=0,l.setup&&l.setup.call(e,o,d,c)!==!1||(e.addEventListener?e.addEventListener(h,c,!1):e.attachEvent&&e.attachEvent("on"+h,c))),l.add&&(l.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?y.splice(y.delegateCount++,0,u):y.push(u),re.event.global[h]=!0);e=null}},remove:function(e,t,i,o,r){var s,n,a,p,l,c,u,y,h,d,g,m=re.hasData(e)&&re._data(e);if(m&&(c=m.events)){for(t=(t||"").match(we)||[""],l=t.length;l--;)if(a=De.exec(t[l])||[],h=g=a[1],d=(a[2]||"").split(".").sort(),h){for(u=re.event.special[h]||{},h=(o?u.delegateType:u.bindType)||h,y=c[h]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),p=s=y.length;s--;)n=y[s],!r&&g!==n.origType||i&&i.guid!==n.guid||a&&!a.test(n.namespace)||o&&o!==n.selector&&("**"!==o||!n.selector)||(y.splice(s,1),n.selector&&y.delegateCount--,u.remove&&u.remove.call(e,n));p&&!y.length&&(u.teardown&&u.teardown.call(e,d,m.handle)!==!1||re.removeEvent(e,h,m.handle),delete c[h])}else for(h in c)re.event.remove(e,h+t[l],i,o,!0);re.isEmptyObject(c)&&(delete m.handle,re._removeData(e,"events"))}},trigger:function(t,i,o,r){var s,n,a,p,l,c,u,y=[o||de],h=te.call(t,"type")?t.type:t,d=te.call(t,"namespace")?t.namespace.split("."):[];if(a=c=o=o||de,3!==o.nodeType&&8!==o.nodeType&&!Re.test(h+re.event.triggered)&&(h.indexOf(".")>=0&&(d=h.split("."),h=d.shift(),d.sort()),n=h.indexOf(":")<0&&"on"+h,t=t[re.expando]?t:new re.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),i=null==i?[t]:re.makeArray(i,[t]),l=re.event.special[h]||{},r||!l.trigger||l.trigger.apply(o,i)!==!1)){if(!r&&!l.noBubble&&!re.isWindow(o)){for(p=l.delegateType||h,Re.test(p+h)||(a=a.parentNode);a;a=a.parentNode)y.push(a),c=a;c===(o.ownerDocument||de)&&y.push(c.defaultView||c.parentWindow||e)}for(u=0;(a=y[u++])&&!t.isPropagationStopped();)t.type=u>1?p:l.bindType||h,s=(re._data(a,"events")||{})[t.type]&&re._data(a,"handle"),s&&s.apply(a,i),s=n&&a[n],s&&s.apply&&re.acceptData(a)&&(t.result=s.apply(a,i),t.result===!1&&t.preventDefault());if(t.type=h,!r&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(y.pop(),i)===!1)&&re.acceptData(o)&&n&&o[h]&&!re.isWindow(o)){c=o[n],c&&(o[n]=null),re.event.triggered=h;try{o[h]()}catch(g){}re.event.triggered=void 0,c&&(o[n]=c)}return t.result}},dispatch:function(e){e=re.event.fix(e);var t,i,o,r,s,n=[],a=q.call(arguments),p=(re._data(this,"events")||{})[e.type]||[],l=re.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(n=re.event.handlers.call(this,e,p),t=0;(r=n[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,s=0;(o=r.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((re.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),
e.result}},handlers:function(e,t){var i,o,r,s,n=[],a=t.delegateCount,p=e.target;if(a&&p.nodeType&&(!e.button||"click"!==e.type))for(;p!=this;p=p.parentNode||this)if(1===p.nodeType&&(p.disabled!==!0||"click"!==e.type)){for(r=[],s=0;a>s;s++)o=t[s],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?re(i,this).index(p)>=0:re.find(i,this,null,[p]).length),r[i]&&r.push(o);r.length&&n.push({elem:p,handlers:r})}return a<t.length&&n.push({elem:this,handlers:t.slice(a)}),n},fix:function(e){if(e[re.expando])return e;var t,i,o,r=e.type,s=e,n=this.fixHooks[r];for(n||(this.fixHooks[r]=n=Ee.test(r)?this.mouseHooks:Pe.test(r)?this.keyHooks:{}),o=n.props?this.props.concat(n.props):this.props,e=new re.Event(s),t=o.length;t--;)i=o[t],e[i]=s[i];return e.target||(e.target=s.srcElement||de),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,n.filter?n.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,o,r,s=t.button,n=t.fromElement;return null==e.pageX&&null!=t.clientX&&(o=e.target.ownerDocument||de,r=o.documentElement,i=o.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&n&&(e.relatedTarget=n===e.target?t.toElement:n),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==d()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return re.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return re.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,o){var r=re.extend(new re.Event,i,{type:e,isSimulated:!0,originalEvent:{}});o?re.event.trigger(r,null,t):re.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},re.removeEvent=de.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var o="on"+t;e.detachEvent&&(typeof e[o]===xe&&(e[o]=null),e.detachEvent(o,i))},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?y:h):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=y,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=y,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=y,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,o=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==o&&!re.contains(o,r))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),ie.submitBubbles||(re.event.special.submit={setup:function(){return re.nodeName(this,"form")?!1:void re.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=re.nodeName(t,"input")||re.nodeName(t,"button")?t.form:void 0;i&&!re._data(i,"submitBubbles")&&(re.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),re._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&re.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return re.nodeName(this,"form")?!1:void re.event.remove(this,"._submit")}}),ie.changeBubbles||(re.event.special.change={setup:function(){return Ae.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(re.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),re.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),re.event.simulate("change",this,e,!0)})),!1):void re.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ae.test(t.nodeName)&&!re._data(t,"changeBubbles")&&(re.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||re.event.simulate("change",this.parentNode,e,!0)}),re._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return re.event.remove(this,"._change"),!Ae.test(this.nodeName)}}),ie.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){re.event.simulate(t,e.target,re.event.fix(e),!0)};re.event.special[t]={setup:function(){var o=this.ownerDocument||this,r=re._data(o,t);r||o.addEventListener(e,i,!0),re._data(o,t,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this,r=re._data(o,t)-1;r?re._data(o,t,r):(o.removeEventListener(e,i,!0),re._removeData(o,t))}}}),re.fn.extend({on:function(e,t,i,o,r){var s,n;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(s in e)this.on(s,t,i,e[s],r);return this}if(null==i&&null==o?(o=t,i=t=void 0):null==o&&("string"==typeof t?(o=i,i=void 0):(o=i,i=t,t=void 0)),o===!1)o=h;else if(!o)return this;return 1===r&&(n=o,o=function(e){return re().off(e),n.apply(this,arguments)},o.guid=n.guid||(n.guid=re.guid++)),this.each(function(){re.event.add(this,e,o,i,t)})},one:function(e,t,i,o){return this.on(e,t,i,o,1)},off:function(e,t,i){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,re(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=h),this.each(function(){re.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?re.event.trigger(e,t,i,!0):void 0}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Be=/ jQuery\d+="(?:null|\d+)"/g,Oe=new RegExp("<(?:"+Fe+")[\\s/>]","i"),Ne=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,$e=/<tbody/i,Ge=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^$|\/(?:java|ecma)script/i,We=/^true\/(.*)/,Ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,qe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ze=g(de),Ke=Ze.appendChild(de.createElement("div"));qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td,re.extend({clone:function(e,t,i){var o,r,s,n,a,p=re.contains(e.ownerDocument,e);if(ie.html5Clone||re.isXMLDoc(e)||!Oe.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ke.innerHTML=e.outerHTML,Ke.removeChild(s=Ke.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(o=m(s),a=m(e),n=0;null!=(r=a[n]);++n)o[n]&&x(r,o[n]);if(t)if(i)for(a=a||m(e),o=o||m(s),n=0;null!=(r=a[n]);n++)b(r,o[n]);else b(e,s);return o=m(s,"script"),o.length>0&&T(o,!p&&m(e,"script")),o=a=r=null,s},buildFragment:function(e,t,i,o){for(var r,s,n,a,p,l,c,u=e.length,y=g(t),h=[],d=0;u>d;d++)if(s=e[d],s||0===s)if("object"===re.type(s))re.merge(h,s.nodeType?[s]:s);else if(Ge.test(s)){for(a=a||y.appendChild(t.createElement("div")),p=(ze.exec(s)||["",""])[1].toLowerCase(),c=qe[p]||qe._default,a.innerHTML=c[1]+s.replace(je,"<$1></$2>")+c[2],r=c[0];r--;)a=a.lastChild;if(!ie.leadingWhitespace&&Ne.test(s)&&h.push(t.createTextNode(Ne.exec(s)[0])),!ie.tbody)for(s="table"!==p||$e.test(s)?"<table>"!==c[1]||$e.test(s)?0:a:a.firstChild,r=s&&s.childNodes.length;r--;)re.nodeName(l=s.childNodes[r],"tbody")&&!l.childNodes.length&&s.removeChild(l);for(re.merge(h,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=y.lastChild}else h.push(t.createTextNode(s));for(a&&y.removeChild(a),ie.appendChecked||re.grep(m(h,"input"),v),d=0;s=h[d++];)if((!o||-1===re.inArray(s,o))&&(n=re.contains(s.ownerDocument,s),a=m(y.appendChild(s),"script"),n&&T(a),i))for(r=0;s=a[r++];)Xe.test(s.type||"")&&i.push(s);return a=null,y},cleanData:function(e,t){for(var i,o,r,s,n=0,a=re.expando,p=re.cache,l=ie.deleteExpando,c=re.event.special;null!=(i=e[n]);n++)if((t||re.acceptData(i))&&(r=i[a],s=r&&p[r])){if(s.events)for(o in s.events)c[o]?re.event.remove(i,o):re.removeEvent(i,o,s.handle);p[r]&&(delete p[r],l?delete i[a]:typeof i.removeAttribute!==xe?i.removeAttribute(a):i[a]=null,Y.push(r))}}}),re.fn.extend({text:function(e){return Se(this,function(e){return void 0===e?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||de).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,o=e?re.filter(e,this):this,r=0;null!=(i=o[r]);r++)t||1!==i.nodeType||re.cleanData(m(i)),i.parentNode&&(t&&re.contains(i.ownerDocument,i)&&T(m(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&re.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&re.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},i=0,o=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Be,""):void 0;if(!("string"!=typeof e||He.test(e)||!ie.htmlSerialize&&Oe.test(e)||!ie.leadingWhitespace&&Ne.test(e)||qe[(ze.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(je,"<$1></$2>");try{for(;o>i;i++)t=this[i]||{},1===t.nodeType&&(re.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,re.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Z.apply([],e);var i,o,r,s,n,a,p=0,l=this.length,c=this,u=l-1,y=e[0],h=re.isFunction(y);if(h||l>1&&"string"==typeof y&&!ie.checkClone&&Ue.test(y))return this.each(function(i){var o=c.eq(i);h&&(e[0]=y.call(this,i,o.html())),o.domManip(e,t)});if(l&&(a=re.buildFragment(e,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(s=re.map(m(a,"script"),w),r=s.length;l>p;p++)o=a,p!==u&&(o=re.clone(o,!0,!0),r&&re.merge(s,m(o,"script"))),t.call(this[p],o,p);if(r)for(n=s[s.length-1].ownerDocument,re.map(s,_),p=0;r>p;p++)o=s[p],Xe.test(o.type||"")&&!re._data(o,"globalEval")&&re.contains(n,o)&&(o.src?re._evalUrl&&re._evalUrl(o.src):re.globalEval((o.text||o.textContent||o.innerHTML||"").replace(Ye,"")));a=i=null}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var i,o=0,r=[],s=re(e),n=s.length-1;n>=o;o++)i=o===n?this:this.clone(!0),re(s[o])[t](i),K.apply(r,i.get());return this.pushStack(r)}});var Je,Qe={};!function(){var e;ie.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,i,o;return i=de.getElementsByTagName("body")[0],i&&i.style?(t=de.createElement("div"),o=de.createElement("div"),o.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(o).appendChild(t),typeof t.style.zoom!==xe&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(de.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(o),e):void 0}}();var et,tt,it=/^margin/,ot=new RegExp("^("+Me+")(?!px)[a-z%]+$","i"),rt=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tt=function(e,t,i){var o,r,s,n,a=e.style;return i=i||et(e),n=i?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==n||re.contains(e.ownerDocument,e)||(n=re.style(e,t)),ot.test(n)&&it.test(t)&&(o=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=n,n=i.width,a.width=o,a.minWidth=r,a.maxWidth=s)),void 0===n?n:n+""}):de.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,i){var o,r,s,n,a=e.style;return i=i||et(e),n=i?i[t]:void 0,null==n&&a&&a[t]&&(n=a[t]),ot.test(n)&&!rt.test(t)&&(o=a.left,r=e.runtimeStyle,s=r&&r.left,s&&(r.left=e.currentStyle.left),a.left="fontSize"===t?"1em":n,n=a.pixelLeft+"px",a.left=o,s&&(r.left=s)),void 0===n?n:n+""||"auto"}),function(){function t(){var t,i,o,r;i=de.getElementsByTagName("body")[0],i&&i.style&&(t=de.createElement("div"),o=de.createElement("div"),o.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(o).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=n=!1,p=!0,e.getComputedStyle&&(s="1%"!==(e.getComputedStyle(t,null)||{}).top,n="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(de.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",p=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight),t.removeChild(r)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===r[0].offsetHeight,a&&(r[0].style.display="",r[1].style.display="none",a=0===r[0].offsetHeight),i.removeChild(o))}var i,o,r,s,n,a,p;i=de.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=i.getElementsByTagName("a")[0],o=r&&r.style,o&&(o.cssText="float:left;opacity:.5",ie.opacity="0.5"===o.opacity,ie.cssFloat=!!o.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===o.boxSizing||""===o.MozBoxSizing||""===o.WebkitBoxSizing,re.extend(ie,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==n&&t(),n},pixelPosition:function(){return null==s&&t(),s},reliableMarginRight:function(){return null==p&&t(),p}}))}(),re.swap=function(e,t,i,o){var r,s,n={};for(s in t)n[s]=e.style[s],e.style[s]=t[s];r=i.apply(e,o||[]);for(s in t)e.style[s]=n[s];return r};var st=/alpha\([^)]*\)/i,nt=/opacity\s*=\s*([^)]*)/,at=/^(none|table(?!-c[ea]).+)/,pt=new RegExp("^("+Me+")(.*)$","i"),lt=new RegExp("^([+-])=("+Me+")","i"),ct={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:"0",fontWeight:"400"},yt=["Webkit","O","Moz","ms"];re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=tt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,n,a=re.camelCase(t),p=e.style;if(t=re.cssProps[a]||(re.cssProps[a]=V(p,a)),n=re.cssHooks[t]||re.cssHooks[a],void 0===i)return n&&"get"in n&&void 0!==(r=n.get(e,!1,o))?r:p[t];if(s=typeof i,"string"===s&&(r=lt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(re.css(e,t)),s="number"),null!=i&&i===i&&("number"!==s||re.cssNumber[a]||(i+="px"),ie.clearCloneStyle||""!==i||0!==t.indexOf("background")||(p[t]="inherit"),!(n&&"set"in n&&void 0===(i=n.set(e,i,o)))))try{p[t]=i}catch(l){}}},css:function(e,t,i,o){var r,s,n,a=re.camelCase(t);return t=re.cssProps[a]||(re.cssProps[a]=V(e.style,a)),n=re.cssHooks[t]||re.cssHooks[a],n&&"get"in n&&(s=n.get(e,!0,i)),void 0===s&&(s=tt(e,t,o)),"normal"===s&&t in ut&&(s=ut[t]),""===i||i?(r=parseFloat(s),i===!0||re.isNumeric(r)?r||0:s):s}}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,i,o){return i?at.test(re.css(e,"display"))&&0===e.offsetWidth?re.swap(e,ct,function(){return A(e,t,o)}):A(e,t,o):void 0},set:function(e,i,o){var r=o&&et(e);return S(e,i,o?L(e,t,o,ie.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,r),r):0)}}}),ie.opacity||(re.cssHooks.opacity={get:function(e,t){return nt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,o=e.currentStyle,r=re.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=o&&o.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===re.trim(s.replace(st,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||o&&!o.filter)||(i.filter=st.test(s)?s.replace(st,r):s+" "+r)}}),re.cssHooks.marginRight=M(ie.reliableMarginRight,function(e,t){return t?re.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(i){for(var o=0,r={},s="string"==typeof i?i.split(" "):[i];4>o;o++)r[e+Ve[o]+t]=s[o]||s[o-2]||s[0];return r}},it.test(e)||(re.cssHooks[e+t].set=S)}),re.fn.extend({css:function(e,t){return Se(this,function(e,t,i){var o,r,s={},n=0;if(re.isArray(t)){for(o=et(e),r=t.length;r>n;n++)s[t[n]]=re.css(e,t[n],!1,o);return s}return void 0!==i?re.style(e,t,i):re.css(e,t)},e,t,arguments.length>1)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ie(this)?re(this).show():re(this).hide()})}}),re.Tween=P,P.prototype={constructor:P,init:function(e,t,i,o,r,s){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=s||(re.cssNumber[i]?"":"px")},cur:function(){var e=P.propHooks[this.prop];return e&&e.get?e.get(this):P.propHooks._default.get(this)},run:function(e){var t,i=P.propHooks[this.prop];return this.pos=t=this.options.duration?re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[re.cssProps[e.prop]]||re.cssHooks[e.prop])?re.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},re.fx=P.prototype.init,re.fx.step={};var ht,dt,gt=/^(?:toggle|show|hide)$/,mt=new RegExp("^(?:([+-])=|)("+Me+")([a-z%]*)$","i"),vt=/queueHooks$/,ft=[F],wt={"*":[function(e,t){var i=this.createTween(e,t),o=i.cur(),r=mt.exec(t),s=r&&r[3]||(re.cssNumber[e]?"":"px"),n=(re.cssNumber[e]||"px"!==s&&+o)&&mt.exec(re.css(i.elem,e)),a=1,p=20;if(n&&n[3]!==s){s=s||n[3],r=r||[],n=+o||1;do a=a||".5",n/=a,re.style(i.elem,e,n+s);while(a!==(a=i.cur()/o)&&1!==a&&--p)}return r&&(n=i.start=+n||+o||0,i.unit=s,i.end=r[1]?n+(r[1]+1)*r[2]:+r[2]),i}]};re.Animation=re.extend(O,{tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,o=0,r=e.length;r>o;o++)i=e[o],wt[i]=wt[i]||[],wt[i].unshift(t)},prefilter:function(e,t){t?ft.unshift(e):ft.push(e)}}),re.speed=function(e,t,i){var o=e&&"object"==typeof e?re.extend({},e):{complete:i||!i&&t||re.isFunction(e)&&e,duration:e,easing:i&&t||t&&!re.isFunction(t)&&t};return o.duration=re.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in re.fx.speeds?re.fx.speeds[o.duration]:re.fx.speeds._default,(null==o.queue||o.queue===!0)&&(o.queue="fx"),o.old=o.complete,o.complete=function(){re.isFunction(o.old)&&o.old.call(this),o.queue&&re.dequeue(this,o.queue)},o},re.fn.extend({fadeTo:function(e,t,i,o){return this.filter(Ie).css("opacity",0).show().end().animate({opacity:t},e,i,o)},animate:function(e,t,i,o){var r=re.isEmptyObject(e),s=re.speed(t,i,o),n=function(){var t=O(this,re.extend({},e),s);(r||re._data(this,"finish"))&&t.stop(!0)};return n.finish=n,r||s.queue===!1?this.each(n):this.queue(s.queue,n)},stop:function(e,t,i){var o=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=re.timers,n=re._data(this);if(r)n[r]&&n[r].stop&&o(n[r]);else for(r in n)n[r]&&n[r].stop&&vt.test(r)&&o(n[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(i),t=!1,s.splice(r,1));(t||!i)&&re.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=re._data(this),o=i[e+"queue"],r=i[e+"queueHooks"],s=re.timers,n=o?o.length:0;for(i.finish=!0,re.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;n>t;t++)o[t]&&o[t].finish&&o[t].finish.call(this);delete i.finish})}}),re.each(["toggle","show","hide"],function(e,t){var i=re.fn[t];re.fn[t]=function(e,o,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(R(t,!0),e,o,r)}}),re.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,i,o){return this.animate(t,e,i,o)}}),re.timers=[],re.fx.tick=function(){var e,t=re.timers,i=0;for(ht=re.now();i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||re.fx.stop(),ht=void 0},re.fx.timer=function(e){re.timers.push(e),e()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){dt||(dt=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(dt),dt=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(e,t){return e=re.fx?re.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var o=setTimeout(t,e);i.stop=function(){clearTimeout(o)}})},function(){var e,t,i,o,r;t=de.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=t.getElementsByTagName("a")[0],i=de.createElement("select"),r=i.appendChild(de.createElement("option")),e=t.getElementsByTagName("input")[0],o.style.cssText="top:1px",ie.getSetAttribute="t"!==t.className,ie.style=/top/.test(o.getAttribute("style")),ie.hrefNormalized="/a"===o.getAttribute("href"),ie.checkOn=!!e.value,ie.optSelected=r.selected,ie.enctype=!!de.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!r.disabled,e=de.createElement("input"),e.setAttribute("value",""),ie.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ie.radioValue="t"===e.value}();var _t=/\r/g;re.fn.extend({val:function(e){var t,i,o,r=this[0];{if(arguments.length)return o=re.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=o?e.call(this,i,re(this).val()):e,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(e){return null==e?"":e+""})),t=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(_t,""):null==i?"":i)}}}),re.extend({valHooks:{option:{get:function(e){var t=re.find.attr(e,"value");return null!=t?t:re.trim(re.text(e))}},select:{get:function(e){for(var t,i,o=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,n=s?null:[],a=s?r+1:o.length,p=0>r?a:s?r:0;a>p;p++)if(i=o[p],!(!i.selected&&p!==r||(ie.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&re.nodeName(i.parentNode,"optgroup"))){if(t=re(i).val(),s)return t;n.push(t)}return n},set:function(e,t){for(var i,o,r=e.options,s=re.makeArray(t),n=r.length;n--;)if(o=r[n],re.inArray(re.valHooks.option.get(o),s)>=0)try{o.selected=i=!0}catch(a){o.scrollHeight}else o.selected=!1;return i||(e.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(e,t){return re.isArray(t)?e.checked=re.inArray(re(e).val(),t)>=0:void 0}},ie.checkOn||(re.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Tt,bt,xt=re.expr.attrHandle,kt=/^(?:checked|selected)$/i,Ct=ie.getSetAttribute,Mt=ie.input;re.fn.extend({attr:function(e,t){return Se(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})}}),re.extend({attr:function(e,t,i){var o,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===xe?re.prop(e,t,i):(1===s&&re.isXMLDoc(e)||(t=t.toLowerCase(),o=re.attrHooks[t]||(re.expr.match.bool.test(t)?bt:Tt)),void 0===i?o&&"get"in o&&null!==(r=o.get(e,t))?r:(r=re.find.attr(e,t),null==r?void 0:r):null!==i?o&&"set"in o&&void 0!==(r=o.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void re.removeAttr(e,t))},removeAttr:function(e,t){var i,o,r=0,s=t&&t.match(we);if(s&&1===e.nodeType)for(;i=s[r++];)o=re.propFix[i]||i,re.expr.match.bool.test(i)?Mt&&Ct||!kt.test(i)?e[o]=!1:e[re.camelCase("default-"+i)]=e[o]=!1:re.attr(e,i,""),e.removeAttribute(Ct?i:o)},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&re.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),bt={set:function(e,t,i){return t===!1?re.removeAttr(e,i):Mt&&Ct||!kt.test(i)?e.setAttribute(!Ct&&re.propFix[i]||i,i):e[re.camelCase("default-"+i)]=e[i]=!0,i}},re.each(re.expr.match.bool.source.match(/\w+/g),function(e,t){var i=xt[t]||re.find.attr;xt[t]=Mt&&Ct||!kt.test(t)?function(e,t,o){var r,s;return o||(s=xt[t],xt[t]=r,r=null!=i(e,t,o)?t.toLowerCase():null,xt[t]=s),r}:function(e,t,i){return i?void 0:e[re.camelCase("default-"+t)]?t.toLowerCase():null}}),Mt&&Ct||(re.attrHooks.value={set:function(e,t,i){return re.nodeName(e,"input")?void(e.defaultValue=t):Tt&&Tt.set(e,t,i)}}),Ct||(Tt={set:function(e,t,i){var o=e.getAttributeNode(i);return o||e.setAttributeNode(o=e.ownerDocument.createAttribute(i)),o.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},xt.id=xt.name=xt.coords=function(e,t,i){var o;return i?void 0:(o=e.getAttributeNode(t))&&""!==o.value?o.value:null},re.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:Tt.set},re.attrHooks.contenteditable={set:function(e,t,i){Tt.set(e,""===t?!1:t,i)}},re.each(["width","height"],function(e,t){re.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),ie.style||(re.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Vt=/^(?:input|select|textarea|button|object)$/i,It=/^(?:a|area)$/i;re.fn.extend({prop:function(e,t){return Se(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return e=re.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),re.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var o,r,s,n=e.nodeType;if(e&&3!==n&&8!==n&&2!==n)return s=1!==n||!re.isXMLDoc(e),s&&(t=re.propFix[t]||t,r=re.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(o=r.set(e,i,t))?o:e[t]=i:r&&"get"in r&&null!==(o=r.get(e,t))?o:e[t]},propHooks:{tabIndex:{get:function(e){var t=re.find.attr(e,"tabindex");return t?parseInt(t,10):Vt.test(e.nodeName)||It.test(e.nodeName)&&e.href?0:-1}}}}),ie.hrefNormalized||re.each(["href","src"],function(e,t){re.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ie.optSelected||(re.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),ie.enctype||(re.propFix.enctype="encoding");var St=/[\t\r\n\f]/g;re.fn.extend({addClass:function(e){var t,i,o,r,s,n,a=0,p=this.length,l="string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(we)||[];p>a;a++)if(i=this[a],o=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(St," "):" ")){for(s=0;r=t[s++];)o.indexOf(" "+r+" ")<0&&(o+=r+" ");n=re.trim(o),i.className!==n&&(i.className=n)}return this},removeClass:function(e){var t,i,o,r,s,n,a=0,p=this.length,l=0===arguments.length||"string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(we)||[];p>a;a++)if(i=this[a],o=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(St," "):"")){for(s=0;r=t[s++];)for(;o.indexOf(" "+r+" ")>=0;)o=o.replace(" "+r+" "," ");n=e?re.trim(o):"",i.className!==n&&(i.className=n)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(re.isFunction(e)?function(i){re(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,o=0,r=re(this),s=e.match(we)||[];t=s[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===xe||"boolean"===i)&&(this.className&&re._data(this,"__className__",this.className),this.className=this.className||e===!1?"":re._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,o=this.length;o>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(St," ").indexOf(t)>=0)return!0;return!1}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){
re.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),re.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,o){return this.on(t,e,i,o)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Lt=re.now(),At=/\?/,Pt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;re.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,o=null,r=re.trim(t+"");return r&&!re.trim(r.replace(Pt,function(e,t,r,s){return i&&t&&(o=0),0===o?e:(i=r||t,o+=!s-!r,"")}))?Function("return "+r)():re.error("Invalid JSON: "+t)},re.parseXML=function(t){var i,o;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(o=new DOMParser,i=o.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(r){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+t),i};var Et,Rt,Dt=/#.*$/,Ft=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nt=/^(?:GET|HEAD)$/,jt=/^\/\//,zt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$t={},Gt={},Ht="*/".concat("*");try{Rt=location.href}catch(Ut){Rt=de.createElement("a"),Rt.href="",Rt=Rt.href}Et=zt.exec(Rt.toLowerCase())||[],re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt,type:"GET",isLocal:Ot.test(Et[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,re.ajaxSettings),t):z(re.ajaxSettings,e)},ajaxPrefilter:N($t),ajaxTransport:N(Gt),ajax:function(e,t){function i(e,t,i,o){var r,c,v,f,_,b=t;2!==w&&(w=2,a&&clearTimeout(a),l=void 0,n=o||"",T.readyState=e>0?4:0,r=e>=200&&300>e||304===e,i&&(f=$(u,T,i)),f=G(u,f,T,r),r?(u.ifModified&&(_=T.getResponseHeader("Last-Modified"),_&&(re.lastModified[s]=_),_=T.getResponseHeader("etag"),_&&(re.etag[s]=_)),204===e||"HEAD"===u.type?b="nocontent":304===e?b="notmodified":(b=f.state,c=f.data,v=f.error,r=!v)):(v=b,(e||!b)&&(b="error",0>e&&(e=0))),T.status=e,T.statusText=(t||b)+"",r?d.resolveWith(y,[c,b,T]):d.rejectWith(y,[T,b,v]),T.statusCode(m),m=void 0,p&&h.trigger(r?"ajaxSuccess":"ajaxError",[T,u,r?c:v]),g.fireWith(y,[T,b]),p&&(h.trigger("ajaxComplete",[T,u]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var o,r,s,n,a,p,l,c,u=re.ajaxSetup({},t),y=u.context||u,h=u.context&&(y.nodeType||y.jquery)?re(y):re.event,d=re.Deferred(),g=re.Callbacks("once memory"),m=u.statusCode||{},v={},f={},w=0,_="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!c)for(c={};t=Bt.exec(n);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?n:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return w||(e=f[i]=f[i]||e,v[e]=t),this},overrideMimeType:function(e){return w||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)m[t]=[m[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||_;return l&&l.abort(t),i(0,t),this}};if(d.promise(T).complete=g.add,T.success=T.done,T.error=T.fail,u.url=((e||u.url||Rt)+"").replace(Dt,"").replace(jt,Et[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=re.trim(u.dataType||"*").toLowerCase().match(we)||[""],null==u.crossDomain&&(o=zt.exec(u.url.toLowerCase()),u.crossDomain=!(!o||o[1]===Et[1]&&o[2]===Et[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(Et[3]||("http:"===Et[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=re.param(u.data,u.traditional)),j($t,u,t,T),2===w)return T;p=re.event&&u.global,p&&0===re.active++&&re.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Nt.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(At.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=Ft.test(s)?s.replace(Ft,"$1_="+Lt++):s+(At.test(s)?"&":"?")+"_="+Lt++)),u.ifModified&&(re.lastModified[s]&&T.setRequestHeader("If-Modified-Since",re.lastModified[s]),re.etag[s]&&T.setRequestHeader("If-None-Match",re.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&T.setRequestHeader("Content-Type",u.contentType),T.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Ht+"; q=0.01":""):u.accepts["*"]);for(r in u.headers)T.setRequestHeader(r,u.headers[r]);if(u.beforeSend&&(u.beforeSend.call(y,T,u)===!1||2===w))return T.abort();_="abort";for(r in{success:1,error:1,complete:1})T[r](u[r]);if(l=j(Gt,u,t,T)){T.readyState=1,p&&h.trigger("ajaxSend",[T,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){T.abort("timeout")},u.timeout));try{w=1,l.send(v,i)}catch(b){if(!(2>w))throw b;i(-1,b)}}else i(-1,"No Transport");return T},getJSON:function(e,t,i){return re.get(e,t,i,"json")},getScript:function(e,t){return re.get(e,void 0,t,"script")}}),re.each(["get","post"],function(e,t){re[t]=function(e,i,o,r){return re.isFunction(i)&&(r=r||o,o=i,i=void 0),re.ajax({url:e,type:t,dataType:r,data:i,success:o})}}),re._evalUrl=function(e){return re.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(e){if(re.isFunction(e))return this.each(function(t){re(this).wrapAll(e.call(this,t))});if(this[0]){var t=re(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(re.isFunction(e)?function(t){re(this).wrapInner(e.call(this,t))}:function(){var t=re(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(i){re(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||re.css(e,"display"))},re.expr.filters.visible=function(e){return!re.expr.filters.hidden(e)};var Xt=/%20/g,Wt=/\[\]$/,Yt=/\r?\n/g,qt=/^(?:submit|button|image|reset|file)$/i,Zt=/^(?:input|select|textarea|keygen)/i;re.param=function(e,t){var i,o=[],r=function(e,t){t=re.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jquery&&!re.isPlainObject(e))re.each(e,function(){r(this.name,this.value)});else for(i in e)H(i,e[i],t,r);return o.join("&").replace(Xt,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&Zt.test(this.nodeName)&&!qt.test(e)&&(this.checked||!Le.test(e))}).map(function(e,t){var i=re(this).val();return null==i?null:re.isArray(i)?re.map(i,function(e){return{name:t.name,value:e.replace(Yt,"\r\n")}}):{name:t.name,value:i.replace(Yt,"\r\n")}}).get()}}),re.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||X()}:U;var Kt=0,Jt={},Qt=re.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Jt)Jt[e](void 0,!0)}),ie.cors=!!Qt&&"withCredentials"in Qt,Qt=ie.ajax=!!Qt,Qt&&re.ajaxTransport(function(e){if(!e.crossDomain||ie.cors){var t;return{send:function(i,o){var r,s=e.xhr(),n=++Kt;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)void 0!==i[r]&&s.setRequestHeader(r,i[r]+"");s.send(e.hasContent&&e.data||null),t=function(i,r){var a,p,l;if(t&&(r||4===s.readyState))if(delete Jt[n],t=void 0,s.onreadystatechange=re.noop,r)4!==s.readyState&&s.abort();else{l={},a=s.status,"string"==typeof s.responseText&&(l.text=s.responseText);try{p=s.statusText}catch(c){p=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=l.text?200:404}l&&o(a,p,l,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Jt[n]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),re.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=de.head||re("head")[0]||de.documentElement;return{send:function(o,r){t=de.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||r(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ei=[],ti=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ei.pop()||re.expando+"_"+Lt++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(t,i,o){var r,s,n,a=t.jsonp!==!1&&(ti.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ti,"$1"+r):t.jsonp!==!1&&(t.url+=(At.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return n||re.error(r+" was not called"),n[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){n=arguments},o.always(function(){e[r]=s,t[r]&&(t.jsonpCallback=i.jsonpCallback,ei.push(r)),n&&re.isFunction(s)&&s(n[0]),n=s=void 0}),"script"):void 0}),re.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||de;var o=ue.exec(e),r=!i&&[];return o?[t.createElement(o[1])]:(o=re.buildFragment([e],t,r),r&&r.length&&re(r).remove(),re.merge([],o.childNodes))};var ii=re.fn.load;re.fn.load=function(e,t,i){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var o,r,s,n=this,a=e.indexOf(" ");return a>=0&&(o=re.trim(e.slice(a,e.length)),e=e.slice(0,a)),re.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(s="POST"),n.length>0&&re.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){r=arguments,n.html(o?re("<div>").append(re.parseHTML(e)).find(o):e)}).complete(i&&function(e,t){n.each(i,r||[e.responseText,t,e])}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length};var oi=e.document.documentElement;re.offset={setOffset:function(e,t,i){var o,r,s,n,a,p,l,c=re.css(e,"position"),u=re(e),y={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=re.css(e,"top"),p=re.css(e,"left"),l=("absolute"===c||"fixed"===c)&&re.inArray("auto",[s,p])>-1,l?(o=u.position(),n=o.top,r=o.left):(n=parseFloat(s)||0,r=parseFloat(p)||0),re.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(y.top=t.top-a.top+n),null!=t.left&&(y.left=t.left-a.left+r),"using"in t?t.using.call(e,y):u.css(y)}},re.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){re.offset.setOffset(this,e,t)});var t,i,o={top:0,left:0},r=this[0],s=r&&r.ownerDocument;if(s)return t=s.documentElement,re.contains(t,r)?(typeof r.getBoundingClientRect!==xe&&(o=r.getBoundingClientRect()),i=W(s),{top:o.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:o.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):o},position:function(){if(this[0]){var e,t,i={top:0,left:0},o=this[0];return"fixed"===re.css(o,"position")?t=o.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(i=e.offset()),i.top+=re.css(e[0],"borderTopWidth",!0),i.left+=re.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-re.css(o,"marginTop",!0),left:t.left-i.left-re.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||oi;e&&!re.nodeName(e,"html")&&"static"===re.css(e,"position");)e=e.offsetParent;return e||oi})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);re.fn[e]=function(o){return Se(this,function(e,o,r){var s=W(e);return void 0===r?s?t in s?s[t]:s.document.documentElement[o]:e[o]:void(s?s.scrollTo(i?re(s).scrollLeft():r,i?r:re(s).scrollTop()):e[o]=r)},e,o,arguments.length,null)}}),re.each(["top","left"],function(e,t){re.cssHooks[t]=M(ie.pixelPosition,function(e,i){return i?(i=tt(e,t),ot.test(i)?re(e).position()[t]+"px":i):void 0})}),re.each({Height:"height",Width:"width"},function(e,t){re.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,o){re.fn[o]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),n=i||(o===!0||r===!0?"margin":"border");return Se(this,function(t,i,o){var r;return re.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?re.css(t,i,n):re.style(t,i,o,n)},t,s?o:void 0,s,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var ri=e.jQuery,si=e.$;return re.noConflict=function(t){return e.$===re&&(e.$=si),t&&e.jQuery===re&&(e.jQuery=ri),re},typeof t===xe&&(e.jQuery=e.$=re),re})},{}],25:[function(e,t,i){!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(o)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,o=e.ui.mouse.prototype,r=o._mouseInit,s=o._mouseDestroy;o._touchStart=function(e){var o=this;!i&&o._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,o._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},o._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},o._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},o._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)},o._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)}}}(jQuery)},{}],26:[function(e,t,i){!function(){"use strict";var e=function(e){return e="number"==typeof e?{precision:e}:e||{},e.precision=e.precision||5,e.factor=e.factor||Math.pow(10,e.precision),e.dimension=e.dimension||2,e},i={encode:function(t,i){i=e(i);for(var o=[],r=0,s=t.length;s>r;++r){var n=t[r];if(2===i.dimension)o.push(n.lat||n[0]),o.push(n.lng||n[1]);else for(var a=0;a<i.dimension;++a)o.push(n[a])}return this.encodeDeltas(o,i)},decode:function(t,i){i=e(i);for(var o=this.decodeDeltas(t,i),r=[],s=0,n=o.length;s+(i.dimension-1)<n;){for(var a=[],p=0;p<i.dimension;++p)a.push(o[s++]);r.push(a)}return r},encodeDeltas:function(t,i){i=e(i);for(var o=[],r=0,s=t.length;s>r;)for(var n=0;n<i.dimension;++n,++r){var a=t[r],p=a-(o[n]||0);o[n]=a,t[r]=p}return this.encodeFloats(t,i)},decodeDeltas:function(t,i){i=e(i);for(var o=[],r=this.decodeFloats(t,i),s=0,n=r.length;n>s;)for(var a=0;a<i.dimension;++a,++s)r[s]=Math.round((o[a]=r[s]+(o[a]||0))*i.factor)/i.factor;return r},encodeFloats:function(t,i){i=e(i);for(var o=0,r=t.length;r>o;++o)t[o]=Math.round(t[o]*i.factor);return this.encodeSignedIntegers(t)},decodeFloats:function(t,i){i=e(i);for(var o=this.decodeSignedIntegers(t),r=0,s=o.length;s>r;++r)o[r]/=i.factor;return o},encodeSignedIntegers:function(e){for(var t=0,i=e.length;i>t;++t){var o=e[t];e[t]=0>o?~(o<<1):o<<1}return this.encodeUnsignedIntegers(e)},decodeSignedIntegers:function(e){for(var t=this.decodeUnsignedIntegers(e),i=0,o=t.length;o>i;++i){var r=t[i];t[i]=1&r?~(r>>1):r>>1}return t},encodeUnsignedIntegers:function(e){for(var t="",i=0,o=e.length;o>i;++i)t+=this.encodeUnsignedInteger(e[i]);return t},decodeUnsignedIntegers:function(e){for(var t=[],i=0,o=0,r=0,s=e.length;s>r;++r){var n=e.charCodeAt(r)-63;i|=(31&n)<<o,32>n?(t.push(i),i=0,o=0):o+=5}return t},encodeSignedInteger:function(e){return e=0>e?~(e<<1):e<<1,this.encodeUnsignedInteger(e)},encodeUnsignedInteger:function(e){for(var t,i="";e>=32;)t=(32|31&e)+63,i+=String.fromCharCode(t),e>>=5;return t=e+63,i+=String.fromCharCode(t)}};if("object"==typeof t&&"object"==typeof t.exports&&(t.exports=i),"object"==typeof L){L.Polyline.prototype.fromEncoded||(L.Polyline.fromEncoded=function(e,t){return L.polyline(i.decode(e),t)}),L.Polygon.prototype.fromEncoded||(L.Polygon.fromEncoded=function(e,t){return L.polygon(i.decode(e),t)});var o={encodePath:function(){return i.encode(this.getLatLngs())}};L.Polyline.prototype.encodePath||L.Polyline.include(o),L.Polygon.prototype.encodePath||L.Polygon.include(o),L.PolylineUtil=i}}()},{}],27:[function(e,t,i){!function(e,i,o){var r=e.L,s={};s.version="0.7.7","object"==typeof t&&"object"==typeof t.exports?t.exports=s:"function"==typeof define&&define.amd&&define(s),s.noConflict=function(){return e.L=r,this},e.L=s,s.Util={extend:function(e){var t,i,o,r,s=Array.prototype.slice.call(arguments,1);for(i=0,o=s.length;o>i;i++){r=s[i]||{};for(t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return e},bind:function(e,t){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,i||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(i){return i[t]=i[t]||++e,i[t]}}(),invokeEach:function(e,t,i){var o,r;if("object"==typeof e){r=Array.prototype.slice.call(arguments,3);for(o in e)t.apply(i,[o,e[o]].concat(r));return!0}return!1},limitExecByInterval:function(e,t,i){var o,r;return function s(){var n=arguments;return o?void(r=!0):(o=!0,setTimeout(function(){o=!1,r&&(s.apply(i,n),r=!1)},t),void e.apply(i,n))}},falseFn:function(){return!1},formatNum:function(e,t){var i=Math.pow(10,t||5);return Math.round(e*i)/i},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return s.Util.trim(e).split(/\s+/)},setOptions:function(e,t){return e.options=s.extend({},e.options,t),e.options},getParamString:function(e,t,i){var o=[];for(var r in e)o.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+o.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,i){var r=t[i];if(r===o)throw new Error("No value provided for variable "+e);return"function"==typeof r&&(r=r(t)),r})},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var i,o,r=["webkit","moz","o","ms"];for(i=0;i<r.length&&!o;i++)o=e[r[i]+t];return o}function i(t){var i=+new Date,r=Math.max(0,16-(i-o));return o=i+r,e.setTimeout(t,r)}var o=0,r=e.requestAnimationFrame||t("RequestAnimationFrame")||i,n=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};s.Util.requestAnimFrame=function(t,o,n,a){return t=s.bind(t,o),n&&r===i?void t():r.call(e,t,a)},s.Util.cancelAnimFrame=function(t){t&&n.call(e,t)}}(),s.extend=s.Util.extend,s.bind=s.Util.bind,s.stamp=s.Util.stamp,s.setOptions=s.Util.setOptions,s.Class=function(){},s.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var o=new i;o.constructor=t,t.prototype=o;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&(t[r]=this[r]);e.statics&&(s.extend(t,e.statics),delete e.statics),e.includes&&(s.Util.extend.apply(null,[o].concat(e.includes)),delete e.includes),e.options&&o.options&&(e.options=s.extend({},o.options,e.options)),s.extend(o,e),o._initHooks=[];var n=this;return t.__super__=n.prototype,o.callInitHooks=function(){if(!this._initHooksCalled){n.prototype.callInitHooks&&n.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;t>e;e++)o._initHooks[e].call(this)}},t},s.Class.include=function(e){s.extend(this.prototype,e)},s.Class.mergeOptions=function(e){s.extend(this.prototype.options,e)},s.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var n="_leaflet_events";s.Mixin={},s.Mixin.Events={addEventListener:function(e,t,i){if(s.Util.invokeEach(e,this.addEventListener,this,t,i))return this;var o,r,a,p,l,c,u,y=this[n]=this[n]||{},h=i&&i!==this&&s.stamp(i);for(e=s.Util.splitWords(e),o=0,r=e.length;r>o;o++)a={action:t,context:i||this},p=e[o],h?(l=p+"_idx",c=l+"_len",u=y[l]=y[l]||{},u[h]||(u[h]=[],y[c]=(y[c]||0)+1),u[h].push(a)):(y[p]=y[p]||[],y[p].push(a));return this},hasEventListeners:function(e){var t=this[n];return!!t&&(e in t&&t[e].length>0||e+"_idx"in t&&t[e+"_idx_len"]>0)},removeEventListener:function(e,t,i){if(!this[n])return this;if(!e)return this.clearAllEventListeners();if(s.Util.invokeEach(e,this.removeEventListener,this,t,i))return this;var o,r,a,p,l,c,u,y,h,d=this[n],g=i&&i!==this&&s.stamp(i);for(e=s.Util.splitWords(e),o=0,r=e.length;r>o;o++)if(a=e[o],c=a+"_idx",u=c+"_len",y=d[c],t){if(p=g&&y?y[g]:d[a]){for(l=p.length-1;l>=0;l--)p[l].action!==t||i&&p[l].context!==i||(h=p.splice(l,1),h[0].action=s.Util.falseFn);i&&y&&0===p.length&&(delete y[g],d[u]--)}}else delete d[a],delete d[c],delete d[u];return this},clearAllEventListeners:function(){return delete this[n],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var i,o,r,a,p,l=s.Util.extend({},t,{type:e,target:this}),c=this[n];if(c[e])for(i=c[e].slice(),o=0,r=i.length;r>o;o++)i[o].action.call(i[o].context,l);a=c[e+"_idx"];for(p in a)if(i=a[p].slice())for(o=0,r=i.length;r>o;o++)i[o].action.call(i[o].context,l);return this},addOneTimeEventListener:function(e,t,i){if(s.Util.invokeEach(e,this.addOneTimeEventListener,this,t,i))return this;var o=s.bind(function(){this.removeEventListener(e,t,i).removeEventListener(e,o,i)},this);return this.addEventListener(e,t,i).addEventListener(e,o,i)}},s.Mixin.Events.on=s.Mixin.Events.addEventListener,s.Mixin.Events.off=s.Mixin.Events.removeEventListener,s.Mixin.Events.once=s.Mixin.Events.addOneTimeEventListener,s.Mixin.Events.fire=s.Mixin.Events.fireEvent,function(){var t="ActiveXObject"in e,r=t&&!i.addEventListener,n=navigator.userAgent.toLowerCase(),a=-1!==n.indexOf("webkit"),p=-1!==n.indexOf("chrome"),l=-1!==n.indexOf("phantom"),c=-1!==n.indexOf("android"),u=-1!==n.search("android [23]"),y=-1!==n.indexOf("gecko"),h=typeof orientation!=o+"",d=!e.PointerEvent&&e.MSPointerEvent,g=e.PointerEvent&&e.navigator.pointerEnabled||d,m="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,v=i.documentElement,f=t&&"transition"in v.style,w="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!u,_="MozPerspective"in v.style,T="OTransition"in v.style,b=!e.L_DISABLE_3D&&(f||w||_||T)&&!l,x=!e.L_NO_TOUCH&&!l&&(g||"ontouchstart"in e||e.DocumentTouch&&i instanceof e.DocumentTouch);s.Browser={ie:t,ielt9:r,webkit:a,gecko:y&&!a&&!e.opera&&!t,android:c,android23:u,chrome:p,ie3d:f,webkit3d:w,gecko3d:_,opera3d:T,any3d:b,mobile:h,mobileWebkit:h&&a,mobileWebkit3d:h&&w,mobileOpera:h&&e.opera,touch:x,msPointer:d,pointer:g,retina:m}}(),s.Point=function(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},add:function(e){return this.clone()._add(s.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(s.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){e=s.point(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return e=s.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=s.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+s.Util.formatNum(this.x)+", "+s.Util.formatNum(this.y)+")"}},s.point=function(e,t,i){return e instanceof s.Point?e:s.Util.isArray(e)?new s.Point(e[0],e[1]):e===o||null===e?e:new s.Point(e,t,i)},s.Bounds=function(e,t){if(e)for(var i=t?[e,t]:e,o=0,r=i.length;r>o;o++)this.extend(i[o])},s.Bounds.prototype={extend:function(e){return e=s.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new s.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new s.Point(this.min.x,this.max.y)},getTopRight:function(){return new s.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return e="number"==typeof e[0]||e instanceof s.Point?s.point(e):s.bounds(e),e instanceof s.Bounds?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=s.bounds(e);var t=this.min,i=this.max,o=e.min,r=e.max,n=r.x>=t.x&&o.x<=i.x,a=r.y>=t.y&&o.y<=i.y;return n&&a},isValid:function(){return!(!this.min||!this.max)}},s.bounds=function(e,t){return!e||e instanceof s.Bounds?e:new s.Bounds(e,t)},s.Transformation=function(e,t,i,o){this._a=e,this._b=t,this._c=i,this._d=o},s.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new s.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},s.DomUtil={get:function(e){return"string"==typeof e?i.getElementById(e):e},getStyle:function(e,t){var o=e.style[t];if(!o&&e.currentStyle&&(o=e.currentStyle[t]),(!o||"auto"===o)&&i.defaultView){var r=i.defaultView.getComputedStyle(e,null);o=r?r[t]:null}return"auto"===o?null:o},getViewportOffset:function(e){var t,o=0,r=0,n=e,a=i.body,p=i.documentElement;do{if(o+=n.offsetTop||0,r+=n.offsetLeft||0,o+=parseInt(s.DomUtil.getStyle(n,"borderTopWidth"),10)||0,r+=parseInt(s.DomUtil.getStyle(n,"borderLeftWidth"),10)||0,t=s.DomUtil.getStyle(n,"position"),n.offsetParent===a&&"absolute"===t)break;if("fixed"===t){o+=a.scrollTop||p.scrollTop||0,r+=a.scrollLeft||p.scrollLeft||0;break}if("relative"===t&&!n.offsetLeft){var l=s.DomUtil.getStyle(n,"width"),c=s.DomUtil.getStyle(n,"max-width"),u=n.getBoundingClientRect();("none"!==l||"none"!==c)&&(r+=u.left+n.clientLeft),o+=u.top+(a.scrollTop||p.scrollTop||0);break}n=n.offsetParent}while(n);n=e;do{if(n===a)break;o-=n.scrollTop||0,r-=n.scrollLeft||0,n=n.parentNode}while(n);return new s.Point(r,o)},documentIsLtr:function(){return s.DomUtil._docIsLtrCached||(s.DomUtil._docIsLtrCached=!0,s.DomUtil._docIsLtr="ltr"===s.DomUtil.getStyle(i.body,"direction")),s.DomUtil._docIsLtr},create:function(e,t,o){var r=i.createElement(e);return r.className=t,o&&o.appendChild(r),r},hasClass:function(e,t){if(e.classList!==o)return e.classList.contains(t);var i=s.DomUtil._getClass(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)},addClass:function(e,t){if(e.classList!==o)for(var i=s.Util.splitWords(t),r=0,n=i.length;n>r;r++)e.classList.add(i[r]);else if(!s.DomUtil.hasClass(e,t)){var a=s.DomUtil._getClass(e);s.DomUtil._setClass(e,(a?a+" ":"")+t)}},removeClass:function(e,t){e.classList!==o?e.classList.remove(t):s.DomUtil._setClass(e,s.Util.trim((" "+s.DomUtil._getClass(e)+" ").replace(" "+t+" "," ")))},_setClass:function(e,t){e.className.baseVal===o?e.className=t:e.className.baseVal=t},_getClass:function(e){return e.className.baseVal===o?e.className:e.className.baseVal},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(o)}catch(r){if(1===t)return}t=Math.round(100*t),i?(i.Enabled=100!==t,i.Opacity=t):e.style.filter+=" progid:"+o+"(opacity="+t+")"}},testProp:function(e){for(var t=i.documentElement.style,o=0;o<e.length;o++)if(e[o]in t)return e[o];return!1},getTranslateString:function(e){var t=s.Browser.webkit3d,i="translate"+(t?"3d":"")+"(",o=(t?",0":"")+")";return i+e.x+"px,"+e.y+"px"+o},getScaleString:function(e,t){var i=s.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),o=" scale("+e+") ";return i+o},setPosition:function(e,t,i){e._leaflet_pos=t,!i&&s.Browser.any3d?e.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},s.DomUtil.TRANSFORM=s.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),s.DomUtil.TRANSITION=s.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),s.DomUtil.TRANSITION_END="webkitTransition"===s.DomUtil.TRANSITION||"OTransition"===s.DomUtil.TRANSITION?s.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in i)s.extend(s.DomUtil,{disableTextSelection:function(){s.DomEvent.on(e,"selectstart",s.DomEvent.preventDefault)},enableTextSelection:function(){s.DomEvent.off(e,"selectstart",s.DomEvent.preventDefault)}});else{var t=s.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);s.extend(s.DomUtil,{disableTextSelection:function(){if(t){var e=i.documentElement.style;this._userSelect=e[t],e[t]="none"}},enableTextSelection:function(){t&&(i.documentElement.style[t]=this._userSelect,delete this._userSelect)}})}s.extend(s.DomUtil,{disableImageDrag:function(){s.DomEvent.on(e,"dragstart",s.DomEvent.preventDefault)},enableImageDrag:function(){s.DomEvent.off(e,"dragstart",s.DomEvent.preventDefault)}})}(),s.LatLng=function(e,t,i){if(e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=e,this.lng=t,i!==o&&(this.alt=parseFloat(i))},s.extend(s.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),s.LatLng.prototype={
equals:function(e){if(!e)return!1;e=s.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t<=s.LatLng.MAX_MARGIN},toString:function(e){return"LatLng("+s.Util.formatNum(this.lat,e)+", "+s.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=s.latLng(e);var t=6378137,i=s.LatLng.DEG_TO_RAD,o=(e.lat-this.lat)*i,r=(e.lng-this.lng)*i,n=this.lat*i,a=e.lat*i,p=Math.sin(o/2),l=Math.sin(r/2),c=p*p+l*l*Math.cos(n)*Math.cos(a);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(e,t){var i=this.lng;return e=e||-180,t=t||180,i=(i+t)%(t-e)+(e>i||i===t?t:e),new s.LatLng(this.lat,i)}},s.latLng=function(e,t){return e instanceof s.LatLng?e:s.Util.isArray(e)?"number"==typeof e[0]||"string"==typeof e[0]?new s.LatLng(e[0],e[1],e[2]):null:e===o||null===e?e:"object"==typeof e&&"lat"in e?new s.LatLng(e.lat,"lng"in e?e.lng:e.lon):t===o?null:new s.LatLng(e,t)},s.LatLngBounds=function(e,t){if(e)for(var i=t?[e,t]:e,o=0,r=i.length;r>o;o++)this.extend(i[o])},s.LatLngBounds.prototype={extend:function(e){if(!e)return this;var t=s.latLng(e);return e=null!==t?t:s.latLngBounds(e),e instanceof s.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new s.LatLng(e.lat,e.lng),this._northEast=new s.LatLng(e.lat,e.lng)):e instanceof s.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,i=this._northEast,o=Math.abs(t.lat-i.lat)*e,r=Math.abs(t.lng-i.lng)*e;return new s.LatLngBounds(new s.LatLng(t.lat-o,t.lng-r),new s.LatLng(i.lat+o,i.lng+r))},getCenter:function(){return new s.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new s.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new s.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof s.LatLng?s.latLng(e):s.latLngBounds(e);var t,i,o=this._southWest,r=this._northEast;return e instanceof s.LatLngBounds?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=o.lat&&i.lat<=r.lat&&t.lng>=o.lng&&i.lng<=r.lng},intersects:function(e){e=s.latLngBounds(e);var t=this._southWest,i=this._northEast,o=e.getSouthWest(),r=e.getNorthEast(),n=r.lat>=t.lat&&o.lat<=i.lat,a=r.lng>=t.lng&&o.lng<=i.lng;return n&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return e?(e=s.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},s.latLngBounds=function(e,t){return!e||e instanceof s.LatLngBounds?e:new s.LatLngBounds(e,t)},s.Projection={},s.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=s.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,e.lat),-i),r=e.lng*t,n=o*t;return n=Math.log(Math.tan(Math.PI/4+n/2)),new s.Point(r,n)},unproject:function(e){var t=s.LatLng.RAD_TO_DEG,i=e.x*t,o=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new s.LatLng(o,i)}},s.Projection.LonLat={project:function(e){return new s.Point(e.lng,e.lat)},unproject:function(e){return new s.LatLng(e.y,e.x)}},s.CRS={latLngToPoint:function(e,t){var i=this.projection.project(e),o=this.scale(t);return this.transformation._transform(i,o)},pointToLatLng:function(e,t){var i=this.scale(t),o=this.transformation.untransform(e,i);return this.projection.unproject(o)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var t=this.scale(e);return s.point(t,t)}},s.CRS.Simple=s.extend({},s.CRS,{projection:s.Projection.LonLat,transformation:new s.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),s.CRS.EPSG3857=s.extend({},s.CRS,{code:"EPSG:3857",projection:s.Projection.SphericalMercator,transformation:new s.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),i=6378137;return t.multiplyBy(i)}}),s.CRS.EPSG900913=s.extend({},s.CRS.EPSG3857,{code:"EPSG:900913"}),s.CRS.EPSG4326=s.extend({},s.CRS,{code:"EPSG:4326",projection:s.Projection.LonLat,transformation:new s.Transformation(1/360,.5,-1/360,.5)}),s.Map=s.Class.extend({includes:s.Mixin.Events,options:{crs:s.CRS.EPSG3857,fadeAnimation:s.DomUtil.TRANSITION&&!s.Browser.android23,trackResize:!0,markerZoomAnimation:s.DomUtil.TRANSITION&&s.Browser.any3d},initialize:function(e,t){t=s.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=s.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&t.zoom!==o&&this.setView(s.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(t.layers)},setView:function(e,t){return t=t===o?this.getZoom():t,this._resetView(s.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,i){var o=this.getZoomScale(t),r=this.getSize().divideBy(2),n=e instanceof s.Point?e:this.latLngToContainerPoint(e),a=n.subtract(r).multiplyBy(1-1/o),p=this.containerPointToLatLng(r.add(a));return this.setView(p,t,{zoom:i})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():s.latLngBounds(e);var i=s.point(t.paddingTopLeft||t.padding||[0,0]),o=s.point(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(o));r=t.maxZoom?Math.min(t.maxZoom,r):r;var n=o.subtract(i).divideBy(2),a=this.project(e.getSouthWest(),r),p=this.project(e.getNorthEast(),r),l=this.unproject(a.add(p).divideBy(2).add(n),r);return this.setView(l,r,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(s.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=s.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,t){var i=this.getCenter(),o=this._limitCenter(i,this._zoom,e);return i.equals(o)?this:this.panTo(o,t)},addLayer:function(e){var t=s.stamp(e);return this._layers[t]?this:(this._layers[t]=e,!e.options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&e instanceof s.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e),this)},removeLayer:function(e){var t=s.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&e instanceof s.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(e){return e?s.stamp(e)in this._layers:!1},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=s.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),o=t.divideBy(2).round(),r=i.divideBy(2).round(),n=o.subtract(r);return n.x||n.y?(e.animate&&e.pan?this.panBy(n):(e.pan&&this._rawPanBy(n),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=o}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new s.LatLngBounds(t,i)},getMinZoom:function(){return this.options.minZoom===o?this._layersMinZoom===o?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===o?this._layersMaxZoom===o?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=s.latLngBounds(e);var o,r=this.getMinZoom()-(t?1:0),n=this.getMaxZoom(),a=this.getSize(),p=e.getNorthWest(),l=e.getSouthEast(),c=!0;i=s.point(i||[0,0]);do r++,o=this.project(l,r).subtract(this.project(p,r)).add(i),c=t?o.x<a.x||o.y<a.y:a.contains(o);while(c&&n>=r);return c&&t?null:t?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new s.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new s.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=t===o?this._zoom:t,this.options.crs.latLngToPoint(s.latLng(e),t)},unproject:function(e,t){return t=t===o?this._zoom:t,this.options.crs.pointToLatLng(s.point(e),t)},layerPointToLatLng:function(e){var t=s.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(s.latLng(e))._round();return t._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return s.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return s.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(s.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(s.latLng(e)))},mouseEventToContainerPoint:function(e){return s.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=s.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;s.DomUtil.addClass(e,"leaflet-container"+(s.Browser.touch?" leaflet-touch":"")+(s.Browser.retina?" leaflet-retina":"")+(s.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var t=s.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(s.DomUtil.addClass(e.markerPane,t),s.DomUtil.addClass(e.shadowPane,t),s.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return s.DomUtil.create("div",e,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){e=e?s.Util.isArray(e)?e:[e]:[];for(var t=0,i=e.length;i>t;t++)this.addLayer(e[t])},_resetView:function(e,t,i,o){var r=this._zoom!==t;o||(this.fire("movestart"),r&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),i?this._initialTopLeftPoint._add(this._getMapPanePos()):s.DomUtil.setPosition(this._mapPane,new s.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var n=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),n&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(r||o)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(e){s.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,t=1/0,i=-(1/0),r=this._getZoomSpan();for(e in this._zoomBoundLayers){var s=this._zoomBoundLayers[e];isNaN(s.options.minZoom)||(t=Math.min(t,s.options.minZoom)),isNaN(s.options.maxZoom)||(i=Math.max(i,s.options.maxZoom))}e===o?this._layersMaxZoom=this._layersMinZoom=o:(this._layersMaxZoom=i,this._layersMinZoom=t),r!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(s.DomEvent){t=t||"on",s.DomEvent[t](this._container,"click",this._onMouseClick,this);var i,o,r=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,o=r.length;o>i;i++)s.DomEvent[t](this._container,r[i],this._fireMouseEvent,this);this.options.trackResize&&s.DomEvent[t](e,"resize",this._onResize,this)}},_onResize:function(){s.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=s.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||s.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!s.DomEvent._skipped(e)){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&s.DomEvent.preventDefault(e);var i=this.mouseEventToContainerPoint(e),o=this.containerPointToLayerPoint(i),r=this.layerPointToLatLng(o);this.fire(t,{latlng:r,layerPoint:o,containerPoint:i,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,t=this._handlers.length;t>e;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return s.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._round()},_latLngToNewLayerPoint:function(e,t,i){var o=this._getNewTopLeftPoint(i,t).add(this._getMapPanePos());return this.project(e,t)._subtract(o)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var o=this.project(e,t),r=this.getSize().divideBy(2),n=new s.Bounds(o.subtract(r),o.add(r)),a=this._getBoundsOffset(n,i,t);return this.unproject(o.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),o=new s.Bounds(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(o,t))},_getBoundsOffset:function(e,t,i){var o=this.project(t.getNorthWest(),i).subtract(e.min),r=this.project(t.getSouthEast(),i).subtract(e.max),n=this._rebound(o.x,-r.x),a=this._rebound(o.y,-r.y);return new s.Point(n,a)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom();return Math.max(t,Math.min(i,e))}}),s.map=function(e,t){return new s.Map(e,t)},s.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(e){var t=s.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,e.lat),-i),r=this.R_MAJOR,n=this.R_MINOR,a=e.lng*t*r,p=o*t,l=n/r,c=Math.sqrt(1-l*l),u=c*Math.sin(p);u=Math.pow((1-u)/(1+u),.5*c);var y=Math.tan(.5*(.5*Math.PI-p))/u;return p=-r*Math.log(y),new s.Point(a,p)},unproject:function(e){for(var t,i=s.LatLng.RAD_TO_DEG,o=this.R_MAJOR,r=this.R_MINOR,n=e.x*i/o,a=r/o,p=Math.sqrt(1-a*a),l=Math.exp(-e.y/o),c=Math.PI/2-2*Math.atan(l),u=15,y=1e-7,h=u,d=.1;Math.abs(d)>y&&--h>0;)t=p*Math.sin(c),d=Math.PI/2-2*Math.atan(l*Math.pow((1-t)/(1+t),.5*p))-c,c+=d;return new s.LatLng(c*i,n)}},s.CRS.EPSG3395=s.extend({},s.CRS,{code:"EPSG:3395",projection:s.Projection.Mercator,transformation:function(){var e=s.Projection.Mercator,t=e.R_MAJOR,i=.5/(Math.PI*t);return new s.Transformation(i,.5,-i,.5)}()}),s.TileLayer=s.Class.extend({includes:s.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:s.Browser.mobile,updateWhenIdle:s.Browser.mobile},initialize:function(e,t){t=s.setOptions(this,t),t.detectRetina&&s.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),t.bounds&&(t.bounds=s.latLngBounds(t.bounds)),this._url=e;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=s.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==o&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var i,o,r,s=e.children,n=-t(1/0,-(1/0));for(o=0,r=s.length;r>o;o++)s[o]!==this._container&&(i=parseInt(s[o].style.zIndex,10),isNaN(i)||(n=t(n,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(n)?n:0)+t(1,-1)},_updateOpacity:function(){var e,t=this._tiles;if(s.Browser.ielt9)for(e in t)s.DomUtil.setOpacity(t[e],this.options.opacity);else s.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=s.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var t="leaflet-tile-container";this._bgBuffer=s.DomUtil.create("div",t,this._container),this._tileContainer=s.DomUtil.create("div",t,this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,t=e.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,o=this.options.tileSize;return i&&t>i&&(o=Math.round(e.getZoomScale(t)/e.getZoomScale(i)*o)),o},_update:function(){if(this._map){var e=this._map,t=e.getPixelBounds(),i=e.getZoom(),o=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var r=s.bounds(t.min.divideBy(o)._floor(),t.max.divideBy(o)._floor());this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(e){var t,o,r,n=[],a=e.getCenter();for(t=e.min.y;t<=e.max.y;t++)for(o=e.min.x;o<=e.max.x;o++)r=new s.Point(o,t),this._tileShouldBeLoaded(r)&&n.push(r);var p=n.length;if(0!==p){n.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)});var l=i.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=p,o=0;p>o;o++)this._addTile(n[o],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var t=this.options;if(!t.continuousWorld){var i=this._getWrapTileNum();if(t.noWrap&&(e.x<0||e.x>=i.x)||e.y<0||e.y>=i.y)return!1}if(t.bounds){var o=this._getTileSize(),r=e.multiplyBy(o),s=r.add([o,o]),n=this._map.unproject(r),a=this._map.unproject(s);if(t.continuousWorld||t.noWrap||(n=n.wrap(),a=a.wrap()),!t.bounds.intersects([n,a]))return!1}return!0},_removeOtherTiles:function(e){var t,i,o,r;for(r in this._tiles)t=r.split(":"),i=parseInt(t[0],10),o=parseInt(t[1],10),(i<e.min.x||i>e.max.x||o<e.min.y||o>e.max.y)&&this._removeTile(r)},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(s.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t),s.Browser.android||(t.onload=null,t.src=s.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var i=this._getTilePos(e),o=this._getTile();s.DomUtil.setPosition(o,i,s.Browser.chrome),this._tiles[e.x+":"+e.y]=o,this._loadTile(o,e),o.parentNode!==this._tileContainer&&t.appendChild(o)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getTilePos:function(e){var t=this._map.getPixelOrigin(),i=this._getTileSize();return e.multiplyBy(i).subtract(t)},getTileUrl:function(e){return s.Util.template(this._url,s.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){var e=this._map.options.crs,t=e.getSize(this._map.getZoom());return t.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t.x+t.x)%t.x),this.options.tms&&(e.y=t.y-e.y-1),e.z=this._getZoomForUrl()},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=s.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=s.Util.falseFn,s.Browser.ielt9&&this.options.opacity!==o&&s.DomUtil.setOpacity(e,this.options.opacity),s.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(t),e.src=this.getTileUrl(t),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&s.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(s.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==s.Util.emptyImageUrl&&(s.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),s.tileLayer=function(e,t){return new s.TileLayer(e,t)},s.TileLayer.WMS=s.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var i=s.extend({},this.defaultWmsParams),o=t.tileSize||this.options.tileSize;i.width=i.height=t.detectRetina&&s.Browser.retina?2*o:o;for(var r in t)this.options.hasOwnProperty(r)||"crs"===r||(i[r]=t[r]);this.wmsParams=i,s.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,s.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._map,i=this.options.tileSize,o=e.multiplyBy(i),r=o.add([i,i]),n=this._crs.project(t.unproject(o,e.z)),a=this._crs.project(t.unproject(r,e.z)),p=this._wmsVersion>=1.3&&this._crs===s.CRS.EPSG4326?[a.y,n.x,n.y,a.x].join(","):[n.x,a.y,a.x,n.y].join(","),l=s.Util.template(this._url,{s:this._getSubdomain(e)});return l+s.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+p},setParams:function(e,t){return s.extend(this.wmsParams,e),t||this.redraw(),this}}),s.tileLayer.wms=function(e,t){return new s.TileLayer.WMS(e,t)},s.TileLayer.Canvas=s.TileLayer.extend({options:{async:!1},initialize:function(e){s.setOptions(this,e)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var e in this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=s.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=s.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),s.tileLayer.canvas=function(e){return new s.TileLayer.Canvas(e)},s.ImageOverlay=s.Class.extend({includes:s.Mixin.Events,options:{opacity:1},initialize:function(e,t,i){this._url=e,this._bounds=s.latLngBounds(t),s.setOptions(this,i)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&s.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=s.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&s.Browser.any3d?s.DomUtil.addClass(this._image,"leaflet-zoom-animated"):s.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),s.extend(this._image,{galleryimg:"no",onselectstart:s.Util.falseFn,onmousemove:s.Util.falseFn,onload:s.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,i=this._image,o=t.getZoomScale(e.zoom),r=this._bounds.getNorthWest(),n=this._bounds.getSouthEast(),a=t._latLngToNewLayerPoint(r,e.zoom,e.center),p=t._latLngToNewLayerPoint(n,e.zoom,e.center)._subtract(a),l=a._add(p._multiplyBy(.5*(1-1/o)));i.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(l)+" scale("+o+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);s.DomUtil.setPosition(e,t),e.style.width=i.x+"px",e.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){s.DomUtil.setOpacity(this._image,this.options.opacity)}}),s.imageOverlay=function(e,t,i){return new s.ImageOverlay(e,t,i)},s.Icon=s.Class.extend({options:{className:""},initialize:function(e){s.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o;return o=t&&"IMG"===t.tagName?this._createImg(i,t):this._createImg(i),this._setIconStyles(o,e),o},_setIconStyles:function(e,t){var i,o=this.options,r=s.point(o[t+"Size"]);i=s.point("shadow"===t?o.shadowAnchor||o.iconAnchor:o.iconAnchor),!i&&r&&(i=r.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+o.className,i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return t=t||i.createElement("img"),t.src=e,t},_getIconUrl:function(e){return s.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),s.icon=function(e){return new s.Icon(e)},s.Icon.Default=s.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];s.Browser.retina&&"icon"===e&&(e+="-2x");var i=s.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+e+".png"}}),s.Icon.Default.imagePath=function(){var e,t,o,r,s,n=i.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,t=n.length;t>e;e++)if(o=n[e].src,r=o.match(a))return s=o.split(a)[0],(s?s+"/":"")+"images"}(),s.Marker=s.Class.extend({includes:s.Mixin.Events,
options:{icon:new s.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){s.setOptions(this,t),this._latlng=s.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=s.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var e=this.options,t=this._map,i=t.options.zoomAnimation&&t.options.markerZoomAnimation,o=i?"leaflet-zoom-animated":"leaflet-zoom-hide",r=e.icon.createIcon(this._icon),n=!1;r!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(r.title=e.title),e.alt&&(r.alt=e.alt)),s.DomUtil.addClass(r,o),e.keyboard&&(r.tabIndex="0"),this._icon=r,this._initInteraction(),e.riseOnHover&&s.DomEvent.on(r,"mouseover",this._bringToFront,this).on(r,"mouseout",this._resetZIndex,this);var a=e.icon.createShadow(this._shadow),p=!1;a!==this._shadow&&(this._removeShadow(),p=!0),a&&s.DomUtil.addClass(a,o),this._shadow=a,e.opacity<1&&this._updateOpacity();var l=this._map._panes;n&&l.markerPane.appendChild(this._icon),a&&p&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&s.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){s.DomUtil.setPosition(this._icon,e),this._shadow&&s.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];s.DomUtil.addClass(e,"leaflet-clickable"),s.DomEvent.on(e,"click",this._onMouseClick,this),s.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var i=0;i<t.length;i++)s.DomEvent.on(e,t[i],this._fireMouseEvent,this);s.Handler.MarkerDrag&&(this.dragging=new s.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&s.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&s.DomEvent.preventDefault(e),"mousedown"!==e.type?s.DomEvent.stopPropagation(e):s.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){s.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&s.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),s.marker=function(e,t){return new s.Marker(e,t)},s.DivIcon=s.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:i.createElement("div"),o=this.options;return t.innerHTML=o.html!==!1?o.html:"",o.bgPos&&(t.style.backgroundPosition=-o.bgPos.x+"px "+-o.bgPos.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),s.divIcon=function(e){return new s.DivIcon(e)},s.Map.mergeOptions({closePopupOnClick:!0}),s.Popup=s.Class.extend({includes:s.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,t){s.setOptions(this,e),this._source=t,this._animated=s.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var t=e.options.fadeAnimation;t&&s.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),t&&s.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),s.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&s.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=s.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e,t="leaflet-popup",i=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),o=this._container=s.DomUtil.create("div",i);this.options.closeButton&&(e=this._closeButton=s.DomUtil.create("a",t+"-close-button",o),e.href="#close",e.innerHTML="&#215;",s.DomEvent.disableClickPropagation(e),s.DomEvent.on(e,"click",this._onCloseButtonClick,this));var r=this._wrapper=s.DomUtil.create("div",t+"-content-wrapper",o);s.DomEvent.disableClickPropagation(r),this._contentNode=s.DomUtil.create("div",t+"-content",r),s.DomEvent.disableScrollPropagation(this._contentNode),s.DomEvent.on(r,"contextmenu",s.DomEvent.stopPropagation),this._tipContainer=s.DomUtil.create("div",t+"-tip-container",o),this._tip=s.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var o=e.offsetHeight,r=this.options.maxHeight,n="leaflet-popup-scrolled";r&&o>r?(t.height=r+"px",s.DomUtil.addClass(e,n)):s.DomUtil.removeClass(e,n),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,i=s.point(this.options.offset);t&&s.DomUtil.setPosition(this._container,e),this._containerBottom=-i.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);s.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,i=this._containerWidth,o=new s.Point(this._containerLeft,-t-this._containerBottom);this._animated&&o._add(s.DomUtil.getPosition(this._container));var r=e.layerPointToContainerPoint(o),n=s.point(this.options.autoPanPadding),a=s.point(this.options.autoPanPaddingTopLeft||n),p=s.point(this.options.autoPanPaddingBottomRight||n),l=e.getSize(),c=0,u=0;r.x+i+p.x>l.x&&(c=r.x+i-l.x+p.x),r.x-c-a.x<0&&(c=r.x-a.x),r.y+t+p.y>l.y&&(u=r.y+t-l.y+p.y),r.y-u-a.y<0&&(u=r.y-a.y),(c||u)&&e.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(e){this._close(),s.DomEvent.stop(e)}}),s.popup=function(e,t){return new s.Popup(e,t)},s.Map.include({openPopup:function(e,t,i){if(this.closePopup(),!(e instanceof s.Popup)){var o=e;e=new s.Popup(i).setLatLng(t).setContent(o)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),s.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,t){var i=s.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(s.Popup.prototype.options.offset),t&&t.offset&&(i=i.add(t.offset)),t=s.extend({offset:i},t),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof s.Popup?(s.setOptions(e,t),this._popup=e,e._source=this):this._popup=new s.Popup(t,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),s.LayerGroup=s.Class.extend({initialize:function(e){this._layers={};var t,i;if(e)for(t=0,i=e.length;i>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return e?e in this._layers||this.getLayerId(e)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,i,o=Array.prototype.slice.call(arguments,1);for(t in this._layers)i=this._layers[t],i[e]&&i[e].apply(i,o);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return s.stamp(e)}}),s.layerGroup=function(e){return new s.LayerGroup(e)},s.FeatureGroup=s.LayerGroup.extend({includes:s.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),"off"in e&&e.off(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new s.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof s.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(e){e=s.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),s.featureGroup=function(e){return new s.FeatureGroup(e)},s.Path=s.Class.extend({includes:[s.Mixin.Events],statics:{CLIP_PADDING:function(){var t=s.Browser.mobile?1280:2e3,i=(t/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){s.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,s.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return s.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),s.Map.include({_updatePathViewport:function(){var e=s.Path.CLIP_PADDING,t=this.getSize(),i=s.DomUtil.getPosition(this._mapPane),o=i.multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),r=o.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new s.Bounds(o,r)}}),s.Path.SVG_NS="http://www.w3.org/2000/svg",s.Browser.svg=!(!i.createElementNS||!i.createElementNS(s.Path.SVG_NS,"svg").createSVGRect),s.Path=s.Path.extend({statics:{SVG:s.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,i=e.firstChild;return t&&i!==t&&e.insertBefore(t,i),this},getPathString:function(){},_createElement:function(e){return i.createElementNS(s.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&s.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(s.Browser.svg||!s.Browser.vml)&&s.DomUtil.addClass(this._path,"leaflet-clickable"),s.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)s.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this._map&&this.hasEventListeners(e.type)){var t=this._map,i=t.mouseEventToContainerPoint(e),o=t.containerPointToLayerPoint(i),r=t.layerPointToLatLng(o);this.fire(e.type,{latlng:r,layerPoint:o,containerPoint:i,originalEvent:e}),"contextmenu"===e.type&&s.DomEvent.preventDefault(e),"mousemove"!==e.type&&s.DomEvent.stopPropagation(e)}}}),s.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=s.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&s.Browser.any3d?(s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),i=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(i)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,i=e.max,o=i.x-t.x,r=i.y-t.y,n=this._pathRoot,a=this._panes.overlayPane;s.Browser.mobileWebkit&&a.removeChild(n),s.DomUtil.setPosition(n,t),n.setAttribute("width",o),n.setAttribute("height",r),n.setAttribute("viewBox",[t.x,t.y,o,r].join(" ")),s.Browser.mobileWebkit&&a.appendChild(n)}}}),s.Path.include({bindPopup:function(e,t){return e instanceof s.Popup?this._popup=e:((!this._popup||t)&&(this._popup=new s.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),s.Browser.vml=!s.Browser.svg&&function(){try{var e=i.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(o){return!1}}(),s.Path=s.Browser.svg||!s.Browser.vml?s.Path:s.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return i.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return i.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return i.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");s.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&s.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,i=this.options,o=this._container;o.stroked=i.stroke,o.filled=i.fill,i.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",o.appendChild(e)),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,e.dashStyle=i.dashArray?s.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",i.lineCap&&(e.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(e.joinstyle=i.lineJoin)):e&&(o.removeChild(e),this._stroke=null),i.fill?(t||(t=this._fill=this._createElement("fill"),o.appendChild(t)),t.color=i.fillColor||i.color,t.opacity=i.fillOpacity):t&&(o.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),s.Map.include(s.Browser.svg||!s.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=i.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),s.Browser.canvas=function(){return!!i.createElement("canvas").getContext}(),s.Path=s.Path.SVG&&!e.L_PREFER_CANVAS||!s.Browser.canvas?s.Path:s.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return s.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!s.Path._updateRequest&&(s.Path._updateRequest=s.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){s.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color),e.lineCap&&(this._ctx.lineCap=e.lineCap),e.lineJoin&&(this._ctx.lineJoin=e.lineJoin)},_drawPath:function(){var e,t,i,o,r,n;for(this._ctx.beginPath(),e=0,i=this._parts.length;i>e;e++){for(t=0,o=this._parts[e].length;o>t;t++)r=this._parts[e][t],n=(0===t?"move":"line")+"To",this._ctx[n](r.x,r.y);this instanceof s.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill(t.fillRule||"evenodd")),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(e){this._containsPoint(e.layerPoint)&&this.fire(e.type,e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),s.Map.include(s.Path.SVG&&!e.L_PREFER_CANVAS||!s.Browser.canvas?{}:{_initPathRoot:function(){var e,t=this._pathRoot;t||(t=this._pathRoot=i.createElement("canvas"),t.style.position="absolute",e=this._canvasCtx=t.getContext("2d"),e.lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(t),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,i=e.max.subtract(t),o=this._pathRoot;s.DomUtil.setPosition(o,t),o.width=i.x,o.height=i.y,o.getContext("2d").translate(-t.x,-t.y)}}}),s.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=this._reducePoints(e,i),e=this._simplifyDP(e,i)},pointToSegmentDistance:function(e,t,i){return Math.sqrt(this._sqClosestPointOnSegment(e,t,i,!0))},closestPointOnSegment:function(e,t,i){return this._sqClosestPointOnSegment(e,t,i)},_simplifyDP:function(e,t){var i=e.length,r=typeof Uint8Array!=o+""?Uint8Array:Array,s=new r(i);s[0]=s[i-1]=1,this._simplifyDPStep(e,s,t,0,i-1);var n,a=[];for(n=0;i>n;n++)s[n]&&a.push(e[n]);return a},_simplifyDPStep:function(e,t,i,o,r){var s,n,a,p=0;for(n=o+1;r-1>=n;n++)a=this._sqClosestPointOnSegment(e[n],e[o],e[r],!0),a>p&&(s=n,p=a);p>i&&(t[s]=1,this._simplifyDPStep(e,t,i,o,s),this._simplifyDPStep(e,t,i,s,r))},_reducePoints:function(e,t){for(var i=[e[0]],o=1,r=0,s=e.length;s>o;o++)this._sqDist(e[o],e[r])>t&&(i.push(e[o]),r=o);return s-1>r&&i.push(e[s-1]),i},clipSegment:function(e,t,i,o){var r,s,n,a=o?this._lastCode:this._getBitCode(e,i),p=this._getBitCode(t,i);for(this._lastCode=p;;){if(!(a|p))return[e,t];if(a&p)return!1;r=a||p,s=this._getEdgeIntersection(e,t,r,i),n=this._getBitCode(s,i),r===a?(e=s,a=n):(t=s,p=n)}},_getEdgeIntersection:function(e,t,i,o){var r=t.x-e.x,n=t.y-e.y,a=o.min,p=o.max;return 8&i?new s.Point(e.x+r*(p.y-e.y)/n,p.y):4&i?new s.Point(e.x+r*(a.y-e.y)/n,a.y):2&i?new s.Point(p.x,e.y+n*(p.x-e.x)/r):1&i?new s.Point(a.x,e.y+n*(a.x-e.x)/r):void 0},_getBitCode:function(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i},_sqDist:function(e,t){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o},_sqClosestPointOnSegment:function(e,t,i,o){var r,n=t.x,a=t.y,p=i.x-n,l=i.y-a,c=p*p+l*l;return c>0&&(r=((e.x-n)*p+(e.y-a)*l)/c,r>1?(n=i.x,a=i.y):r>0&&(n+=p*r,a+=l*r)),p=e.x-n,l=e.y-a,o?p*p+l*l:new s.Point(n,a)}},s.Polyline=s.Path.extend({initialize:function(e,t){s.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;t>e;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,i="";t>e;e++)i+=this._getPathPartStr(this._parts[e]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(s.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var t,i,o=1/0,r=this._parts,n=null,a=0,p=r.length;p>a;a++)for(var l=r[a],c=1,u=l.length;u>c;c++){t=l[c-1],i=l[c];var y=s.LineUtil._sqClosestPointOnSegment(e,t,i,!0);o>y&&(o=y,n=s.LineUtil._sqClosestPointOnSegment(e,t,i))}return n&&(n.distance=Math.sqrt(o)),n},getBounds:function(){return new s.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,t){var i,o,r=t?e:[];for(i=0,o=e.length;o>i;i++){if(s.Util.isArray(e[i])&&"number"!=typeof e[i][0])return;r[i]=s.latLng(e[i])}return r},_initEvents:function(){s.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,i=s.Path.VML,o=0,r=e.length,n="";r>o;o++)t=e[o],i&&t._round(),n+=(o?"L":"M")+t.x+" "+t.y;return n},_clipPoints:function(){var e,t,i,o=this._originalPoints,r=o.length;if(this.options.noClip)return void(this._parts=[o]);this._parts=[];var n=this._parts,a=this._map._pathViewport,p=s.LineUtil;for(e=0,t=0;r-1>e;e++)i=p.clipSegment(o[e],o[e+1],a,e),i&&(n[t]=n[t]||[],n[t].push(i[0]),(i[1]!==o[e+1]||e===r-2)&&(n[t].push(i[1]),t++))},_simplifyPoints:function(){for(var e=this._parts,t=s.LineUtil,i=0,o=e.length;o>i;i++)e[i]=t.simplify(e[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),s.Path.prototype._updatePath.call(this))}}),s.polyline=function(e,t){return new s.Polyline(e,t)},s.PolyUtil={},s.PolyUtil.clipPolygon=function(e,t){var i,o,r,n,a,p,l,c,u,y=[1,4,2,8],h=s.LineUtil;for(o=0,l=e.length;l>o;o++)e[o]._code=h._getBitCode(e[o],t);for(n=0;4>n;n++){for(c=y[n],i=[],o=0,l=e.length,r=l-1;l>o;r=o++)a=e[o],p=e[r],a._code&c?p._code&c||(u=h._getEdgeIntersection(p,a,c,t),u._code=h._getBitCode(u,t),i.push(u)):(p._code&c&&(u=h._getEdgeIntersection(p,a,c,t),u._code=h._getBitCode(u,t),i.push(u)),i.push(a));e=i}return e},s.Polygon=s.Polyline.extend({options:{fill:!0},initialize:function(e,t){s.Polyline.prototype.initialize.call(this,e,t),this._initWithHoles(e)},_initWithHoles:function(e){var t,i,o;if(e&&s.Util.isArray(e[0])&&"number"!=typeof e[0][0])for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),t=0,i=this._holes.length;i>t;t++)o=this._holes[t]=this._convertLatLngs(this._holes[t]),o[0].equals(o[o.length-1])&&o.pop();e=this._latlngs,e.length>=2&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){if(s.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var e,t,i,o;for(e=0,i=this._holes.length;i>e;e++)for(this._holePoints[e]=[],t=0,o=this._holes[e].length;o>t;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])}},setLatLngs:function(e){return e&&s.Util.isArray(e[0])&&"number"!=typeof e[0][0]?(this._initWithHoles(e),this.redraw()):s.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var i=0,o=this._parts.length;o>i;i++){var r=s.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);r.length&&t.push(r)}this._parts=t}},_getPathPartStr:function(e){var t=s.Polyline.prototype._getPathPartStr.call(this,e);return t+(s.Browser.svg?"z":"x")}}),s.polygon=function(e,t){return new s.Polygon(e,t)},function(){function e(e){return s.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var i=0,o=t.length;for(this.eachLayer(function(e){o>i?e.setLatLngs(t[i++]):this.removeLayer(e)},this);o>i;)this.addLayer(new e(t[i++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer(function(t){e.push(t.getLatLngs())}),e}})}s.MultiPolyline=e(s.Polyline),s.MultiPolygon=e(s.Polygon),s.multiPolyline=function(e,t){return new s.MultiPolyline(e,t)},s.multiPolygon=function(e,t){return new s.MultiPolygon(e,t)}}(),s.Rectangle=s.Polygon.extend({initialize:function(e,t){s.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=s.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),s.rectangle=function(e,t){return new s.Rectangle(e,t)},s.Circle=s.Path.extend({initialize:function(e,t,i){s.Path.prototype.initialize.call(this,i),this._latlng=s.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=s.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,
this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=this._latlng,i=this._map.latLngToLayerPoint([t.lat,t.lng-e]);this._point=this._map.latLngToLayerPoint(t),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var e=this._getLngRadius(),t=this._mRadius/40075017*360,i=this._latlng;return new s.LatLngBounds([i.lat-t,i.lng-e],[i.lat+t,i.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":s.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(s.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,i=this._point;return i.x-t>e.max.x||i.y-t>e.max.y||i.x+t<e.min.x||i.y+t<e.min.y}}),s.circle=function(e,t,i){return new s.Circle(e,t,i)},s.CircleMarker=s.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){s.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){s.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return s.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),s.circleMarker=function(e,t){return new s.CircleMarker(e,t)},s.Polyline.include(s.Path.CANVAS?{_containsPoint:function(e,t){var i,o,r,n,a,p,l,c=this.options.weight/2;for(s.Browser.touch&&(c+=10),i=0,n=this._parts.length;n>i;i++)for(l=this._parts[i],o=0,a=l.length,r=a-1;a>o;r=o++)if((t||0!==o)&&(p=s.LineUtil.pointToSegmentDistance(e,l[r],l[o]),c>=p))return!0;return!1}}:{}),s.Polygon.include(s.Path.CANVAS?{_containsPoint:function(e){var t,i,o,r,n,a,p,l,c=!1;if(s.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(r=0,p=this._parts.length;p>r;r++)for(t=this._parts[r],n=0,l=t.length,a=l-1;l>n;a=n++)i=t[n],o=t[a],i.y>e.y!=o.y>e.y&&e.x<(o.x-i.x)*(e.y-i.y)/(o.y-i.y)+i.x&&(c=!c);return c}}:{}),s.Circle.include(s.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,i=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+i}}:{}),s.CircleMarker.include(s.Path.CANVAS?{_updateStyle:function(){s.Path.prototype._updateStyle.call(this)}}:{}),s.GeoJSON=s.FeatureGroup.extend({initialize:function(e,t){s.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,i,o,r=s.Util.isArray(e)?e:e.features;if(r){for(t=0,i=r.length;i>t;t++)o=r[t],(o.geometries||o.geometry||o.features||o.coordinates)&&this.addData(r[t]);return this}var n=this.options;if(!n.filter||n.filter(e)){var a=s.GeoJSON.geometryToLayer(e,n.pointToLayer,n.coordsToLatLng,n);return a.feature=s.GeoJSON.asFeature(e),a.defaultOptions=a.options,this.resetStyle(a),n.onEachFeature&&n.onEachFeature(e,a),this.addLayer(a)}},resetStyle:function(e){var t=this.options.style;t&&(s.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),s.extend(s.GeoJSON,{geometryToLayer:function(e,t,i,o){var r,n,a,p,l="Feature"===e.type?e.geometry:e,c=l.coordinates,u=[];switch(i=i||this.coordsToLatLng,l.type){case"Point":return r=i(c),t?t(e,r):new s.Marker(r);case"MultiPoint":for(a=0,p=c.length;p>a;a++)r=i(c[a]),u.push(t?t(e,r):new s.Marker(r));return new s.FeatureGroup(u);case"LineString":return n=this.coordsToLatLngs(c,0,i),new s.Polyline(n,o);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return n=this.coordsToLatLngs(c,1,i),new s.Polygon(n,o);case"MultiLineString":return n=this.coordsToLatLngs(c,1,i),new s.MultiPolyline(n,o);case"MultiPolygon":return n=this.coordsToLatLngs(c,2,i),new s.MultiPolygon(n,o);case"GeometryCollection":for(a=0,p=l.geometries.length;p>a;a++)u.push(this.geometryToLayer({geometry:l.geometries[a],type:"Feature",properties:e.properties},t,i,o));return new s.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new s.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,i){var o,r,s,n=[];for(r=0,s=e.length;s>r;r++)o=t?this.coordsToLatLngs(e[r],t-1,i):(i||this.coordsToLatLng)(e[r]),n.push(o);return n},latLngToCoords:function(e){var t=[e.lng,e.lat];return e.alt!==o&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],i=0,o=e.length;o>i;i++)t.push(s.GeoJSON.latLngToCoords(e[i]));return t},getFeature:function(e,t){return e.feature?s.extend({},e.feature,{geometry:t}):s.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var a={toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"Point",coordinates:s.GeoJSON.latLngToCoords(this.getLatLng())})}};s.Marker.include(a),s.Circle.include(a),s.CircleMarker.include(a),s.Polyline.include({toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"LineString",coordinates:s.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),s.Polygon.include({toGeoJSON:function(){var e,t,i,o=[s.GeoJSON.latLngsToCoords(this.getLatLngs())];if(o[0].push(o[0][0]),this._holes)for(e=0,t=this._holes.length;t>e;e++)i=s.GeoJSON.latLngsToCoords(this._holes[e]),i.push(i[0]),o.push(i);return s.GeoJSON.getFeature(this,{type:"Polygon",coordinates:o})}}),function(){function e(e){return function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),s.GeoJSON.getFeature(this,{type:e,coordinates:t})}}s.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),s.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),s.LayerGroup.include({toGeoJSON:function(){var t,i=this.feature&&this.feature.geometry,o=[];if(i&&"MultiPoint"===i.type)return e("MultiPoint").call(this);var r=i&&"GeometryCollection"===i.type;return this.eachLayer(function(e){e.toGeoJSON&&(t=e.toGeoJSON(),o.push(r?t.geometry:s.GeoJSON.asFeature(t)))}),r?s.GeoJSON.getFeature(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}})}(),s.geoJson=function(e,t){return new s.GeoJSON(e,t)},s.DomEvent={addListener:function(e,t,i,o){var r,n,a,p=s.stamp(i),l="_leaflet_"+t+p;return e[l]?this:(r=function(t){return i.call(o||e,t||s.DomEvent._getEvent())},s.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,r,p):(s.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,r,p),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",r,!1),e.addEventListener(t,r,!1)):"mouseenter"===t||"mouseleave"===t?(n=r,a="mouseenter"===t?"mouseover":"mouseout",r=function(t){return s.DomEvent._checkMouse(e,t)?n(t):void 0},e.addEventListener(a,r,!1)):"click"===t&&s.Browser.android?(n=r,r=function(e){return s.DomEvent._filterClick(e,n)},e.addEventListener(t,r,!1)):e.addEventListener(t,r,!1):"attachEvent"in e&&e.attachEvent("on"+t,r),e[l]=r,this))},removeListener:function(e,t,i){var o=s.stamp(i),r="_leaflet_"+t+o,n=e[r];return n?(s.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,o):s.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,o):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",n,!1),e.removeEventListener(t,n,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",n,!1):e.removeEventListener(t,n,!1):"detachEvent"in e&&e.detachEvent("on"+t,n),e[r]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,s.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=s.DomEvent.stopPropagation;return s.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=s.DomEvent.stopPropagation,i=s.Draggable.START.length-1;i>=0;i--)s.DomEvent.on(e,s.Draggable.START[i],t);return s.DomEvent.on(e,"click",s.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return s.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new s.Point(e.clientX,e.clientY);var i=t.getBoundingClientRect();return new s.Point(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){s.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(o){return!1}return i!==e},_getEvent:function(){var t=e.event;if(!t)for(var i=arguments.callee.caller;i&&(t=i.arguments[0],!t||e.Event!==t.constructor);)i=i.caller;return t},_filterClick:function(e,t){var i=e.timeStamp||e.originalEvent.timeStamp,o=s.DomEvent._lastClick&&i-s.DomEvent._lastClick;return o&&o>100&&500>o||e.target._simulatedClick&&!e._simulated?void s.DomEvent.stop(e):(s.DomEvent._lastClick=i,t(e))}},s.DomEvent.on=s.DomEvent.addListener,s.DomEvent.off=s.DomEvent.removeListener,s.Draggable=s.Class.extend({includes:s.Mixin.Events,statics:{START:s.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(!this._enabled){for(var e=s.Draggable.START.length-1;e>=0;e--)s.DomEvent.on(this._dragStartTarget,s.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=s.Draggable.START.length-1;e>=0;e--)s.DomEvent.off(this._dragStartTarget,s.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!(e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(s.DomEvent.stopPropagation(e),s.Draggable._disabled||(s.DomUtil.disableImageDrag(),s.DomUtil.disableTextSelection(),this._moving)))){var t=e.touches?e.touches[0]:e;this._startPoint=new s.Point(t.clientX,t.clientY),this._startPos=this._newPos=s.DomUtil.getPosition(this._element),s.DomEvent.on(i,s.Draggable.MOVE[e.type],this._onMove,this).on(i,s.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var t=e.touches&&1===e.touches.length?e.touches[0]:e,o=new s.Point(t.clientX,t.clientY),r=o.subtract(this._startPoint);(r.x||r.y)&&(s.Browser.touch&&Math.abs(r.x)+Math.abs(r.y)<3||(s.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=s.DomUtil.getPosition(this._element).subtract(r),s.DomUtil.addClass(i.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,s.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),s.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){s.DomUtil.removeClass(i.body,"leaflet-dragging"),this._lastTarget&&(s.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in s.Draggable.MOVE)s.DomEvent.off(i,s.Draggable.MOVE[e],this._onMove).off(i,s.Draggable.END[e],this._onUp);s.DomUtil.enableImageDrag(),s.DomUtil.enableTextSelection(),this._moved&&this._moving&&(s.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),s.Handler=s.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),s.Map.mergeOptions({dragging:!0,inertia:!s.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:s.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),s.Map.Drag=s.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new s.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,o=this._draggable._newPos.x,r=(o-t+i)%e+t-i,s=(o+t+i)%e-t-i,n=Math.abs(r+i)<Math.abs(s+i)?r:s;this._draggable._newPos.x=n},_onDragEnd:function(e){var t=this._map,i=t.options,o=+new Date-this._lastTime,r=!i.inertia||o>i.inertiaThreshold||!this._positions[0];if(t.fire("dragend",e),r)t.fire("moveend");else{var n=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+o-this._times[0])/1e3,p=i.easeLinearity,l=n.multiplyBy(p/a),c=l.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,c),y=l.multiplyBy(u/c),h=u/(i.inertiaDeceleration*p),d=y.multiplyBy(-h/2).round();d.x&&d.y?(d=t._limitOffset(d,t.options.maxBounds),s.Util.requestAnimFrame(function(){t.panBy(d,{duration:h,easeLinearity:p,noMoveStart:!0})})):t.fire("moveend")}}}),s.Map.addInitHook("addHandler","dragging",s.Map.Drag),s.Map.mergeOptions({doubleClickZoom:!0}),s.Map.DoubleClickZoom=s.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}}),s.Map.addInitHook("addHandler","doubleClickZoom",s.Map.DoubleClickZoom),s.Map.mergeOptions({scrollWheelZoom:!0}),s.Map.ScrollWheelZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),s.DomEvent.on(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault),this._delta=0},removeHooks:function(){s.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),s.DomEvent.off(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault)},_onWheelScroll:function(e){var t=s.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s.bind(this._performZoom,this),i),s.DomEvent.preventDefault(e),s.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,i=e.getZoom();t=t>0?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(i+t)-i,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(i+t):e.setZoomAround(this._lastMousePos,i+t))}}),s.Map.addInitHook("addHandler","scrollWheelZoom",s.Map.ScrollWheelZoom),s.extend(s.DomEvent,{_touchstart:s.Browser.msPointer?"MSPointerDown":s.Browser.pointer?"pointerdown":"touchstart",_touchend:s.Browser.msPointer?"MSPointerUp":s.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,t,o){function r(e){var t;if(s.Browser.pointer?(d.push(e.pointerId),t=d.length):t=e.touches.length,!(t>1)){var i=Date.now(),o=i-(a||i);p=e.touches?e.touches[0]:e,l=o>0&&c>=o,a=i}}function n(e){if(s.Browser.pointer){var i=d.indexOf(e.pointerId);if(-1===i)return;d.splice(i,1)}if(l){if(s.Browser.pointer){var o,r={};for(var n in p)o=p[n],r[n]="function"==typeof o?o.bind(p):o;p=r}p.type="dblclick",t(p),a=null}}var a,p,l=!1,c=250,u="_leaflet_",y=this._touchstart,h=this._touchend,d=[];e[u+y+o]=r,e[u+h+o]=n;var g=s.Browser.pointer?i.documentElement:e;return e.addEventListener(y,r,!1),g.addEventListener(h,n,!1),s.Browser.pointer&&g.addEventListener(s.DomEvent.POINTER_CANCEL,n,!1),this},removeDoubleTapListener:function(e,t){var o="_leaflet_";return e.removeEventListener(this._touchstart,e[o+this._touchstart+t],!1),(s.Browser.pointer?i.documentElement:e).removeEventListener(this._touchend,e[o+this._touchend+t],!1),s.Browser.pointer&&i.documentElement.removeEventListener(s.DomEvent.POINTER_CANCEL,e[o+this._touchend+t],!1),this}}),s.extend(s.DomEvent,{POINTER_DOWN:s.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:s.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:s.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:s.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,i,o){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,i,o);case"touchend":return this.addPointerListenerEnd(e,t,i,o);case"touchmove":return this.addPointerListenerMove(e,t,i,o);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,t,o,r){var n="_leaflet_",a=this._pointers,p=function(e){"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&s.DomEvent.preventDefault(e);for(var t=!1,i=0;i<a.length;i++)if(a[i].pointerId===e.pointerId){t=!0;break}t||a.push(e),e.touches=a.slice(),e.changedTouches=[e],o(e)};if(e[n+"touchstart"+r]=p,e.addEventListener(this.POINTER_DOWN,p,!1),!this._pointerDocumentListener){var l=function(e){for(var t=0;t<a.length;t++)if(a[t].pointerId===e.pointerId){a.splice(t,1);break}};i.documentElement.addEventListener(this.POINTER_UP,l,!1),i.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,i,o){function r(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<n.length;t++)if(n[t].pointerId===e.pointerId){n[t]=e;break}e.touches=n.slice(),e.changedTouches=[e],i(e)}}var s="_leaflet_",n=this._pointers;return e[s+"touchmove"+o]=r,e.addEventListener(this.POINTER_MOVE,r,!1),this},addPointerListenerEnd:function(e,t,i,o){var r="_leaflet_",s=this._pointers,n=function(e){for(var t=0;t<s.length;t++)if(s[t].pointerId===e.pointerId){s.splice(t,1);break}e.touches=s.slice(),e.changedTouches=[e],i(e)};return e[r+"touchend"+o]=n,e.addEventListener(this.POINTER_UP,n,!1),e.addEventListener(this.POINTER_CANCEL,n,!1),this},removePointerListener:function(e,t,i){var o="_leaflet_",r=e[o+t+i];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,r,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,r,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,r,!1),e.removeEventListener(this.POINTER_CANCEL,r,!1)}return this}}),s.Map.mergeOptions({touchZoom:s.Browser.touch&&!s.Browser.android23,bounceAtZoomLimits:!0}),s.Map.TouchZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var o=t.mouseEventToLayerPoint(e.touches[0]),r=t.mouseEventToLayerPoint(e.touches[1]),n=t._getCenterLayerPoint();this._startCenter=o.add(r)._divideBy(2),this._startDist=o.distanceTo(r),this._moved=!1,this._zooming=!0,this._centerOffset=n.subtract(this._startCenter),t._panAnim&&t._panAnim.stop(),s.DomEvent.on(i,"touchmove",this._onTouchMove,this).on(i,"touchend",this._onTouchEnd,this),s.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var i=t.mouseEventToLayerPoint(e.touches[0]),o=t.mouseEventToLayerPoint(e.touches[1]);this._scale=i.distanceTo(o)/this._startDist,this._delta=i._add(o)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(t.options.bounceAtZoomLimits||!(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&this._scale>1))&&(this._moved||(s.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),s.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),i=e.layerPointToLatLng(t),o=e.getScaleZoom(this._scale);e._animateZoom(i,o,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var e=this._map;this._zooming=!1,s.DomUtil.removeClass(e._mapPane,"leaflet-touching"),s.Util.cancelAnimFrame(this._animRequest),s.DomEvent.off(i,"touchmove",this._onTouchMove).off(i,"touchend",this._onTouchEnd);var t=this._getScaleOrigin(),o=e.layerPointToLatLng(t),r=e.getZoom(),n=e.getScaleZoom(this._scale)-r,a=n>0?Math.ceil(n):Math.floor(n),p=e._limitZoom(r+a),l=e.getZoomScale(p)/this._scale;e._animateZoom(o,p,t,l)},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),s.Map.addInitHook("addHandler","touchZoom",s.Map.TouchZoom),s.Map.mergeOptions({tap:!0,tapTolerance:15}),s.Map.Tap=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(s.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],o=t.target;this._startPos=this._newPos=new s.Point(t.clientX,t.clientY),o.tagName&&"a"===o.tagName.toLowerCase()&&s.DomUtil.addClass(o,"leaflet-active"),this._holdTimeout=setTimeout(s.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))},this),1e3),s.DomEvent.on(i,"touchmove",this._onMove,this).on(i,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),s.DomEvent.off(i,"touchmove",this._onMove,this).off(i,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],o=t.target;o&&o.tagName&&"a"===o.tagName.toLowerCase()&&s.DomUtil.removeClass(o,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new s.Point(t.clientX,t.clientY)},_simulateEvent:function(t,o){var r=i.createEvent("MouseEvents");r._simulated=!0,o.target._simulatedClick=!0,r.initMouseEvent(t,!0,!0,e,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(r)}}),s.Browser.touch&&!s.Browser.pointer&&s.Map.addInitHook("addHandler","tap",s.Map.Tap),s.Map.mergeOptions({boxZoom:!0}),s.Map.BoxZoom=s.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){s.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){s.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){return this._moved=!1,!e.shiftKey||1!==e.which&&1!==e.button?!1:(s.DomUtil.disableTextSelection(),s.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),void s.DomEvent.on(i,"mousemove",this._onMouseMove,this).on(i,"mouseup",this._onMouseUp,this).on(i,"keydown",this._onKeyDown,this))},_onMouseMove:function(e){this._moved||(this._box=s.DomUtil.create("div","leaflet-zoom-box",this._pane),s.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,i=this._box,o=this._map.mouseEventToLayerPoint(e),r=o.subtract(t),n=new s.Point(Math.min(o.x,t.x),Math.min(o.y,t.y));s.DomUtil.setPosition(i,n),this._moved=!0,i.style.width=Math.max(0,Math.abs(r.x)-4)+"px",i.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),s.DomUtil.enableTextSelection(),s.DomUtil.enableImageDrag(),s.DomEvent.off(i,"mousemove",this._onMouseMove).off(i,"mouseup",this._onMouseUp).off(i,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var t=this._map,i=t.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(i)){var o=new s.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(i));t.fitBounds(o),t.fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),s.Map.addInitHook("addHandler","boxZoom",s.Map.BoxZoom),s.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),s.Map.Keyboard=s.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),s.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;s.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var t=i.body,o=i.documentElement,r=t.scrollTop||o.scrollTop,s=t.scrollLeft||o.scrollLeft;this._map._container.focus(),e.scrollTo(s,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,i,o=this._panKeys={},r=this.keyCodes;for(t=0,i=r.left.length;i>t;t++)o[r.left[t]]=[-1*e,0];for(t=0,i=r.right.length;i>t;t++)o[r.right[t]]=[e,0];for(t=0,i=r.down.length;i>t;t++)o[r.down[t]]=[0,e];for(t=0,i=r.up.length;i>t;t++)o[r.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,i,o=this._zoomKeys={},r=this.keyCodes;for(t=0,i=r.zoomIn.length;i>t;t++)o[r.zoomIn[t]]=e;for(t=0,i=r.zoomOut.length;i>t;t++)o[r.zoomOut[t]]=-e},_addHooks:function(){s.DomEvent.on(i,"keydown",this._onKeyDown,this)},_removeHooks:function(){s.DomEvent.off(i,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,i=this._map;if(t in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[t]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(t in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[t])}s.DomEvent.stop(e)}}),s.Map.addInitHook("addHandler","keyboard",s.Map.Keyboard),s.Handler.MarkerDrag=s.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new s.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),s.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),s.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,i=s.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(i);t&&s.DomUtil.setPosition(t,i),e._latlng=o,e.fire("move",{latlng:o}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),s.Control=s.Class.extend({options:{position:"topright"},initialize:function(e){s.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),o=e._controlCorners[i];return s.DomUtil.addClass(t,"leaflet-control"),-1!==i.indexOf("bottom")?o.insertBefore(t,o.firstChild):o.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),i=e._controlCorners[t];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),s.control=function(e){return new s.Control(e)},s.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,r){var n=i+e+" "+i+r;t[e+r]=s.DomUtil.create("div",n,o)}var t=this._controlCorners={},i="leaflet-",o=this._controlContainer=s.DomUtil.create("div",i+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),s.Control.Zoom=s.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=s.DomUtil.create("div",t+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",i,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,i,o,r,n){var a=s.DomUtil.create("a",i,o);a.innerHTML=e,a.href="#",a.title=t;var p=s.DomEvent.stopPropagation;return s.DomEvent.on(a,"click",p).on(a,"mousedown",p).on(a,"dblclick",p).on(a,"click",s.DomEvent.preventDefault).on(a,"click",r,n).on(a,"click",this._refocusOnMap,n),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";s.DomUtil.removeClass(this._zoomInButton,t),s.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&s.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&s.DomUtil.addClass(this._zoomInButton,t);

}}),s.Map.mergeOptions({zoomControl:!0}),s.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new s.Control.Zoom,this.addControl(this.zoomControl))}),s.control.zoom=function(e){return new s.Control.Zoom(e)},s.Control.Attribution=s.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){s.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=s.DomUtil.create("div","leaflet-control-attribution"),s.DomEvent.disableClickPropagation(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):void 0},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):void 0},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),s.Map.mergeOptions({attributionControl:!0}),s.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new s.Control.Attribution).addTo(this))}),s.control.attribution=function(e){return new s.Control.Attribution(e)},s.Control.Scale=s.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",i=s.DomUtil.create("div",t),o=this.options;return this._addScales(o,t,i),e.on(o.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=s.DomUtil.create("div",t+"-line",i)),e.imperial&&(this._iScale=s.DomUtil.create("div",t+"-line",i))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,i=6378137*Math.PI*Math.cos(t*Math.PI/180),o=i*(e.getNorthEast().lng-e.getSouthWest().lng)/180,r=this._map.getSize(),s=this.options,n=0;r.x>0&&(n=o*(s.maxWidth/r.x)),this._updateScales(s,n)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=1e3>t?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,i,o,r=3.2808399*e,s=this._iScale;r>5280?(t=r/5280,i=this._getRoundNum(t),s.style.width=this._getScaleWidth(i/t)+"px",s.innerHTML=i+" mi"):(o=this._getRoundNum(r),s.style.width=this._getScaleWidth(o/r)+"px",s.innerHTML=o+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}}),s.control.scale=function(e){return new s.Control.Scale(e)},s.Control.Layers=s.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,i){s.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var o in e)this._addLayer(e[o],o);for(o in t)this._addLayer(t[o],o,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=s.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=s.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),s.Browser.touch?s.DomEvent.on(t,"click",s.DomEvent.stopPropagation):s.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var i=this._form=s.DomUtil.create("form",e+"-list");if(this.options.collapsed){s.Browser.android||s.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var o=this._layersLink=s.DomUtil.create("a",e+"-toggle",t);o.href="#",o.title="Layers",s.Browser.touch?s.DomEvent.on(o,"click",s.DomEvent.stop).on(o,"click",this._expand,this):s.DomEvent.on(o,"focus",this._expand,this),s.DomEvent.on(i,"click",function(){setTimeout(s.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=s.DomUtil.create("div",e+"-base",i),this._separator=s.DomUtil.create("div",e+"-separator",i),this._overlaysList=s.DomUtil.create("div",e+"-overlays",i),t.appendChild(i)},_addLayer:function(e,t,i){var o=s.stamp(e);this._layers[o]={layer:e,name:t,overlay:i},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,i=!1,o=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),o=o||t.overlay,i=i||!t.overlay;this._separator.style.display=o&&i?"":"none"}},_onLayerChange:function(e){var t=this._layers[s.stamp(e.layer)];if(t){this._handlingClick||this._update();var i=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;i&&this._map.fire(i,t)}},_createRadioElement:function(e,t){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';t&&(o+=' checked="checked"'),o+="/>";var r=i.createElement("div");return r.innerHTML=o,r.firstChild},_addItem:function(e){var t,o=i.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?(t=i.createElement("input"),t.type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers",r),t.layerId=s.stamp(e.layer),s.DomEvent.on(t,"click",this._onInputClick,this);var n=i.createElement("span");n.innerHTML=" "+e.name,o.appendChild(t),o.appendChild(n);var a=e.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(o),o},_onInputClick:function(){var e,t,i,o=this._form.getElementsByTagName("input"),r=o.length;for(this._handlingClick=!0,e=0;r>e;e++)t=o[e],i=this._layers[t.layerId],t.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!t.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){s.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),s.control.layers=function(e,t,i){return new s.Control.Layers(e,t,i)},s.PosAnimation=s.Class.extend({includes:s.Mixin.Events,run:function(e,t,i,o){this.stop(),this._el=e,this._inProgress=!0,this._newPos=t,this.fire("start"),e.style[s.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(o||.5)+",1)",s.DomEvent.on(e,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),s.DomUtil.setPosition(e,t),s.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(s.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(s.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),s.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();return e?(this._el._leaflet_pos=e,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,i,o,r=this._el,n=e.getComputedStyle(r);if(s.Browser.any3d){if(o=n[s.DomUtil.TRANSFORM].match(this._transformRe),!o)return;t=parseFloat(o[1]),i=parseFloat(o[2])}else t=parseFloat(n.left),i=parseFloat(n.top);return new s.Point(t,i,!0)},_onTransitionEnd:function(){s.DomEvent.off(this._el,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[s.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),s.Map.include({setView:function(e,t,i){if(t=t===o?this._zoom:this._limitZoom(t),e=this._limitCenter(s.latLng(e),t,this.options.maxBounds),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==o&&(i.zoom=s.extend({animate:i.animate},i.zoom),i.pan=s.extend({animate:i.animate},i.pan));var r=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){if(e=s.point(e).round(),t=t||{},!e.x&&!e.y)return this;if(this._panAnim||(this._panAnim=new s.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){s.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){s.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._floor();return(t&&t.animate)===!0||this.getSize().contains(i)?(this.panBy(i,t),!0):!1}}),s.PosAnimation=s.DomUtil.TRANSITION?s.PosAnimation:s.PosAnimation.extend({run:function(e,t,i,o){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=s.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=s.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,t=1e3*this._duration;t>e?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));s.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){s.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),s.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),s.DomUtil.TRANSITION&&s.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&s.DomUtil.TRANSITION&&s.Browser.any3d&&!s.Browser.android23&&!s.Browser.mobileOpera,this._zoomAnimated&&s.DomEvent.on(this._mapPane,s.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),s.Map.include(s.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/o),s=this._getCenterLayerPoint()._add(r);return i.animate===!0||this.getSize().contains(r)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,t,s,o,null,!0),!0):!1},_animateZoom:function(e,t,i,o,r,n,a){a||(this._animatingZoom=!0),s.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=t,s.Draggable&&(s.Draggable._disabled=!0),s.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:e,zoom:t,origin:i,scale:o,delta:r,backwards:n}),setTimeout(s.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,s.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),s.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),s.Draggable&&(s.Draggable._disabled=!1)},this))}}:{}),s.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,i=s.DomUtil.TRANSFORM,o=e.delta?s.DomUtil.getTranslateString(e.delta):t.style[i],r=s.DomUtil.getScaleString(e.scale,e.origin);t.style[i]=e.backwards?r+" "+o:o+" "+r},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),s.Util.falseFn(t.offsetWidth);var i=this._map.getZoom();(i>this.options.maxZoom||i<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[s.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,i=this._getLoadedTilesPercentage(t),o=this._getLoadedTilesPercentage(e);return t&&i>.5&&.5>o?(e.style.visibility="hidden",void this._stopLoadingImages(e)):(t.style.visibility="hidden",t.style[s.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(e){var t,i,o=e.getElementsByTagName("img"),r=0;for(t=0,i=o.length;i>t;t++)o[t].complete&&r++;return r/i},_stopLoadingImages:function(e){var t,i,o,r=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,i=r.length;i>t;t++)o=r[t],o.complete||(o.onload=s.Util.falseFn,o.onerror=s.Util.falseFn,o.src=s.Util.emptyImageUrl,o.parentNode.removeChild(o))}}),s.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=s.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=s.bind(this._handleGeolocationResponse,this),i=s.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,i=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,i=e.coords.longitude,o=new s.LatLng(t,i),r=180*e.coords.accuracy/40075017,n=r/Math.cos(s.LatLng.DEG_TO_RAD*t),a=s.latLngBounds([t-r,i-n],[t+r,i+n]),p=this._locateOptions;if(p.setView){var l=Math.min(this.getBoundsZoom(a),p.maxZoom);this.setView(o,l)}var c={latlng:o,bounds:a,timestamp:e.timestamp};for(var u in e.coords)"number"==typeof e.coords[u]&&(c[u]=e.coords[u]);this.fire("locationfound",c)}})}(window,document)},{}],28:[function(e,t,i){(function(e){(function(e,t,i,o,r){function s(e,t){var i,o,r,s,n,a,p,l;for(i=3&e.length,o=e.length-i,r=t,n=3432918353,a=461845907,l=0;o>l;)p=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,p=(65535&p)*n+(((p>>>16)*n&65535)<<16)&4294967295,p=p<<15|p>>>17,p=(65535&p)*a+(((p>>>16)*a&65535)<<16)&4294967295,r^=p,r=r<<13|r>>>19,s=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&s)+27492+(((s>>>16)+58964&65535)<<16);switch(p=0,i){case 3:p^=(255&e.charCodeAt(l+2))<<16;case 2:p^=(255&e.charCodeAt(l+1))<<8;case 1:p^=255&e.charCodeAt(l),p=(65535&p)*n+(((p>>>16)*n&65535)<<16)&4294967295,p=p<<15|p>>>17,p=(65535&p)*a+(((p>>>16)*a&65535)<<16)&4294967295,r^=p}return r^=e.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0}r("undefined"!=typeof s?s:window.murmurhash3_32_gc)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t,i){(function(){function e(e){function t(t,i,o,r,s,n){for(;s>=0&&n>s;s+=e){var a=r?r[s]:s;o=i(o,t[a],a,t)}return o}return function(i,o,r,s){o=T(o,s,4);var n=!I(i)&&_.keys(i),a=(n||i).length,p=e>0?0:a-1;return arguments.length<3&&(r=i[n?n[p]:p],p+=e),t(i,o,r,n,p,a)}}function o(e){return function(t,i,o){i=b(i,o);for(var r=V(t),s=e>0?0:r-1;s>=0&&r>s;s+=e)if(i(t[s],s,t))return s;return-1}}function r(e,t,i){return function(o,r,s){var n=0,a=V(o);if("number"==typeof s)e>0?n=s>=0?s:Math.max(s+a,n):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return s=i(o,r),o[s]===r?s:-1;if(r!==r)return s=t(y.call(o,n,a),_.isNaN),s>=0?s+n:-1;for(s=e>0?n:a-1;s>=0&&a>s;s+=e)if(o[s]===r)return s;return-1}}function s(e,t){var i=E.length,o=e.constructor,r=_.isFunction(o)&&o.prototype||l,s="constructor";for(_.has(e,s)&&!_.contains(t,s)&&t.push(s);i--;)s=E[i],s in e&&e[s]!==r[s]&&!_.contains(t,s)&&t.push(s)}var n=this,a=n._,p=Array.prototype,l=Object.prototype,c=Function.prototype,u=p.push,y=p.slice,h=l.toString,d=l.hasOwnProperty,g=Array.isArray,m=Object.keys,v=c.bind,f=Object.create,w=function(){},_=function(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)};"undefined"!=typeof i?("undefined"!=typeof t&&t.exports&&(i=t.exports=_),i._=_):n._=_,_.VERSION="1.8.3";var T=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,o){return e.call(t,i,o)};case 3:return function(i,o,r){return e.call(t,i,o,r)};case 4:return function(i,o,r,s){return e.call(t,i,o,r,s)}}return function(){return e.apply(t,arguments)}},b=function(e,t,i){return null==e?_.identity:_.isFunction(e)?T(e,t,i):_.isObject(e)?_.matcher(e):_.property(e)};_.iteratee=function(e,t){return b(e,t,1/0)};var x=function(e,t){return function(i){var o=arguments.length;if(2>o||null==i)return i;for(var r=1;o>r;r++)for(var s=arguments[r],n=e(s),a=n.length,p=0;a>p;p++){var l=n[p];t&&void 0!==i[l]||(i[l]=s[l])}return i}},k=function(e){if(!_.isObject(e))return{};if(f)return f(e);w.prototype=e;var t=new w;return w.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},M=Math.pow(2,53)-1,V=C("length"),I=function(e){var t=V(e);return"number"==typeof t&&t>=0&&M>=t};_.each=_.forEach=function(e,t,i){t=T(t,i);var o,r;if(I(e))for(o=0,r=e.length;r>o;o++)t(e[o],o,e);else{var s=_.keys(e);for(o=0,r=s.length;r>o;o++)t(e[s[o]],s[o],e)}return e},_.map=_.collect=function(e,t,i){t=b(t,i);for(var o=!I(e)&&_.keys(e),r=(o||e).length,s=Array(r),n=0;r>n;n++){var a=o?o[n]:n;s[n]=t(e[a],a,e)}return s},_.reduce=_.foldl=_.inject=e(1),_.reduceRight=_.foldr=e(-1),_.find=_.detect=function(e,t,i){var o;return o=I(e)?_.findIndex(e,t,i):_.findKey(e,t,i),void 0!==o&&-1!==o?e[o]:void 0},_.filter=_.select=function(e,t,i){var o=[];return t=b(t,i),_.each(e,function(e,i,r){t(e,i,r)&&o.push(e)}),o},_.reject=function(e,t,i){return _.filter(e,_.negate(b(t)),i)},_.every=_.all=function(e,t,i){t=b(t,i);for(var o=!I(e)&&_.keys(e),r=(o||e).length,s=0;r>s;s++){var n=o?o[s]:s;if(!t(e[n],n,e))return!1}return!0},_.some=_.any=function(e,t,i){t=b(t,i);for(var o=!I(e)&&_.keys(e),r=(o||e).length,s=0;r>s;s++){var n=o?o[s]:s;if(t(e[n],n,e))return!0}return!1},_.contains=_.includes=_.include=function(e,t,i,o){return I(e)||(e=_.values(e)),("number"!=typeof i||o)&&(i=0),_.indexOf(e,t,i)>=0},_.invoke=function(e,t){var i=y.call(arguments,2),o=_.isFunction(t);return _.map(e,function(e){var r=o?t:e[t];return null==r?r:r.apply(e,i)})},_.pluck=function(e,t){return _.map(e,_.property(t))},_.where=function(e,t){return _.filter(e,_.matcher(t))},_.findWhere=function(e,t){return _.find(e,_.matcher(t))},_.max=function(e,t,i){var o,r,s=-(1/0),n=-(1/0);if(null==t&&null!=e){e=I(e)?e:_.values(e);for(var a=0,p=e.length;p>a;a++)o=e[a],o>s&&(s=o)}else t=b(t,i),_.each(e,function(e,i,o){r=t(e,i,o),(r>n||r===-(1/0)&&s===-(1/0))&&(s=e,n=r)});return s},_.min=function(e,t,i){var o,r,s=1/0,n=1/0;if(null==t&&null!=e){e=I(e)?e:_.values(e);for(var a=0,p=e.length;p>a;a++)o=e[a],s>o&&(s=o)}else t=b(t,i),_.each(e,function(e,i,o){r=t(e,i,o),(n>r||r===1/0&&s===1/0)&&(s=e,n=r)});return s},_.shuffle=function(e){for(var t,i=I(e)?e:_.values(e),o=i.length,r=Array(o),s=0;o>s;s++)t=_.random(0,s),t!==s&&(r[s]=r[t]),r[t]=i[s];return r},_.sample=function(e,t,i){return null==t||i?(I(e)||(e=_.values(e)),e[_.random(e.length-1)]):_.shuffle(e).slice(0,Math.max(0,t))},_.sortBy=function(e,t,i){return t=b(t,i),_.pluck(_.map(e,function(e,i,o){return{value:e,index:i,criteria:t(e,i,o)}}).sort(function(e,t){var i=e.criteria,o=t.criteria;if(i!==o){if(i>o||void 0===i)return 1;if(o>i||void 0===o)return-1}return e.index-t.index}),"value")};var S=function(e){return function(t,i,o){var r={};return i=b(i,o),_.each(t,function(o,s){var n=i(o,s,t);e(r,o,n)}),r}};_.groupBy=S(function(e,t,i){_.has(e,i)?e[i].push(t):e[i]=[t]}),_.indexBy=S(function(e,t,i){e[i]=t}),_.countBy=S(function(e,t,i){_.has(e,i)?e[i]++:e[i]=1}),_.toArray=function(e){return e?_.isArray(e)?y.call(e):I(e)?_.map(e,_.identity):_.values(e):[]},_.size=function(e){return null==e?0:I(e)?e.length:_.keys(e).length},_.partition=function(e,t,i){t=b(t,i);var o=[],r=[];return _.each(e,function(e,i,s){(t(e,i,s)?o:r).push(e)}),[o,r]},_.first=_.head=_.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:_.initial(e,e.length-t)},_.initial=function(e,t,i){return y.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},_.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:_.rest(e,Math.max(0,e.length-t))},_.rest=_.tail=_.drop=function(e,t,i){return y.call(e,null==t||i?1:t)},_.compact=function(e){return _.filter(e,_.identity)};var L=function(e,t,i,o){for(var r=[],s=0,n=o||0,a=V(e);a>n;n++){var p=e[n];if(I(p)&&(_.isArray(p)||_.isArguments(p))){t||(p=L(p,t,i));var l=0,c=p.length;for(r.length+=c;c>l;)r[s++]=p[l++]}else i||(r[s++]=p)}return r};_.flatten=function(e,t){return L(e,t,!1)},_.without=function(e){return _.difference(e,y.call(arguments,1))},_.uniq=_.unique=function(e,t,i,o){_.isBoolean(t)||(o=i,i=t,t=!1),null!=i&&(i=b(i,o));for(var r=[],s=[],n=0,a=V(e);a>n;n++){var p=e[n],l=i?i(p,n,e):p;t?(n&&s===l||r.push(p),s=l):i?_.contains(s,l)||(s.push(l),r.push(p)):_.contains(r,p)||r.push(p)}return r},_.union=function(){return _.uniq(L(arguments,!0,!0))},_.intersection=function(e){for(var t=[],i=arguments.length,o=0,r=V(e);r>o;o++){var s=e[o];if(!_.contains(t,s)){for(var n=1;i>n&&_.contains(arguments[n],s);n++);n===i&&t.push(s)}}return t},_.difference=function(e){var t=L(arguments,!0,!0,1);return _.filter(e,function(e){return!_.contains(t,e)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(e){for(var t=e&&_.max(e,V).length||0,i=Array(t),o=0;t>o;o++)i[o]=_.pluck(e,o);return i},_.object=function(e,t){for(var i={},o=0,r=V(e);r>o;o++)t?i[e[o]]=t[o]:i[e[o][0]]=e[o][1];return i},_.findIndex=o(1),_.findLastIndex=o(-1),_.sortedIndex=function(e,t,i,o){i=b(i,o,1);for(var r=i(t),s=0,n=V(e);n>s;){var a=Math.floor((s+n)/2);i(e[a])<r?s=a+1:n=a}return s},_.indexOf=r(1,_.findIndex,_.sortedIndex),_.lastIndexOf=r(-1,_.findLastIndex),_.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var o=Math.max(Math.ceil((t-e)/i),0),r=Array(o),s=0;o>s;s++,e+=i)r[s]=e;return r};var A=function(e,t,i,o,r){if(!(o instanceof t))return e.apply(i,r);var s=k(e.prototype),n=e.apply(s,r);return _.isObject(n)?n:s};_.bind=function(e,t){if(v&&e.bind===v)return v.apply(e,y.call(arguments,1));if(!_.isFunction(e))throw new TypeError("Bind must be called on a function");var i=y.call(arguments,2),o=function(){return A(e,o,t,this,i.concat(y.call(arguments)))};return o},_.partial=function(e){var t=y.call(arguments,1),i=function(){for(var o=0,r=t.length,s=Array(r),n=0;r>n;n++)s[n]=t[n]===_?arguments[o++]:t[n];for(;o<arguments.length;)s.push(arguments[o++]);return A(e,i,this,this,s)};return i},_.bindAll=function(e){var t,i,o=arguments.length;if(1>=o)throw new Error("bindAll must be passed function names");for(t=1;o>t;t++)i=arguments[t],e[i]=_.bind(e[i],e);return e},_.memoize=function(e,t){var i=function(o){var r=i.cache,s=""+(t?t.apply(this,arguments):o);return _.has(r,s)||(r[s]=e.apply(this,arguments)),r[s]};return i.cache={},i},_.delay=function(e,t){var i=y.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},_.defer=_.partial(_.delay,_,1),_.throttle=function(e,t,i){var o,r,s,n=null,a=0;i||(i={});var p=function(){a=i.leading===!1?0:_.now(),n=null,s=e.apply(o,r),n||(o=r=null)};return function(){var l=_.now();a||i.leading!==!1||(a=l);var c=t-(l-a);return o=this,r=arguments,0>=c||c>t?(n&&(clearTimeout(n),n=null),a=l,s=e.apply(o,r),n||(o=r=null)):n||i.trailing===!1||(n=setTimeout(p,c)),s}},_.debounce=function(e,t,i){var o,r,s,n,a,p=function(){var l=_.now()-n;t>l&&l>=0?o=setTimeout(p,t-l):(o=null,i||(a=e.apply(s,r),o||(s=r=null)))};return function(){s=this,r=arguments,n=_.now();var l=i&&!o;return o||(o=setTimeout(p,t)),l&&(a=e.apply(s,r),s=r=null),a}},_.wrap=function(e,t){return _.partial(t,e)},_.negate=function(e){return function(){return!e.apply(this,arguments)}},_.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,o=e[t].apply(this,arguments);i--;)o=e[i].call(this,o);return o}},_.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},_.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}},_.once=_.partial(_.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(e){if(!_.isObject(e))return[];if(m)return m(e);var t=[];for(var i in e)_.has(e,i)&&t.push(i);return P&&s(e,t),t},_.allKeys=function(e){if(!_.isObject(e))return[];var t=[];for(var i in e)t.push(i);return P&&s(e,t),t},_.values=function(e){for(var t=_.keys(e),i=t.length,o=Array(i),r=0;i>r;r++)o[r]=e[t[r]];return o},_.mapObject=function(e,t,i){t=b(t,i);for(var o,r=_.keys(e),s=r.length,n={},a=0;s>a;a++)o=r[a],n[o]=t(e[o],o,e);return n},_.pairs=function(e){for(var t=_.keys(e),i=t.length,o=Array(i),r=0;i>r;r++)o[r]=[t[r],e[t[r]]];return o},_.invert=function(e){for(var t={},i=_.keys(e),o=0,r=i.length;r>o;o++)t[e[i[o]]]=i[o];return t},_.functions=_.methods=function(e){var t=[];for(var i in e)_.isFunction(e[i])&&t.push(i);return t.sort()},_.extend=x(_.allKeys),_.extendOwn=_.assign=x(_.keys),_.findKey=function(e,t,i){t=b(t,i);for(var o,r=_.keys(e),s=0,n=r.length;n>s;s++)if(o=r[s],t(e[o],o,e))return o},_.pick=function(e,t,i){var o,r,s={},n=e;if(null==n)return s;_.isFunction(t)?(r=_.allKeys(n),o=T(t,i)):(r=L(arguments,!1,!1,1),o=function(e,t,i){return t in i},n=Object(n));for(var a=0,p=r.length;p>a;a++){var l=r[a],c=n[l];o(c,l,n)&&(s[l]=c)}return s},_.omit=function(e,t,i){if(_.isFunction(t))t=_.negate(t);else{var o=_.map(L(arguments,!1,!1,1),String);t=function(e,t){return!_.contains(o,t)}}return _.pick(e,t,i)},_.defaults=x(_.allKeys,!0),_.create=function(e,t){var i=k(e);return t&&_.extendOwn(i,t),i},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e},_.isMatch=function(e,t){var i=_.keys(t),o=i.length;if(null==e)return!o;for(var r=Object(e),s=0;o>s;s++){var n=i[s];if(t[n]!==r[n]||!(n in r))return!1}return!0};var R=function(e,t,i,o){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var r=h.call(e);if(r!==h.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===r;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var n=e.constructor,a=t.constructor;if(n!==a&&!(_.isFunction(n)&&n instanceof n&&_.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],o=o||[];for(var p=i.length;p--;)if(i[p]===e)return o[p]===t;if(i.push(e),o.push(t),s){if(p=e.length,p!==t.length)return!1;for(;p--;)if(!R(e[p],t[p],i,o))return!1}else{var l,c=_.keys(e);if(p=c.length,_.keys(t).length!==p)return!1;for(;p--;)if(l=c[p],!_.has(t,l)||!R(e[l],t[l],i,o))return!1}return i.pop(),o.pop(),!0};_.isEqual=function(e,t){return R(e,t)},_.isEmpty=function(e){return null==e?!0:I(e)&&(_.isArray(e)||_.isString(e)||_.isArguments(e))?0===e.length:0===_.keys(e).length},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isArray=g||function(e){return"[object Array]"===h.call(e)},_.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){_["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),_.isArguments(arguments)||(_.isArguments=function(e){return _.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(e){return"function"==typeof e||!1}),_.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},_.isNaN=function(e){return _.isNumber(e)&&e!==+e},_.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return void 0===e},_.has=function(e,t){return null!=e&&d.call(e,t)},_.noConflict=function(){return n._=a,this},_.identity=function(e){return e},_.constant=function(e){return function(){return e}},_.noop=function(){},_.property=C,_.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},_.matcher=_.matches=function(e){return e=_.extendOwn({},e),function(t){return _.isMatch(t,e)}},_.times=function(e,t,i){var o=Array(Math.max(0,e));t=T(t,i,1);for(var r=0;e>r;r++)o[r]=t(r);return o},_.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},_.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=_.invert(D),B=function(e){var t=function(t){return e[t]},i="(?:"+_.keys(e).join("|")+")",o=RegExp(i),r=RegExp(i,"g");return function(e){return e=null==e?"":""+e,o.test(e)?e.replace(r,t):e}};_.escape=B(D),_.unescape=B(F),_.result=function(e,t,i){var o=null==e?void 0:e[t];return void 0===o&&(o=i),_.isFunction(o)?o.call(e):o};var O=0;_.uniqueId=function(e){var t=++O+"";return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,$=function(e){return"\\"+j[e]};_.template=function(e,t,i){!t&&i&&(t=i),t=_.defaults({},t,_.templateSettings);var o=RegExp([(t.escape||N).source,(t.interpolate||N).source,(t.evaluate||N).source].join("|")+"|$","g"),r=0,s="__p+='";e.replace(o,function(t,i,o,n,a){return s+=e.slice(r,a).replace(z,$),r=a+t.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":o?s+="'+\n((__t=("+o+"))==null?'':__t)+\n'":n&&(s+="';\n"+n+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var n=new Function(t.variable||"obj","_",s)}catch(a){throw a.source=s,a}var p=function(e){return n.call(this,e,_);

},l=t.variable||"obj";return p.source="function("+l+"){\n"+s+"}",p},_.chain=function(e){var t=_(e);return t._chain=!0,t};var G=function(e,t){return e._chain?_(t).chain():t};_.mixin=function(e){_.each(_.functions(e),function(t){var i=_[t]=e[t];_.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),G(this,i.apply(_,e))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=p[e];_.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],G(this,i)}}),_.each(["concat","join","slice"],function(e){var t=p[e];_.prototype[e]=function(){return G(this,t.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)},{}],30:[function(e,t,i){!function(e){"use strict";var t=function(e){var t;for(t="";t.length<e;)t+=Math.random().toString(36)[2];return t},i=function(e){var t,i,o;t=[];for(i in e)o=e[i],t.push(window.encodeURIComponent(i)+"="+window.encodeURIComponent(o));return t.join("&")},o={fr:{"layers.traffic":"Trafic","layers.transport":"Transports en commun","layers.photo":"Vue aérienne","layers.hybrid":"Afficher le nom des lieux","trafficLegend.trafficAt":"Trafic à {hours}:{minutes}","trafficLegend.slow":"ralenti","trafficLegend.blocked":"fermé","vehicle.comcar":"Petite voiture","vehicle.midcar":"Voiture de taille moyenne","vehicle.sedcar":"Routière","vehicle.luxcar":"Grande routière","vehicle.caravancar":"Véhicule avec caravane","vehicle.2-lt3.5":"Poids lourd, PTAC < 3.5T (2 essieux)","vehicle.2-lt12":"Poids lourd, PTAC < 12T (2 essieux)","vehicle.2-gt12":"Poids lourd, PTAC > 12T (2 essieux)","vehicle.2-gt12a":"Poids lourd, PTAC > 12T, articulé (2 essieux)","vehicle.3-lt3.5":"Poids lourd, PTAC < 3.5T (3 essieux ou plus)","vehicle.3-lt12":"Poids lourd, PTAC < 12T (3 essieux ou plus)","vehicle.3-gt12":"Poids lourd, PTAC > 12T (3 essieux ou plus)","vehicle.3-gt12a":"Poids lourd, PTAC > 12T, articulé (3 essieux ou plus)","vehicle.mot":"Moto","vehicle.van":"Camping car","vehicle.2-coa":"Bus 2 essieux","vehicle.3-coa":"Bus 3 essieux","vehicle.ped":"Piéton","vehicle.bik":"Vélo","vehicle.bike":"Vélo en libre-service","vehicle.pub_tp":"Transports en commun","bikelegend.title":"Pistes cyclables"},en:{"layers.traffic":"Traffic","layers.transport":"Public transports","layers.photo":"Satellite photos","layers.hybrid":"Display locations names","trafficLegend.trafficAt":"Traffic at {hours}:{minutes}","trafficLegend.slow":"slow","trafficLegend.blocked":"congested","vehicle.comcar":"Compact car","vehicle.midcar":"Medium-size car","vehicle.sedcar":"Sedan car","vehicle.luxcar":"Luxury car","vehicle.caravancar":"Vehicle with caravan","vehicle.2-lt3.5":"Truck, GVWR < 3.5T (2 axles)","vehicle.2-lt12":"Truck, GVWR < 12T (2 axles)","vehicle.2-gt12":"Truck, GVWR > 12T (2 axles)","vehicle.2-gt12a":"Truck, GVWR > 12T, articulated (2 axles)","vehicle.3-lt3.5":"Truck, GVWR < 3.5T (3 axles or more)","vehicle.3-lt12":"Truck, GVWR < 12T (3 axles or more)","vehicle.3-gt12":"Truck, GVWR > 12T (3 axles or more)","vehicle.3-gt12a":"Truck, GVWR > 12T, articulated (3 axles or more)","vehicle.mot":"Motorbike","vehicle.van":"Campervan","vehicle.2-coa":"Bus 2 axles","vehicle.3-coa":"Bus 3 axles","vehicle.ped":"Pedestrian","vehicle.bik":"Bicycle","bikelegend.title":"Bicycle paths"},nl:{"layers.traffic":"Verkeer","layers.transport":"Openbaar vervoer","layers.photo":"Luchtfoto's","layers.hybrid":"Locaties weergeven namen","trafficLegend.trafficAt":"Verkeer op {hours}:{minutes}","trafficLegend.slow":"langzaam","trafficLegend.blocked":"vastgelopen","vehicle.comcar":"Kleine auto","vehicle.midcar":"Middelgrote auto","vehicle.sedcar":"Grote auto","vehicle.luxcar":"Luxeauto","vehicle.caravancar":"Voertuig met caravan","vehicle.2-lt3.5":"Vrachtwagen, MTM < 3,5 T (2 assen)","vehicle.2-lt12":"Vrachtwagen, MTM < 12 T (2 assen)","vehicle.2-gt12":"Vrachtwagen, MTM > 12 T (2 assen)","vehicle.2-gt12a":"Vrachtwagen, MTM > 12 T, met oplegger (2 assen)","vehicle.3-lt3.5":"Vrachtwagen, MTM < 3,5 T (3 of meer assen)","vehicle.3-lt12":"Vrachtwagen, MTM < 12 T (3 of meer assen)","vehicle.3-gt12":"Vrachtwagen, MTM > 12 T (3 of meer assen)","vehicle.3-gt12a":"Vrachtwagen, MTM > 12 T, met oplegger (3 of meer assen)","vehicle.mot":"Motor","vehicle.van":"Camping car","vehicle.2-coa":"Bus 2 assen","vehicle.3-coa":"Bus 3 assen","vehicle.ped":"Voetganger","vehicle.bik":"Fiets","bikelegend.title":"Fietspaden"}};e.Mappy={version:"5.3.0",_domain:"mappy.net",_token:"g0ztPgTHGBpIzhtEqb8IVksxgvRO/VCtTwFgtyNXgrE1AkVLgdBHwFgwpQ55cR5jtxZX0O5W1nY=",_clientId:null,_https:"https"===document.location.protocol.substr(0,5),_locale:"fr_FR",_imgPath:"images/",getText:function(e){return o[this._locale.substr(0,2)][e]||""},setLocale:function(e){if("fr_FR"!==e&&"en_GB"!==e&&"fr_BE"!==e&&"nl_BE"!==e)throw new Error("This locale is not available");this._locale=e},setImgPath:function(e){this._imgPath=e},getImgPath:function(){return this._imgPath},getLocale:function(){return this._locale},setToken:function(e){throw new Error("setToken is deprecated in favor of setClientId (refer to documentation)")},_getToken:function(){return this._token},setClientId:function(t){this._clientId=t,this._clientId&&((new Image).src="http"+(e.Mappy._getHttps()?"s":"")+"://log."+e.Mappy._getDomain()+"/log/1.0/ping/api-leaflet/"+this._clientId+"/"+e.Mappy.version)},_getClientId:function(){return this._clientId},enableHttps:function(){this._https=!0},disableHttps:function(){this._https=!1},_getHttps:function(){return this._https},_getDomain:function(){return this._domain},_checkClientId:function(){if(!this._getClientId())throw new Error("ClientId is mandatory (refer to documentation).")},JSONP:function(o){var r,s,n,a,p;if(o=o?o:{},a={data:o.data||{},error:o.error||e.Util.falseFn,success:o.success||e.Util.falseFn,url:o.url||""},0===a.url.length)throw new Error("MissingUrl");return s=!1,r=a.data[o.callback_name||"callback"]="jsonp_"+t(15),window[r]=function(e){a.success(e),window[r]=null},p=window.document.createElement("script"),p.src=a.url,p.src+=a.url.indexOf(!1)?"?":"&",p.src+=i(a.data),p.async=!0,p.onerror=function(e){return a.error({url:p.src,event:e})},p.onload=p.onreadystatechange=function(){return s||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(s=!0,p.onload=p.onreadystatechange=null,!p||!p.parentNode)?void 0:p.parentNode.removeChild(p)},n=n||window.document.getElementsByTagName("head")[0],n.appendChild(p)},cors:function(e){var t;window.XDomainRequest?(t=new XDomainRequest,e.data?t.open("GET",e.url+"?"+i(e.data)):t.open("GET",e.url),e.error&&(t.onerror=e.error),t.onload=function(){e.success(JSON.parse(t.responseText))},t.send()):window.XMLHttpRequest?(t=new XMLHttpRequest,e.data?t.open("GET",e.url+"?"+i(e.data),!0):t.open("GET",e.url,!0),t.onerror=e.error,t.onreadystatechange=function(){4===t.readyState&&(t.status>=200&&t.status<400?e.success(JSON.parse(t.responseText)):e.error&&e.error(new Error("Response returned with non-OK status")))},t.send()):e.error(new Error("CORS not supported"))}};var r=e.Control.Attribution.extend({options:{scale:!0,position:"bottomleft",prefix:'&copy; <a href="http://corporate.mappy.com/conditions-dutilisation/copyright/" title="Mappy" target="_blank">Mappy</a> '},_layers:[],onAdd:function(t){t.on("layeradd",function(t){t.layer instanceof e.Mappy.TileLayer&&(this._layers.push(t.layer),t.layer.on("attributionsrefresh",this._refreshAttributions,this))},this),t.on("layerremove",function(e){for(var t=this._layers.length-1;t>=0;t--)this._layers[t]===e.layer&&(this._layers.splice(t,1),e.layer.off("attributionsrefresh",this._refreshAttributions,this),this._refreshAttributions())},this);var i=e.Control.Attribution.prototype.onAdd.call(this,t);return this.options.scale&&e.control.scale({imperial:!1,position:this.options.position}).addTo(t),i},addTo:function(t){this._map=t;var i=this._container=this.onAdd(t),o=this.getPosition(),r=t._controlCorners[o];return e.DomUtil.addClass(i,"leaflet-control"),r.appendChild(i),this},removeFrom:e.Util.falseFn,remove:e.Util.falseFn,clearAttributions:function(){this._attributions={},this._update()},_refreshAttributions:function(){this.clearAttributions();for(var e=[],t=this._layers.length-1;t>=0;t--)e=e.concat(this._layers[t].getAttributions());for(var i=0;i<e.length;i++)this.addAttribution(e[i])}});e.Mappy.Control=e.Control.extend({options:{position:"topright",singleToolBox:!1},statics:{mainContainer:null},_buttons:{},_tooltips:{},addTo:function(t){return this._buttons={},this._tooltips={},e.Control.prototype.addTo.call(this,t),e.DomUtil.addClass(this._container,"mappy-control"),this},removeFrom:function(t){var i=this.getPosition(),o=t._controlCorners[i];return(!this.options.singleToolBox||this.options.singleToolBox&&e.Mappy.Control.mainContainer)&&(o.removeChild(this._container),this._container=null),this.options.singleToolBox&&e.Mappy.Control.mainContainer&&(e.Mappy.Control.mainContainer=null),this._map=null,this.onRemove&&this.onRemove(t),this},_createContainer:function(t){return this._container=e.DomUtil.create("div","mappy-control-"+t),this._container},_getContainer:function(t){return this.options.singleToolBox?(e.Mappy.Control.mainContainer||(e.Mappy.Control.mainContainer=e.DomUtil.create("div","mappy-control-main")),e.Mappy.Control.mainContainer):e.DomUtil.create("div","mappy-control-"+t)},_createBasicButton:function(t,i){var o=e.DomUtil.create("a","mappy-button mappy-button-"+i,this._container);return o.innerHTML=t||"",o.href="#",e.DomEvent.on(o,"mousedown",e.DomEvent.stop).on(o,"dblclick",e.DomEvent.stop).on(o,"click",e.DomEvent.stop),o},_createButton:function(t,i,o,r){var s=this._createBasicButton(t,o);return this._initTooltip(i,o,s),e.DomEvent.on(s,"click",r,this).on(s,"click",this._refocusOnMap,this),s},_createSwitch:function(t,i,o,r,s,n,a){var p=this._createBasicButton(t,r);return this._initTooltip(i,r,p,a),e.DomEvent.on(p,"click",function(t){e.DomUtil.hasClass(p,"mappy-button-active")?(this.deactivateButton(p),this._updateTooltipContent(i,r),n.call(this,t)):(this.activateButton(p),this._updateTooltipContent(o,r),s.call(this,t)),this._refocusOnMap()},this),p},_initTooltip:function(t,i,o,r){t&&(e.Browser.touch?e.DomEvent.on(o,"click",function(){this._closeTooltips(),this._createTooltip(t,i,o),e.Mappy.layerTooltip&&clearInterval(e.Mappy.layerTooltip),e.Mappy.layerTooltip=setTimeout(e.bind(function(){this._closeTooltip(i)},this),2e3)},this):e.DomEvent.on(o,"mouseenter",function(){this._closeTooltips(),this._createTooltip(t,i,o)},this).on(o,"mouseleave",function(){this._closeTooltip(i,r)},this))},_createTooltip:function(t,i,o){if(this._tooltips[i])this._container.appendChild(this._tooltips[i]);else{var r=e.DomUtil.create("div","mappy-tooltip",this._container);"string"==typeof t?r.innerHTML=t:r.appendChild(t),this._tooltips[i]=r}this._tooltips[i].style.top=o.offsetTop+(o.offsetHeight-this._tooltips[i].offsetHeight)/2+"px"},_updateTooltipContent:function(e,t){this._tooltips[t]&&e&&("string"==typeof e?this._tooltips[t].innerHTML=e:this._tooltips[t].appendChild(e))},_closeTooltip:function(t,i){this._removing=setTimeout(e.bind(function(){this._tooltips[t].parentNode&&this._container.removeChild(this._tooltips[t])},this),i||0)},_closeTooltips:function(){clearTimeout(this._removing);for(var e in this._tooltips)this._tooltips[e].parentNode&&this._tooltips[e].parentNode.removeChild(this._tooltips[e])},activateButton:function(t){e.DomUtil.addClass(t,"mappy-button-active"),t.setAttribute("data-active",1)},deactivateButton:function(t){e.DomUtil.removeClass(t,"mappy-button-active"),t.setAttribute("data-active",0)}});var s=e.Mappy.Control.extend({options:{geolocationMarker:!1,locateOptions:{}},_defaultLocateOptions:{setView:!0,maxZoom:15,timeout:5e3,maximumAge:3e4},onAdd:function(t){return this.options.locateOptions=e.extend(this._defaultLocateOptions,this.options.locateOptions),this._container=e.DomUtil.create("div","mappy-control-geolocation"),this._geolocButton=this._createButton("<span>?</span>",null,"geolocation",this.activateGeolocation),t.on("locationfound",this.onGeolocationSuccess,this),t.on("locationerror",this.onGeolocationError,this),t.on("moveend zoomend",this.deactivate,this),this._container},activateGeolocation:function(){e.DomUtil.removeClass(this._geolocButton,"geolocation-error"),e.DomUtil.addClass(this._geolocButton,"searching"),this._map.fire("locationsearch"),this._map.locate(this.options.locateOptions)},onRemove:function(e){e.off("locationfound",this.onGeolocationSuccess,this)},onGeolocationSuccess:function(t){if(e.DomUtil.removeClass(this._geolocButton,"searching"),this.activateButton(this._geolocButton),this.options.geolocationMarker)if(this.geolocationMarker)this.geolocationMarker.setLatLng(t.latlng);else{var i="marker_geolocation"+(e.Browser.retina?"_x2":"")+".png",o=new e.DivIcon({className:"geolocationMarker",iconSize:[30,30],iconAnchor:[15,15],html:'<img src="'+e.Mappy.getImgPath()+i+'" />'});this.geolocationMarker=e.marker(t.latlng,{icon:o}).addTo(this._map)}},onGeolocationError:function(t){e.DomUtil.removeClass(this._geolocButton,"searching"),e.DomUtil.addClass(this._geolocButton,"geolocation-error"),this._map.on("moveend zoomend",e.bind(function(){e.DomUtil.removeClass(this._geolocButton,"geolocation-error")},this))},deactivate:function(){this.deactivateButton(this._geolocButton)}});e.Control.Layers=e.Mappy.Control.extend({options:{autoZIndex:!0,traffic:!0,publicTransport:!0,viewMode:!0,trafficLegend:!0},initialize:function(t,i,o){e.setOptions(this,o),this._buttons={},this.trafficLegend=null,this._layers={},this._lastZIndex=0;for(var r in t)this._addLayer(t[r],r);for(r in i)this._addLayer(i[r],r,!0)},_addLayer:function(t,i,o){var r=e.stamp(t);this._layers[r]={layer:t,name:i,overlay:o},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},onAdd:function(e){return this._container=this._getContainer("layers"),this._initLayout(),this._initActiveButton(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this),this.options.trafficLegend&&this.trafficLegend.hide()},_initLayout:function(){if(this.options.traffic!==!1&&(this._buttons.traffic=this._createSwitch("<span>'</span>",e.Mappy.getText("layers.traffic"),null,"traffic",this.activateTraffic,this.deactivateTraffic)),this.options.publicTransport!==!1&&(this._buttons.publicTransport=this._createSwitch("<span>7</span>",e.Mappy.getText("layers.transport"),null,"transport",this.activatePublicTransport,this.deactivatePublicTransport)),this.options.trafficLegend&&(this.trafficLegend=e.control.TrafficLegend()),this.options.viewMode!==!1){var t=e.DomUtil.create("div"),i=e.DomUtil.create("span",null,t),o=this._createCheckbox(t),r=e.DomUtil.create("label",null,t);this._buttons.hybrid=o,i.innerHTML=e.Mappy.getText("layers.photo"),r.innerHTML=e.Mappy.getText("layers.hybrid"),r.setAttribute("for","mappy-hybrid"),this._buttons.aerial=this._createSwitch("<span>#</span>",t,null,"aerial",function(){this._map.setViewmode("photo")},function(){this._map.setViewmode("standard"),this._map.removeOverlay("hybrid")},500),e.DomEvent.on(t,"mouseenter",this._onAerialTooltipMouseEnter,this).on(t,"mouseleave",this._onAerialTooltipMouseLeave,this).on(o,"click",this._onAerialLabelClick,this)}},_initActiveButton:function(){var e=this._map.getTilelayer("overlay");e&&this._addOverlay(e.options.name),this._updateViewMode(this._map.getTilelayer().options.name)},_onLayerChange:function(t){var i=this._layers[e.stamp(t.layer)];if(i){var o=i.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i.overlay?"overlayremove"===o?this._removeOverlay(i.name):this._addOverlay(i.name):this._updateViewMode(i.name),o&&this._map.fire(o,i)}},_removeOverlay:function(e){"traffic"===e?(this._buttons.traffic&&this.deactivateButton(this._buttons.traffic),this.trafficLegend&&this.trafficLegend.hide()):"public_transport"===e&&this._buttons.publicTransport?this.deactivateButton(this._buttons.publicTransport):"hybrid"===e&&this._buttons.hybrid&&(this._buttons.hybrid.checked=!1)},_addOverlay:function(e){"traffic"===e?(this._buttons.traffic&&this.activateButton(this._buttons.traffic),this.trafficLegend&&this.trafficLegend.show(this._map)):"public_transport"===e&&this._buttons.publicTransport&&this.activateButton(this._buttons.publicTransport),this._buttons.hybrid&&"hybrid"===e&&(this._buttons.hybrid.checked=!0)},_updateViewMode:function(e){this._buttons.aerial&&("standard"===e?this.deactivateButton(this._buttons.aerial):this.activateButton(this._buttons.aerial))},activateTraffic:function(e){this._map.setOverlay("traffic"),this.trafficLegend&&this.trafficLegend.show(this._map)},deactivateTraffic:function(){this._map.removeOverlay("traffic"),this.trafficLegend&&this.trafficLegend.hide()},activatePublicTransport:function(){this._map.setOverlay("public_transport")},deactivatePublicTransport:function(){this._map.removeOverlay("public_transport")},_createCheckbox:function(e){var t='<input type="checkbox" name="mappy-hybrid-checkbox" id="mappy-hybrid" />',i=document.createElement("div");return i.innerHTML=t,e.appendChild(i.firstChild)},_onAerialTooltipMouseEnter:function(e){clearTimeout(this._removing)},_onAerialTooltipMouseLeave:function(e){this._closeTooltip("aerial",500)},_onAerialLabelClick:function(e){this._buttons.hybrid&&this._buttons.hybrid.checked?("photo"!==this._map.getTilelayer().options.name&&this._map.setViewmode("photo"),this._map.setOverlay("hybrid")):this._map.removeOverlay("hybrid")},getTrafficLegend:function(){return this.trafficLegend}});var n=e.Control.extend({options:{position:"bottomright"},initialize:function(t){this.options=e.extend({},this.options,t)},onAdd:function(t){this._container=e.DomUtil.create("div","mappy-bike-legend");var i=e.DomUtil.create("div","mappy-bike-legend-col mappy-bike-legend-left",this._container),o=e.DomUtil.create("div","mappy-bike-legend-col mappy-bike-legend-right",this._container),r=(e.DomUtil.create("span","mappy-bike-legend-bicyclepath-box",i),e.DomUtil.create("p","mappy-bike-legend-title",o));return r.innerHTML=e.Mappy.getText("bikelegend.title"),this._container}}),a=e.Control.extend({options:{position:"topleft"},onAdd:function(t){this._container=e.DomUtil.create("div","mappy-control-logo");var i=e.DomUtil.create("img","mappy-logo",this._container);return i.src=e.Mappy.getImgPath()+(e.Browser.retina?"api-logo-2x.png":"api-logo.png"),i.style.display="block",i.width="50",i.height="12",i.onerror=function(){throw new Error("Logo is not accessible.")},this._container},removeFrom:e.Util.falseFn,remove:e.Util.falseFn});e.Mappy.TileLayer=e.TileLayer.extend({options:{minZoom:0,maxZoom:19,tileSize:256,subdomains:"1234"},tileUrl:"http{h}://map{s}.{domain}/map/1.0/slab/{m}/256/{z}/{x}/{y}",descrUrl:"http{h}://map1.{domain}/map/1.0/multi-descr/{m}/256/{z}/{t}",descrInfos:{},attributions:[],layerItems:[],initialize:function(t,i,o){o=e.setOptions(this,e.extend({h:e.Mappy._getHttps()?"s":"",m:t,name:t,zIndex:i,domain:e.Mappy._getDomain()},o)),"photo"!==t&&o.detectRetina&&e.Browser.retina&&(this.options.m+="_hd"),"traffic"===t&&(this.tileUrl+="?refresh={refresh}",o.refresh={toString:function(){return Math.random()}}),e.TileLayer.prototype.initialize.call(this,this.tileUrl,o)},onAdd:function(t){e.TileLayer.prototype.onAdd.call(this,t),this.on("load",this._onLoad),"traffic"===this.options.name&&(this.interval=window.setInterval(e.bind(this.redraw,this),12e4))},onRemove:function(t){e.TileLayer.prototype.onRemove.call(this,t),this.off("load",this._onLoad),"traffic"===this.options.name&&window.clearInterval(this.interval)},getAttributions:function(){return this.attributions},_onLoad:function(){var e=this._map.getPixelBounds(),t=e.min.clone(),i=e.max.clone();t=t.divideBy(this.options.tileSize)._floor(),i=i.divideBy(this.options.tileSize)._floor();var o=[];this._adjustTilePoint(t),this._adjustTilePoint(i);for(var r=t.x;r<=i.x;r++)for(var s=t.y;s<=i.y;s++)o.push(r+","+s);o.length>0&&this._requestDescr(o)},_refreshAttributions:function(e){if(this._map){this.attributions=[],this.layerItems=[];for(var t=0;t<e.length;t++){var i=this.options.m+"/"+this._map.getZoom()+"/"+e[t].replace(",","/");if(this.descrInfos[i]){for(var o=0;o<this.descrInfos[i].copyrights.length;o++)this.attributions.push(this.descrInfos[i].copyrights[o].name);this.layerItems=this.layerItems.concat(this.descrInfos[i].items)}}this.fire("attributionsrefresh")}},_requestDescr:function(t){for(var i=this._map.getZoom(),o=[],r=0;r<t.length;r++){var s=this.options.m+"/"+i+"/"+t[r].replace(",","/");this.descrInfos[s]||o.push(t[r])}if(o.length>0){var n=e.Util.template(this.descrUrl,e.extend({z:i,t:o.join(";")},this.options));e.Mappy.cors({url:n,success:e.bind(function(e){for(var i=0;i<e.length;i++)this.descrInfos[this.options.m+"/"+e[i].sid]=e[i];this._refreshAttributions(t)},this)})}else this._refreshAttributions(t)},_update:function(){if(this._map){var t=this._map,i=t.getPixelBounds(),o=t.getZoom(),r=this._getTileSize();if(o>this.options.maxZoom||o<this.options.minZoom)return void this._reset({hard:!0});var s=e.bounds(i.min.divideBy(r)._floor(),i.max.divideBy(r)._floor());this._addTilesFromCenterOut(s),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(s)}}});var p=e.Class.extend({options:{width:"auto",minWidth:"",maxWidth:"",showDelay:500,hideDelay:500,mouseOffset:e.point(0,20),fadeAnimation:!0,trackMouse:!1},initialize:function(t){e.setOptions(this,t),this._createTip()},_createTip:function(){if(this._map=this.options.map,!this._map)throw new Error("No map configured for tooltip");this._container=e.DomUtil.create("div","leaflet-tooltip"),e.DomUtil.addClass(this._container,"mappy-tooltip-transport"),this._container.style.position="absolute",this._container.style.width=this._isNumeric(this.options.width)?this.options.width+"px":this.options.width,this._container.style.minWidth=this._isNumeric(this.options.minWidth)?this.options.minWidth+"px":this.options.minWidth,this._container.style.maxWidth=this._isNumeric(this.options.maxWidth)?this.options.maxWidth+"px":this.options.maxWidth,this.options.html&&this.setHtml(this.options.html),this.options.target&&this.setTarget(this.options.target),this._map._tooltipContainer.appendChild(this._container)},isVisible:function(){return this._showing},setTarget:function(e){e._icon&&(e=e._icon),e!==this._target&&(this._target&&this._unbindTarget(this._target),this._bindTarget(e),this._target=e)},_bindTarget:function(t){e.DomEvent.on(t,"mouseover",this._onTargetMouseover,this).on(t,"mouseout",this._onTargetMouseout,this).on(t,"mousemove",this._onTargetMousemove,this)},_unbindTarget:function(t){e.DomEvent.off(t,"mouseover",this._onTargetMouseover,this).off(t,"mouseout",this._onTargetMouseout,this).off(t,"mousemove",this._onTargetMousemove,this)},setHtml:function(e){if("string"==typeof e)this._container.innerHTML=e;else{for(;this._container.hasChildNodes();)this._container.removeChild(this._container.firstChild);this._container.appendChild(this._content)}this._sizeChanged=!0},setPosition:function(e){var t=this._map.getSize(),i=this._container,o=this._getElementSize(this._container);e=e.add(this.options.mouseOffset),e.x+o.x>t.x?(i.style.left="auto",i.style.right=t.x-e.x+"px"):(i.style.left=e.x+"px",i.style.right="auto"),e.y+o.y>t.y?(i.style.top="auto",i.style.bottom=t.y-e.y+2*this.options.mouseOffset.y+"px"):(i.style.top=e.y+"px",i.style.bottom="auto")},remove:function(){this._container.parentNode.removeChild(this._container),delete this._container,this._target&&this._unbindTarget(this._target)},show:function(e,t){p.activeTip&&p.activeTip!=this&&p.activeTip._hide(),p.activeTip=this,t&&this.setHtml(t),this.setPosition(e),this.options.showDelay?this._delay(this._show,this,this.options.hideDelay):this._show()},_show:function(){this._container.style.display="inline-block",e.DomUtil.addClass(this._container,"leaflet-tooltip-fade"),this._showing=!0},hide:function(){this.options.hideDelay?this._delay(this._hide,this,this.options.hideDelay):this._hide()},_hide:function(){this._timeout&&clearTimeout(this._timeout),e.DomUtil.removeClass(this._container,"leaflet-tooltip-fade"),this._container.style.display="none",this._showing=!1,p.activeTip===this&&delete p.activeTip},_delay:function(e,t,i){var o=this;this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){e.call(t),delete o._timeout},i)},_isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},_getElementSize:function(e){var t=this._size;return(!t||this._sizeChanged)&&(t={},e.style.left="-999999px",e.style.right="auto",e.style.display="inline-block",t.x=e.offsetWidth,t.y=e.offsetHeight,e.style.left="auto",e.style.display="none",this._sizeChanged=!1),t},_onTargetMouseover:function(e){var t=this._map.mouseEventToContainerPoint(e);this.show(t)},_onTargetMousemove:function(t){if(e.DomEvent.stopPropagation(t),this.options.trackMouse){var i=this._map.mouseEventToContainerPoint(t);this.setPosition(i)}},_onTargetMouseout:function(e){this.hide()}});e.Map.addInitHook(function(){this._tooltipContainer=e.DomUtil.create("div","leaflet-tooltip-container",this._container)}),function(){var t=e.Marker.prototype.onAdd,i=e.Marker.prototype.onRemove,o=e.Marker.prototype.setIcon;e.Marker.include({getTooltip:function(){return this._tooltip},onAdd:function(i){t.call(this,i),this.options.tooltip&&(this._tooltip=p(e.extend(this.options.tooltip,{target:this,map:i})))},onRemove:function(e){this._tooltip&&this._tooltip.remove(),i.call(this,e)},setIcon:function(e){o.call(this,e),this._tooltip&&this._tooltip.setTarget(this._icon)}})}(),e.Control.TrafficLegend=e.Mappy.Control.extend({options:{position:"bottomright"},_initLayout:function(){this._container=e.DomUtil.create("div","mappy-traffic-legend clearfix");var t=(e.DomUtil.create("p","mappy-traffic-legend-title",this._container),e.DomUtil.create("table","",this._container)),i=e.DomUtil.create("tr","",t);e.DomUtil.create("td","orange",i),e.DomUtil.create("td","red",i),e.DomUtil.create("td","darkred",i),e.DomUtil.create("td","black",i);var o=e.DomUtil.create("p","left",this._container);o.innerHTML=e.Mappy.getText("trafficLegend.slow");var r=e.DomUtil.create("p","right",this._container);return r.innerHTML=e.Mappy.getText("trafficLegend.blocked"),this._container},show:function(t){return this._map?(this.refresh(),void(this._container&&e.DomUtil.addClass(this._container.parentElement,"leaflet-control-with-traffic"))):(this.addTo(t),void(this._container&&e.DomUtil.addClass(this._container.parentElement,"leaflet-control-with-traffic")))},hide:function(){this._container&&e.DomUtil.removeClass(this._container.parentElement,"leaflet-control-with-traffic"),this._map&&(this.removeFrom(this._map),this._map=null)},onAdd:function(){return this._container||this._initLayout(),this.refresh(),this.interval=window.setInterval(e.bind(this.refresh,this),12e4),this._container},onRemove:function(){window.clearInterval(this.interval)},refresh:function(){var t=new Date;this._container.querySelector("p.mappy-traffic-legend-title").innerHTML=e.Util.template(e.Mappy.getText("trafficLegend.trafficAt"),{hours:t.getHours(),minutes:(t.getMinutes()<10?"0":"")+t.getMinutes()})}}),e.control.TrafficLegend=function(t){return new e.Control.TrafficLegend(t)},e.Control.Zoom=e.Mappy.Control.extend({options:{zoomSlider:!1},onAdd:function(e){return this._container=this._getContainer("zoom"),this._initLayout(),this._container},onRemove:function(e){e.off("zoomlevelschange",this._updateSize,this).off("zoomend zoomlevelschange",this._updateKnobValue,this)},_initLayout:function(){var e=this.options.zoomSlider?" mappy-button-zoom-full":"";this._buttons.zoomIn=this._createButton("<span>+</span>",null,"zoom-in"+e,function(e){this._map.zoomIn(e.shiftKey?3:1)}),this.options.zoomSlider&&(this._buttons.slider=this._createSlider(),this._buttons.knob=new l(this._buttons.slider.knob,8,8),this._map.whenReady(this._initKnob,this).whenReady(this._initEvents,this).whenReady(this._updateSize,this).whenReady(this._updateKnobValue,this)),this._buttons.zoomOut=this._createButton("<span>-</span>",null,"zoom-out"+e,function(e){this._map.zoomOut(e.shiftKey?3:1)})},_createSlider:function(){var t={};return t.bar=e.DomUtil.create("div","mappy-slider",this._container),t.wrap=e.DomUtil.create("div","mappy-slider-wrap",t.bar),t.body=e.DomUtil.create("div","mappy-slider-body",t.wrap),t.knob=e.DomUtil.create("div","mappy-slider-knob"),e.DomEvent.disableClickPropagation(t.bar),e.DomEvent.disableClickPropagation(t.knob),t},_initKnob:function(){this._buttons.knob.enable(),this._buttons.slider.body.appendChild(this._buttons.slider.knob)},_initEvents:function(){this._map.on("zoomlevelschange",this._updateSize,this).on("zoomend zoomlevelschange",this._updateKnobValue,this),e.DomEvent.on(this._buttons.slider.body,"click",this._onSliderClick,this),this._buttons.knob.on("dragend",this._updateMapZoom,this)},_onSliderClick:function(t){var i=t.touches&&1===t.touches.length?t.touches[0]:t,o=e.DomEvent.getMousePosition(i,this._buttons.slider.body).y;this._buttons.knob.setPosition(o),this._updateMapZoom()},_zoomLevels:function(){var e=this._map.getMaxZoom()-this._map.getMinZoom()+1;return 1/0>e?e:0},_toZoomLevel:function(e){return e+this._map.getMinZoom()},_toValue:function(e){return e-this._map.getMinZoom()},_updateSize:function(){var e=this._zoomLevels();this._buttons.slider.body.style.height=8*e+"px",this._buttons.knob.setSteps(e)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._buttons.knob.getValue()))},_updateKnobValue:function(){this._buttons.knob.setValue(this._toValue(this._map.getZoom()))}});var l=e.Draggable.extend({initialize:function(t,i,o){e.Draggable.prototype.initialize.call(this,t,t),this._element=t,this._stepHeight=i,this._knobHeight=o,this.on("predrag",function(){this._newPos.x=0,this._newPos.y=this._adjust(this._newPos.y)},this)},_adjust:function(e){var t=Math.round(this._toValue(e));return t=Math.max(0,Math.min(this._maxValue,t)),this._toY(t)},_toY:function(e){return this._k*e+this._m},_toValue:function(e){return(e-this._m)/this._k},setSteps:function(e){var t=e*this._stepHeight;this._maxValue=e-1,this._k=-this._stepHeight,this._m=t-(this._stepHeight+this._knobHeight)/2},setPosition:function(t){e.DomUtil.setPosition(this._element,e.point(0,this._adjust(t)))},setValue:function(e){this.setPosition(this._toY(e))},getValue:function(){return this._toValue(e.DomUtil.getPosition(this._element).y)}});e.Mappy.Map=e.Map.extend({_tileLayers:{},_tooltip:null,disabledActions:[],initialize:function(t,i){i=i||{},i.clientId&&e.Mappy.setClientId(i.clientId),e.Mappy._checkClientId();var o=void 0!==i.zoomControl?i.zoomControl:!0;i.zoomControl=!1;var l=void 0!==i.attributionControl?i.attributionControl:{};i.attributionControl=!1,i.maxBounds=i.maxBounds||e.latLngBounds(e.latLng(-90,-1e5),e.latLng(90,1e5)),i.worldCopyJump=void 0!==i.worldCopyJump?i.worldCopyJump:!0,i.zoomAnimationThreshold=void 0!==i.zoomAnimationThreshold?i.zoomAnimationThreshold:3,this.baseLayers={standard:new e.Mappy.TileLayer("standard",1,i.tileLayerOptions),photo:new e.Mappy.TileLayer("photo",1,i.tileLayerOptions)};var c={minZoom:i.tileLayerOptions&&i.tileLayerOptions.minZoom>6?i.tileLayerOptions.minZoom:6};this.overlays={public_transport:new e.Mappy.TileLayer("public_transport",2,e.extend({},i.tileLayerOptions,c)),traffic:new e.Mappy.TileLayer("traffic",2,i.tileLayerOptions),hybrid:new e.Mappy.TileLayer("hybrid",2,i.tileLayerOptions)},e.Map.prototype.initialize.call(this,t,i),this.attributionControl=new r(l).addTo(this),i.logoControl!==!1&&(this.logoControl=new a(i.logoControl||{}).addTo(this)),
this.addLayer(i.viewmode&&this.baseLayers[i.viewmode]?this.baseLayers[i.viewmode]:this.baseLayers.standard),o!==!1&&(this.zoomControl=e.control.zoom(o||{}).addTo(this)),(void 0===i.layersControl||i.layersControl)&&(this.layersControl=e.control.layers(this.baseLayers,this.overlays,i.layersControl||{}).addTo(this)),i.geolocationControl&&"geolocation"in navigator&&(this.geolocationControl=new s(i.geolocationControl).addTo(this)),i.legendControl&&(this.legendControl=new n(i.legendControl).addTo(this)),this._tooltip=new p({map:this,showDelay:0,hideDelay:0}),this.on("mousemove",this._handleMousemove),this.on("move",this._tooltip.hide,this._tooltip),this.on("zoomstart",this._tooltip.hide,this._tooltip),e.Browser.touch||e.DomUtil.addClass(this._container,"no-touch")},setViewmode:function(e){e=e||"standard",this._setTileLayer(this.baseLayers,e),this.baseLayers[e]&&this.fire("viewmode-"+e,this.baseLayers[e])},setOverlay:function(e){this._setTileLayer(this.overlays,e),this.fire("overlay-"+(e?e:"disabled"),this.overlays[e]?this.overlays[e]:null)},removeOverlay:function(e){this.removeLayer(this.overlays[e]),this.fire("overlay-disabled",this.overlays[e]?this.overlays[e]:null)},disableInteractions:function(){var e=["dragging","touchZoom","scrollWheelZoom","doubleClickZoom","boxZoom","keyboard"];this.disabledActions=[];for(var t=0;t<e.length;t++)this[e[t]]&&this[e[t]].enabled()&&(this.disabledActions.push(e[t]),this[e[t]].disable())},enableInteractions:function(){for(var e=0;e<this.disabledActions.length;e++)this[this.disabledActions[e]].enable()},getTilelayer:function(e){var t="overlay"===e?this.overlays:this.baseLayers;for(var i in t)if(this.hasLayer(t[i]))return t[i];return null},_setTileLayer:function(e,t){if("hybrid"===t)this.addLayer(e[t]);else{for(var i in e)!this.hasLayer(e[i])||"hybrid"===i&&t||this.removeLayer(e[i]);e[t]&&this.addLayer(e[t])}return this},_handleMousemove:function(e){var t=this.getTilelayer();if(t){t=t.layerItems;var i=this.getTilelayer("overlay");i&&(t=t.concat(i.layerItems));for(var o=0,r=!1;o<t.length&&!r;){var s=t[o].box;s.minx<e.latlng.lng&&e.latlng.lng<s.maxx&&s.miny<e.latlng.lat&&e.latlng.lat<s.maxy&&(this._tooltip.isVisible()||this._showItemTooltip(t[o]),r=!0),o++}r||this._tooltip.hide()}},_showItemTooltip:function(t){var i="http"+(e.Mappy._getHttps()?"s":"")+"://logotc."+e.Mappy._getDomain()+"/pictos/web/desktop/",o={M:"metro",S:"rer",T:"train",TY:"tram"},r=[],s=t.properties.description.line;s=s instanceof Array?s:[s];for(var n=0;n<s.length;n++)r[s[n].type]||(r[s[n].type]=[]),r[s[n].type].push(s[n].num);var a="";for(var p in r)if(r.hasOwnProperty(p)){var l=o[p]||p,c=['<img src="'+i+"modes/"+l+'.png" />'];for(var u in r[p])if(r[p].hasOwnProperty(u)){var y="tram"===l?"t"+r[p][u].toLowerCase():r[p][u].toLowerCase();c.push('<img src="'+i+"lines/stif_"+l+"_"+y+'.png" />')}a+="</p><p>"+c.join("")}var h=this.latLngToContainerPoint(e.latLng((t.box.maxy+t.box.miny)/2,(t.box.maxx+t.box.minx)/2));this._tooltip.show(h,"<div><p><span>"+t.properties.description.label+"</span>"+a+"</p></div>")},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.log(3)},addLegendControl:function(e){e=e||this.options.legendControl||{},this.legendControl||(this.legendControl=new n(e.legendControl).addTo(this))},removeLegendControl:function(){this.legendControl&&(this.legendControl.removeFrom(this),this.legendControl=null)}}),e.Handler.MarkerDrag.prototype._onDrag=function(){var t=this._marker,i=t._shadow,o=e.DomUtil.getPosition(t._icon),r=t._map.containerPointToLayerPoint([0,0]),s=t._map.containerPointToLayerPoint(t._map.getSize()),n=new e.Point(Math.max(r.x+5,Math.min(o.x,s.x-5)),Math.min(s.y-5,Math.max(o.y,r.y+15)));e.DomUtil.setPosition(t._icon,n);var a=t._map.layerPointToLatLng(n);i&&e.DomUtil.setPosition(i,n),t._latlng=a,t.fire("move",{latlng:a}).fire("drag")},e.Mappy.Route=e.FeatureGroup.extend({initialize:function(t,i,o){e.FeatureGroup.prototype.initialize.call(this),this.polylineStepIdx=[];for(var r=t.route[i||0].actions.action,s=0;s<r.length;s++)"waypoint"===r[s].type&&(this._createStepMarker(e.latLng(r[s].y,r[s].x),"step"),this.polylineStepIdx.push(parseInt(r[s]["polyline-index"],10)));this.colorDictionary=t["color-dictionary"].color,this.colorDictionary.length||(this.colorDictionary=[this.colorDictionary]),this.alternative=!!o,this.route=t.route[i||0]["polyline-definition"],this.points=e.polyline(this.route.polyline).getLatLngs(),this._createShapes(),this._createStepMarker(this.points[0],"start"),this._createStepMarker(this.points[this.points.length-1],"end")},_createShapes:function(){var t,i,o=this.route["road-section-collection"]["road-sections"];if(e.polyline(this.points,{color:"#FFF",weight:9,opacity:.58}).addTo(this),o instanceof Array)for(var r=0;r<o.length;r++)"bike-facility"===o[r].type?i=o[r]["road-section"].split(" "):t=o[r]["road-section"].split(" ");else t=o["road-section"].split(" ");for(var s=this._parseSection(t),n=0;n<s.length;n++){e.polyline(s[n].polyline,{color:s[n].color,opacity:.58}).addTo(this);for(var a=!1,p=0;p<this.polylineStepIdx.length;p++)this.polylineStepIdx[p]===s[n].sliceEnd&&(a=!0);s[n].sliceEnd<this.points.length-1&&!a&&e.marker(this.points[s[n].sliceEnd],{icon:new e.DivIcon({className:"mappy-connexion-marker",iconSize:[10,10],iconAnchor:[5,5]})}).addTo(this)}this._applyBikeFacility(i)},_parseSection:function(e){for(var t,i,o,r,s=[],n=0,a=0;a<e.length;a+=2){t=parseInt(e[a+1],10),i="";for(var p in this.colorDictionary)this.colorDictionary[p].value!==e[a]||!this.alternative&&-1!==this.colorDictionary[p].type.indexOf("-alt")||(i=this.colorDictionary[p].color,o=this.colorDictionary[p].type,r=this.colorDictionary[p].value);var l=this.points.slice(n,t+1);n=t,s.push({polyline:l,color:i,type:o,sliceEnd:t,colorValue:r})}return s},_applyBikeFacility:function(t){if(t)for(var i=this._parseSection(t),o=0;o<i.length;o++)"bike-facility"===i[o].type&&"0"!==i[o].colorValue&&e.polyline(i[o].polyline,{color:i[o].color,weight:6,opacity:1}).addTo(this)},_createStepMarker:function(t,i){var o=e.Mappy.getImgPath()+"roadbook-step-"+i+".png";e.marker(t,{icon:new e.DivIcon({className:"iti-marker mappy-route-"+i,html:'<img src="'+o+'" />',iconSize:[40,50],iconAnchor:[20,50]})}).addTo(this)}}),e.Mappy.route=function(t,i,o){return new e.Mappy.Route(t,i,o)},e.Mappy.Vehicles=["comcar","midcar","sedcar","luxcar","caravancar","2-lt3.5","2-lt12","2-gt12","2-gt12a","3-lt3.5","3-lt12","3-gt12","3-gt12a","mot","van","2-coa","3-coa","ped","bik","bike","pub_tp"],e.Mappy.Services={localeParameters:{fr_FR:{favoriteCountry:250,language:"fre"},en_GB:{favoriteCountry:826,language:"eng"},fr_BE:{favoriteCountry:56,language:"fre"},nl_BE:{favoriteCountry:56,language:"dut"}},_decodePolyline:function(e){for(var t=e.length,i=[],o=[],r=0,s=0,n=0,a=function(){var t,i=0,o=0;do t=e.charCodeAt(r++)-63,o|=(31&t)<<i,i+=5;while(t>=32);return(1&o)>0?~(o>>1):o>>1};t>r;)i.push(a());for(var p=0;p<i.length;p+=2)s+=1e-5*i[p],n+=1e-5*i[p+1],o.push([s,n]);return o},geocode:function(t,i,o){e.Mappy._checkClientId(),t instanceof e.LatLng?t=t.lat+","+t.lng:t instanceof Array&&(t=t[0]+","+t[1]),e.Mappy.JSONP({url:"http"+(e.Mappy._getHttps()?"s":"")+"://axe."+e.Mappy._getDomain()+"/1v1/loc/get.aspx",data:{"opt.format":"json","opt.namedPlaceSearch":1,"opt.interactive":1,"opt.language":this.localeParameters[e.Mappy.getLocale()].language,"opt.favoriteCountry":this.localeParameters[e.Mappy.getLocale()].favoriteCountry,"opt.xmlOutput":"3v0",auth:e.Mappy._getToken(),fullAddress:t},success:function(e){if(!e.kml.Document)return i([]);var t=e.kml.Document.Placemark;t=t instanceof Array?t:[t],i(t)},error:o})},route:function(t){e.Mappy._checkClientId();var i,o,r={};if("function"==typeof arguments[1])i=arguments[1],o=arguments[2];else{for(var s in arguments[1])r[s]=arguments[1][s];i=arguments[2],o=arguments[3]}this._requestRoute(t,r,i,o)},_requestRoute:function(t,i,o,r){var s,n,a=e.extend(i||{},{clientid:e.Mappy._getClientId(),wt:"json",from:"",to:"",vehicle:i.vehicle||"comcar"});a=this._getNormalizedVehicleOptions(a);for(var p=0;p<t.length;p++)s=e.latLng(t[p]),0===p?n="from":p===t.length-1?n="to":(n="stops",a.stops=a.stops||""),a[n]+=("stops"===n&&p>1?";":"")+s.lng+","+s.lat;var l="pub_tp"===i.vehicle||"bike"===i.vehicle?"route":"route_vehicle";this._request("cors","http"+(e.Mappy._getHttps()?"s":"")+"://routemm."+e.Mappy._getDomain()+"/"+l+"/roadbook",a,o,r)},_request:function(t,i,o,r,s){e.Mappy[t]({url:i,data:o,success:e.bind(function(e){try{if(e.routes.route.length||(e.routes.route=[e.routes.route]),!e.routes.route[0].actions)throw new Error(e.routes.route[0].stats.error);for(var t=0;t<e.routes.route.length;t++){var i=this._decodePolyline(e.routes.route[t]["polyline-definition"].polyline);e.routes.route[t]["polyline-definition"].polyline=i}r(e)}catch(o){s(o)}},this),error:s})},_getNormalizedVehicleOptions:function(e){var t={from:"from",to:"to",stops:"stops",clientid:"clientid",infotraffic:"rb.infotraffic",date:"rt.date",time:"rt.time",sens:"rt.sens",notoll:"rt.notoll",cost:"rt.cost",lang:"rb.lang",axl:"rb.axl",gas:"rb.gas",nbroutes:"rt.nbroutes",cvn:"rb.cvn",wt:"wt",veh:"rb.veh",criteria:"criteria"},i={};for(var o in e)t[o]&&(i[t[o]]=e[o]);return"pub_tp"===e.vehicle||"bike"===e.vehicle?i.transport_mode=e.vehicle:i["rb.veh"]=e.vehicle,/^2-/.test(e.vehicle)&&(i["rb.veh"]=e.vehicle.replace(/^(2-)/,""),i["rb.axl"]="2ax"),/^3-/.test(e.vehicle)&&(i["rb.veh"]=e.vehicle.replace(/^(3-)/,""),i["rb.axl"]="3ax"),"caravancar"===e.vehicle&&(i["rb.veh"]="midcar",i["rb.cvn"]="1"),i}}}(window.L)},{}],31:[function(e,t,i){!function(e,t){"use strict";e.Mappy._domain=t.servicesdomain,e.Mappy.setLocale(t.locale),e.Mappy.setClientId("mappy")}(window.L,window.parameters)},{}],32:[function(e,t,i){(function(i,o){!function(r,s,n){"use strict";var a=e("./../bower_components/underscore/underscore.js");e("../underscore/mixin.js");var p=e("./../bower_components/backbone/backbone.js"),l=e("../../portal/service/Routing"),c="undefined"==typeof window,u=c?o:window;if(u.twig){var y=u.twig.extend;u.twig.extend=function(){var e=a.filter(arguments,function(e){return void 0!==e});return y.apply(this,e)}}r=u.Twig=e("twig"),r.setFilter=r.extendFilter,r.setFunction=r.extendFunction,u.twig=r.twig,t.exports=r;var h={EUR:"€",CHF:"CHF"};i.browser&&(r.setFunction("__",function(e,t,i){return Template.getText(e,t)}),r.setFunction("getLocale",function(){return u.parameters.locale})),n.twig=n.twig||{},n.twig.slugify=function(e,t){t=t||[];var i=i||function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},o="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",r="aaaaeeeeiiiioooouuuunc------",s={"æ":"ae","œ":"oe"};return t[0]&&(e=e.replace(/\d+\w+ arrondissement/i,"")),e.toLowerCase().replace(new RegExp("["+o+"]","g"),function(e){return r.charAt(o.indexOf(e))}).replace(new RegExp("["+i(s).join("")+"]","g"),function(e){return s[e]}).replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")},n.twig.datetimeToTsp=function(e){var t=new RegExp(/([0-9]{4})-([0-9]{2})-([0-9]{2})(\:|\ |T)([0-9]{2}):([0-9]{2}):([0-9]{2})/),i=t.exec(e),o=new Date(i[1],parseInt(i[2],10)-1,i[3],i[5],i[6],i[7]);return o.getTime()/1e3},n.twig.tspToString=function(e,t){var i=new Date(1e3*e),o=t&&t[0];return o?(i.getHours()<10?"0":"")+i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes():Template.getText("fulldate",{"%day%":Template.getText("days."+(i.getDay()||7)),"%number%":i.getDate(),"%month%":Template.getText("months."+(i.getMonth()+1)),"%hours%":(i.getHours()<10?"0":"")+i.getHours(),"%minutes%":(i.getMinutes()<10?"0":"")+i.getMinutes()})},n.twig.strip_tags=function(e){return e.replace(/<(\/)*[a-z0-9 ]*(\/)*>/gi,"")},n.twig.number_format=function(e,t){var i=Math.pow(10,t[0]);return Math.round(e*i)/i},n.twig.geoentityBrandingIcon=function(e,t){t=t||[];var i={map:"_carte-web",fd:"_fd-web"},o=e instanceof p.Model?e.get("brandIconUrl"):e.brandIconUrl;if(!o||""===o)return s.services.bucket+"images/marker-blue.png";if(!a.has(i,t[0]))return o;var r=t[1]?"hd":"";return o.replace(".png",i[t[0]]+r+".png")},n.twig.meterToDistance=function(e,t){t=t||[];var i=a.isNaN(parseFloat(t[0]))?1:t[0];return 1e3>e?e.toFixed()+" m":(e/1e3).toFixed(i).replace(/\./,",")+" km"},n.twig.stringToCurrency=function(e){return h[e]},n.twig.boldify=function(e,t){var i=t[0];return i?(i=i.replace("(","("),i=i.replace("[","["),i=i.replace("]","]"),i=i.replace(")",")"),e.replace(new RegExp(i,"gi"),"<strong>"+i+"</strong>")):e},n.twig.floatToPrice=function(e,t){t=t||[];var i=t[0]||2,o=t[1]||",",r=t[2]||" ",s=Math.pow(10,i);e=Math.round(e*s)/s;var n=(e+"").split(".");return n[0].length>3&&(n[0]=(n[0]/1e3).toFixed()+r+n[0].substr(n[0].length-3)),n.join(o)},n.twig.ab_trans=function(e){return u.parameters.ab&&u.parameters.ab.trans&&u.parameters.ab.trans[e]?u.parameters.ab.trans[e]:Template.getText(e)},n.twig.slice=function(e,t){return"string"==typeof e?e.substr(t[0],t[1]):e.slice(t[0],t[1])},n.twig.merge=function(e,t){return e.concat(t[0])},n.twig.truncate=function(e,t){if(e.length>t[0]){var i=Math.min(e.lastIndexOf(" "),t[0]);-1!==i&&(e=e.substring(0,e.indexOf(" ",i))+" ...")}return e},n.twig.secToDuration=function(e){var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),o=e-3600*t-60*i;return o>30&&i++,60===i&&(i=0,t++),(t>0?t+"h":"")+(t>0&&10>i?"0":"")+i+(t>0?"":" min")},n.twig.path=function(e,t){var i=l.generate(e,t);return i},n.twig.trans=function(e,t){var i=t&&t[0];return Template.getText(e,i)},n.twig.transchoice=function(e,t){var i=Template.getText(e,t[1]);return i.split("|")[t[0]<=1?0:1]},n.twig.img_path=function(e){return s.services.bucket+"images/"+e},n.twig.get_config=function(e){for(var t=e.split("."),i=a.extend(s,{}),o=0,r=t.length;r>o;o++)i=i[t[o]]?i[t[o]]:i;return i},n.twig.geoentity_common_icon=function(e){return s.services.poiassets+"assets/1/common/"+e},n.twig.geoentity_templatized_url=function(e){if(!e)return e;var t=s.size>s.sizes.medium?"large":"small",i=s.redirectIds[t];for(var o in i)i.hasOwnProperty(o)&&(e=e.replace("{"+o+"}",i[o]));return e},n.twig.templatize_img_resolution=function(e,t){return e.replace(".png","-"+t+".png")},n.twig.rating=function(e){var t,i='<span class="overall-rating">',o='<i class="icon icon-star star-',r='"></i>',s=Math.round(e);for(t=0;5>t;t++)i+=s>=t+1?o+"full"+r:o+"empty"+r;return i+"</span>"},n.twig.isDefined=function(e){return!!e&&""!==e},n.twig.random=function(e){return parseInt(Math.random()*e,10)},n.twig.contains=function(e,t){var i;return e&&t?(i=new RegExp(t),i.test(e)):!1},n.twig.date=function(e,t){for(var i=new Date(1e3*e),o=t[0],r="",s=0;s<o.length;s++){var n=o.charAt(s);switch(n){case"H":r+=a.padStart(i.getHours(),2,"0");break;case"i":r+=a.padStart(i.getMinutes(),2,"0");break;case"Y":r+=i.getFullYear();break;case"M":r+=a.padStart(i.getMonth()+1,2,"0");break;case"D":r+=a.padStart(i.getDate(),2,"0");break;default:r+=n}}return r},r.setFilter("ab_trans",n.twig.ab_trans),r.setFilter("slice",n.twig.slice),r.setFilter("merge",n.twig.merge),r.setFilter("truncate",n.twig.truncate),r.setFilter("secToDuration",n.twig.secToDuration),r.setFilter("isDefined",n.twig.isDefined),r.setFilter("trans",n.twig.trans),r.setFilter("transchoice",n.twig.transchoice),r.setFilter("img_path",n.twig.img_path),r.setFilter("get_config",n.twig.get_config),r.setFilter("geoentity_common_icon",n.twig.geoentity_common_icon),r.setFilter("geoentity_templatized_url",n.twig.geoentity_templatized_url),r.setFilter("templatize_img_resolution",n.twig.templatize_img_resolution),r.setFilter("rating",n.twig.rating),r.setFilter("date",n.twig.date),r.setFilter("slugify",n.twig.slugify),r.setFilter("striptags",n.twig.strip_tags),r.setFilter("number_format",n.twig.number_format),r.setFilter("geoentity_branding_icon",n.twig.geoentityBrandingIcon),r.setFilter("meterToDistance",n.twig.meterToDistance),r.setFilter("datetimeToTsp",n.twig.datetimeToTsp),r.setFilter("tspToString",n.twig.tspToString),r.setFilter("floatToPrice",n.twig.floatToPrice),r.setFilter("stringToCurrency",n.twig.stringToCurrency),r.setFilter("boldify",n.twig.boldify),r.setFilter("contains",n.twig.contains),r.setFunction("path",n.twig.path),r.setFunction("url",n.twig.path),r.setFunction("random",n.twig.random),r.setFunction("date",n.twig.date)}("undefined"!=typeof Twig?Twig:void 0,"undefined"!=typeof parameters?parameters:requireFromRoot("./lib/config.js"),"undefined"!=typeof window?Mappy=window.Mappy||{}:{})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../portal/service/Routing":161,"../underscore/mixin.js":33,"./../bower_components/backbone/backbone.js":12,"./../bower_components/underscore/underscore.js":29,_process:6,twig:9}],33:[function(e,t,i){"use strict";var o=e("./../bower_components/underscore/underscore.js");o.mixin({tripTag:function(e){return e?e.replace(/<(\/)*[a-z0-9 ]*(\/)*>/gi,""):void 0},padEnd:function(e,t,i){for(var o=""+e,r=o.length;t>r;r++)o=o.concat("0");return o},padStart:function(e,t,i){for(var o=""+e,r=o.length;t>r;r++)o="0".concat(o);return o},stringReplace:function(e,t,i){return e?e.toString().replace(t,i):e}})},{"./../bower_components/underscore/underscore.js":29}],34:[function(e,t,i){window.Xtconf={xt1:".mappy.com",xtLogDom:".xiti.com/hit.xiti",xtfirst:!1,xt2:"1",xt3:365,xt4sec:"30",xt4rss:"30",xt4epr:"30",xt4erec:"30",xt4adi:"30",xt4adc:"30",xt4al:"30",xtsds:"https://logs1257",xtsd:"http://logc259",xtsts:0,xtsite:function(e){return e+xt8},xtscript:"",xtpreview:!1,xtnocookies:!1,xtcode:"",xt46:"1",xt50:"1",xt48:"",xt54:!1,xt58:!1,xtdocl:!1,xttredir:500,xtkwv:"xtmc",xtkwp:"xtnp"},window.Xtcore=function(){function e(e){return"undefined"!=typeof e}function t(e){var i=typeof e;if("object"!==i||null===e)return"string"===i&&(e=encodeURIComponent('"'+e+'"')),String(e);var o,r,s=[],n=e&&e.constructor==Array;for(o in e)r=e[o],i=typeof r,e.hasOwnProperty(o)&&"function"!==i&&("string"===i?r=encodeURIComponent('"'+r.replace(/[^\\]"/g,'\\"')+'"'):"object"===i&&null!==r&&(r=t(r)),s.push((n?"":encodeURIComponent('"'+o+'":'))+String(r)));return(n?"[":"{")+String(s)+(n?"]":"}")}function i(e){return e.replace(/%3C/g,"<").replace(/%3E/g,">").replace(/[<>]/g,"")}function o(e,t,i,o,r){t=0===r?t:encodeURIComponent(t),d||(E.cookie=e+"="+t+";expires="+i.toGMTString()+";path=/"+o)}function r(t,o,r){var s;try{s=F.location.href}catch(n){s=P.location.href}if(o=null!==o&&e(o)?o:i(s.toLowerCase().replace(/%3d/g,"=")),0<o.indexOf(t+"=")){if(o=o.substr(1),t=o.substr(o.indexOf(t+"=")),2!=r){if(1!=r)try{t=decodeURIComponent(t)}catch(a){t=unescape(t)}if(o=t.match(/(\[[^\]]*\])/g)){s="";for(var p=0,l=o.length;l>p;p++)s=o[p].substring(1,o[p].length-1),t=t.replace(s,encodeURIComponent(s))}}return o=t.indexOf("#"),s=t.search(/&.[^&]+=/gi),s=-1==s?-1==o?t.length:o:o>0&&s>o?o:s,1==r?decodeURIComponent(t.substring(t.indexOf("=")+1,s)):2==r?t.substring(t.indexOf("=")+1,s):t.substring(t.indexOf("=")+1,s).replace("&","%26")}return null}function s(t,i,o,s){0!==ie&&3!=ie&&"C"==t||"P"==t||(S&&"0"==m&&"F"==t?(Dt=Dt.replace("&p="+r("p",Dt,2),""),Dt=Dt.replace("&s2="+r("s2",Dt),""),AT_hit.isPreviewOrPrerendering()||AT_hit.sendTag(t,null,null,i),S=!1):AT_hit.sendTag(t,i)),null!==o&&e(o)&&"M"!=t&&(""===s||null===s?E.location=o:window.open(o,"xfen","").focus())}function n(e){return e-=100*Math.floor(e/100),10>e?"0"+e:e}function a(e){return Math.floor(Math.random()*Math.pow(10,e))}var p=this;p.sentHits=[];var l=Xtconf.xt1,c=Xtconf.xtscript,u=window.xtLogDom=Xtconf.xtLogDom,y=Xtconf.xtpreview,h=Xtconf.xtfirst,d=Xtconf.xtnocookies,g=Xtconf.xtcode,m=Xtconf.xt46,v=Xtconf.xt50,f=Xtconf.xt48,w=Xtconf.xt54,_=Xtconf.xt58,T=Xtconf.xtdocl,b=Xtconf.xt2,x=Xtconf.xt3;window.xttredir=Xtconf.xttredir;var k=Xtconf.xtkwv,C=Xtconf.xtkwp,M=[],V=[];V.sec=Xtconf.xt4sec,V.rss=Xtconf.xt4rss,V.epr=Xtconf.xt4epr,V.erec=Xtconf.xt4erec,V.adi=Xtconf.xt4adi,V.adc=Xtconf.xt4adc,V.al=Xtconf.xt4al,V.es=Xtconf.xt4epr,V.ad=Xtconf.xt4adi;var I=[],S=!0,L=!1,A=null,P=window.xw=window,E=window.xd=document,R=navigator,D=window.xtv=P.xtczv?"4.5.8-"+P.xtczv:"4.5.8",l=window.xt1=P.xtdmc?";domain="+P.xtdmc:""!==l?";domain="+l:"",F=P.xtnv?P.xtnv:E,B=window.xt7=P.xtsdi?P.xtsdi:P.xtsd?P.xtsd+u:("https:"===E.location.protocol?Xtconf.xtsds:Xtconf.xtsd)+u,O=P.xtsts?P.xtsts:Xtconf.xtsts,N="";if(w){var j="";try{j=F.location.href}catch(z){j=P.location.href}var $=/#.*/,G=null;try{G=j.match($)[0]}catch(H){G=null}N=(N=G)?"&sta="+encodeURIComponent(i(N)):""}var U=P.xtcustom?t(P.xtcustom):"",X=window.xt8=P.xtsite?P.xtsite:0,W=window.xt9=P.xtn2?"&s2="+P.xtn2:"",Y=window.xt8b=(0===X?"":"s="+X)+(0===O?"":0===X?"sts="+O:"&sts="+O),q=window.xtp=P.xtpage?P.xtpage:"",Z=P.xto_force?P.xto_force.toLowerCase():null,K="redirect"===X,J=P.xtdi?"&di="+P.xtdi:"",Q=P.xtidp?"&idpays="+P.xtidp:"",ee=P.xtidprov?"&idprov="+P.xtidprov:"",te=P.xtparam?P.xtparam:"",m=P.xtnopage&&"1"===P.xtnopage?"0":m,v=P.xtergo&&"0"===P.xtergo?"0":v,ie=P.scriptOnClickZone&&"1"===v?P.scriptOnClickZone:0,oe=""!==g?"&code="+g:"",re=[],se=[],ne=[],ae=[],pe=[],le=[];window.xt44=P.xtprod_load?"&pdtl="+P.xtprod_load:"",P.addEventListener?P.addEventListener("unload",function(){},!1):P.attachEvent&&P.attachEvent("onunload",function(){}),E.addEventListener?(E.addEventListener("keydown",function(){L=!0},!1),E.addEventListener("keyup",function(){L=!1},!1)):E.attachEvent&&(E.attachEvent("onkeydown",function(){L=!0}),E.attachEvent("onkeyup",function(){L=!1}));var ce=P.roimt&&0>te.indexOf("&roimt",0)?"&roimt="+P.roimt:"",ue=0>te.indexOf("&mc=",0)?P.xtmc?"&mc="+P.xtmc:r(k)?"&mc="+r(k):r("xtmc")?"&mc="+r("xtmc"):"":"",ye=r("xtcr")?"&mcrg="+r("xtcr"):"",he=P.xtac&&0>te.indexOf("&ac=",0)?"&ac="+P.xtac:"",de=P.xtat&&0>te.indexOf("&at=",0)?"&at="+P.xtat:"",ge=P.xtan&&0>te.indexOf("&an=",0)?"&an="+P.xtan:"",me=0>te.indexOf("&np=",0)?P.xtnp?"&np="+P.xtnp:r(C)?"&np="+r(C):r("xtnp")?"&np="+r("xtnp"):"":"",ve=P.xtprm&&0>te.indexOf("&x",0)?P.xtprm:"",te=te+(ce+ue+ye+he+(""!==ge?ge:de)+me+ve+N),fe="";try{fe=top.document.referrer}catch(we){try{fe=F.referrer}catch(_e){}}var Te=screen,be=window.xt21=new Date,xe=be.getTime()/36e5,ke=window.xtf1=function(t,o){if(d)return null;o=null!==o&&e(o)?o:"0";var r=RegExp("(?:^| )"+t+"=([^;]+)").exec(E.cookie)||null;if(r&&(r=i(r[1]),"1"!=o))try{r=decodeURIComponent(r)}catch(s){r=unescape(r)}return r};if(window.xt_addchain=function(e,t){var i=t?t:"abmv",o=M[i]?M[i]:0;o++,te+="&"+i+o+"="+e,M[i]=o},"function"==typeof xt_adch&&xt_adch(),window.wck=o,window.xtf3=r,window.xt_mvt=function(e,t,i,o,r){if(o)for(var n=1;n<o.length+1;n++)i+="&"+(r?r:"abmv")+n+"="+o[n-1];s("","&p="+e+"&s2="+t+"&abmvc="+i+"&type=mvt")},window.xt_med=function(i,o,r,n,a,p,l,c){n="F"!=i||null!==n&&e(n)?"M"==i?"&a="+n+"&m1="+a+"&m2="+p+"&m3="+l+"&m4="+c:"&clic="+n+(l?"&stc="+t(l):""):"",s(i,"&s2="+o+"&p="+r+n,a,p)},h=window.xtfirst=-1!=R.userAgent.indexOf("Safari")&&0>R.userAgent.indexOf("Chrome")||-1!=R.userAgent.indexOf("iPhone")||-1!=R.userAgent.indexOf("iPod")||-1!=R.userAgent.indexOf("iPad")||h||P.xtidc||d){var Ce,Me=P.xtidc?P.xtidc:ke("xtidc");null===Me&&(Me=Math.floor(999999*Math.random()),Ce=be.getYear(),100>Ce&&(Ce+=2e3),Ce>100&&2e3>Ce&&(Ce+=1900),Me=n(Ce)+""+n(be.getMonth())+n(be.getDate())+n(be.getHours())+n(be.getMinutes())+n(be.getSeconds())+Me);var Ve=new Date;Ve.setTime(Ve.getTime()+31536e7),o("xtidc",Me,Ve,l,1);var Ie=ke("xtidc"),Me=Me+(P.xtidc||null!==Ie&&Ie==Me?"":"-NO")}window.xt_ad=function(e,i,o,r){s("AT","&atc="+e+"&type=AT&patc="+q+"&s2atc="+P.xtn2+(r?"&stc="+t(r):""),i,o)},window.xt_adi=function(e,t,i){s("AT","&ati="+e+"&type=AT",t,i)},window.xt_adc=function(e,i,o,r,n){return s("AT","&atc="+i+"&type=AT&patc="+q+"&s2atc="+P.xtn2+(n?"&stc="+t(n):"")),AT_click.do_navig(e,o,r?"_blank":null,!0)},window.xt_click=function(i,o,r,n,a,p,l,c){return a="F"!=o||null!==a&&e(a)?"&clic="+a+(c?"&stc="+t(c):""):"",s(o,"&s2="+r+"&p="+n+a),AT_click.do_navig(i,p,l?"_blank":null,!0)},window.xt_form=function(i,o,r,n,a,p,l){return a="F"!=o||null!==a&&e(a)?"&clic="+a+(l?"&stc="+t(l):""):"",s(o,"&s2="+r+"&p="+n+a),AT_click.do_submit(i,!0,p)},window.xt_rm=function(e,t,i,o,r,n,p,l,c,u,y,h,d,g){r="&p="+i+"&s2="+t+"&type="+e+"&a="+o+"&m5="+y+"&m6="+h+(null!==r&&"0"!=r?"&"+r:"")+(null!==p&&"pause"!=o&&"stop"!=o?"&m1="+p+"&"+l+"&m3="+c+"&m4="+u+"&m7="+d+"&m8="+g+"&prich="+q+"&s2rich="+P.xtn2:"")+(null!==n&&"0"!=n&&null!==p?"&rfsh="+n:"")+"&rn="+a(10),s(e,r),r=new Date,null===n||"0"==n||"play"!=o&&"play&buf=1"!=o&&"refresh"!=o?"pause"!=o&&"stop"!=o||null===I||(P.clearTimeout(I[e]),"stop"==o?re[e]=0:le[e]=r.getTime()):(le[e]&&18e5<r.getTime()-le[e]&&(ne[e]=0),"play"!=o&&"play&buf=1"!=o||ne[e]?"refresh"==o&&("live"==h||!ae[e]||300<ae[e]&&2>100*re[e]/ae[e])&&(o=le[e]?pe[e]:r.getTime()/1e3-ne[e],5>100*se[e]/(o+30)&&(se[e]=5*((o+30)/100)),le[e]&&(le[e]=!1,ne[e]=r.getTime()/1e3-pe[e]),pe[e]=o):(ne[e]=r.getTime()/1e3,ae[e]=parseInt(p),o=Math.floor(n),o=o>1500?1500:5>o?5:o,re[e]=o,se[e]=o,le[e]=!1),I[e]=P.setTimeout("xt_rm('"+e+"','"+t+"','"+i+"','refresh','0','"+n+"',null,'"+l+"','"+c+"','"+u+"','"+y+"','"+h+"')",1e3*se[e]))};var Se=window.xtidpg=n(be.getHours())+""+n(be.getMinutes())+n(be.getSeconds())+a(7),Le=0,Ae=0;if(window.xt16="",window.xt_addProduct=function(e,t,i,o,r,s){Le++,P.xt16+="&pdt"+Le+"=",P.xt16+=e?e+"::":"",P.xt16+=t?t:"",P.xt16+=i?"&qte"+Le+"="+i:"",P.xt16+=o?"&mt"+Le+"="+o:"",P.xt16+=r?"&dsc"+Le+"="+r:"",P.xt16+=s?"&pcode"+Le+"="+s:""},window.xt_rd=a,window.xt_addProduct_v2=function(e,t,i,o,r,s,n,a,p){Le++,P.xt16+="&pdt"+Le+"=",P.xt16+=e?e+"::":"",P.xt16+=t?t:"",P.xt16+=i?"&qte"+Le+"="+i:"",P.xt16+=o?"&mt"+Le+"="+o:"",P.xt16+=r?"&mtht"+Le+"="+r:"",P.xt16+=s?"&dsc"+Le+"="+s:"",P.xt16+=n?"&dscht"+Le+"="+n:"",P.xt16+=p?"&roimt"+Le+"="+p:"",P.xt16+=a?"&pcode"+Le+"="+a:""},window.xt_addProduct_load=function(e,t,i){t&&(Ae++,P.xt44+=1==Ae?"&pdtl=":"|",P.xt44+=e?e+"::":"",P.xt44+=t,P.xt44+=i?";"+i:"")},"function"==typeof xt_cart?xt_cart():P.xt16="",window.xt_ParseUrl=function(e,t,i){AT_hit.sendTag(i?"F":"old",t)},window.xt_ParseUrl3=function(e,t,i,o,r){AT_hit.sendTag("&ati="==r?"AT":"PDT",t,null,"&type="+("&ati="==r?"AT":"PDT"))},window.AT_click={id:0,objs:[],elem:function(i,o,r,s,n,a,p,l){var c={};return c.urlDest=n,c.type=i,c.n2=o,c.label=r,c.typeClick=s,c.target=a,c.submit=!1!==n,c.redir=e(p)?p:!0,c.xtcust=e(l)?"&stc="+t(l):"",c},addListener:function(e,t,i){window.addEventListener?e.addEventListener(t,i,!1):window.attachEvent&&e.attachEvent("on"+t,i)},tag:function(e,t,i,o,r,s,n,a,p){if(e&&"function"==typeof e.setAttribute)this.addElem(e,t,i,o,r,s,n,a,p);else if("object"==typeof e)for(var l in e)e.hasOwnProperty(l)&&"function"==typeof e[l].setAttribute&&this.addElem(e[l],t,i,o,r,s,n,a,p)},addElem:function(e,t,i,o,r,s,n,a,p){this.id++,e.setAttribute("data-xtclickid",this.id),this.objs[this.id]=this.elem(t,i,o,r,s,n,a,p),"FORM"!=e.nodeName?this.addListener(e,"click",this.on_click_submit):this.addListener(e,"submit",this.on_click_submit)},on_click_submit:function(e){try{var t=e.target||e.srcElement,i=t.getAttribute("data-xtclickid"),o={},r="",n=e.defaultPrevented,a=window.AT_click;if(!i)for(var p=t.parentNode;p;){if(p.getAttribute("data-xtclickid")){i=p.getAttribute("data-xtclickid");break}p=p.parentNode}i&&(o=a.objs[i],"AT"!=o.type?r+="&p="+o.label+("C"==o.type?"&clic="+o.typeClick+o.xtcust:""):"AT"==o.type&&(r+="&type=AT&atc="+o.label+o.xtcust),s(o.type,"&s2="+o.n2+r),!n&&o.redir&&(e.preventDefault(),"FORM"!=t.nodeName?a.do_navig(t,o.urlDest,o.target):a.do_submit(t,null,o.submit)))}catch(l){}},do_navig:function(e,t,i,o){var r=null;if("A"!=e.nodeName)for(var s=e.parentNode;s;){if("A"==s.nodeName){r=s;break}s=s.parentNode}else r=e;if(r){if(r.target=i||e.target||"_self",r.href=t||e.href||r.href,!o||o&&!L)if(e=r.href.split('"').join('\\"'),0>r.href.indexOf("mailto:"))if("_self"==r.target.toLowerCase()){if(setTimeout('self.location.href="'+e+'"',P.xttredir),o)return!1}else if("_top"==r.target.toLowerCase()){if(setTimeout('top.location.href="'+e+'"',P.xttredir),o)return!1}else{if("_parent"!=r.target.toLowerCase())return!0;if(setTimeout('parent.location.href="'+e+'"',P.xttredir),o)return!1}else if(setTimeout('AT_click.mail_to("'+e+'");',P.xttredir),o)return!1}else if(t||e.href)if(t=t?t:e.href,0>t.indexOf("mailto:")){if("_blank"==i)setTimeout('(xw.open("'+t.split('"').join('\\"')+'","_blank")).focus();',1);else if(setTimeout('self.location.href="'+t.split('"').join('\\"')+'"',P.xttredir),o)return!1}else if(setTimeout('AT_click.mail_to("'+t.split('"').join('\\"')+'");',P.xttredir),o)return!1;return o?(L=!1,!0):void 0},do_submit:function(e,t,i){return i&&(setTimeout(function(){e.submit()},500),t&&i)?!1:void 0},mail_to:function(e){window.location=e}},window.AT_hit={first:!0,referrer:("acc_dir"==r("xtref")?"":null!==r("xtref")?r("xtref"):"acc_dir"==ke("xtref")?"":ke("xtref")||fe.replace(/[<>]/g,"")||"").replace(/[<>]/g,"").substring(0,1600),parse:function(e,t,i,o){var s=[""];if(1600>=t.length)s[0]=t;else{e=AT_hit.first&&"F"==e?Se:Se.substring(0,6)+a(8);var n,p="",l="",c={};n=[];var u=0;if(0<=t.indexOf("&ref=")&&(p=t.substring(t.indexOf("&ref=")),t=t.replace(p,"")),o)for(var y in o)o.hasOwnProperty(y)&&0<=t.indexOf("&"+y+"=")&&1600<(l=r(y,t,2)).length&&(t=t.replace("&"+y+"="+l,""),n=RegExp("["+o[y]+"]","gi"),c[y]=l.replace(/&/g,"%26").split(n));n=RegExp("["+i+"]","gi"),n=t.split(n);for(var h in n)n.hasOwnProperty(h)&&(1600>=s[u].length+n[h].length+1?s[u]+=""!==n[h]?"&"+n[h]:"":(s.push(""),u++,s[u]=1600>n[h].length?s[u]+(""!==n[h]?"&"+n[h]:""):s[u]+("&mherr=1&"+n[h].substring(0,1600))));for(var d in c)if(c.hasOwnProperty(d))for(t="&"+d+"=",i=!1,y=c[d].length,h=0;y>h;h++)1600>=s[u].length+c[d][h].length+1?(i||(s[u]+=t,i=!0),s[u]+=""!==c[d][h]?c[d][h]+("stc"===d&&y-1===h?"":o[d]):""):(s.push(t),i=!0,u++,s[u]=1600>c[d][h].length?s[u]+(""!==c[d][h]?c[d][h]+("stc"===d&&y-1===h?"":o[d]):""):s[u]+("mherr=1"+o[d]));for(p&&(1600>=s[u].length+p.length||(s.push(""),u++),s[u]+=p),o=0;o<s.length;o++)s[o]="&mh="+(o+1)+"-"+s.length+"-"+e+s[o]}return s},sendTag:function(e,t,i,o){var r=[];for(i=i||Ot+Y,i+=P.xtfirst?"&idclient="+Me:"",e=e||"F",t=t||Dt,t+=(o?o:"")+"&vtag="+D+AT_hit.localHour()+AT_hit.resolution(),AT_hit.first&&"F"==e&&(t+=U?"&stc="+U:"",t+="&ref="+AT_hit.referrer.replace(/&/g,"$")),"C"===e&&(t+="&pclick="+q+"&s2click="+(P.xtn2?P.xtn2:"")),r=AT_hit.parse(e,t,"&",{ati:",",atc:",",pdtl:"|",stc:",",dz:"|"}),t=0;t<r.length;t++)AT_hit.loadImage(i+r[t]);AT_hit.first&&"F"==e&&""!==c&&AT_hit.loadFile("script",c,!0,"text/javascript"),"F"==e&&(AT_hit.first=!1)},loadImage:function(e){var t=new Image;t.src=e,p.sentHits instanceof Array&&p.sentHits.push(e),t.onload=function(){t.onload=null}},loadFile:function(e,t,i,o,r){e=document.createElement(e),e.type=o,e.async=i,e.src=t,(r||document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(e,null)},localHour:function(e){return e=e?e:new Date,"&hl="+e.getHours()+"x"+e.getMinutes()+"x"+e.getSeconds()},resolution:function(){if(4<=parseFloat(R.appVersion))try{var e;return e="undefined"!=typeof window.devicePixelRatio?window.devicePixelRatio:1,"&r="+Te.width*e+"x"+Te.height*e+"x"+Te.pixelDepth+"x"+Te.colorDepth}catch(t){}return""},prerenderDisplaying:function(){AT_hit.first&&(AT_hit.sendTag("F"),""!==xt44&&AT_hit.sendTag("PDT",xt44,null,"&type=PDT&p="+q+(P.xt_pageID?"&pid="+P.xt_pageID+"&pchap="+(P.xt_chap||"")+"&pidt="+(P.xt_pageDate||""):"")))},isPreviewOrPrerendering:function(){return window.navigator&&"preview"===window.navigator.loadPurpose&&-1!=R.userAgent.indexOf("Safari")&&0>R.userAgent.indexOf("Chrome")?(y&&(AT_hit.sendTag("F",null,null,"&pvw=1"),""!==xt44&&AT_hit.sendTag("PDT",xt44,null,"&type=PDT&p="+q+(P.xt_pageID?"&pid="+P.xt_pageID+"&pchap="+(P.xt_chap||"")+"&pidt="+(P.xt_pageDate||""):""))),!0):"prerender"==E.webkitVisibilityState?(E.addEventListener("webkitvisibilitychange",AT_hit.prerenderDisplaying,!1),!0):!1}},0!==X||0!==O||K){var Pe="";if(""!==f){Pe=ke("xtvid"),Pe||(A=Pe=be.getTime()+""+a(6));var Ee=new Date;Ee.setMinutes(Ee.getMinutes()+30),o("xtvid",Pe,Ee,"",1)}window.xtvid=Pe;var Re,De,Fe=Xtconf.xtsite("xtor"),Be=Xtconf.xtsite("xtdate"),Oe=Xtconf.xtsite("xtocl"),Ne=Xtconf.xtsite("xtan"),je=Xtconf.xtsite("xtat"),ze=Xtconf.xtsite("xtant"),$e=r("xtor"),Ge=r("xtdt"),He=r("xtan"),Ue=r("xtat"),Xe=r("an",te),We=r("at",te),Ye=r("ac",te),qe=ke(Oe),Ze=ke("xtgo"),Ke=ke("xtord"),Je=ke("xtvrn"),Qe=null!==qe?qe:"$",et="0"===Ze?Ke:null,tt=null!==Ze?Ze:"0",it=null!==Je?Je:"$",ot=be.getTime()/6e4,rt=null===Ge||r("xts")!=X&&!K?tt:30>ot-Ge&&ot-Ge>=0?"2":"1",st="1"==tt?"&pgt="+Ke:"1"==rt&&null!==$e?"&pgt="+$e:"",nt=null!==Z?Z:null!==$e&&"0"==rt?$e:K?null:et,nt=0>Qe.indexOf("$"+nt+"$")||"$"==Qe?nt:null,at="0"==rt?nt:"2"==tt?Ke:"2"==rt?$e:null;

null!==at?(De=at.substring(0,at.indexOf("-")),Re=V[De]):Re="1",null!==Re&&e(Re)||(Re=V.ad),null===He&&!K&&(He=ke("xtanrd")),null===Ue&&!K&&(Ue=ke("xtatrd"));var pt=ke(Ne),lt=ke(je),ct=ke(ze),ut=new Date,yt=window.xt29=new Date,ht=new Date;ut.setTime(K?ut.getTime()+3e4:ut.getTime()+864e5*Re),ht.setTime(ht.getTime()+18e5),yt.setTime(yt.getTime()+864e5*x);var dt=null!==He?He.indexOf("-"):0,gt=null!==Ue?Ue.indexOf("-"):0,mt=null!==Xe?"":null!==He&&dt>0?"&ac="+He.substring(0,dt)+"&ant=0&an="+He.substring(dt+1,He.length):null!==pt?"&anc="+pt+"&anct="+ct:"",vt=null!==We?"":null!==Ue&&gt>0?"&ac="+Ue.substring(0,gt)+"&ant=0&at="+Ue.substring(gt+1,Ue.length):null!==lt?"&attc="+lt+"&anct="+ct:"",ft=0>it.indexOf("$"+X+"$")?"&vrn=1":"",wt=null!==r("xtatc")&&null===r("atc",te)?"&atc="+r("xtatc"):"";""!==ft&&o("xtvrn",141>it.length?it+X+"$":it.substring(0,141),yt,l,0),ft+=null===nt?"":"&xto="+nt,ft+=(""!==mt?mt:vt)+st+wt,null!==Xe?(o(Ne,Ye+"-"+Xe,yt,l,1),o(ze,"1",yt,l,1)):null!==He&&"1"!=ct&&(o(Ne,He,yt,l,1),o(ze,"0",yt,l,1)),null!==We?(o(je,Ye+"-"+We,yt,l,1),o(ze,"1",yt,l,1)):null!==Ue&&"1"!=ct&&(o(je,Ue,yt,l,1),o(ze,"0",yt,l,1));var _t=ke(Fe),Tt=ke(Be),Tt=(/[a-zA-Z]/.test(Tt)?new Date(Tt).getTime()/36e5:parseFloat(ke(Be)))||(new Date).getTime()/36e5,bt=0<=Math.floor(xe-Tt)?Math.floor(xe-Tt):0,ft=ft+(null===_t?"":"&xtor="+_t+"&roinbh="+bt);if(K)o("xtgo",rt,ut,l,1),null!==$e&&o("xtord",$e,ut,l,1),null!==He&&o("xtanrd",He,ut,l,1),null!==Ue&&o("xtatrd",Ue,ut,l,1),o("xtref",AT_hit.referrer?AT_hit.referrer.replace(/&/g,"$"):"acc_dir",ut,l,0),P.xtloc&&(F.location=P.xtloc);else{null!==at&&(0>Qe.indexOf("$"+encodeURIComponent(at)+"$")||"$"==Qe)&&o(Oe,Qe+at+"$",ht,l,1);var xt,kt=R.appName+" "+R.appVersion,Ct=kt.indexOf("MSIE");Ct>=0?(xt=parseInt(kt.substr(Ct+5)),Ct=!0):(xt=parseFloat(R.appVersion),Ct=!1);var Mt=0<=kt.indexOf("Netscape"),Vt=0<=kt.indexOf("Mac"),It=0<=R.userAgent.indexOf("Opera"),St="",Lt="",At="",Pt="";if(Ct&&xt>=5&&!Vt&&!It&&!K)try{E.body.addBehavior("#default#clientCaps"),St="&cn="+E.body.connectionType,St+="&ul="+E.body.UserLanguage,E.body.addBehavior("#default#homePage"),Lt=E.body.isHomePage(location.href)?"&hm=1":"&hm=0",Pt="&re="+E.body.offsetWidth+"x"+E.body.offsetHeight}catch(Et){}else xt>=5&&(Pt="&re="+P.innerWidth+"x"+P.innerHeight);Mt&&xt>=4||It?At="&lng="+R.language:Ct&&xt>=4&&!It&&(At="&lng="+R.userLanguage),o("xtord","",be,l,1),null===at||null!==_t&&"1"!=b||(o(Fe,at,ut,l,1),o(Be,be.getTime()/36e5,ut,l,1));var Rt=T?"&docl="+encodeURIComponent(F.location.href.replace(/&/g,"#ec#")):"",Dt=W+"&p="+q+J+Q+ee+ft+Rt+oe+te+St+Lt+At+"&idp="+Se,Ft=ke("xtvalCZ",1);if(null!==Ft){var Dt=Dt+Ft.replace("&c=","&current=").replace("&b=","&before=").replace("&a=","&after="),Bt=new Date;Bt.setTime(Bt.getTime()-36e5),o("xtvalCZ",Ft,Bt,l,1)}var Ot=window.Xt_id=B+"?",Nt=ke("xtide");if(null!==at)switch(De.toLowerCase()){case"erec":case"epr":case"es":var jt=null;try{var zt,$t=at.match(/(\[[^\]]*\])|([^\-]+)|(-)/g),Gt=0;for(zt in $t)"-"==$t[zt]&&Gt++,5==Gt&&"-"!=$t[zt]&&(jt=$t[zt])}catch(Ht){jt=null}null!==jt&&(Nt=jt,o("xtide",Nt,yt,"",1))}Dt+="&jv="+(R.javaEnabled()?"1":"0")+Pt+xt16+(null!==Nt?"&ide="+Nt:""),A&&(Dt+="&lnk="+f+"&vid="+A),"0"!=m&&!AT_hit.isPreviewOrPrerendering()&&(AT_hit.sendTag("F"),""!==xt44&&AT_hit.sendTag("PDT",xt44,null,"&type=PDT&p="+q+(P.xt_pageID?"&pid="+P.xt_pageID+"&pchap="+(P.xt_chap||"")+"&pidt="+(P.xt_pageDate||""):"")))}}ie>0&&"function"==typeof xtNodesload&&(_?P.addEventListener?P.addEventListener("load",xtNodesload,!1):P.attachEvent&&P.attachEvent("onload",xtNodesload):xtNodesload())},window.attag=new Xtcore},{}],35:[function(e,t,i){"use strict";var o=e("./AbstractCollection"),r=e("../model/AbTestModel"),s=e("./../../lib/bower_components/underscore/underscore.js"),n=t.exports=o.extend({model:r,url:parameters.services.abtest+"config.json",init:function(){var e=s.find(this.models,s.bind(function(e){return e.isTargetted()},this));e&&(this.current=e)},getVariant:function(e){return!this.current||e&&this.current.get("id")!==e?null:this.current.getVariant()},fetch:function(){return n.__super__.fetch.call(this,{validate:!0})},start:function(e){this.current&&this.current.get("id")===e&&this.current.start()}},{})},{"../model/AbTestModel":107,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],36:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./../../lib/bower_components/backbone/backbone.js"),s=e("../core/error/error"),n=t.exports=r.Collection.extend({fetch:function(e){return e=e||{},e.reset=void 0===e.reset?!0:e.reset,new Promise(o.bind(function(t,i){var o;"jsonp"===e.dataType&&(o=setTimeout(function(){e.error(null,new s.JSONPTimeoutError)},2e3)),e.success=function(e){clearTimeout(o),t(e)},e.error=function(e,t){clearTimeout(o),i(t)},n.__super__.fetch.call(this,e)},this))}})},{"../core/error/error":88,"./../../lib/bower_components/backbone/backbone.js":12,"./../../lib/bower_components/underscore/underscore.js":29}],37:[function(e,t,i){(function(i){"use strict";var o,r=e("./../../lib/bower_components/underscore/underscore.js"),s=i.parameters,n=e("../model/GeoentityModel"),a=e("../model/LocationModel"),p=e("./AbstractCollection"),l=e("../service/BUCTagger"),c=new l,u=t.exports=p.extend({geoBox:null,keyword:null,_fetchOptions:null,constructor:function(e,t){t=t||{},this.geoBox=t.geoBox,this.keyword=t.keyword,o=t.appCatConf,p.call(this,e,t)},url:function(){var e=this.geoBox?"&bbox="+this.geoBox.toGeoentityUrlParameter():"",t=s.services.search+"?extend_bbox="+(this._fetchOptions.allowExtendBbox?1:0)+e+"&q="+encodeURIComponent(this.keyword.replace(" - "," "))+"&"+$.param(s.locales[s.locale].services.search)+"&loc_format=geojson";return t=this._fetchOptions.bucTag?c.updateURL(t,this._fetchOptions.bucTag):c.updateURL(t,this._fetchOptions.itiForm?"SPD_RESPONSE_SEARCH_ITINERARY":"SPD_RESPONSE_SEARCH"),this._fetchOptions.limit&&(t+="&max_results="+this._fetchOptions.limit),this._fetchOptions.f&&(t+="&f="+this._fetchOptions.f),t},model:function(e,t){return r.extend(t,{appCatConf:o}),e.id?new n(e,t):new a(e,t)},parse:function(e){var t=[];return e.pois&&(t=t.concat(e.pois)),e.addresses&&(t=t.concat(e.addresses.features)),this.viewport=e.viewport,this.searchHint=e.search_hint,t},fetch:function(e){return e=e||{},this.keyword&&""!==this.keyword?(this._fetchOptions=e,u.__super__.fetch.call(this,e).then(function(e){return{pois:e.filterPois(),addresses:e.filterAddresses(),viewport:e.viewport,searchHint:e.searchHint}})):Promise.reject({type:"noLocation"})},filterAddresses:function(){return this.filter(function(e){return e instanceof a&&e.isValid()})},filterPois:function(){return this.filter(function(e){return e instanceof n})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../model/GeoentityModel":117,"../model/LocationModel":121,"../service/BUCTagger":159,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],38:[function(e,t,i){"use strict";{var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./AbstractCollection"),s=e("../model/ApplicationModel");t.exports=r.extend({parse:function(e,t){var i=[];return t.freeapps===!1&&this._updatePublished(e),o.each(e,function(e){var o;o=new s(t.freeapps===!0?{id:e.id,name:e.label,published:!0,isOtherApp:!0,backgroundColor:[236,236,236],textColor:[53,53,53]}:e);var r=t.categories.getAppCategory(e.id);r&&o.set("categoryModel",r),i.push(o)}),i},filterPublishedApps:function(){return this.filter(function(e){return e.get("published")})},_updatePublished:function(e,t){t=t||new Date,o.each(e,function(e){if("true"===Mappy.localStore.get("demoMode"))e.published=!0;else if(e.hasOwnProperty("published")&&"object"==typeof e.published&&null!==e.published){var i=!0;if(e.published.hasOwnProperty("from")){var o=this._convertStringToDate(e.published.from);i=t.getTime()>o.getTime()}if(e.published.hasOwnProperty("to")){var r=this._convertStringToDate(e.published.to);i=i&&t.getTime()<r.getTime()}e.published=i}else e.hasOwnProperty("published")||(e.published=!1)},this)},_convertStringToDate:function(e){return e=e.split(/\D/),new Date(Date.UTC(e[0],--e[1]||"",e[2]||"",e[3]||"",e[4]||"",e[5]||"",e[6]||""))}})}},{"../model/ApplicationModel":109,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],39:[function(e,t,i){(function(i){"use strict";var o=e("./AbstractCollection"),r=e("../service/BUCTagger"),s=i.parameters,n=t.exports=o.extend({_geoentityId:null,_partnerId:null,model:function(e){e.type||(e.type="tab");var t=new Mappy.BlockParser,i=t.parseJSONBlock(e);return i?i:{validationError:"The model cannot be parsed!"}},initialize:function(e,t){t=t||{},this._geoentityId=t.geoentityId,this._partnerId=t.partnerId,this._mid=t.mid,this._bucTagger=t.bucTagger||("undefined"!=typeof r?new r:null)},url:function(){var e=s.services.geoentity+"geoentity/${I}/${P}.json";return e=e.replace("${I}",this._geoentityId).replace("${P}",this._partnerId),e=this._bucTagger.updateURL(e,"SPD_DETAIL_GEOENTITY_CONTENT")},parse:function(e){return e.tabs},fetch:function(e){return e=e||{},n.__super__.fetch.call(this,e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../service/BUCTagger":159,"./AbstractCollection":36}],40:[function(e,t,i){"use strict";{var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./AbstractCollection"),s=e("../model/CategoryModel"),n=e("../model/SubCategoryModel");t.exports=r.extend({parse:function(e,t){var i={};o.each(e.categories,function(e){i[e.id]=new s(e)}),this.subcategories={};var r="subcategories";o.each(e[r],function(e){this.subcategories[e.id]=new n(e)},this);var a=o.map(e.menus[t.menuName],function(e){var t=i[e.id];return t?(t.set("subcategories",o.map(e.subcategories,function(e){return this.subcategories[e]},this)),t):{}},this);return this.quickaccess=e.menus.web_quickaccess,a},findSubCategoryById:function(e){return this.subcategories[e]},findSubCategoryLabel:function(e,t){var i=this.findWhere({id:e}).attributes.subcategories,r="";return o.each(i,function(e){e.get("rubricIds")[0]===t&&(r=e.get("label"))}),r},getCategoryDataByRubricIds:function(e){var t={};return this.forEach(function(i){return i.get("id")===e?void(t={category:i}):void o.each(i.get("subcategories"),function(o){(o.get("id")===e||o.get("rubricIds").join(",")===e)&&(t={category:i,subcategory:o})})}),t.category||"hotel"!==e||(t={category:this.findWhere({id:"hotel-hebergement"}),subcategory:this.subcategories.hotel}),t},getAppCategoryCache:[],getAppCategory:function(e){var t=this.getAppCategoryCache[e];if(!t){var i=this.find(function(t){return o.include(t.get("apps"),e)?t:o.include(t.get("freeApps"),e)?t:null});"hotel"===e&&(i=this.get("hotel-hebergement")),this.getAppCategoryCache[e]=i}return this.getAppCategoryCache[e]},getQuickAccessSubcategories:function(){return o.map(this.quickaccess,function(e){return o.findWhere(this.subcategories,{id:e})},this)}})}},{"../model/CategoryModel":112,"../model/SubCategoryModel":131,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],41:[function(e,t,i){(function(i){"use strict";{var o,r=(i.parameters,e("./../../lib/bower_components/underscore/underscore.js")),s=e("./AbstractCollection"),n=e("../service/BUCTagger"),a=e("../model/GeoentityModel");new n,t.exports=s.extend({urlFormat:"applications/${A}?bbox=${Y1},${X1},${Y2},${X2}&max=${M}",geoBox:null,bucTag:"SPD_RESPONSE_CATEGORY",appId:null,rubricId:null,_fetchOptions:null,model:function(e,t){return r.extend(t,{appCatConf:o}),new a(e,t)},constructor:function(e,t){t=t||{},this.geoBox=t.geoBox,this.appId=t.appId||null,o=t.appCatConf,t.rubrics&&(this.rubricIds=t.rubrics.length?t.rubrics.join(","):t.rubrics),t.bucTag&&(this.bucTag=t.bucTag),s.call(this,e,t)}},{SEARCH_MAX_GEOENTITIES:100})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../model/GeoentityModel":117,"../service/BUCTagger":159,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],42:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./AbstractCollection"),s=e("../model/GeoentityReviewModel"),n=e("../../../../../../../../app/config/parameters.json"),a=(e("../../../../../../../../node/api/services/RasterService"),e("../service/BUCTagger")),p=new a,l="undefined"!=typeof window,c=t.exports=r.extend({pjRatingId:0,total_reviews:0,overall_review_rating:0,CLIENT_URL:"/front-services/reviews/<%=pjRatingId %>?geoentity=<%= geoentityId%>",SERVER_URL:"http://api.apipagesjaunes.fr/reviews/pro/<%=pjRatingId %>.json?text_length=<%=text_length %>&nb_reviews=<%= nb_reviews%>&app_id=<%=app_id %>&app_key=<%=app_key %>",url:function(){var e=l?this.CLIENT_URL:this.SERVER_URL;return e=o.template(e)({pjRatingId:this.pjRatingId,geoentityId:this.geoentityId,text_length:4e3,nb_reviews:5,app_id:n["private"].reviews.id,app_key:n["private"].reviews.key}),l&&(e=p.updateURL(e,"SPD_AVISPJ_DISPLAY")),e},model:s,initialize:function(e,t){this.geoentityId=t.geoentityId,this.pjRatingId=t.pjRatingId},parse:function(e){return this.context={total_reviews:e.context.total_reviews,overall_review_rating:e.context.overall_review_rating},e.reviews},toJSON:function(){var e=c.__super__.toJSON.call(this);return o.extend(e,{context:this.context,reviews:o.invoke(this.models,"toJSON")})}})},{"../../../../../../../../app/config/parameters.json":1,"../../../../../../../../node/api/services/RasterService":2,"../model/GeoentityReviewModel":118,"../service/BUCTagger":159,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],43:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./AbstractCollection"),s=e("../model/LocationModel"),n=t.exports=r.extend({keywork:"",countryNumericCode:"",cityINSEECode:"",language:"FRE",model:s,initialize:function(e,t){t=t||{},this.keyword=t.keyword,this.countryNumericCode=t.countryNumericCode,this.cityINSEECode=t.cityINSEECode,this.language=t.language||this.language,n.__super__.initialize.call(this,e,t)},validate:function(){return this.reset(this.filter(function(e){return e.isValid()})),this},url:function(){var e=parameters.services.loc,t={"opt.format":"json","opt.interactive":1,"opt.language":this.language,"opt.xmlOutput":"3v0","opt.favoriteCountry":this.countryNumericCode,"opt.namedPlaceSearch":1,fullAddress:window.encodeURIComponent(this.keyword)};return this.cityINSEECode&&(t["opt.favoriteCity"]=this.cityINSEECode),e+=o.map(t,function(e,t){return t+"="+e}).join("&")},parse:function(e){return e.kml?e.kml&&e.kml.Document&&e.kml.Document.Placemark?this.model._objectToArray(e.kml.Document.Placemark):[]:this.model._objectToArray(e)},fetch:function(e){return e=e||{},e.dataType="jsonp",n.__super__.fetch.call(this,e)}})},{"../model/LocationModel":121,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],44:[function(e,t,i){"use strict";{var o=e("./AbstractCollection"),r=e("../model/RouteModel");t.exports=o.extend({model:r})}},{"../model/RouteModel":125,"./AbstractCollection":36}],45:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./../../lib/bower_components/backbone/backbone.js"),s=e("../model/SuggestionModel"),n=t.exports=r.Collection.extend({_historyItems:[],initialize:function(){var e=Mappy.localStore.get("searchHistory");this._historyItems=e?e.split("|"):[]},fetch:function(e){return this.models=[],e=e||{},o.each(this._historyItems,o.bind(function(t){if(e.keyword){var i=t.toLowerCase().indexOf(e.keyword.toLowerCase());if(-1===i)return;var o=t.substr(i,e.keyword.length);t=t.replace(o,"<em>"+o+"</em>")}this.models.push(new s({type:"history",address:t}))},this)),Promise.resolve(this)},flush:function(){Mappy.localStore.remove("searchHistory"),this._historyItems=[]},add:function(e){for(var t=0;t<this._historyItems.length;t++)this._historyItems[t]===e&&this._historyItems.splice(t,1);this._historyItems.unshift(e),this._historyItems.splice(n.HISTORY_SIZE_LIMIT),Mappy.localStore.set("searchHistory",this._historyItems.join("|"))}},{HISTORY_SIZE_LIMIT:50})},{"../model/SuggestionModel":132,"./../../lib/bower_components/backbone/backbone.js":12,"./../../lib/bower_components/underscore/underscore.js":29}],46:[function(e,t,i){(function(i){"use strict";{var o=e("./AbstractCollection"),r=e("../model/SuggestionModel"),s=i.parameters;t.exports=o.extend({model:r,url:s.services.suggest,parse:function(e){return e.suggests}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../model/SuggestionModel":132,"./AbstractCollection":36}],47:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./AbstractCollection"),s=e("../model/ShoppingSignModel"),n=t.exports=r.extend({model:s,url:"/front-services/shopping-signs",fetch:function(e){return n.__super__.fetch.call(this,o.extend({dataType:"json"},e||{}))}})},{"../model/ShoppingSignModel":128,"./../../lib/bower_components/underscore/underscore.js":29,"./AbstractCollection":36}],48:[function(e,t,i){"use strict";var o=e("./AbstractCollection"),r=e("../model/ShoppingSuggestModel"),s=t.exports=o.extend({model:r,url:"/front-services/shopping-product-suggest",fetchByKeyword:function(e,t,i){s.__super__.fetch.call(this,{dataType:"json",reset:!0,data:{query:e,lat:t,lng:i}})}})},{"../model/ShoppingSuggestModel":129,"./AbstractCollection":36}],49:[function(e,t,i){"use strict";function o(e,t,i,o){s.apply(this,arguments),this._id=o,this._view=this._createView()}var r=e("util"),s=e("../controller/Controller");t.exports=o;var n={HotelContentWidgetView:e("./hotel/HotelContentWidgetView")};r.inherits(o,s),o.prototype.getView=function(){return this._view},o.prototype._createView=function(){return new(n[this._id.charAt(0).toUpperCase()+this._id.slice(1)+"ContentWidgetView"])}},{"../controller/Controller":55,"./hotel/HotelContentWidgetView":51,util:8}],50:[function(e,t,i){"use strict";function o(e,t,i,o,r,s){var a,p;n.call(this,e,t,i,o),this._params=r,this._onAvailabilityHandler=s,this._geoentity=this._sessionModel.get("fullGeoentity"),this._applicationModel=i.getApplicationById(this._sessionModel.get("partnerTab").partnerId),this._view.on("changeDates",this._goToDateSelection,this),this._view.on("moreHotels",this._searchMoreHotels,this),this._view.on("formSubmit",this._checkHotelAvailability,this).on("formSubmit",function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_CALENDAR.replace("{eventLocation}","Calendrier"),this._applicationModel,this._applicationModel.get("categoryModel"))},this),this._view.on("reservationClick",function(e){Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_LINK",this._sessionModel.get("fullGeoentityId"),null,e),Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(this._sessionModel.get("fullGeoentity"),Mappy.XitiController.REDIRECT_DEFAULT),window.open(e)},this),this._view.on("otherRoomsClick",function(e){Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(this._sessionModel.get("fullGeoentity")),window.open(e)},this),a=Mappy.ControllerFactory.getUniverseController().getPreviousTab(),p=this._sessionModel.get("currentFilters")||{},p.to&&p.from?this._checkHotelAvailability(p.from,p.to):(this._from=new Date,this._to=new Date(this._from.getTime()+864e5),this._goToDateSelection())}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("../ContentWidgetController"),a=e("../../model/HotelAvailabilityModel"),p=e("./HotelContentWidgetView");t.exports=o,s.inherits(o,n),o.prototype._checkHotelAvailability=function(e,t){e&&t&&(this._from=e,this._to=t);var i=new a({id:this._geoentity.get("id"),from:this._from,to:this._to});i.fetch({cache:!0}).then(r.bind(function(e){e.isValid()?(this._goToAvailability(e),this._onAvailabilityHandler&&this._onAvailabilityHandler(e)):this._goToNotAvailable()},this)).then(void 0,r.bind(function(e){this._goToNotAvailable(),Mappy.logError(e)},this))},o.prototype._goToDateSelection=function(){this._view.showDateSelection(this._from,this._to,this._params)},o.prototype._goToAvailability=function(e){this._fillApplicationParams(),this._view.showAvailability(e,this._params.banner)},o.prototype._goToNotAvailable=function(){this._view.showNotAvailable(this._from,this._to,this._params.banner)},o.prototype._searchMoreHotels=function(){this._fillApplicationParams(),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_POPUP,this._applicationModel,this._applicationModel.get("categoryModel")),Mappy.ControllerFactory.getUniverseController().openApplication(this._applicationModel)},o.prototype._fillApplicationParams=function(){var e={params:{from:this._from,to:this._to,extended:!0},display:{"date-start":Mappy.dateFormat(this._from,"dd/mm/yy"),"date-end":Mappy.dateFormat(this._to,"dd/mm/yy")}},t=this._appCatConf.getApplicationById(this._sessionModel.get("partnerTab").partnerId);this._sessionModel.set("applicationParams",$.extend(!0,this._sessionModel.get("applicationParams"),{appId:t.get("id"),params:e}))},o.prototype.destroy=function(){this._onAvailabilityHandler=null},o.prototype._createView=function(){var e=this._sessionModel.get("partner").get("name");return new p({partnerName:e})}},{"../../model/HotelAvailabilityModel":119,"../ContentWidgetController":49,"./../../../lib/bower_components/underscore/underscore.js":29,"./HotelContentWidgetView":51,util:8}],51:[function(e,t,i){"use strict";{var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("../../view/BaseView"),s=e("../../view/mixins/DatePickerView/RangeDatePickerView"),n=e("../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/main.html.twig"),a=e("../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/availability.html.twig"),p=e("../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/notAvailable.html.twig"),l=e("../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/loading.html.twig");t.exports=r.extend({id:"HotelContentWidgetView",_rangeDatePickerView:null,_partnerName:null,events:{"click #HotelContentWidgetView-change-dates":"_onChangeDatesClick","click #HotelContentWidgetView-more-hotels":"_onMoreHotelsClick","click .reservation":"_onReservationClick","click .otherRooms":"_onOtherRoomsClick","submit form":"_onSubmit",click:"_onClick"},initialize:function(e){this._partnerName=e.partnerName},_updatePartnerUrls:function(){o.each([".reservation",".otherRooms"],o.bind(function(e){var t=this.$(e);1===t.length&&t.attr("href",Mappy.ControllerFactory.getGeoentityController().getPartnerUrl(t.attr("href")))},this))},showDateSelection:function(e,t,i){this.$el.html(n.render({data:i})),this._updatePartnerUrls(),this.delegateEvents(),this._rangeDatePickerView&&(this._rangeDatePickerView.remove(),this._rangeDatePickerView=null),this._rangeDatePickerView=new s({el:this.$(".DatePickers")}).render(),this._rangeDatePickerView.setCurrentDates({start:e,end:t},!1)},showAvailability:function(e,t){var i=e.toJSON();i.name=this._partnerName,i.from=Mappy.dateFormat(i.from,"dd/mm/yy"),i.to=Mappy.dateFormat(i.to,"dd/mm/yy"),i.banner=t,this.$el.html(a.render(i)),this._updatePartnerUrls(),this.delegateEvents()},showNotAvailable:function(e,t,i){this.$el.html(p.render({from:Mappy.dateFormat(e,"dd/mm/yy"),to:Mappy.dateFormat(t,"dd/mm/yy"),banner:i})),this._updatePartnerUrls(),this.delegateEvents()},showThrobber:function(){var e=this._rangeDatePickerView.getCurrentValues();this.$el.html(l.render({name:this._partnerName,from:e.start,to:e.end})),this.delegateEvents()},_onChangeDatesClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("changeDates")},_onMoreHotelsClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("moreHotels")},_onReservationClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("reservationClick",$(e.currentTarget).attr("href"))},_onOtherRoomsClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("otherRoomsClick",$(e.currentTarget).attr("href"))},_onSubmit:function(e){e.preventDefault();var t=this._rangeDatePickerView.getCurrentDates();this.trigger("formSubmit",t.start,t.end),this.showThrobber()},_onClick:function(e){"HotelContentWidgetView-form"===e.currentTarget.id&&e.preventDefault(),this.trigger("widgetClick")}})}},{"../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/availability.html.twig":260,"../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/loading.html.twig":261,"../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/main.html.twig":262,"../../../../../views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/notAvailable.html.twig":263,"../../view/BaseView":167,"../../view/mixins/DatePickerView/RangeDatePickerView":235,"./../../../lib/bower_components/underscore/underscore.js":29}],52:[function(e,t,i){"use strict";function o(){n.apply(this,arguments)}var r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./Controller"),a=e("../model/LocationModel"),p=e("../model/GeoentityModel"),l=window.parameters;t.exports=o,Mappy.AdhesiveController=o,s.inherits(o,n),o.PAGE_RESPONSE_SEARCH={indicators:["search"]},o.PAGE_RESPONSE_CATEGORY_MAP={indicators:["search"]},o.PAGE_DETAIL_ITINERARY={indicators:["itinerary"]},o.prototype.tagPage=function(e){if(e){var t=$.extend({},this._getIndicators(e.indicators||[]));this.send(t)}},o.prototype.send=function(e){var t=$.param(e),i=new Image,o="https://o.adhslx.com/pj?"+t;i.src=o},o.prototype._getIndicators=function(e){var t={};return r.each(e,function(e){var i=this["_get"+e.charAt(0).toUpperCase()+e.slice(1)];i&&$.extend(t,i.call(this))},this),t},o.prototype._getSearch=function(){var e=this._sessionModel.get("lastGeoentitiesResults"),t=this._sessionModel.get("currentLocationsResult")||[],i=this._sessionModel.get("fullGeoentity"),o=t.concat(e.getGeoentities()),r=o[0]||this._sessionModel.get("fullGeoentity"),s=r instanceof a?r:r instanceof p?r.get("location"):null;return s?{id:"8",p1:s.get("lat"),p2:s.get("lng"),p3:s.get("dptCode"),p4:s.get("cityINSEECode"),p5:r instanceof p?r.get("rubricId"):"",p6:s.get("countryNumericCode"),p8:i?"D":"S",a:"0",o:"0",m:l.size<=l.sizes.medium?"0":"1"}:{}},o.prototype._getItinerary=function(){{var e=this._sessionModel.get("currentFromModel"),t=this._sessionModel.get("currentToModel"),i=this._sessionModel.get("itineraryForm");this._sessionModel.get("currentItinerary")}return{id:"9",p1:e.getLocation().get("lat"),p2:e.getLocation().get("lng"),p3:e.get("zipCodes")&&e.get("zipCodes")[0]?e.get("zipCodes")[0].slice(0,2):"",p4:e.get("cityINSEECode"),p5:e.get("countryNumericCode"),p7:t.getLocation().get("lat"),p8:t.getLocation().get("lng"),p9:t.getLocation().get("zipCodes")&&t.getLocation().get("zipCodes")[0]?t.getLocation().get("zipCodes")[0].slice(0,2):"",p10:t.getLocation().get("cityINSEECode"),p11:t.getLocation().get("countryNumericCode"),p13:i.get("mode"),a:"0",o:"0",m:l.size<=l.sizes.medium?"0":"1"}}},{"../model/GeoentityModel":117,"../model/LocationModel":121,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,util:8}],53:[function(e,t,i){"use strict";function o(){a.apply(this,arguments)}function r(e){return e&&"string"==typeof e?e.replace(/[àáâãäå]/g,"a").replace(/[ÀÁÂÃÄÅ]/g,"A").replace(/ç/g,"c").replace(/Ç/g,"C").replace(/[èéêë]/g,"e").replace(/[ÈÉÊË]/g,"E").replace(/[ìíîï]/g,"i").replace(/[ÌÍÎÏ]/g,"I").replace(/ñ/g,"n").replace(/Ñ/g,"N").replace(/[òóôõö]/g,"o").replace(/[ÒÓÔÕÖ]/g,"O").replace(/æÆ/g,"ae").replace(/œÆ/g,"oe").replace(/[ùúûü]/g,"u").replace(/[ÙÚÛÜ]/g,"U").replace(/[ýÿ]/g,"y").replace(/[ÝŸ]/g,"Y"):e}var s=e("./../../lib/bower_components/underscore/underscore.js");e("../../lib/underscore/mixin.js");var n=e("util"),a=e("./Controller");t.exports=o,n.inherits(o,a),o.FORMATS={block:"6326",banner:"6594",megaban:"6325",mob_interstitiel:"8471",mob_banner:"8579"},o.NUMERIC_PARAMS=["x","y","x1","y1","x2","y2","d"],o.prototype.initialize=function(){},o.prototype.getSmartAdvUrl=function(e,t,i,n){var a=parameters.advertising[e]||parameters.advertising.discovery,p=parameters.homepage?parameters.initTmstp:Math.round(1e10*Math.random()),l=parameters.size<parameters.sizes.normal?parameters.mob_siteid:parameters.siteid;t=t||"block";var c={},u=this._sessionModel.get("lastLocation");u&&u.get("zipCodes").length>0&&(c.pays=u.get("countryNumericCode"),c.dept=(""+u.get("zipCodes")[0]).substr(0,2),c.ville=r(u.get("city")),c.region=u.get("regionCode"),c.x=u.get("lng"),c.y=u.get("lat"));var y=this._sessionModel.get("currentItinerary");y&&(c=s.extend({},y.get("advertisingParams"))),s.each(["x","y","x1","y1","x2","y2"],function(e){c[e]&&(c[e]=Math.round(1e6*c[e])+9e7)});var h=s.chain(c).keys().partition(function(e){return!s.contains(o.NUMERIC_PARAMS,e)}).value(),d=s.map(h[0],function(e){return e+"="+r(c[e])}).join(";"),g=s.map(h[1],function(e){return e+"="+c[e]}).join(";"),m=d;return crtg_content&&(m+=";"+crtg_content),g&&(m+="|"+g),[n?"https://ads.horyzon-media.com/call2/pubmj":"https://ads.horyzon-media.com/call/pubif",l,a,o.FORMATS[t],i?"S":"M",p,Mappy.escape(m)].join("/")},o.prototype.insertSmartAdv=function(e,t,i,r,s){var n=document.createElement("script");n.src=this.getSmartAdvUrl(e,t,i,r),n.id=parameters.advertising[e]+"_"+o.FORMATS[t],s.appendChild(n)},o.prototype.getOASUrl=function(){var e=this._sessionModel.get("currentItinerary"),t=e.get("advertisingParams"),i=s.padStart(t.regionA,2,"0"),o=s.padStart(t.deptA,3,"0"),r=s.padEnd(t.codeInseeA.substr(2),5,"0"),n="1"+(1e7*Math.random()).toFixed(0),a=["https://soads.pagesjaunes.fr/RealMedia/ads/adstream_sx.ads/MAPPY/map","/r",i,"/d",o,"/l",r,"/",n,"@Right"].join("");return a}},{"../../lib/underscore/mixin.js":33,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,util:8}],54:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._categoryContainerView=this._indexView.getCategoryContainerView(),this._mapView=this._indexView.getMapView()}var r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./Controller"),a=e("./tab/TabControllerFactory");t.exports=o,s.inherits(o,n),o.prototype.initialize=function(){this._categoryContainerView.on("categoryMouseEnter",this._onCategoryMouseEnter,this),this._categoryContainerView.on("subCategorySelection",this._onSubCategorySelection,this),this._categoryContainerView.on("applicationSelection",this._onApplicationSelection,this),this._categoryContainerView.on("hotelSelection",this._onHotelSelection,this),this._categoryContainerView.on("categorySelection",this._onCategorySelection,this),this._categoryContainerView.on("categoryDisplayedFor",this._onCategoryDisplayedFor,this),this._mapView.on("focus",this._categoryContainerView.closeSubCategoryMenu,this._categoryContainerView)},o.prototype._onSubCategorySelection=function(e,t){this._sessionModel.set("geoentityOthersTitleType",e.get("label")),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_BAR_SUBCATEGORY,t?t:e,e),this._open("openCategory",e),this._categoryContainerView.closeSubCategoryMenu()},o.prototype._onCategoryMouseEnter=function(e){Mappy.ControllerFactory.getXitiController().tagBucCategory(e)},o.prototype._onApplicationSelection=function(e,t){this._sessionModel.set("geoentityOthersTitleType",e.get("name")),e.set("categoryModel",t),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_BAR_APPLICATION,e,t),this._open("openApplication",e),this._categoryContainerView.closeSubCategoryMenu()},o.prototype._onHotelSelection=function(e){
this._categoryContainerView.closeSubCategoryMenu(),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_BAR_CATEGORY,e),this._open("openApplication","hotel")},o.prototype._open=function(e,t){return this._sessionModel.set("fullListMode",!1),parameters.size<parameters.sizes.normal&&this._sessionModel.get("activeTabId")===a.TAB_ITINERARY?Mappy.ControllerFactory.getNavigationController().centerAt(this._sessionModel.get("itineraryForm").get("to").get("location").getLocation(),this._sessionModel.get("itineraryForm").get("to").get("location").getLocation().getZoomLevel()).then(r.bind(function(){Mappy.ControllerFactory.getUniverseController()[e](t)},this)).then(void 0,Mappy.logError):void Mappy.ControllerFactory.getUniverseController()[e](t)},o.prototype._onCategorySelection=function(e){this._sessionModel.set("geoentityOthersTitleType",e.get("shortLabel")),this._categoryContainerView.closeSubCategoryMenu(),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_BAR_CATEGORY,e),this._open("openTab",e.get("id"))},o.prototype._onCategoryDisplayedFor=function(e){Mappy.ControllerFactory.getXitiController().tagStoreLocatorDisplay(e)}},{"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,"./tab/TabControllerFactory":85,util:8}],55:[function(e,t,i){"use strict";var o=t.exports=function(e,t,i){this._indexView=e,this._sessionModel=t,this._appCatConf=i};o.prototype.initialize=function(){}},{}],56:[function(e,t,i){"use strict";function o(){}var r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("../service/BUCTagger"),n=e("./Controller"),a=e("./MainController"),p=e("./NavigationController"),l=e("./GeoentityController"),c=e("./ShareController"),u=e("./HeaderFormController"),y=e("./ErrorController"),h=e("./HistoryController"),d=e("./AdvertisingController"),g=e("./FooterController"),m=e("./UniverseController"),v=e("./mixins/hooks");t.exports=o,Mappy.ControllerFactory=o,o.setSessionModel=function(e){this._sessionModel=e},o.getSessionModel=function(){return this._sessionModel},o.setAppCatConf=function(e){this._appCatConf=e},o.getAppCatConf=function(){return this._appCatConf},o.setSearchHistoryCollection=function(e){this._searchHistoryCollection=e},o.getSearchHistoryCollection=function(){return this._searchHistoryCollection},o.setSearchSuggestionCollection=function(e){this._searchSuggestionCollection=e},o.getSearchSuggestionCollection=function(){return this._searchSuggestionCollection},o.setIndexView=function(e){this._indexView=e},o.getIndexView=function(){return this._indexView},o.getMainController=function(){return this._getControllerById("main",a,arguments)},o.getNavigationController=function(){return this._getControllerById("navigation",p,arguments)},o.getGeoentityController=function(){var e=[new s].concat(arguments);return this._getControllerById("geoentity",l,e)},o.getShareController=function(){return this._getControllerById("share",c,arguments)},o.getHeaderFormController=function(){return this._getControllerById("headerform",u,arguments)},o.getErrorController=function(){return this._getControllerById("error",y,arguments)},o.getXitiController=function(){return this._getControllerById("xiti",Mappy.XitiController,arguments)},o.getAdhesiveController=function(){return this._getControllerById("adhesive",Mappy.AdhesiveController,arguments)},o.getHistoryController=function(){return this._getControllerById("history",h,arguments)},o.getAdvertisingController=function(){return this._getControllerById("adv",d,arguments)},o.getFooterController=function(){return this._getControllerById("footer",g,arguments)},o.getUniverseController=function(){return this._getControllerById("universe",m,arguments)},o._getControllerById=function(e,t,i){if(!(e in this._instances)){var o=this._sessionModel,s=this._indexView,a=this._appCatConf,p=function(e){return this instanceof n&&(e=[s,o,a].concat(r.toArray(e))),t.apply(this,e)};p.prototype=t.prototype,p.prototype.constructor=t,r.extend(p.prototype,{hooks:new v}),this._instances[e]=new p(i)}return this._instances[e]},o._instances={},o._sessionModel=null,o._appCatConf=null,o._searchHistoryCollection=null,o._searchSuggestionCollection=null,o._indexView=null},{"../service/BUCTagger":159,"./../../lib/bower_components/underscore/underscore.js":29,"./AdvertisingController":53,"./Controller":55,"./ErrorController":57,"./FooterController":58,"./GeoentityController":59,"./HeaderFormController":60,"./HistoryController":61,"./MainController":62,"./NavigationController":63,"./ShareController":64,"./UniverseController":65,"./mixins/hooks":68}],57:[function(e,t,i){"use strict";function o(){this._id="ErrorController",this._handlers={}}t.exports=o,o.prototype.initialize=function(){},o.prototype.addHandler=function(e,t){this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)},o.prototype.trigger=function(e){this._triggerHandlers("all"),this._triggerHandlers(e)},o.prototype._triggerHandlers=function(e){if(this._handlers[e])for(var t=0;t<this._handlers[e].length;t++)this._handlers[e][t]()}},{}],58:[function(e,t,i){"use strict";function o(){s.apply(this,arguments),this._footerView=this._indexView.getFooterView(),this._mapView=this._indexView.getMapView()}var r=e("util"),s=e("./Controller"),n=e("../model/form/ItineraryFormModel");t.exports=o,r.inherits(o,s),o.prototype.initialize=function(){this._footerView.on("close",this._onFooterViewClose,this),this._footerView.on("footerCloseButtonClick",this.toggle,this),this._mapView.on("footer",this.toggle,this),this._footerView.on("searchClick",this._onSeoSearchLinkClick,this),this._footerView.on("geoentityClick",this._onSeoGeoentityLinkClick,this),this._footerView.on("itineraryClick",this._onSeoItineraryLinkClick,this),this._footerView.on("trafficClick",this._onSeoTrafficLinkClick,this),this._footerView.on("hotelClick",this._onHotelLinkClick,this),this._footerView.on("appsClick",this._onAppsLinkClick,this),this._footerView.on("contactClick",this._onContactLinkClick,this)},o.prototype._onContactLinkClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_contact)},o.prototype.toggle=function(){this._footerView.isExpanded()||Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ACTIVATION_FOOTER),this._footerView.toggle()},o.prototype._onFooterViewClose=function(){},o.prototype._onSeoSearchLinkClick=function(e){Mappy.ControllerFactory.getHeaderFormController().search(e)},o.prototype._onSeoGeoentityLinkClick=function(e){Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:e}).then(void 0,Mappy.logError)},o.prototype._onAppsLinkClick=function(e){Mappy.ControllerFactory.getUniverseController().openApplication(e).then(void 0,Mappy.logError)},o.prototype._onSeoItineraryLinkClick=function(e,t){"itineraire"===t?(this._sessionModel.set("itineraryForm",null),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOME_ITINERARY).then(void 0,Mappy.logError)):(Mappy.ControllerFactory.getHeaderFormController().setItineraryForm(new n),Mappy.ControllerFactory.getHeaderFormController().setItineraryFrom(e),Mappy.ControllerFactory.getHeaderFormController().setItineraryTo(t),Mappy.ControllerFactory.getHeaderFormController().searchItinerary())},o.prototype._onSeoTrafficLinkClick=function(e){"info-trafic"!==e?(this._sessionModel.set("searchKeyword",""+e),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_TRAFFIC).then(void 0,Mappy.logError)):Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOME_TRAFFIC).then(void 0,Mappy.logError)},o.prototype._onHotelLinkClick=function(){Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOTEL).then(void 0,Mappy.logError)}},{"../model/form/ItineraryFormModel":157,"./Controller":55,util:8}],59:[function(e,t,i){"use strict";function o(e,t,i,o){s.call(this,e,t,i),this._currentFullGeoentity=null,this._bucTagger=o}var r=e("util"),s=e("./Controller");t.exports=o,r.inherits(o,s),o.prototype.getPartnerUrl=function(e){var t,i=this._bucTagger.getUserId(),o=e;if(e.indexOf("booking.com")>-1){var r=Mappy.abTestCollection.getVariant(),s=r?"-"+Mappy.abTestCollection.current.get("id")+"-"+r.id:"";t=e.indexOf("checkin_monthday=")>-1?"A":"NA",e=e.replace(/(?:\{booking-tab\})|(?:%7Bbooking-tab%7D)/i,parameters.size<=parameters.sizes.medium?"&activeTab=htReviews":"#tab-reviews");var n=e.split("#");o=2===n.length&&"tab-reviews"===n[1]||-1!==n[0].indexOf("&activeTab=htReviews")?n[0]+"&label=mappy-review-popup"+t+"-"+i+s:this._sessionModel.get("fullGeoentity")?n[0]+"&label=mappy-FD"+t+"-"+i+s:this._sessionModel.get("currentItinerary")?n[0]+"&label=mappy-FDR"+t+"-"+i+s:n[0]+"&label=mappy-Liste"+t+"-"+i+s,n.length>1&&(o+="#"+n[1])}else if(e.indexOf(".accorhotels.com")>-1||e.indexOf("{accor-host}")>-1){var a=parameters.size<=parameters.sizes.medium?"m":"d";t=e.indexOf("yearIn")>-1?"A":"N";var p="L";this._sessionModel.get("fullGeoentity")?p="FD":this._sessionModel.get("currentItinerary")&&(p="FDR"),o=e.replace(/(?:\{accor-host\})|(?:%7Baccor-host%7D)/i,parameters.size<=parameters.sizes.medium?"m.accorhotels.com":"www.accorhotels.com"),o=o.replace(/(?:\{accor-sourceid\})|(?:%7Baccor-sourceid%7D)/i,["FR",p+t,i,a].join("-")),o=o.replace(/(?:\{accor-xtor\})|(?:%7Baccor-xtor%7D)/i,"[FR]-["+p+t+"]-["+a+"]-[0]")}else e.indexOf("www.hotel-bb.com")>-1&&(t=e.indexOf("arrivalDate")>-1?"A":"NA",o=this._sessionModel.get("fullGeoentity")?e.replace(/(?:\{epi\})|(?:%7Bepi%7D)/i,"FD"+t+"-"+i):this._sessionModel.get("currentItinerary")?e.replace(/(?:\{epi\})|(?:%7Bepi%7D)/i,"FDR"+t+"-"+i):e.replace(/(?:\{epi\})|(?:%7Bepi%7D)/i,"L"+t+"-"+i));return o}},{"./Controller":55,util:8}],60:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._itineraryFormView=this._indexView.getItineraryFormView(),this._searchFormView=this._indexView.getSearchFormView(),this._categoryContainerView=this._indexView.getCategoryContainerView(),this._leftView=this._indexView.getLeftView(),this._mapView=this._indexView.getMapView(),this._historyCollection=Mappy.ControllerFactory.getSearchHistoryCollection()}var r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./Controller"),a=e("../model/form/ItineraryFormModel"),p=e("../model/LocationModel"),l=e("../model/SuggestionModel"),c=e("../view/mixins/suggest/AddressSuggestView/AddressSuggestView"),u=e("../core/error/error"),y=e("../controller/UniverseController"),h=e("../controller/tab/TabControllerFactory");t.exports=o,s.inherits(o,n),o.prototype.initialize=function(){this._searchFormView.on("focus",this._onFormFocus,this).on("submit",this._onSearchFormViewSubmit,this).on("submit-error",this._handleError,this),this._itineraryFormView.setFormModel(this._sessionModel.get("itineraryForm")||new a),this._itineraryFormView.on("focus",this._onFormFocus,this).on("keypress",this._minifyHeader,this).on("formclick",this._minifyHeader,this).on("geocodeclick",this._geocodeBrowser,this).on("optionsClick",this._onOptionsClick,this).on("submit",this._onItineraryFormSubmit,this).on("submit-error",this._handleError,this),this.initializeSuggest()},o.prototype._handleError=function(e){return e instanceof u.NavigatorGeolocationError?void this._indexView.alert(e.i18nId).then(void 0,Mappy.logError):void Mappy.logError(e)},o.prototype._geocodeBrowser=function(){p.fromNavigatorGeolocation({"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]}).then(r.bind(function(e){this._sessionModel.set("browserGeoPosition",e.getGeoPosition()),this._itineraryFormView.setBrowserLocation(e)},this)).then(void 0,r.bind(this._handleError,this))},o.prototype._minifyHeader=function(){this._leftView.forceMiniHeader(),this.suggestView.refreshSuggestPosition()},o.prototype.initializeSuggest=function(){this.suggestView=new c,this._indexView.on("resize",function(){this.suggestView.refreshSuggestPosition()},this),this._leftView.on("scroll",function(){this.suggestView.refreshSuggestPosition()},this),this.suggestView.on("typing",r.debounce(function(e){this.getSuggestions(e).then(r.bind(function(t){return this.suggestView.renderSuggestions(t),this._historyCollection.fetch({keyword:e})},this)).then(r.bind(function(e){e.models.length>0?this.suggestView.showHistoryBottom():this.suggestView.hideHistoryBottom()},this)).then(void 0,Mappy.logError)},window.parameters.suggest.delay),this),this.suggestView.on("select",function(e,t){this.suggestView.setFieldValue(e),this._searchFormView.isVisible()?(this._tagSearchViewSubmit(),this.search(e)):this._itineraryFormView.isVisible()&&this._itineraryFormView.focusNext(t)},this),this.suggestView.on("flushHistory",function(){this._historyCollection.flush(),this.suggestView.hide()},this)},o.prototype.getSuggestView=function(){return this.suggestView},o.prototype._getSuggestionsFilter=function(){var e,t=Mappy.ControllerFactory.getUniverseController().getCurrentUniverse();if(t===y.UNIVERSE_ITINERARY)e="places";else if(t===y.UNIVERSE_SHOPPING)e="addresses";else{var i=this._sessionModel.get("activeTabId");e=r.contains([h.TAB_HOME,h.TAB_SEARCH,h.TAB_HOME_TRAFFIC,h.TAB_TRAFFIC],i)?"all":"addresses"}return e},o.prototype.getSuggestions=function(e){var t,i=this._historyCollection.fetch({keyword:e}).then(function(e){var t=e.toJSON().slice(0,3);return parameters.size<parameters.sizes.normal&&t.unshift(l.getCurrentLocationItem()),t});return t=e&&e.length>=window.parameters.suggest.minChars?Mappy.ControllerFactory.getSearchSuggestionCollection().fetch({data:{bbox:this._sessionModel.get("geoBox").toGeoentityUrlParameter(),q:e,f:this._getSuggestionsFilter()}}).then(function(e){return"fr_FR"===parameters.locale?e.toJSON():r.map(e.filter(function(e){return"rubric"!==e.get("type")}),function(e){return e.toJSON()})}):Promise.resolve([]),Promise.all([i,t]).then(r.bind(function(t){return this.suggestView.getInput().val()===e?t[0].concat(t[1]):[]},this))},o.prototype.setItineraryFrom=function(e){this.setItineraryField(e,"from")},o.prototype.setItineraryTo=function(e){this.setItineraryField(e,"to")},o.prototype.setItineraryField=function(e,t){var i=this._itineraryFormView.getFormModel(),o=null;(r.isUndefined(e)||r.isNull(e))&&(e=""),"string"==typeof e?e=o=new p({rawAddress:e}):o=e.getLocation();var s=i.get(t);"step"===t.substr(0,4)&&(s=i.get("steps")[parseInt(t.substr(5,1),10)]),s.set("longitude",0===o.get("lng")?0/0:o.get("lng")),s.set("latitude",0===o.get("lat")?0/0:o.get("lat")),s.set("value",e.getAddressStr().replace("&amp;","&")||Template.addressToString(o,"[%s ]%S %z %y")),this._itineraryFormView.setFieldValue(t,s.get("value")),"to"===t&&this._sessionModel.set("suggestKeyword",s.get("value"))},o.prototype.setItineraryForm=function(e){this._searchFormView.hide(),e&&this._itineraryFormView.setFormModel(e),this._itineraryFormView.show()},o.prototype.search=function(e,t){"string"==typeof e&&this._searchFormView.setKeyword(e),this.suggestView.hide(),this._searchFormView.resolveKeyword().then(r.bind(function(e){this._sessionModel.set("searchKeyword",""+e)},this)).then(function(){return Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_SEARCH,t)}).then(void 0,r.bind(this._handleError,this))},o.prototype.searchItinerary=function(){this._onItineraryFormSubmit(this._itineraryFormView.getFormModel())},o.prototype._onFormFocus=function(e,t){this.suggestView.bindTo(e,t)},o.prototype._onSearchFormViewSubmit=function(){this._sessionModel.set("geoentityOthersTitleType","textsearch"),this.suggestView.isVisible()&&this.suggestView.hasSelectedSuggestion()||this._searchFormView.resolveKeyword().then(r.bind(function(e){return this.isItineraryKeyword(e)?Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOME_ITINERARY):(this._tagSearchViewSubmit(),this.search())},this)).then(void 0,Mappy.logError)},o.prototype.isItineraryKeyword=function(e){if(parameters.language.french){if("itinéraire"===e||"itineraire"===e)return!0}else if("route"===e)return!0;return!1},o.prototype._tagSearchViewSubmit=function(){var e;this.suggestView.$input.data("intent")?(e=this.suggestView.$input.data("intent"),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SEARCH_FORM_SUGGEST.replace("{suggestionType}",e.type).replace("{subtype}",e.subtype)),this.suggestView.$input.removeData("intent")):Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SEARCH_FORM)},o.prototype._onItineraryFormSubmit=function(e){var t,i;e.set("routeIdx",0),this._sessionModel.set("itineraryForm",e),this.suggestView.hide();var o=this._itineraryFormView.$el.find("input[name=from]");t=void 0===o.data("intent")?{type:"NA",subtype:"NA"}:o.data("intent");var r=this._itineraryFormView.$el.find("input[name=to]");i=void 0===r.data("intent")?{type:"NA",subtype:"NA"}:r.data("intent");var s=Mappy.XitiController.XTC_ITINERARY_FORM.replace("{itineraryDestinationType}",i.type).replace("{itineraryDestinationSubtype}",i.subtype);s=s.replace("{itinerarySourceType}",t.type).replace("{itinerarySourceSubtype}",t.subtype),Mappy.ControllerFactory.getXitiController().tagAction(s,e),o.removeData("intent"),r.removeData("intent"),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_ITINERARY).then(void 0,Mappy.logError)},o.prototype.showSearchFormView=function(e,t,i){this._leftView.getAdvertisingBLView().setHeightLimit(600),this._itineraryFormView.hide(),e&&this._leftView.setMiniHeaderSearchForm(),"string"==typeof t&&this._searchFormView.setKeyword(t),i?this._searchFormView.hide():this._searchFormView.show(e)},o.prototype.showItineraryFormView=function(){this._leftView.getAdvertisingBLView().setHeightLimit(770),this._searchFormView.hide(),this._itineraryFormView.show()},o.prototype.hideForms=function(){this._searchFormView.hide(),this._itineraryFormView.hide()}},{"../controller/UniverseController":65,"../controller/tab/TabControllerFactory":85,"../core/error/error":88,"../model/LocationModel":121,"../model/SuggestionModel":132,"../model/form/ItineraryFormModel":157,"../view/mixins/suggest/AddressSuggestView/AddressSuggestView":240,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,util:8}],61:[function(e,t,i){"use strict";function o(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0].nodeValue}function r(){p.apply(this,arguments),this._hashes=[],this._sessions={},this._hashIndex=-1,this._disabled=!1,this._indexToApply=-1,this._freezed=!0,this._firstUnfreeze=!0,this._navigationController=Mappy.ControllerFactory.getNavigationController(),this._geoentityController=Mappy.ControllerFactory.getGeoentityController(),Mappy.ControllerFactory.getErrorController().addHandler("all",s.bind(function(){this.unFreeze()},this)),$(window).bind("hashchange",s.bind(function(){this._onHashChanged(this._getHash())},this))}var s=e("./../../lib/bower_components/underscore/underscore.js"),n=e("util"),a=e("../core/utils/roundFloat.js").roundFloat,p=e("./Controller"),l=e("./MainController"),c=e("../model/SessionModel"),u=e("../model/form/ItineraryFormModel");t.exports=r,n.inherits(r,p),r.prototype._newZoomLevel=null,r.prototype._oldZoomLevel=null,r.prototype.enable=function(){this._freezed||(this._disabled=!1)},r.prototype.disable=function(){this._freezed||(this._disabled=!0)},r.prototype.runWithToggle=function(e){if(this._freezed||this._disabled)return Promise.resolve(!1);this._disabled=!0,this._freezed=!0;var t=s.bind(function(){return this._disabled=!1,this._freezed=!1,!0},this);return e().then(t,t)},r.prototype.unFreeze=function(e){e instanceof l&&(this._firstUnfreeze&&(this._firstUnfreeze=!1,this._hashIndex=parseInt(this._getHash().match(/^[0-9]+$/),10)||-1),this._freezed=!1)},r.prototype.pushState=function(e,t,i){var r="";if(!this._freezed&&!this._disabled){var s=this._sessionModel.getPermalinkURL().split("#")[1];if(s!==this._hashes[this._hashIndex]){for(this._hashIndex++,this._hashes[this._hashIndex]=s;this._hashes.length>this._hashIndex+1;)this._hashes.pop();"replace"===i?history.replaceState(null,null,"#"+c.PERMALINK_SECTION_SPLIT+this._hashIndex+s):window.location.hash=c.PERMALINK_SECTION_SPLIT+this._hashIndex+s,r=this._sessionModel.getTitle(),r&&(document.title=o(r))}}},r.prototype.replaceState=function(e,t){return this.pushState(e,t,"replace")},r.prototype._getHash=function(){return window.location.hash.split(c.PERMALINK_SECTION_SPLIT)[1]||""},r.prototype._applyHash=function(e){var t,i,o=this._sessions[e]||c.getPermalinkSessionModel(!0),r=[];this._sessions[e]=o;var n=["viewMode","zoomLevel","searchKeyword","fullGeoentityId","location","viewDirection","itineraryForm","currentAddress","activeTabId"];for(t=0,i=n.length;i>t;t++){var a=n[t];a in o.attributes&&a in this._sessionModel.attributes&&r.push([n[t],o.get(a),this._sessionModel.get(a)])}return new Promise(s.bind(function(e){var t=s.bind(function(){if(!r.length)return void e();var i=r.shift(),o="_applyHash_"+i[0];o in this?this[o](i[1],i[2]).then(t,t).then(void 0,Mappy.logError):t()},this);s.defer(t)},this))},r.prototype._applyHash_viewMode=function(){return Promise.resolve()},r.prototype._applyHash_activeTabId=function(e){return Mappy.ControllerFactory.getUniverseController().openTab(e)},r.prototype._applyHash_currentAddress=function(e,t){return e!==t&&e&&this._sessionModel.set("currentAddress",""+e),Promise.resolve()},r.prototype._applyHash_searchKeyword=function(e,t){return e!==t&&e&&this._sessionModel.set("searchKeyword",""+e),Promise.resolve()},r.prototype._applyHash_itineraryForm=function(e,t){var i=new u;if(e&&(!t||e.urlSerialize(i)!==t.urlSerialize(i))){var o=Mappy.ControllerFactory.getHeaderFormController();o.setItineraryForm(e),this._sessionModel.set("itineraryForm",e)}return Promise.resolve()},r.prototype._applyHash_fullGeoentityId=function(e){return this._sessionModel.set("fullGeoentityId",e),Promise.resolve()},r.prototype._applyHash_location=function(e,t){var i=a(e.get("lng"),5),o=a(e.get("lat"),5),r=a(t.get("lng"),5),s=a(t.get("lat"),5);return i!==r||o!==s||this._newZoomLevel!==this._oldZoomLevel?this._navigationController.centerAt(e,this._newZoomLevel):Promise.resolve()},r.prototype._applyHash_viewDirection=function(){return Promise.resolve()},r.prototype._applyHash_zoomLevel=function(e,t){return this._newZoomLevel=e,this._oldZoomLevel=t,Promise.resolve()},r.prototype._onHashChanged=function(e){if(this._indexToApply=parseInt(e.match(/^[0-9]+$/),10),!this._freezed&&!this._disabled&&this._hashIndex!==this._indexToApply){var t=s.bind(function(){var e=this._indexToApply,i=this._hashes[e];if(i){var o=this._applyHash.bind(this,i);this.runWithToggle(o).then(s.bind(function(i){i&&(this._hashIndex=e,this._indexToApply!==this._hashIndex&&t())},this)).then(void 0,Mappy.logError)}},this);t()}}},{"../core/utils/roundFloat.js":100,"../model/SessionModel":126,"../model/form/ItineraryFormModel":157,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,"./MainController":62,util:8}],62:[function(e,t,i){(function(i){"use strict";function o(){a.apply(this,arguments)}function r(e,t){var i=new p({lat:h.entryPoint.location.geoPosition.lat,lng:h.entryPoint.location.geoPosition.lng,"opt.favoriteCountry":h.locales[h.locale].services.loc["opt.favoriteCountry"],"opt.language":h.locales[h.locale].services.loc["opt.language"]});return new Promise(function(o){e.fetch({validate:!0}).then(function(e){o({location:e,zoomLevel:t})}).then(null,function(){o({location:i,zoomLevel:t})}),e.once("invalid",function(){o({location:i,zoomLevel:t})})})}var s=e("./../../lib/bower_components/underscore/underscore.js"),n=e("util"),a=e("./Controller"),p=e("../model/LocationModel"),l=e("../model/SessionModel"),c=e("../collection/SearchHistoryCollection"),u=e("../collection/SearchSuggestionCollection"),y=e("../core/utils/Device.js"),h=i.parameters;t.exports=o,n.inherits(o,a),o.prototype._initializing=!1,o.prototype.initialize=function(){this._initializing=!0;var e=l.initSessionModel(Mappy.ControllerFactory.getAppCatConf());Mappy.ControllerFactory.setSessionModel(e),Mappy.ControllerFactory.setSearchHistoryCollection(new c),Mappy.ControllerFactory.setSearchSuggestionCollection(new u);var t,i,o,n=Mappy.ControllerFactory.getNavigationController(),a=Mappy.ControllerFactory.getUniverseController(),d=Mappy.ControllerFactory.getGeoentityController(),g=Mappy.ControllerFactory.getHeaderFormController(),m=Mappy.ControllerFactory.getShareController(),v=Mappy.ControllerFactory.getFooterController();if(e.has("location"))t=e.get("location"),i=e.get("zoomLevel");else{var f=window.Mappy.GEOIP;f&&f.lat&&f.lng?(o={lat:f.lat,lng:f.lng},i=11):(o=h.entryPoint.location.geoPosition,i=h.entryPoint.zoomLevel),t=new p(o)}var w=function(t){e.set("location",t.location),e.set("zoomLevel",t.zoomLevel)};r(t,i).then(w,function(){var e=new p(h.entryPoint.location.geoPosition);return r(e,h.entryPoint.zoomLevel).then(w,Mappy.logError)}).then(s.bind(n.initialize,n)).then(s.bind(g.initialize,g)).then(s.bind(d.initialize,d)).then(s.bind(m.initialize,m)).then(s.bind(a.initialize,a)).then(s.bind(v.initialize,v)).then(s.bind(function(){Mappy.ControllerFactory.getHistoryController().unFreeze(this),Mappy.ControllerFactory.getHistoryController().pushState(!0,"MainController - innerInitializeChain ends")},this)).then(void 0,s.bind(function(e){Mappy.logError(e),this._indexView.alert("initialization_error")},this)).then(s.bind(function(){(y.hasTouchSupport()||h.size<h.sizes.normal)&&(this._indexView.showInterstitiel(),o&&"Home"===e.get("activeTabId")&&this._indexView.getMapView().activateGeolocation()),this._initializing=!1},this))},o.prototype.isInitializing=function(){return this._initializing}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collection/SearchHistoryCollection":45,"../collection/SearchSuggestionCollection":46,"../core/utils/Device.js":94,"../model/LocationModel":121,"../model/SessionModel":126,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,util:8}],63:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._mapView=this._indexView.getMapView(),this._outdoorView=this._indexView.getOutdoorView(),this._isOutdoorView=!1,this._isFullscreen=!1,this._leftView=this._indexView.getLeftView(),this._userSurveyView=null,this._searchFormView=this._indexView.getSearchFormView(),this._searchStrategy=null}var r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./Controller"),a=e("./strategy/MapSearchStrategy"),p=e("../model/PanoTileModel"),l=e("../model/GeoentityModel"),c=e("../model/SessionModel"),u=e("../model/LocationModel"),y=e("../model/ViewDirectionModel"),h=e("../view/map/IndoorView/IndoorView"),d=e("../view/overlay/UserSurveyView/UserSurveyView"),g=e("../view/map/LeafletMapView/LeafletMapView"),m=e("../core/utils/Device.js");t.exports=o,s.inherits(o,n),o.prototype.initialize=function(){this._indexView.on("resize",this._onIndexViewResize,this),this._mapView.on("contactClick",this._onContactLinkClick,this);var e=this._indexView.getAdWrapperView();e.on("close",function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CLOSE_AD)}),Mappy.ControllerFactory.getUniverseController().on("newTab",e.sendPixels,e),this._firstChangeTab=!0,this._searchStrategy=new a(this._indexView,this._sessionModel),this._initMapView(),this._initSmartBanner(),this._checkSurvey("userSurvey"),this._sessionModel.isViewModeImmersive()&&this.openImmersiveViewFromSession(),this._checkFirstVisit()},o.prototype._onContactLinkClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_contact)},o.prototype._initSmartBanner=function(){var e=parseInt(Mappy.localStore.get("smartBannerClose")||0,10),t=m.isAndroid(navigator.userAgent)||m.isIPad(navigator.userAgent)||m.isIPhone(navigator.userAgent);t&&"fr_FR"===parameters.locale&&e<(new Date).getTime()-6048e5&&this._indexView.showDownloadAppView()},o.prototype._initMapView=function(){this._mapView.on("upiUpdate",this._bindUpi,this);var e=this._sessionModel.get("zoomLevel");e&&this._mapView.setInitialZoomLevel(e);var t=this._sessionModel.get("location");t&&!t.isEmpty()&&this._mapView.setInitialLocation(t),this._mapView.show(),this._sessionModel.set("geoBox",this._mapView.getGeoBox());var i=this._sessionModel.get("activeViewModes");i&&i.length>0&&-1!==r.indexOf(i,"traffic")&&this._mapView.showTrafficLayer(),this._setActiveLayers(),this._mapView.on("browserGeolocation",this._onBrowserGeolocation,this),this._mapView.on("viewLocationChanged",this._onLocationChanged,this),this._mapView.on("onGeolocationSearch",this._onGeolocationSearch,this),this._mapView.on("fullscreen",this._toggleFullscreen,this),this._mapView.on("overlay-disabled",this._setActiveLayers,this),this._mapView.on("overlay-traffic",r.compose(r.bind(this._setActiveLayers,this),r.bind(this._sendXitiTag,this,Mappy.XitiController.XTC_VIEWMODE_TRAFFIC))),this._mapView.on("overlay-public_transport",r.compose(r.bind(this._setActiveLayers,this),r.bind(this._sendXitiTag,this,Mappy.XitiController.XTC_VIEWMODE_TRANSPORT))),this._mapView.on("viewmode-photo",r.compose(r.bind(this._setActiveLayers,this),r.bind(this._sendXitiTag,this,Mappy.XitiController.XTC_VIEWMODE_AERIAL))),this._mapView.on("viewmode-hybrid",r.compose(r.bind(this._setActiveLayers,this),r.bind(this._sendXitiTag,this,Mappy.XitiController.XTC_VIEWMODE_MIXTE))),this._mapView.on("viewmode-standard",r.bind(this._setActiveLayers,this))},o.prototype._onBrowserGeolocation=function(e){this._sessionModel.set("browserGeoPosition",e)},o.prototype._onGeolocationSearch=function(e){e&&Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CARTE_LOC)},o.prototype._sendXitiTag=function(e){Mappy.ControllerFactory.getXitiController().tagAction(e)},o.prototype.openImmersiveViewFromSession=function(){if(!m.hasTouchSupport()){var e=this._sessionModel.get("location");new p({from:e,to:e,preview:!0}).fetch().then(r.bind(function(){this.switchToImmersiveView(this._sessionModel.get("location"),this._sessionModel.get("viewDirection"))},this)).then(void 0,Mappy.logError)}},o.prototype.switchToIndoorView=function(e,t){this._indoorView=new h(e,t),this._indoorView.on("closeIndoorView",this.closeViews,this),this._toggleFullscreen({active:!0})},o.prototype.switchToImmersiveView=function(e,t,i,o){this._isOutdoorView=!0,this._outdoorView.on("closeOutdoorView",this.closeViews,this),this._outdoorView.show();var s=i&&i.get("location")?i.get("location"):e,n=new p({from:s,to:s});n.fetch().then(r.bind(function(n){this._sessionModel.set("location",e),this._outdoorView.loadOutdoorView(n).then(r.bind(function(){this._toggleFullscreen({active:!0})},this)).then(r.bind(function(){return $("body").addClass("outdoor"),this._outdoorView.createOutdoorView(n)},this)).then(r.bind(function(){var n;n=t?t.toJSON():{lat:s.get("lat"),lon:s.get("lng")},this._outdoorView.lookAt(n),i&&i instanceof l&&this._outdoorView.addModel(i),this._sessionModel.set("viewMode",c.VIEW_MODE_IMMERSIVE),Mappy.ControllerFactory.getHistoryController().pushState(!0,"NavigationController  - view mode changed"),parameters.size>parameters.sizes.medium&&(this._outdoorView.on("positionChange",r.bind(function(e){this._sessionModel.set("location",e),Mappy.ControllerFactory.getHistoryController().replaceState(!0,"NavigationController  - position changed")},this)),this._outdoorView.on("orientationChange",r.bind(function(e){this._sessionModel.set("viewDirection",e),Mappy.ControllerFactory.getHistoryController().replaceState(!0,"NavigationController  - view direction changed")},this))),o&&this._outdoorView.displayAddress(o,e)},this)).then(void 0,Mappy.logError)},this)).then(void 0,Mappy.logError)},o.prototype._closeIndoorView=function(){
this._indoorView.hide(),this._indoorView.remove(),this._indoorView=null},o.prototype._closeOutdoorView=function(){this._outdoorView.destroy(),this._outdoorView.hide(),$("body").removeClass("outdoor"),this._isOutdoorView=!1,this._sessionModel.set("viewMode",c.VIEW_MODE_MAP),Mappy.ControllerFactory.getHistoryController().pushState(!0,"NavigationController  - view mode changed")},o.prototype.closeViews=function(){this._isFullscreen&&this._toggleFullscreen({active:!1}),this._isOutdoorView&&this._closeOutdoorView(),this._indoorView&&this._closeIndoorView(),this._userSurveyView&&(this._userSurveyView.remove(),this._userSurveyView=null),this._indexView.closeDownloadAppView()},o.prototype.centerAt=function(e,t){return this._mapView.setLocation(e,t)},o.prototype.getTileUrlByLocation=function(e,t,i,o){var r="panoramics/${X1},${Y1},100/tiles/geodetic/${X2},${Y2}.json".replace("${X1}",e.from.get("lat")).replace("${Y1}",e.from.get("lng")).replace("${X2}",e.to.get("lat")).replace("${Y2}",e.to.get("lng")).concat(o===!0?"?preview=true":""),s=parameters.services.pano+r;$.ajax({url:s,cache:!0,context:this,error:i,success:function(e){t(e)}})},o.prototype.getActiveStrategy=function(){return this._searchStrategy},o.prototype.showTrafficLayer=function(){this._mapView.showTrafficLayer(),this._setActiveLayers()},o.prototype._onLocationChanged=function(e,t,i){if(!e.isEmpty()){this._sessionModel.set("location",e),this._sessionModel.set("geoBox",this._mapView.getGeoBox()),this._sessionModel.set("zoomLevel",this._mapView.getZoomLevel()),this._searchStrategy.isRefreshNeeded()&&!i&&Mappy.ControllerFactory.getUniverseController().refreshTab();var o=this._sessionModel.get("activeTabId");i||o===Mappy.TabControllerFactory.TAB_ITINERARY||o===Mappy.TabControllerFactory.TAB_ADDRESS||o===Mappy.TabControllerFactory.TAB_SEARCH||Mappy.ControllerFactory.getHistoryController().pushState(!0,"NavigationController  - refresh (location, geoBox or zoomLevel)")}},o.prototype._onIndexViewResize=function(){this._sessionModel.set("geoBox",this._mapView.getGeoBox())},o.prototype._setActiveLayers=function(){this._sessionModel.set("activeViewModes",this._mapView.getActiveViewModes())},o.prototype.onChangeTab=function(){return this._firstChangeTab?void(this._firstChangeTab=!1):(this._searchStrategy.clearCollections(),this._indexView.closeFirstVisitMessage(),void this.closeViews())},o.prototype._checkSurvey=function(e){var t="shouldDisplayUserSurvey";this._sessionModel[t](Math.random())&&(this._userSurveyView=new d(e),this._userSurveyView.render(),this._indexView.openFancybox(this._userSurveyView.$el,{afterClose:r.bind(this._userSurveyView.remove,this._userSurveyView)}),Mappy.localStore.set(e,(new Date).getTime()))},o.prototype._checkFirstVisit=function(){this._sessionModel.isFirstVisit()?(this._sessionModel.saveFirstVisit(),this._indexView.showFirstVisitMessage()):this._indexView.closeFirstVisitMessage()},o.prototype._toggleFullscreen=function(e){this._indexView.$el.toggleClass("fullscreen",e.active),e.active?(this._indexView.$el.toggleClass("fullscreen-indoor",this._indoorView?!0:!1),this._indexView.$el.toggleClass("fullscreen-outdoor",this._isOutdoorView),this._isOutdoorView||this._indoorView||Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_EXPAND_MAP),this._activateFullscreenMode(),this._indexView.getAdWrapperView().hide()):(this._indexView.$el.removeClass("fullscreen-indoor fullscreen-outdoor"),this._desactivateFullscreenMode(),this._indexView.getAdWrapperView().shouldDisplayAdWrapper()&&this._indexView.getAdWrapperView().show())},o.prototype._activateFullscreenMode=function(){if(this._isFullscreen=!0,this._sessionModel.get("currentItinerary")){$(window).scrollTop(0),$("body").removeClass("scrollable");var e=Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl("itinerary");this._leftView.getAdvertisingBLView().refresh(e,!0),this._mapView.setFullTools(!0),this._mapView.enableScrollWheelZoom(),this._mapView.enableInteractions()}else this._sessionModel.get("fullGeoentity")?($(window).scrollTop(0),$("body").removeClass("scrollable"),this._leftView.$el.height(40+this._leftView.$("#GeoentityTabView .name").outerHeight()+this._leftView.$("#GeoentityTabView .address").outerHeight()),this._mapView._map.invalidateSize(),this._mapView.setGeoPosition(this._sessionModel.get("fullGeoentity").get("location"),15),this._mapView.enableScrollWheelZoom(),this._mapView.enableInteractions()):this._leftView.hasMiniHeaderPersistant()||Mappy.ControllerFactory.getUniverseController().setMiniHeader(!0);$(".leaflet-control-container .leaflet-left").removeClass("leaflet-left").addClass("layerOnLeft"),$(".mappy-viewport").removeClass("layerOnInnerLeft").addClass("layerOnLeft"),this._mapView.resize()},o.prototype._desactivateFullscreenMode=function(){this._isFullscreen=!1,$(".mappy-viewport").removeClass("layerOnLeft").addClass("layerOnInnerLeft"),$(".leaflet-control-container .layerOnLeft").removeClass("layerOnLeft").addClass("leaflet-left"),this._leftView.$el.height(""),this._leftView.getItineraryFormView().selectMode(),this._sessionModel.get("currentItinerary")?($("body").addClass("scrollable"),this._leftView.getAdvertisingBLView().desactivate(),this._mapView.resize(),this._mapView.setItineraryTools(),this._mapView.bestViewById(g.LAYERID_SHAPE,{animate:parameters.size>=parameters.sizes.normal}),this._mapView.disableScrollWheelZoom()):this._sessionModel.get("fullGeoentity")?($("body").addClass("scrollable"),this._mapView.resize(),this._mapView.setGeoPosition(this._sessionModel.get("fullGeoentity").get("location"),15),this._mapView.disableScrollWheelZoom()):this._leftView.hasMiniHeaderPersistant()||Mappy.ControllerFactory.getUniverseController().setMiniHeader(!1),this._mapView.resize()},o.prototype._bindUpi=function(e){this._upiView=e,this._upiView.on("static",r.bind(this._onStaticUpi,this)).on("dragstop",r.bind(this._onUpiDragStop,this))},o.prototype._onStaticUpi=function(e){var t=new u(e);new p({from:t,to:t,preview:!0}).fetch().then(r.bind(function(e){var t=new u({lat:e.get("lat"),lng:e.get("lng")});this._upiView.openPanoTooltip(t,e.get("url"))},this)).then(void 0,r.bind(function(){this._upiView.openErrorTooltip(t)},this))},o.prototype._onUpiDragStop=function(e){var t=new u(e);new p({from:t,to:t}).fetch().then(r.bind(function(e){var t=new u({lat:e.get("lat"),lng:e.get("lng")});this._upiView.clear(),this._sessionModel.set("location",t),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_IMMERSIVE_UPI),this.switchToImmersiveView(t,new y({yaw:0,pitch:0}))},this)).then(void 0,r.bind(function(){this._upiView.openErrorTooltip(t,!0)},this))}},{"../core/utils/Device.js":94,"../model/GeoentityModel":117,"../model/LocationModel":121,"../model/PanoTileModel":123,"../model/SessionModel":126,"../model/ViewDirectionModel":139,"../view/map/IndoorView/IndoorView":210,"../view/map/LeafletMapView/LeafletMapView":211,"../view/overlay/UserSurveyView/UserSurveyView":244,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,"./strategy/MapSearchStrategy":71,util:8}],64:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._mapView=this._indexView.getMapView(),this._roadbookView=this._indexView.getRoadbookView(),this._shareModel=new a,this._shareView=new p({model:this._shareModel})}var r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./Controller"),a=e("../model/ShareModel"),p=e("../view/overlay/share/ShareView"),l=e("../service/Routing");t.exports=o,Mappy.ShareController=o,s.inherits(o,n),o.SHARE_FACEBOOK="facebook",o.SHARE_TWITTER="twitter",o.SHARE_LINK="link",o.SHARE_MAIL="mail",o.SHARE="all",o.PRINT_MAP="print",o._facebookURL="https://www.facebook.com/dialog/feed",o._twitterURL="https://twitter.com/share",o._addressTemplate="[%s ][%S - ][%z, ]%y",o.prototype.initialize=function(){this._shareModel.on("change",this._shareView.render,this._shareView).on("invalid",this._shareView.setInvalidState,this._shareView),this._mapView.on("share",this._onShare,this),this._roadbookView.on("share",this._onShare,this),this._shareView.on("share",this._onShare,this).on("email-submit",function(){this._shareView.model.save(null,{success:r.bind(function(){this._shareView.setSucceedState(),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SHARE_EMAIL)},this),error:r.bind(this._shareView.setFailedState,this._shareView)})},this)},o.prototype.setGeoentitySocialView=function(e){e.on("share",this._onShare,this)},o.prototype.printMap=function(){if(this._sessionModel.get("activeTabId")===Mappy.TabControllerFactory.TAB_ITINERARY)window.open(this._sessionModel.get("itineraryForm").getPrintUrl());else{var e=l.generate("MappyFastBundle_map_print",{coordX:this._sessionModel.get("location").get("lng"),coordY:this._sessionModel.get("location").get("lat"),zoom:this._sessionModel.get("zoomLevel"),viewmodes:this._sessionModel.get("activeViewModes").join("-")});window.open(e)}},o.prototype.shareFacebook=function(){var e=this._getShareObject(o.SHARE_FACEBOOK),t={app_id:parameters.share.facebook.appId,redirect_uri:e.link+"#window_close",display:"popup",link:e.link,name:e.subject,description:e.message};e.hasOwnProperty("picture")&&(t.picture=e.picture.replace("http://","//").replace("https://","//").replace("//","https://")),this._openSharePopup(o._facebookURL+"?"+$.param(t))},o.prototype.shareTwitter=function(){var e=this._getShareObject(o.SHARE_TWITTER),t={url:e.link,text:e.message};this._openSharePopup(o._twitterURL+"?"+$.param(t))},o.prototype.shareView=function(e){var t=this._getShareObject(e);this._shareModel.clear({silent:!0}).set(t),this._shareView.show()},o.prototype._openSharePopup=function(e){var t=580,i=440,o=($(window).width()-t)/2,r=($(window).height()-i)/2,s="location=no,status=no,width="+t+",height="+i+",top="+r+",left="+o;window.open(e,"sharePopup",s)},o.prototype._onShare=function(e,t){t===o.PRINT_MAP?this.printMap():t===o.SHARE_FACEBOOK?(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SHARE_FACEBOOK),this.shareFacebook()):t===o.SHARE_TWITTER?(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SHARE_TWITTER),this.shareTwitter()):t===o.SHARE_LINK?(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SHARE_LINK),this.shareView(t)):t===o.SHARE_MAIL?this.shareView(t):(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SHARE),this.shareView(o.SHARE))},o.prototype._translateMessageObject=function(e){return{subject:e.subjectKey?Mappy.stringReplace(Template.getText(e.subjectKey),e.subjectReplace):"",message:e.messageKey?Mappy.stringReplace(Template.getText(e.messageKey),e.messageReplace):""}},o.prototype._getAddressShareObject=function(e,t){var i=this._sessionModel.get("location"),r={subjectReplace:[i.get("rawAddress")]};return e===o.SHARE_FACEBOOK?(r.subjectKey="share_keyword_facebook_subject",r.messageKey="share_keyword_facebook_message"):e===o.SHARE_TWITTER?(r.messageKey="share_keyword_twitter_message",r.messageReplace=[i.get("rawAddress")]):(r.subjectKey="share_address_mail_subject",r.messageKey="share_address_mail_message",r.messageReplace=[i.get("rawAddress"),t]),this._translateMessageObject(r)},o.prototype._getKeywordShareObject=function(e,t,i){var r=this._sessionModel.get("searchKeyword"),s={subjectReplace:[r||i.get("label")]};return e===o.SHARE_FACEBOOK?(s.subjectKey="share_keyword_facebook_subject",s.messageKey="share_keyword_facebook_message"):e===o.SHARE_TWITTER?(s.messageKey="share_keyword_twitter_message",s.messageReplace=[r||i.get("label")]):(s.subjectKey="share_keyword_mail_subject",s.messageKey="share_keyword_mail_message",s.messageReplace=[r||i.get("label"),t]),this._translateMessageObject(s)},o.prototype._getAppShareObject=function(e,t,i){var r={subjectReplace:[i.get("name")]};return e===o.SHARE_FACEBOOK?(r.subjectKey="share_app_facebook_subject",r.messageKey="share_app_facebook_message",r.messageReplace=[i.get("description")]):e===o.SHARE_TWITTER?(r.messageKey="share_app_twitter_message",r.messageReplace=[i.get("name")]):(r.subjectKey="share_app_mail_subject",r.messageKey="share_app_mail_message",r.messageReplace=[i.get("name"),t]),this._translateMessageObject(r)},o.prototype._getPOIShareObject=function(e,t,i){var r={subjectReplace:[i.get("name")]};return e===o.SHARE_FACEBOOK?{subject:Template.getText("meta.title.poi",{"%name%":i.get("name"),"%rubrique%":i.get("rubricLabel"),"%way%":i.get("location").get("street"),"%zip%":i.get("location").get("zipCodes")[0],"%town%":i.get("location").get("city")}),message:Template.getText("meta.description.poi",{"%name%":i.get("name"),"%way%":i.get("location").get("street"),"%zip%":i.get("location").get("zipCodes")[0],"%town%":i.get("location").get("city")}),picture:this.getPanoByClosestPanoramicId(i.get("closestPanoramicId"),i.get("location"))}:(e===o.SHARE_TWITTER?(r.messageKey="share_geoentity_twitter_message_withaddress",r.messageReplace=[i.get("name"),Template.addressToString(i.get("location"),o._addressTemplate)]):(r.subjectKey="share_geoentity_mail_subject",r.messageKey="share_geoentity_mail_message",r.messageReplace=[i.get("name"),t]),this._translateMessageObject(r))},o.prototype._getRoadbookShareObject=function(e){var t=Template.addressToString(this._sessionModel.get("currentFromModel").getLocation(),"%y"),i=Template.addressToString(this._sessionModel.get("currentToModel").getLocation(),"%y"),r=this._sessionModel.get("itineraryForm").get("mode"),s=this._sessionModel.get("itineraryForm").getSeoUrl(),n=s.replace(/ /g,"%20"),a={subjectReplace:[t,i]};if(e===o.SHARE_FACEBOOK)return{link:n,subject:Template.getText("meta.title.itinerary."+r,{"%from%":t,"%to%":i}),message:Template.getText("meta.description.itinerary."+r,{"%from%":t,"%to%":i}),picture:"tc"===r?parameters.services.bucket+"images/fb_transports-en-commun.png":parameters.services.bucket+"images/fb_"+r+".png"};e===o.SHARE_TWITTER?(a.messageKey="share_itinerary_twitter_message",a.messageReplace=[i]):(a.subjectKey="share_itinerary_mail_subject",a.messageKey="share_itinerary_mail_message",a.messageReplace=[n]);var p=this._translateMessageObject(a);return p.link=n,p},o.prototype._getShareObject=function(e){var t=this._sessionModel.getPermalinkURL(),i=this._sessionModel.get("activeTabId"),o=this._appCatConf.get("categories").getCategoryDataByRubricIds(i),s=this._sessionModel.get("fullGeoentity"),n=this._sessionModel.get("app"),a=null;return s?a=this._getPOIShareObject(e,t,s):i===Mappy.TabControllerFactory.TAB_HOME||i===Mappy.TabControllerFactory.TAB_HOME_ITINERARY||i===Mappy.TabControllerFactory.TAB_SHOPPING?a=this._getAddressShareObject(e,t):n?a=this._getAppShareObject(e,t,n):i===Mappy.TabControllerFactory.TAB_SEARCH||o.subcategory?a=this._getKeywordShareObject(e,t,o.subcategory):i===Mappy.TabControllerFactory.TAB_ITINERARY&&(a=this._getRoadbookShareObject(e)),r.extend({link:t},a,{type:e})},o.prototype.getPanoByClosestPanoramicId=function(e,t,i){var o="panoramics/%P/tiles/geodetic/%X1,%Y1?redirect=true&fallbackradius=100".replace("%P",e).replace("%X1",t.get("lat")).replace("%Y1",t.get("lng")).concat(i===!0?"?preview=true":"");return parameters.services.pano+o}},{"../model/ShareModel":127,"../service/Routing":161,"../view/overlay/share/ShareView":246,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,util:8}],65:[function(e,t,i){"use strict";function o(e,t,i){a.call(this,e,t,i),this._universeView=new l,this._universeView.on("universeClick",this.setCurrentUniverse,this),this._tabView=new c,this._leftView=e.getLeftView(),this._leftView.on("universeClick",this.setCurrentUniverse,this),this._leftView.on("setMiniHeader",this.setMiniHeader,this),this._tabControllerFactory=new u(e,t,i),this._tabController=null,this._tabId=null,r.extend(y.prototype,{hooks:new d}),this._categoryContainerController=new y(e,t,i),this._previousTab=null}var r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./../../lib/bower_components/backbone/backbone.js"),a=e("./Controller"),p=e("../model/CategoryModel"),l=e("../view/header/UniverseView/UniverseView"),c=e("../view/left/TabView/TabView"),u=e("./tab/TabControllerFactory"),y=e("./CategoryContainerController"),h=e("../model/ApplicationModel"),d=e("./mixins/hooks");t.exports=o,s.inherits(o,a),r.extend(o.prototype,n.Events),Mappy.UniverseController=o,o.prototype.initialize=function(){this._categoryContainerController.initialize(),this.openTab(this._sessionModel.get("activeTabId")).then(void 0,Mappy.logError)},o.prototype.setCurrentUniverse=function(e,t){this._universeView.setCurrentUniverse(e),this._leftView.setCurrentUniverse(e),t!==!0&&(this._sessionModel.set("suggestKeyword",""),this.openTab(o.TABS_PER_UNIVERSE[e][0]).then(void 0,Mappy.logError))},o.prototype.setMiniHeader=function(e){this._universeView.setMiniHeader(e)},o.prototype.setPreviousTab=function(e){this._previousTab=e},o.prototype.getPreviousTab=function(){return this._previousTab},o.prototype.openCategory=function(e,t){var i;i=e instanceof p?e.id:e.getRubricIds().join(","),this.openTab(i,t).then(void 0,Mappy.logError)},o.prototype.openApplication=function(e,t){if(e instanceof h)this.openTab(e.get("id"),t).then(void 0,Mappy.logError);else{var i=this._appCatConf.getApplicationById(e);this.openTab(i.get("id"),t).then(void 0,Mappy.logError)}},o.prototype.setTabController=function(e,t){t=t||this._tabId,this._indexView.$el.removeClass(this._getTabControllerTypeFromTabId(t)+"Tab"),this._indexView.$el.addClass(this._getTabControllerTypeFromTabId(e)+"Tab"),this._tabId=e;var i=this._getTabControllerTypeFromTabId(e);this._tabController=this._tabControllerFactory.createTabController(i,e),this._sessionModel.set("activeTabId",e),this._sessionModel.set("appId",i===u.TAB_APP?e:null)},o.prototype.openTab=function(e,t){t=t||{};var i=this._getTabControllerTypeFromTabId(e);if("fr_FR"!==parameters.locale&&i===u.TAB_GEOENTITY)return Promise.resolve();if(this._tabController&&e===this._tabId)return t.isRebuild=!0,this._tabController.unbind(),this._tabController.build(t);this.trigger("newTab",e);var s=this._tabId;this._tabController&&(this._tabController.destroy(),this._tabView.removeCurrentTabView(),this._tabController=null,this._tabId=null,this._sessionModel.set("activeTabId",null),this._sessionModel.set("appId",null)),r.indexOf(o.TABS_PER_UNIVERSE.itinerary,i)>-1?this.setCurrentUniverse(o.UNIVERSE_ITINERARY,!0):r.indexOf(o.TABS_PER_UNIVERSE.locations,i)>-1?this.setCurrentUniverse(o.UNIVERSE_LOCATIONS,!0):this.setCurrentUniverse(o.UNIVERSE_SHOPPING,!0),this._leftView.setMiniHeader(r.indexOf([u.TAB_HOME,u.TAB_HOME_ITINERARY,u.TAB_SHOPPING],i)>-1?!1:!0),this.setTabController(e,s),this._tabView.setCurrentTabView(this._tabController.getTabView());var n=this._tabController.build(t).then(r.bind(function(){this._indexView.getMapView().resize()},this));return n},o.prototype.refreshTab=function(){this._tabController&&this._tabController.refresh().then(void 0,Mappy.logError)},o.prototype.getTabController=function(){return this._tabController},o.prototype.getCurrentUniverse=function(){for(var e in o.TABS_PER_UNIVERSE)if(o.TABS_PER_UNIVERSE.hasOwnProperty(e)&&r.indexOf(o.TABS_PER_UNIVERSE[e],this._getTabControllerTypeFromTabId(this._tabId))>-1)return e;return null},o.prototype.isHomeTab=function(){var e=Mappy.ControllerFactory._sessionModel.get("activeTabId");return r.indexOf([u.TAB_HOME,u.TAB_HOME_ITINERARY,u.TAB_SHOPPING],this._getTabControllerTypeFromTabId(e))>-1?!0:!1},o.prototype._getTabControllerTypeFromTabId=function(e){var t=[u.TAB_ADDRESS,u.TAB_APP,u.TAB_SEARCH,u.TAB_ITINERARY,u.TAB_TRAFFIC,u.TAB_HOME_TRAFFIC,u.TAB_HOTEL,u.TAB_HOME,u.TAB_HOME_ITINERARY,u.TAB_GEOENTITY,u.TAB_SHOPPING];if(r.contains(t,e))return e;var i=this._appCatConf.get("categories").getCategoryDataByRubricIds(e);return 1===this._appCatConf.get("categories").where({id:e}).length||i.category&&i.subcategory||"hotel"===e?u.TAB_CATEGORY:1===this._appCatConf.get("applications").where({id:e}).length?u.TAB_APPLICATION:u.TAB_RUBRIC},o.UNIVERSE_LOCATIONS="locations",o.UNIVERSE_ITINERARY="itinerary",o.UNIVERSE_SHOPPING="shopping",o.TABS_PER_UNIVERSE={locations:[u.TAB_HOME,u.TAB_SEARCH,u.TAB_CATEGORY,u.TAB_RUBRIC,u.TAB_APP,u.TAB_APPLICATION,u.TAB_GEOENTITY,u.TAB_HOME_TRAFFIC,u.TAB_TRAFFIC],itinerary:[u.TAB_HOME_ITINERARY,u.TAB_ITINERARY],shopping:[u.TAB_SHOPPING]}},{"../model/ApplicationModel":109,"../model/CategoryModel":112,"../view/header/UniverseView/UniverseView":184,"../view/left/TabView/TabView":189,"./../../lib/bower_components/backbone/backbone.js":12,"./../../lib/bower_components/underscore/underscore.js":29,"./CategoryContainerController":54,"./Controller":55,"./mixins/hooks":68,"./tab/TabControllerFactory":85,util:8}],66:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._domEl=$("<a />").attr("id","_xiti").appendTo($("body")),this._currentPage=o.PAGE_RESPONSE_SEARCH;var e=window.Mappy.GEOIP;parameters.country.belgium&&e&&"BE"===e.countryCode&&(this._initCIMTag(),Mappy.ControllerFactory.getUniverseController().on("newTab",this._sendCIMTag,this))}var r=(e("./../../lib/bower_components/underscore/underscore.js"),e("util")),s=e("../service/BUCTagger"),n=e("./Controller"),a=e("../model/form/ItineraryFormModel"),p=e("../model/form/AddressFieldModel"),l=e("../model/CategoryModel"),c=e("../model/SubCategoryModel"),u=e("../model/ApplicationModel"),y=e("../model/ShoppingSignModel"),h=e("../model/GeoentityModel"),d=e("../model/ContentModel"),g=(e("./ControllerFactory"),e("../core/utils/Device.js")),m={ItineraryFormModel:a,CategoryModel:l,SubCategoryModel:c,ApplicationModel:u,ShoppingSignModel:y,GeoentityModel:h,ContentModel:d,AddressFieldModel:p},v=new s;window.xtsite+="&"+v.getMid(),t.exports=o,Mappy.XitiController=o,r.inherits(o,n),o.XITI_XTSERV="https://logs1257.at.pagesjaunes.fr/hit.xiti",o.XITI_XTSITEPJ=window.parameters.stats.xtsitePJ,o.ALADIN_URL=window.parameters.stats.aladinUrl,o.DEFAULT_RUBRIC="NULL",o.TYPE_PAGE="F",o.TYPE_CLICK="C",o.TYPE_ACTION="A",o.TYPE_SORTIE="S",o.TYPE_SHOPPING="N",o.REDIRECT_DEFAULT="goto",o.REDIRECT_RATING="gotoAvis",o.REDIRECT_RATING_NEW="gotoAvisNew",o.REDIRECT_WEB="gotoSite",o.REDIRECT_PHONE="gotoCall",o.TYPE_DISPO="D",o.TYPE_NON_DISPO="ND",o.PAGE_DISCOVERY={p:"HPLieu",s2:1,xIndicators:["page","location"]},o.PAGE_SHOPPING={p:"homepage",s2:8},o.PAGE_ITINERARY={p:"Itineraire",s2:2},o.PAGE_TRAFFIC={p:"Trafic",s2:1,xIndicators:["page","location"]},o.PAGE_RESPONSE_TRAFFIC={p:"ReponseTrafic",s2:1,xIndicators:["page","location"]},o.PAGE_HOTEL={p:"Hotel",s2:1,xIndicators:["page","location"]},o.PAGE_RESPONSE_CATEGORY_MAP={p:"ReponseCategorieCarte",s2:1,xIndicators:["page","category","location"]},o.PAGE_RESPONSE_CATEGORY_LIST={p:"ReponseCategorieListe",s2:1,xIndicators:["page","category","location"]},o.PAGE_GEOENTITY={p:"FichePoi",s2:3,xIndicators:["page","poi","location"]},o.PAGE_ADDRESS={p:"FicheAdresse",s2:2,xIndicators:["page","location"]},o.PAGE_DETAIL_GEOENTITY={p:"Fiche",s2:3,xIndicators:["page","poi","location"]},o.PAGE_RESPONSE_SEARCH={p:"ReponseMoteur",s2:1,xIndicators:["page","location"],fIndicators:["search"]},o.PAGE_RESPONSE_SEARCH_POI={p:"ReponseMoteurPOI",s2:1,xIndicators:["page","location"],fIndicators:["search"]},o.PAGE_DETAIL_ITINERARY={p:"FeuilleDeRoute",s2:2,xIndicators:["page","itinerary"]},o.PAGE_PRINT_MAP={p:"ImpressionCarte",s2:1},o.PAGE_PRINT_ITINERARY={p:"ImpressionItineraire",s2:2},o.PAGE_ANNUAIRE_CITIES={s2:9,p:"AnnuaireVilles"},o.PAGE_ANNUAIRE_ROADS={s2:9,p:"AnnuaireRues"},o.PAGE_ANNUAIRE_ACTIVITIES={s2:9,p:"AnnuaireActivites"},o.PAGE_ANNUAIRE_ITINERARIES={s2:9,p:"AnnuaireItineraires"},o.PAGE_ANNUAIRE_OVM={s2:9,p:"AnnuaireOVM"},o.XTC_SEARCH_LOC="RechercheMoteur::Loc::NA::NA:NA",o.XTC_SEARCH_FORM="RechercheMoteur::Formulaire::NA::NA:NA",o.XTC_SEARCH_FORM_SUGGEST="RechercheMoteur::Formulaire::Suggestion::{suggestionType}:{subtype}",o.XTC_SEARCH_ADDRESS_LINK="RechercheMoteur::AddressFiche::NA::NA:NA",o.XTC_ITINERARY_FORM="RechercheItineraire::Formulaire::{itinerarySourceType}:{itinerarySourceSubtype}::{itineraryDestinationType}:{itineraryDestinationSubtype}",o.XTC_ITINERARY_DETAIL="FeuilleDeRoute::{itineraryMode}::NA::{routeIdx}:NA",o.XTC_ITINERARY_RETURN="NA::NA::NA::RetourItineraire:NA",o.XTC_ITINERARY_ALTERNATIVE="RechercheItineraire::Alternatif::NA::{itineraryMode}::NA",o.XTC_ITINERARY_COVOITURAGE="FeuilleDeRoute::NA::NA::covoiturage:NA",o.XTC_ITINERARY_UBER="FeuilleDeRoute::NA::NA::uber:NA",o.XTC_ITINERARY_OUIBUS="FeuilleDeRoute::NA::NA::ouibus:NA",o.XTC_ITINERARY_NDF="FeuilleDeRoute::NA::NA::NDF:NA",o.XTC_ITINERARY_NDF_PRINT="NoteDeFrais::NA::NA::Imprimer:NA",o.XTC_ITINERARY_KO="RechercheItineraireKO::{formFieldValue}::NA::NA:NA",o.XTC_ITINERARY_PRINT_SIMPLE="ImpressionItineraire::NA::NA::Simplifie:NA",o.XTC_ITINERARY_PRINT_EXTENDED="ImpressionItineraire::NA::NA::Detaille:NA",o.XTC_ITINERARY_DEPART="FeuilleDeRoute::interet::NA::Depart:NA",o.XTC_ITINERARY_ARRIVEE="FeuilleDeRoute::interet::NA::Arrivee:NA",o.XTC_ITINERARY_GPS="FeuilleDeRoute::NA::NA::GuidageGPS",o.XTC_SHOPPING_BRAND="mettre_en_avant::enseigne::{page}::{chainTitle}",o.XTC_SHOPPING_FORM="afficher_liste_produits::rechercher::{page}::NA",o.XTC_CATEGORY_BAR_SUBCATEGORY="Recherche::{categoryId}::{subcategoryId}::{page}:BarreCategorie",o.XTC_CATEGORY_BAR_APPLICATION="Recherche::{categoryId}::{applicationId}::{page}:BarreCategorie",o.XTC_CATEGORY_BAR_CATEGORY="Recherche::{categoryId}::all::{page}:BarreCategorie",o.XTC_CATEGORY_LIST="Recherche::{categoryId}::{subcategoryId}::{page}:Liste",o.XTC_CATEGORY_FILTER="Recherche::{categoryId}::{applicationId}::{page}:Liste:{filter}",o.XTC_CATEGORY_CALENDAR="Recherche::{categoryId}::{applicationId}::{page}:{eventLocation}",o.XTC_CATEGORY_POPIN_APPLICATION="Recherche::{categoryId}::{applicationId}::{page}:Popin",o.XTC_CATEGORY_POPIN_SUBCATEGORY="Recherche::{categoryId}::{subcategoryId}::{page}:Popin",o.XTC_CATEGORY_POPUP="Recherche::{categoryId}::{applicationId}::{page}:Fiche",o.XTC_CATEGORY_RUBRIC_LINK_S="Recherche::NA::{subcategoryId}::{page}:Rubrique",o.XTC_CATEGORY_RUBRIC_LINK_C="Recherche::{categoryId}::{subcategoryId}::{page}:Rubrique",o.XTC_CATEGORY_MORE="Recherche::{geoentityRubricId}::{applicationId}::{page}:Plus",o.XTC_CATEGORY_PROMO="Recherche::{categoryId}::{applicationId}::{page}:FiltrePromo",o.XTC_CATEGORY_TOGGLE_LIST="Liste::{categoryId}::{applicationId}::{page}:NA",o.XTC_CATEGORY_TOGGLE_MAP="ModeCarte::{categoryId}::{applicationId}::{page}:NA",o.XTC_DETAIL_LIST="Fiche::{geoentityRubricId}::{applicationId}::{page}:Liste",o.XTC_DETAIL_MAP="Fiche::{geoentityRubricId}::{applicationId}::{page}:Carte",o.XTC_DETAIL_TAB="Fiche::{geoentityRubricId}::{contentId}::{page}:Fiche",o.XTC_DETAIL_FDR="Fiche::{geoentityRubricId}::{contentId}::{page}:FDR",o.XTC_DETAIL_FDR_BAS="Fiche::{geoentityRubricId}::{contentId}::{page}:FDRBas",o.XTC_DETAIL_PREV="Fiche::{geoentityRubricId}::NA::Fiche:FicheChevron",o.XTC_DETAIL_NEXT="Fiche::{geoentityRubricId}::NA::Fiche:FicheChevron",o.XTC_DETAIL_MAP="Fiche::{geoentityRubricId}::NA::{page}:Carte",o.XTC_DETAIL_CAROUSEL="Fiche::{geoentityRubricId}::NA::{page}:Carrousel",o.XTC_DETAIL_FICHE_ADRESSE="Fiche::{geoentityRubricId}::NA::{page}:NA",o.XTC_VDE_PUSH_FICHE="Fiche::{geoentityRubricId}::{applicationId}::{page}:pushVDE",o.XTC_VDE_PUSH_POIS="Recherche::NA::{applicationId}::{page}:pushVDE",o.XTC_VDE_PUSH_SSCAT="Recherche::{categoryId}::NA::{page}:pushSsCat",o.XTC_IMMERSIVE_INDOOR="Vue::NA::NA::ActiverVueIndoor:VignetteFiche",o.XTC_IMMERSIVE_UPI="Vue::ActiverImmersive::NA::Upi:NA",o.XTC_IMMERSIVE_POPIN="Vue::ActiverImmersive::NA::Popin:NA",o.XTC_IMMERSIVE_DETAIL="Vue::ActiverImmersive::NA::Fiche:NA",o.XTC_VIEWMODE_AERIAL="Vue::ActiverPhotoAerienne::NA::{page}:NA",o.XTC_VIEWMODE_MIXTE="Vue::ActiverMixte::NA::{page}:NA",o.XTC_VIEWMODE_TRANSPORT="Vue::ActiverLayerTc::NA::{page}:NA",o.XTC_VIEWMODE_TRAFFIC="Vue::ActiverLayerTrafic::NA::{page}:NA",o.XTC_EXPAND_MAP="Vue::AgrandirCarte::NA::{page}:NA",o.XTC_SHARE_FACEBOOK="Partage::Facebook::NA::{page}:NA",o.XTC_SHARE_TWITTER="Partage::Twitter::NA::{page}:NA",o.XTC_SHARE_EMAIL="Partage::Email::NA::{page}:NA",o.XTC_SHARE_LINK="Partage::Permalien::NA::{page}:NA",o.XTC_SHARE="Partage::NA::NA::{page}:NA",o.XTC_ACTIVATION_FOOTER="NA::NA::NA::ActivationFooter:NA",o.XTC_CARTE_LOC="Carte::NA::NA::Geoloc:NA",o.XTC_CLOSE_AD="Habillage::NA::NA::Masque:NA",o.XTC_GOTO_GEOENTITY_TOOLTIP="Yaller::PopinPoi::{geoentityRubricId}::NA:NA",o.XTC_GOTO_ADDRESS_TOOLTIP="Yaller::PopinAdresse::NA::NA:NA",o.XTC_GOTO_DETAIL="Yaller::Fiche::{geoentityRubricId}::NA:NA",o.XTC_GOTO_LIST="Yaller::Liste::NA::{page}:NA",o.XTC_GOTO_FICHE_ADDRESS="Yaller::FicheAdresse::NA::NA:NA",o.XTC_VDC_FOOTER="VitrineDigitaleCommercante::NA::NA::Footer:NA",o.XTC_contact="Contact::NA::NA::NA",o.XTC_APPLICATION_CONTINUER="Autres::Application::Continuer::NA:NA",o.XTC_APPLICATION_TELECHARGER="Autres::Application::Telecharger::NA:NA",o.XTC_BACK="Retour::NA::NA::{page}:NA",o.XTC_FANTOMAS="Fantomas::NA::NA::NA",o.prototype.tagPage=function(e,t){if(this._lockFirstTagOtherThanDetail&&e!==o.PAGE_DETAIL_GEOENTITY&&e!==o.PAGE_DETAIL_ITINERARY)return this._lockFirstTagOtherThanDetail=!1,!1;this._currentPage=e;var i=this._getIndicators(e.xIndicators||[]),r=this._getIndicators(e.fIndicators||[]),s=$.extend({},i,r,t||{}),n=(e.chapters||"")+e.p+($.param(s)?"&"+$.param(s):""),a=[o.TYPE_PAGE,e.s2,n];this._send("xt_med",a),this._pageTagSent=!0,this._abTag&&(this.tagAbTest(this._abTag),this._abTag=null)},o.prototype.tagAbTest=function(e){if(this._pageTagSent===!0){var t=[void 0,void 0,e,[]];this._send("xt_mvt",t)}else this._abTag=e},o.prototype.tagAction=function(e){return this._tagAction.apply(this,[e,o.TYPE_ACTION,null].concat(Array.prototype.slice.call(arguments,1)))},o.prototype.tagActionUrl=function(e,t){return this._tagAction.apply(this,[e,o.TYPE_ACTION,t].concat(Array.prototype.slice.call(arguments,1)))},o.prototype.tagActionN=function(e,t){return this._tagAction.apply(this,[e,o.TYPE_SHOPPING,t].concat(Array.prototype.slice.call(arguments,1)))},o.prototype.tagActionSortie=function(e){return this._tagAction.apply(this,[e,o.TYPE_SORTIE,null].concat(Array.prototype.slice.call(arguments,1)))},o.prototype._initCIMTag=function(){!function(e,t){try{var i=e.createElement(t),o=e.getElementsByTagName(t)[0],r="http"+("https:"===location.protocol?"s":"");i.setAttribute("async","async"),i.setAttribute("defer","defer"),i.src=r+"://gabe.hit.gemius.pl/xgemius.js",o.parentNode.insertBefore(i,o)}catch(s){}}(document,"script")},o.prototype._sendCIMTag=function(){window.pp_gemius_hit&&window.pp_gemius_hit(parameters.cimIdentifier)},o.prototype._tagAction=function(e,t,i){for(var r=3;r<=arguments.length;r++)e=this._getValues(e,arguments[r]);e=Mappy.stringFormat(e,{applicationId:"NA"}),e=Mappy.stringFormat(e,{categoryId:"NA"});var s={};i&&(this._domEl.attr("href",i),s=this._domEl[0],window.xtkey=!1);var n=[s,o.TYPE_CLICK,"",e,t];return this._send("xt_click",n)};var f=function(e,t,i,r,s,n,a,p){e=e||o.REDIRECT_DEFAULT;var l=[t||"",i||"",r||"",s,e];return(p||e===o.REDIRECT_DEFAULT||e===o.REDIRECT_RATING)&&l.push(a),l="PUB-["+l.join("]-[")+"]",[n||{},l]};o.prototype.tagGeoentityRedirection=function(e,t,i,r){var s,n;s=this._sessionModel.get("partnerId")?this._sessionModel.get("partnerId"):e&&e.get("additionalInfo")?e.get("additionalInfo").appId:"";var a=this._sessionModel.getApplicationParams(this._sessionModel.get("partnerTab")?this._sessionModel.get("partnerTab").partnerId:this._sessionModel.get("activeTabId"));n=a&&a.params&&a.params.from&&a.params.to?o.TYPE_DISPO:o.TYPE_NON_DISPO;var p=f(t,e.get("rubricId"),s,null,i||this._currentPage.p,null,n,r);return this._send("xt_adc",p)},o.prototype.tagDomainRedirection=function(e,t,i,r){var s=f(e,null,r,i,this._currentPage.p,t,o.TYPE_NON_DISPO);return this._send("xt_adc",s)},o.prototype.tagStoreLocatorDisplay=function(e){var t="PUB-[BarreDeCategorie]-[NA]-["+e.get("id")+"]-[BarreDeCategorie]-[]",i=[{},"&ati="+t];return this._send("xt_adc",i)},o.prototype.tagCategoryFilterDisplay=function(e){
var t="PUB-[FiltreListe]-[NA]-["+e.get("id")+"]-[FiltreListe]-[]",i=[{},"&ati="+t];return this._send("xt_adc",i)},o.prototype.tagRoadbookPushDisplay=function(e,t){if(!t&&g.isMobile(navigator.userAgent))return!1;var i="PUB-["+e.toLowerCase()+"]-[NA]-[NA]-[FeuilleDeRoute]-[]",o=[{},"&ati="+i];return this._send("xt_adc",o)},o.prototype.tagPJ=function(e){e.get("pjBlocId")&&((new Image).src="https://logs1257.at.pagesjaunes.fr/hit.xiti?s="+o.XITI_XTSITEPJ+"&s2=1&p=MAPPY::PJ::PJ::Affichage_pro&di=&an=&ac=&rn="+(new Date).getTime(),(new Image).src=o.ALADIN_URL+"r1=&r2=&r3=Fiche&p0="+e.get("pjBlocId")+"&x="+(new Date).getTime())},o.prototype.tagBucClick=function(e,t,i,o){var r=parameters.services.buc+(new Date).getTime()+"&geoentity="+t;i&&(r+="&rubricid="+i),o&&(r+="&targeturl="+encodeURIComponent(o)),(new Image).src=v.updateURL(r,e)},o.prototype.tagBucVDE=function(e,t,i){var o=parameters.services.buc+(new Date).getTime()+"&type="+t+"&ids="+i;(new Image).src=v.updateURL(o,e)},o.prototype.tagBucCategory=function(e){var t=parameters.services.audience+(new Date).getTime()+"&catid="+e.get("id");(new Image).src=v.updateURL(t,"SPD_CAT_DISPLAY")},o.prototype._getIndicators=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&$.extend(t,this["_get_"+e[i]]());return t},o.prototype._getValues=function(e,t){return e=Mappy.stringFormat(e,{page:this._currentPage.p}),t&&t instanceof Object&&(this._isInstanceOf(t,"ItineraryFormModel")?e=Mappy.stringFormat(e,{itineraryMode:this._getItineraryMode(t),routeIdx:parseInt(t.get("routeIdx"),10)+1,steps:this._getItineraryWithStep(t)}):this._isInstanceOf(t,"LocationModel")?e=Mappy.stringFormat(e,{addressCityINSEECode:t.get("cityINSEECode"),addressCountryNumericCode:t.get("countryNumericCode"),addressCity:t.get("city")}):this._isInstanceOf(t,"AddressFieldModel")?e=Mappy.stringFormat(e,{formFieldValue:t.get("value")}):this._isInstanceOf(t,"CategoryModel")?e=Mappy.stringFormat(e,{categoryId:t.get("id")}):this._isInstanceOf(t,"SubCategoryModel")?e=Mappy.stringFormat(e,{categoryId:t.get("rubricIds").join(","),subcategoryId:t.get("id")}):this._isInstanceOf(t,"ApplicationModel")?e=Mappy.stringFormat(e,{applicationId:t.get("id")}):this._isInstanceOf(t,"GeoentityModel")?e=Mappy.stringFormat(e,{geoentityRubricId:t.get("rubricId")||o.DEFAULT_RUBRIC}):this._isInstanceOf(t,"ContentModel")?e=Mappy.stringFormat(e,{contentId:t.get("id")}):this._isInstanceOf(t,"ShoppingSignModel")?e=Mappy.stringFormat(e,{chainTitle:this._bracketMe(this._removeAccents(t.get("name")))}):this._isInstanceOf(t,"ProductModel")&&(e=Mappy.stringFormat(e,{productTitle:this._bracketMe(this._removeAccents(t.get("title")))}))),e},o.prototype._isInstanceOf=function(e,t){return"function"==typeof m[t]&&e instanceof m[t]},o.prototype._send=function(e,t){return window[e].apply(null,t)},o.prototype._get_page=function(){return{x2:this._bracketMe(this._currentPage.p)}},o.prototype._get_category=function(){var e=this._appCatConf.get("categories"),t=this._sessionModel.get("app");if(t)return{x3:t.has("categoryModel")?t.get("categoryModel").get("id"):"NA",x5:t.id};var i=this._sessionModel.get("activeTabId");if(e.where({id:i}).length)return{x3:i,x5:"all"};var o=e.getCategoryDataByRubricIds(i);return{x3:o.category?o.category.get("id"):i,x5:i}},o.prototype._get_poi=function(){var e=this._sessionModel.get("fullGeoentity"),t=this._sessionModel.get("partnerTab");return{x4:e.get("rubricId")||o.DEFAULT_RUBRIC,x5:t?t.partnerId:"NC",f1:e.has("reviewCollection")?1:0,f2:parameters.size>parameters.sizes.small&&e.get("phone")&&!e.shouldHideContactInformations()?1:0}},o.prototype._get_location=function(){var e=this._sessionModel.get("location"),t={CodeAller:e.get("cityINSEECode")+"/"+e.get("countryNumericCode")};return window.pj&&window.pj.oax&&(t.OASid=window.pj.oax),{stc:Mappy.stringFormat(JSON.stringify(t)),x10:e.get("regionCode"),x11:this._bracketMe(this._getZipCode(e.get("zipCodes")))}},o.prototype._get_itinerary=function(){var e=this._sessionModel.get("currentFromModel").getLocation(),t=this._sessionModel.get("currentToModel").getLocation(),i={CodeAller:e.get("cityINSEECode")+"/"+e.get("countryNumericCode"),CodeRetour:t.get("cityINSEECode")+"/"+t.get("countryNumericCode")};window.pj&&window.pj.oax&&(i.OASid=window.pj.oax);var o=this._sessionModel.get("itineraryForm"),r=this._sessionModel.get("currentItinerary"),s=r.get("routes"),n=(parameters.size>parameters.sizes.medium&&s.length&&s.at(0).get("pushes")||[],s.at(o.get("routeIdx")).get("distance")),a="auto"===this._sessionModel.get("itineraryForm").get("mode"),p=this._sessionModel.get("itineraryForm").get("realtimeTraffic");return{x6:this._format_distance(n),x7:this._bracketMe(this._getItineraryMode(this._sessionModel.get("itineraryForm"))),stc:Mappy.stringFormat(JSON.stringify(i)),x10:e.get("regionCode"),x11:this._bracketMe(this._getZipCode(e.get("zipCodes"))),x12:t.get("regionCode"),x13:this._bracketMe(this._getZipCode(t.get("zipCodes"))),f3:r.get("steps").length?"1":"0",f4:a&&p?"1":"0"}},o.prototype._format_distance=function(e){var t=e/1e3;return t.toFixed(1)},o.prototype._get_search=function(){var e=this._bracketMe(this._removeAccents(this._sessionModel.get("searchKeyword")));return{f1:e,mc:e}},o.prototype._getItineraryMode=function(e){var t={auto:"Vehicule",tc:"Tc",pieton:"Pieton",velo:"Velo",velib:"Velib"},i=t[e.get("mode")];return"velo"===e.get("mode")&&0===parseInt(e.get("bikeType"),10)&&(i=t.velib),i},o.prototype._getItineraryWithStep=function(e){for(var t=0;t<e.get("steps").length;t++)if(""!==e.get("steps")[t].get("value"))return"AvecEtapes";return"SansEtapes"},o.prototype._getZipCode=function(e){if(0===e.length)return"";var t="";return t=/^\d+$/.test(e[0])===!0?Math.min.apply(null,e):e[0],4===t.toString().length&&(t="0"+t),t},o.prototype._bracketMe=function(e){return"["+e+"]"},o.prototype._removeAccents=function(e){var t="àáäâèéëêìíïîòóöôùúüûñç",i="aaaaeeeeiiiioooouuuunc";return e.replace(new RegExp("["+t+"]","g"),function(e){return i.charAt(t.indexOf(e))})}},{"../core/utils/Device.js":94,"../model/ApplicationModel":109,"../model/CategoryModel":112,"../model/ContentModel":114,"../model/GeoentityModel":117,"../model/ShoppingSignModel":128,"../model/SubCategoryModel":131,"../model/form/AddressFieldModel":156,"../model/form/ItineraryFormModel":157,"../service/BUCTagger":159,"./../../lib/bower_components/underscore/underscore.js":29,"./Controller":55,"./ControllerFactory":56,util:8}],67:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("../../model/GeoentityModel"),s=e("../../model/ApplicationModel"),n=e("../../core/utils/Device.js"),a={LocationListView:e("../../view/left/list/LocationListView/LocationListView"),GeoentityListView:e("../../view/left/list/GeoentityListView/GeoentityListView")},p=t.exports={};p._geoentityListView=null,p._locationListView=null,p._activeModelCid=null,p.bindRenderer=function(){this._mapView.on("modelClick",n.hasTouchSupport()?this._onRendererModelTouch:this._onRendererModelClick,this).on("modelMouseover",this._onRendererModelOver,this).on("modelMouseout",this._onRendererModelOut,this).on("modelGoToOutdoor",this._onRendererModelGoToOutdoor,this).on("modelGoToItinerary",this._onRendererModelGoToItinerary,this).on("geoentityTipRendered",this._onRendererGeoentityTooltip,this).on("locationCategoryClick",this._onRendererLocationCategoryClick,this).on("locationApplicationClick",this._onRendererLocationApplicationClick,this)},p.unbindRenderer=function(){this._mapView.off(null,null,this),this._geoentityListView&&this._geoentityListView.off(null,null,this),this._locationListView&&this._locationListView.off(null,null,this)},p.renderGeoentities=function(e,t){this._sessionModel.set("lastGeoentitiesResultsListMode",!1),t&&(this._geoentityListView=this._renderListView(this._geoentityListView,e,"GeoentityListView"),this._geoentityListView.on("reservationClick",this._onRendererGeoentityReservation,this),t.removeGeoentities(),t.displayGeoentities(this._geoentityListView)),this._mapView.updateModels(e)},p.renderLocations=function(e,t){t&&(this._locationListView=this._renderListView(this._locationListView,e,"LocationListView"),this._locationListView.on("modelGoToItinerary",this._onRendererModelGoToItinerary,this,"XTC_GOTO_LIST"),t.displayLocations(this._locationListView)),this._mapView.updateModels(e)},p._renderListView=function(e,t,i){return this._activeModelCid=null,e&&(e.remove(),e=null),e=new a[i](t,this._sessionModel.get("browserGeoPosition")),e.on("modelClick",this._onRendererModelClick,this).on("modelOver",this._onRendererModelOver,this).on("modelOut",this._onRendererModelOut,this)},p._onRendererModelOver=function(e){this._mapView.highlightModel(e);var t=e instanceof r?this._geoentityListView:this._locationListView;t&&t.highlightModel(e)},p._onRendererModelOut=function(e){this._activeModelCid=null,this._mapView.unhighlightModel(e);var t=e instanceof r?this._geoentityListView:this._locationListView;t&&t.unhighlightModel(e)},p._onRendererModelTouch=function(e,t){e.cid!==this._activeModelCid?this._onRendererModelOver(e,t):this._onRendererModelClick(e,t),this._activeModelCid=e.cid},p._onRendererModelClick=function(e,t,i){e instanceof r?this._onRendererGeoentityClick(e,t,!1,i):this._onRendererLocationClick(e)},p._onRendererModelGoToOutdoor=function(e){var t=e instanceof r?e.getLocation():e;e instanceof r&&Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_TOOLTIP_OUTDOOR",e.id),this._sessionModel.set("location",t),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_IMMERSIVE_POPIN),Mappy.ControllerFactory.getNavigationController().switchToImmersiveView(t,e.get("viewDirection"),e)},p._onRendererModelGoToItinerary=function(e,t){e instanceof r&&(Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_TOOLTIP_GOTO",e.id),t="XTC_GOTO_GEOENTITY_TOOLTIP"),t=t||"XTC_GOTO_ADDRESS_TOOLTIP",Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController[t],e),Mappy.ControllerFactory.getUniverseController().setCurrentUniverse("itinerary"),Mappy.ControllerFactory.getHeaderFormController().setItineraryTo(e)},p._onRendererGeoentityReservation=function(e,t){var i=Mappy.ControllerFactory.getXitiController();i.tagGeoentityRedirection(t),i.tagBucClick("SPD_GEOENTITY_LINK",t.id),window.open(e)},p._onRendererGeoentityTooltip=function(e){Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_TOOLTIP_GEOENTITY",e.id)},p._onRendererGeoentityClick=function(e,t,i,o){if(!i||"Geoentity"!==this._sessionModel.get("activeTabId")){var r=o?"XTC_DETAIL_MAP":"XTC_DETAIL_LIST";Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController[r],e,this._sessionModel.get("app"))}this._onRendererModelOut(e),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:e.id,geoentityModel:e,partnerId:t}).then(void 0,Mappy.logError)},p._onRendererLocationApplicationClick=function(e){var t=this._appCatConf.get("categories").getCategoryDataByRubricIds(e);Mappy.ControllerFactory.getUniverseController().openApplication(e),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_POPIN_APPLICATION,t.category,new s({id:e}))},p._onRendererLocationCategoryClick=function(e){var t=this._appCatConf.get("categories").getCategoryDataByRubricIds(e);Mappy.ControllerFactory.getUniverseController().openCategory(t.subcategory),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_POPIN_SUBCATEGORY,t.category,t.subcategory)},p._onRendererLocationClick=function(e){var t=this._sessionModel.get("currentLocationsResult");if(!(t&&t.length<2)){var i=e.get("rawAddress");Mappy.ControllerFactory.getSearchHistoryCollection().add(i),Mappy.ControllerFactory.getHeaderFormController().search(i),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SEARCH_LOC)}},p.showSwitchButton=function(){$(".switch-list").addClass("visible")},p.hideSwitchButton=function(){$(".switch-list").removeClass("visible").addClass("icon-list")},p.switchSmallScreenList=function(){var e=$(".ListContainer").toggleClass("active");o.defer(function(){e.css("min-height",$(window).height()-$("header").height()-e.position().top+"px")}),$(".switch-list").toggleClass("icon-list");var t=this._model&&this._model.get("categoryModel")?this._model.get("categoryModel"):null,i=!$(".switch-list").hasClass("icon-list");Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_TOGGLE_LIST,this._model,t),this._sessionModel.set("lastGeoentitiesResultsListMode",i),i||(this._mapView.resize(),o.defer(o.bind(function(){this._mapView.bestView(null,!1)},this)))}},{"../../core/utils/Device.js":94,"../../model/ApplicationModel":109,"../../model/GeoentityModel":117,"../../view/left/list/GeoentityListView/GeoentityListView":194,"../../view/left/list/LocationListView/LocationListView":196,"./../../../lib/bower_components/underscore/underscore.js":29}],68:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("./../../../lib/bower_components/jquery/dist/jquery.js");t.exports=function(){var e=this.constructor.prototype.list=this.constructor.prototype.list||{};return{on:function(t,i){var s;o.isString(t)&&(s=o.map(t.split(","),function(e){return r.trim(e)}),o.forEach(s,function(t){o.isString(t)&&o.isFunction(i)&&(e[t]=i)}))},trigger:function(t){e[t]&&e[t]()}}}},{"./../../../lib/bower_components/jquery/dist/jquery.js":24,"./../../../lib/bower_components/underscore/underscore.js":29}],69:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("../../view/mixins/Survey/SurveyFormView"),s=e("../../model/SurveyModel"),n=t.exports={},a=2592e6,p=2592e7;n.renderSurvey=function(e,t){this._type=t||"form";var i=Mappy.localStore.get("mappySurveySubmit")||0,r=Mappy.localStore.get("mappySurveyClose")||0,n=(new Date).getTime();"fr_FR"!==parameters.locale||parameters.size<=parameters.sizes.medium||i+p>n||r+a>n||(this._surveyModel=new s,this._surveyModel.set("categoryId",e),this._surveyModel.fetch().then(o.bind(function(e){this._createSurvey(e)},this)).then(null,function(){}))},n._createSurvey=function(e){this._formView=new r(e,this._type),this._formView.on("surveyClose",o.bind(this._onSurveyClose,this)),this._formView.on("surveySubmit",o.bind(this._onSurveySubmit,this))},n._onSurveySubmit=function(e){e[e.length-1].value=window.location.href,Mappy.localStore.set("mappySurveySubmit",(new Date).getTime()),this._surveyModel.save(e,{type:"post"}),this.destroySurvey()},n._onSurveyClose=function(){Mappy.localStore.set("mappySurveyClose",(new Date).getTime()),this.destroySurvey()},n.destroySurvey=function(){this._formView&&(this._formView.remove(),this._formView=null)}},{"../../model/SurveyModel":134,"../../view/mixins/Survey/SurveyFormView":236,"./../../../lib/bower_components/underscore/underscore.js":29}],70:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("../../model/VDEApplicationListsModel"),s=e("../../model/VDEAdModel"),n=e("../../view/overlay/VDEAdView/VDEAdView"),a=e("../../core/error/error"),p=t.exports={};p.isClosed=!1,p.searchVDE=function(e,t,i){if("fr_FR"!==parameters.locale||p.isClosed||window.expand_footer)return Promise.resolve();this.VDEApplicationListsModel=new r,this.VDEAdModel=new s(null,{pageId:e,appCatConf:Mappy.ControllerFactory.getAppCatConf()});var n=Promise.resolve();return i||t?this.geoBox=t||this._sessionModel.get("geoBox"):n=this.updateBodyVdeClass(!0).then(o.bind(function(e){return this.geoBox=e,this.updateBodyVdeClass(!1)},this)),n.then(o.bind(function(){return this.VDEApplicationListsModel?this.VDEApplicationListsModel.fetch(this.geoBox):Promise.resolve()},this)).then(o.bind(function(e){return this.VDEAdModel?this.VDEAdModel.fetch(e):Promise.resolve()},this)).then(o.bind(function(){return this.VDEAdModel?this.checkExpandFooter():Promise.resolve()},this)).then(o.bind(function(){return this.VDEAdModel?this.onVDEAdModelSync(i):Promise.resolve()},this)).then(o.bind(function(){return this.VDEAdModel?this.checkExpandFooter():Promise.resolve()},this)).then(void 0,o.bind(function(e){this.destroyVDE(),Mappy.logError(e)},this))},p.updateBodyVdeClass=function(e){return new Promise(o.bind(function(t){e?$("body").addClass("vde"):$("body").removeClass("vde"),o.delay(o.bind(function(){t(this._mapView.getGeoBox())},this),250)},this))},p.checkExpandFooter=function(){if(window.expand_footer)throw new a.FooterExpandError;return Promise.resolve()},p.onVDEAdModelSync=function(e){if(!this.VDEAdModel||!this.VDEAdModel.get("type")||e&&"vde"!==this.VDEAdModel.get("type"))return this.destroyVDE(),Promise.resolve();var t=Promise.resolve(),i=this.VDEAdModel.expectGeoentities();return e||!i?(t=this.renderVDEAdView(e),i&&(t=t.then(o.bind(this.searchAppVDE,this,this.VDEAdModel.get("appId")))),t=t.then(o.bind(this.onSearchVDESuccess,this))):(this.VDEAdModel.get("appId")?t=this.searchAppVDE(this.VDEAdModel.get("appId")):this.VDEAdModel.get("rubricIds")&&(t=this.searchRubricIdsVDE(this.VDEAdModel.get("rubricIds"))),t=t.then(o.bind(this.onSearchVDESuccess,this)).then(void 0,Mappy.logError)),e||(t=t.then(o.bind(function(){Mappy.ControllerFactory.getIndexView().on("resize",this.onWindowResize,this)},this))),t},p.renderVDEAdView=function(e){return this.VDEAdView&&(this.VDEAdView.remove(),this.VDEAdView=null),this.VDEAdView=new n({model:this.VDEAdModel,className:e?"mobile":"layerOnInnerLeft layerOnRight"}),this.VDEAdView.render(),this.VDEAdView.on("close",this.closeVDE,this),this.VDEAdView.on("click",this.clickVDE,this),this.VDEAdView.$el.prependTo(e||"#IndexView"),Mappy.ControllerFactory.getXitiController().tagBucVDE("SPD_PUSH_DISPLAY",this.VDEAdModel.get("type"),this.VDEAdModel.getIds()),Promise.resolve()},p.searchAppVDE=function(e){return Mappy.ControllerFactory.getNavigationController().getActiveStrategy().searchGeoentities({appId:e},!1,{geoBox:this.geoBox,limit:10,bucTag:"vde"===this.VDEAdModel.get("type")?"SPD_PUSH_VDE":"SPD_PUSH_EDITO"})},p.searchRubricIdsVDE=function(e){return Mappy.ControllerFactory.getNavigationController().getActiveStrategy().searchGeoentities({rubricIds:e},!1,{geoBox:this.geoBox,limit:10,bucTag:"subcategory"===this.VDEAdModel.get("type")?"SPD_PUSH_SUBCATEGORY":"SPD_PUSH_EDITO"})},p.onSearchVDESuccess=function(e){if(this.geoentities=[],e){var t=e?e.get("geoentities"):[];this.geoentities=t.models}this.geoentities.length&&parameters.size>parameters.sizes.medium&&(this.renderVDEAdView(),this.refreshVDEDisplay(),this._mapView._map.on("zoomend",this.refreshVDEDisplay,this))},p.onWindowResize=function(){parameters.size<parameters.sizes.normal&&this.destroyVDE()},p.refreshVDEDisplay=function(){this.geoentities&&this.VDEAdView&&(this._mapView.getZoomLevel()>=10?(this.renderGeoentities(this.geoentities),this.VDEAdView.show()):(this._mapView.clearModels(!0),this.VDEAdView.hide()))},p.closeVDE=function(){p.isClosed=!0,this.destroyVDE()},p.clickVDE=function(e){var t=this.VDEAdModel;switch(Mappy.ControllerFactory.getXitiController().tagBucVDE("SPD_PUSH_LINK",t.get("type"),t.getIds()),(new Image).src=t.get("vdeTrackUrl"),t.get("type")){case"vde":e.preventDefault();var i=this._appCatConf.getApplicationById(t.get("appId"));if(this.geoentities&&1===this.geoentities.length){var o=this.geoentities[0];Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_VDE_PUSH_FICHE,o,i),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:o.id,geoentityModel:o}).then(void 0,Mappy.logError)}else Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_VDE_PUSH_POIS,i),Mappy.ControllerFactory.getUniverseController().openTab(t.get("appId"),{bucTag:"SPD_PUSH_VDE"});break;case"subcategory":e.preventDefault(),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_VDE_PUSH_SSCAT,t.get("subcategoryModel")),Mappy.ControllerFactory.getUniverseController().openCategory(t.get("subcategoryModel"),{bucTag:"SPD_PUSH_SUBCATEGORY"});break;case"edito":var r=p.extractDomain(e.currentTarget.getAttribute("href")),s=Mappy.ControllerFactory.getXitiController().tagDomainRedirection(Mappy.XitiController.REDIRECT_DEFAULT,e.currentTarget,"pushEdito",r);s||event.preventDefault()}},p.extractDomain=function(e){var t=e.split("//"),i=t&&t.length>=2?t[1].split("/"):t[0].split("/");return i[0]},p.destroyVDE=function(e){this._mapView.clearModels(!0),this._mapView._map.off("zoomend",this.refreshVDEDisplay,this),Mappy.ControllerFactory.getIndexView().off("resize",null,this),this.VDEApplicationListsModel&&(this.VDEApplicationListsModel.destroy(),this.VDEApplicationListsModel=null),this.VDEAdModel&&(this.VDEAdModel.destroy(),this.VDEAdModel=null),this.VDEAdView&&(this.VDEAdView.remove(),this.VDEAdView=null),this.geoentities=null}},{"../../core/error/error":88,"../../model/VDEAdModel":137,"../../model/VDEApplicationListsModel":138,"../../view/overlay/VDEAdView/VDEAdView":245,"./../../../lib/bower_components/underscore/underscore.js":29}],71:[function(e,t,i){(function(i){"use strict";function o(e,t){this._indexView=e,this._sessionModel=t,this._lastLocation=null,this._lastGeoBox=null,this._lastZoomLevel=null,this._maxSearchIterations=0,this._currentSearchIteration=0,this._filtersAndGeoentitiesModel=new s,this._addressAndGeoentityCollection=new r(null,{appCatConf:Mappy.ControllerFactory.getAppCatConf()})}var r=(e("./../../../lib/bower_components/underscore/underscore.js"),e("../../collection/AddressAndGeoentityCollection")),s=e("../../model/FiltersAndGeoentitiesModel"),n=e("../../collection/LocationCollection"),a=i.parameters;t.exports=o,o.MAX_GEOENTITIES=100,o.MAX_TABLET_GEOENTITIES=50,o.MAX_SMARTPHONE_GEOENTITIES=30,o.prototype.clearCollections=function(){this._filtersAndGeoentitiesModel.reset(),this._addressAndGeoentityCollection.reset()},o.prototype.searchByKeyword=function(e,t,i){this._snapshot(),this._sessionModel.set("currentLocationsResult",[]);var o=new r(null,{appCatConf:Mappy.ControllerFactory.getAppCatConf()});return o.keyword=e,o.geoBox=this._sessionModel.get("geoBox"),o.fetch({cache:!0,f:t?"poi_xor_address":"places",allowExtendBbox:!0,itiForm:i})},o.prototype.searchLocationByKeyword=function(e){this._snapshot(),this._sessionModel.set("currentLocationsResult",[]);var t=(this._sessionModel.get("location"),new n);return t.keyword=e,t.countryNumericCode=window.parameters.locales[a.locale].services.loc["opt.favoriteCountry"],t.language=window.parameters.locales[a.locale].services.loc["opt.language"],t.fetch({cache:!0})},o.prototype.getLimit=function(e){var t;return t=a.size<a.sizes.medium?o.MAX_SMARTPHONE_GEOENTITIES:a.size<a.sizes.normal?o.MAX_TABLET_GEOENTITIES:o.MAX_GEOENTITIES,!e||e>t?t:e},o.prototype.searchGeoentities=function(e,t,i){return this._filtersAndGeoentitiesModel.rubricIds="hotel"===e.rubricIds?null:e.rubricIds,this._filtersAndGeoentitiesModel.appId="hotel"===e.rubricIds?e.rubricIds:e.appId,this._snapshot(),i=i||{},this._filtersAndGeoentitiesModel.geoBox=i.geoBox||this._lastGeoBox,i=i||{},i.extend_bbox=t?1:0,i.limit=this.getLimit(i.limit),$.extend(i,this._sessionModel.get("currentFilters")),this._filtersAndGeoentitiesModel.fetch(i)},o.prototype.isRefreshNeeded=function(){if(null===this._lastGeoBox&&null===this._lastLocation&&null===this._lastZoomLevel)return!0;var e=this._sessionModel.get("location");if(e.get("lat")!==this._lastLocation.get("lat")||e.get("lat")!==this._lastLocation.get("lat"))return!0;var t=this._sessionModel.get("geoBox");return t.equals(this._lastGeoBox)?this._lastZoomLevel!==this._sessionModel.get("zoomLevel")?!0:!1:!0},o.prototype.getRemainingSearchIterations=function(){return this._maxSearchIterations},o.prototype.setRemainingSearchIterations=function(e){this._currentSearchIteration=0,this._maxSearchIterations=e},o.prototype.getCurrentSearchIteration=function(){return this._currentSearchIteration},o.prototype.searchByGeoBox=function(e){return this._snapshot(),this.setRemainingSearchIterations(0),this._addressAndGeoentityCollection.geoBox=this._sessionModel.get("geoBox"),this._addressAndGeoentityCollection.keyword=this._sessionModel.get("searchKeyword"),this._addressAndGeoentityCollection.fetch({cache:!0,allowExtendBbox:e,limit:this.getLimit()})},o.prototype._snapshot=function(){this._lastGeoBox=this._sessionModel.get("geoBox"),this._lastLocation=this._sessionModel.get("location"),this._lastZoomLevel=this._sessionModel.get("zoomLevel")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../collection/AddressAndGeoentityCollection":37,"../../collection/LocationCollection":43,"../../model/FiltersAndGeoentitiesModel":115,"./../../../lib/bower_components/underscore/underscore.js":29}],72:[function(e,t,i){"use strict";function o(e,t,i){n.apply(this,arguments),this._searchFormView=this._indexView.getSearchFormView(),this._categoryFullListView=null}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=(e("../../core/utils/Device"),e("./AbstractTabController")),a=e("../mixins/geoPositionsRenderer"),p=e("../mixins/surveyRenderer"),l=e("../../view/left/tab/CategoryTabView/CategoryTabView"),c=e("../../view/left/tab/CategoryTabView/CategoryTabFullListView"),u=(e("../../model/FiltersAndGeoentitiesModel.js"),e("../../model/LocationModel"));t.exports=o,s.inherits(o,n),r.extend(o.prototype,a),r.extend(o.prototype,p),o.prototype.TAG_PAGE_KEY_MAP="PAGE_RESPONSE_CATEGORY_MAP",o.prototype.TAG_PAGE_KEY_LIST="PAGE_RESPONSE_CATEGORY_LIST",o.prototype.build=function(e){if(this._indexView.getLeftView().getAdvertisingBLView().desactivate(),e&&e.from&&e.to&&this._sessionModel.set("currentFilters",r.clone(e)),parameters.size<=parameters.sizes.medium?(this._fullListMode=!1,this._switchList=this.switchSmallScreenList):(this._fullListMode=this._sessionModel.get("fullListMode"),this._categoryFullListView=new c({rubricLabel:this._model?this._model.get("label"):this._rubricLabel}),this._categoryFullListView.on("modelClick",this._onRendererModelClick,this).on("reservationClick",this._onRendererGeoentityReservation,this).on("footerClick",this._onFooterClick,this),this._switchList=this.switchFullList,this._suggestView=Mappy.ControllerFactory.getHeaderFormController().getSuggestView(),this._onSuggestionSelection=r.bind(function(e){this._changeLocationByKeywordAndRefresh(e)},this)),this._searchFormView.on("switchListClick",this._switchList,this),this.hideSwitchButton(),this._mapView.clearModels(),this._showThrobber(),Mappy.ControllerFactory.getNavigationController().onChangeTab(),this._mapView.getMap().on("zoomstart",r.bind(function(){this.pendingRequest=!1},this)),this.bindRenderer(),Mappy.ControllerFactory.getHistoryController().pushState(!0),!this._categoryHeader){var t=this._categoryHeader=this._getHeaderView({show:this._fullListMode||e.listMode?"list":"map"});t.on("switchListClick",this._switchList,this),this._tabView.$el.prepend(t.render().$el),this._categoryHeader.on("filterValueChange",r.bind(function(t,i,o,r){return this._showThrobber(),this.sendFilterTagClick(i,o),"ville"===o?void this._changeLocationByKeywordAndRefresh(r.getTextFieldView().getValue()):(this.sendTagPage(),"distance"===o?void this._mapView.setZoomLevel(r.getZoomLevelFromValue(),!0):(this._sessionModel.set("currentFilters",t),void this.refresh(!0,e)))},this)),this._categoryHeader.on("filters:mosaic:onAppClick",this._onApplicationClick,this),this._categoryHeader.on("toggle",this._onToggleFilter,this)}var i;return this.sendTagPage(),e&&e.geoentities?(this._onSearchGeoentitiesSuccess(e.geoentities),this._categoryHeader.setFiltersValues(this._sessionModel.get("currentFilters")),e.listMode&&this._switchList(),i=Promise.resolve(),i.then(r.bind(this._hideThrobber,this)),this._mapView.bestViewById("poi")):(this._categoryHeader.setFiltersValues({}),this._sessionModel.unset("currentFilters"),i=this.refresh(!0,e)),i},o.prototype.sendFilterTagClick=function(e,t){var i;i="Calendrier"===e?Mappy.XitiController.XTC_CATEGORY_CALENDAR.replace("{eventLocation}",e):Mappy.XitiController.XTC_CATEGORY_FILTER.replace("{filter}",t),this._model&&Mappy.ControllerFactory.getXitiController().tagAction(i,this._model.get("categoryModel"),this._model)},o.prototype._onAddressFocus=function(e,t){var i=this._categoryHeader.getFilterByName("ville"),o=i.view.getTextFieldView();this._suggestView.bindTo(o,t),this._suggestView.on("select",this._onSuggestionSelection)},o.prototype._onGeolocationClick=function(){u.fromNavigatorGeolocation({"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]}).then(r.bind(function(e){this._sessionModel.set("browserGeoPosition",{lat:e.get("lat"),lng:e.get("lng")});var t=this._categoryHeader.getFilterByName("ville").view;t.getTextFieldView().setValue(e.get("rawAddress")),t.$geolocation.addClass("active"),this._changeLocationAndRefresh(e)},this)).then(void 0,r.bind(this._handleError,this))},o.prototype.switchFullList=function(){this._fullListMode=!this._fullListMode,this._sessionModel.set("fullListMode",this._fullListMode);var e=this._sessionModel.get("lastGeoentitiesResults")&&this._sessionModel.get("lastGeoentitiesResults").getGeoentities();this._displayGeoentities(e);var t=this._sessionModel.get("location");if(t){var i=this._sessionModel.get("zoomLevel");this._setTownFilterValue(t,i),this._categoryHeader.getFilterByName("distance").view.setValue(i)}this.sendTagClick(),this.sendTagPage()},o.prototype.sendTagPage=function(){var e=this._fullListMode?this.TAG_PAGE_KEY_LIST:this.TAG_PAGE_KEY_MAP;Mappy.ControllerFactory.getXitiController().tagPage(Mappy.XitiController[e])},o.prototype.sendTagClick=function(){var e=this._model&&this._model.get("categoryModel")?this._model.get("categoryModel"):null,t=this._fullListMode?"XTC_CATEGORY_TOGGLE_LIST":"XTC_CATEGORY_TOGGLE_MAP";Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController[t],this._model,e)},o.prototype._setTownFilterValue=function(e,t){var i=this.getTypeGeoDivisionFromZoomLevel(t),o=this.getLabelFromTypeGeoDivision(i,e);this._categoryHeader.getFilterByName("ville").view.setValue(o)},o.prototype._onFooterClick=function(){Mappy.ControllerFactory.getFooterController().toggle()},o.prototype._showThrobber=function(){this._fullListMode?this._categoryFullListView.showThrobber():this._tabView.showThrobber()},o.prototype._hideThrobber=function(){this._fullListMode?this._categoryFullListView.hideThrobber():this._tabView.hideThrobber()},o.prototype._inputError=function(){this._tabView.locationFilterError()},o.prototype._getHeaderView=r.noop,o.prototype.refresh=function(e,t){t=t||{};var i={rubricIds:this._rubricIds,appId:this._appId};return new Promise(r.bind(function(t){e&&this._mapView.hasShapeLayers()&&this._mapView.bestView(null,!1),this.pendingRequest=!0,t()},this)).then(r.bind(function(){return Mappy.ControllerFactory.getNavigationController().getActiveStrategy().searchGeoentities(i,e,t)},this)).then(r.bind(function(t){return this.pendingRequest&&(this.pendingRequest=!1,this._onSearchGeoentitiesSuccess(t),e?this._mapView.bestView(t.get("viewport"),void 0,!0):this._setTownFilterValue(this._sessionModel.get("location"),this._sessionModel.get("zoomLevel"))),!1},this)).then(r.bind(this._hideThrobber,this)).then(r.bind(this._sessionModel.resetApplicationParams,this._sessionModel,"hotel")).then(void 0,Mappy.logError)},o.prototype._onSearchGeoentitiesSuccess=function(e){var t,i=e.getGeoentities();if(this._createFilters(e.get("filters")),t=this._categoryHeader.getFilterByName("ville"),t.view.on("addressFocus",this._onAddressFocus,this),t.view.on("geolocationClick",this._onGeolocationClick,this),this._sessionModel.set("lastGeoentitiesResults",e.clone()),this._displayGeoentities(i),e.rubricIds){this.destroySurvey();var o=this._appCatConf.get("categories").getCategoryDataByRubricIds(e.rubricIds.join(","));

(o.subcategory||o.category)&&this.renderSurvey(o.subcategory?o.subcategory.get("id"):o.category.get("id"))}Mappy.ControllerFactory.getAdhesiveController().tagPage(Mappy.AdhesiveController.PAGE_RESPONSE_CATEGORY_MAP)},o.prototype._displayGeoentities=function(e){e.length?(this._fullListMode?(this._categoryFullListView.renderGeoentities(e),this._categoryFullListView.show(),this.renderGeoentities(e),this._tabView.showAllFilters(),this._tabView.hideGeoentities(),this._tabView.removeGeoentities()):(this.renderGeoentities(e,this._tabView),this._tabView.hideAllFilters(),this._tabView.showGeoentities(),this._categoryFullListView&&(this._categoryFullListView.hideRightView(),this._categoryFullListView.hideGeoentities(),this._categoryFullListView.removeGeoentities())),this.showSwitchButton()):(this._fullListMode?(this._categoryFullListView.removeGeoentities(),this._categoryFullListView.displayNoResults(),this._tabView.hideNoResults(),this._tabView.showAllFilters(),this._showRightView()):(this._mapView.clearModels(),this._tabView.removeGeoentities(),this._tabView.displayNoResults(),this._tabView.hideAllFilters(),this._hideRightView(),this._categoryFullListView&&this._categoryFullListView.hideNoResults()),this.hideSwitchButton())},o.prototype._showRightView=function(){$("#RightView").show(),$("#RightView").children().show()},o.prototype._hideRightView=function(){$("#RightView").hide(),$("#RightView").children().hide()},o.prototype.unbind=function(){this._searchFormView.off("switchListClick",this._switchList,this),this._mapView.getMap().off("zoomstart",null,this),this._categoryHeader.off("filters:mosaic:onAppClick",this._onApplicationClick,this),this._categoryHeader.off("toggle",this._onToggleFilter,this),this._categoryFullListView&&this._categoryFullListView.off("modelClick",this._onRendererModelClick,this).off("reservationClick",this._onRendererGeoentityReservation,this).off("footerClick",this._onFooterClick,this),this.unbindRenderer()},o.prototype.destroy=function(){this.unbind(),this.hideSwitchButton(),this._mapView.clearModels(),this.destroySurvey(),this._suggestView&&this._suggestView.off("select",this._onSuggestionSelection),this._categoryHeader&&this._categoryHeader.remove(),this._categoryFullListView&&this._categoryFullListView.remove(),n.prototype.destroy.call(this)},o.prototype._onApplicationClick=function(e){var t=this._appCatConf.getApplicationById(e.appId);Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_FILTER.replace("{filter}","Marque"),t,t.get("categoryModel")),Mappy.ControllerFactory.getUniverseController().openApplication(t)},o.prototype._changeLocationByKeywordAndRefresh=function(e,t){this._sessionModel.set("searchKeyword",""+e),Mappy.ControllerFactory.getNavigationController().getActiveStrategy().searchLocationByKeyword(e).then(r.bind(function(e){return e.length<1?this._errorLocation():void this._changeLocationAndRefresh(e.at(0),t)},this))},o.prototype._errorLocation=function(){this._hideThrobber(),this._categoryFullListView.displayNoResults(),this._inputError()},o.prototype._changeLocationAndRefresh=function(e,t){this._mapView.bestViewByLocation(e,{animate:!1}),this._sessionModel.set("location",e),this._sessionModel.set("geoBox",this._mapView.getGeoBox());var i=this._mapView.getZoomLevel();this._setTownFilterValue(e,i),this._sessionModel.set("zoomLevel",i),this._categoryHeader.getFilterByName("distance").view.setValue(i),this.sendTagPage(),this.refresh().then(r.bind(function(){Mappy.ControllerFactory.getHistoryController().pushState(!0),Mappy.ControllerFactory.getHeaderFormController().getSuggestView().hide()},this))},o.prototype._createTabView=function(){return new l},o.prototype._createFilters=function(e){if(this._categoryHeader&&e){var t=this._sessionModel.get("location");this._categoryHeader.buildFilters(e,this.getTextFieldLabels(this._sessionModel.get("zoomLevel"),t))}},o.prototype.getTypeGeoDivisionFromZoomLevel=function(e){e=e||0;var t=[{max:19,min:11,key:"city"},{max:10,min:7,key:"region"},{max:6,min:0,key:"country"}];return r.filter(t,function(t){return e>=t.min?t.key:void 0})[0].key},o.prototype.getLabelFromTypeGeoDivision=function(e,t){return"addressStr"===e&&t.getZip()?t.getZip()+" "+t.get("city"):t.get(e)},o.prototype.getTextFieldLabels=function(e,t){var i=this.getTypeGeoDivisionFromZoomLevel(e);return{zoomLevel:e,city:this.getLabelFromTypeGeoDivision(i,t)}},o.prototype._onToggleFilter=function(e,t){e&&"Marques"===t&&Mappy.ControllerFactory.getXitiController().tagCategoryFilterDisplay(this._model)}},{"../../core/utils/Device":94,"../../model/FiltersAndGeoentitiesModel.js":115,"../../model/LocationModel":121,"../../view/left/tab/CategoryTabView/CategoryTabFullListView":199,"../../view/left/tab/CategoryTabView/CategoryTabView":200,"../mixins/geoPositionsRenderer":67,"../mixins/surveyRenderer":69,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],73:[function(e,t,i){"use strict";function o(){s.apply(this,arguments),this._tabView=this._createTabView(),this._leftView=this._indexView.getLeftView(),this._mapView=this._indexView.getMapView(),this._outdoorView=this._indexView.getOutdoorView(),this._geoentityListView=null,this._locationListView=null}var r=e("util"),s=e("../Controller"),n=e("../../core/error/error");t.exports=o,r.inherits(o,s),o.prototype.getTabView=function(){return this._tabView},o.prototype.build=function(e,t){return e&&Mappy.ControllerFactory.getXitiController().tagPage(e),t?this._indexView.getLeftView().getAdvertisingBLView().refresh(Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl(t),!0):this._indexView.getLeftView().getAdvertisingBLView().desactivate(),Mappy.ControllerFactory.getNavigationController().onChangeTab(),Mappy.ControllerFactory.getHistoryController().pushState(!0),Promise.resolve()},o.prototype.destroy=function(){Mappy.ControllerFactory.getNavigationController().onChangeTab()},o.prototype.refresh=function(){return Promise.resolve()},o.prototype.unbind=function(){},o.prototype._createTabView=function(){},o.prototype._handleError=function(e){return e instanceof n.NavigatorGeolocationError?void(parameters.size<parameters.sizes.normal&&this._indexView.alert(e.i18nId).then(void 0,Mappy.logError)):void Mappy.logError(e)}},{"../../core/error/error":88,"../Controller":55,util:8}],74:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._categoryContainerView=this._indexView.getCategoryContainerView(),this._tabView.on("backToSearch",this._onBackToSearchClick,this),this._tabView.on("itineraryTo",this._onItineraryToClick,this),this._mapView.on("fullscreen",this._toggleFullscreen,this),this._mapView.on("mapClick",this._onMapClick,this)}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./AbstractTabController"),a=e("../mixins/vde"),p=e("../../model/LocationModel"),l=e("../../view/content/AddressView/AddressView"),c=e("../../view/left/tab/AddressTabView/AddressTabView");t.exports=o,s.inherits(o,n),r.extend(o.prototype,a),o.prototype.build=function(e){Mappy.ControllerFactory.getNavigationController().closeViews(),this._indexView.setRoadbookMode(!0),this._indexView.resize(),this._indexView.$el.addClass("address");var t;return Mappy.ControllerFactory.getHeaderFormController().hideForms(),e&&e.results?this._setSearchResults(e&&e.results):t=Mappy.ControllerFactory.getNavigationController().getActiveStrategy().searchByKeyword(this._sessionModel.get("currentAddress")).then(r.bind(this._setSearchResults,this)),this._categoryContainerView.refreshCarouselView(),this._categoryContainerView.refreshTitle(),t||Promise.resolve()},o.prototype._setSearchResults=function(e){e.pois.length>0&&this._setGeoentities(e.pois),e.addresses.length>0&&this._setLocation(e.addresses[0]),this.setPreviousTab()},o.prototype.setPreviousTab=function(){Mappy.ControllerFactory.getUniverseController().setPreviousTab({id:Mappy.TabControllerFactory.TAB_ADDRESS,options:{locationModel:this._locationModel,geoentities:this._geoentities}})},o.prototype._toggleFullscreen=function(e){e.active||this._mapView.bestViewByLocation(this._locationModel)},o.prototype._setLocation=function(e){this._locationModel=e,this._sessionModel.set("location",e);var t;this._sessionModel.get("browserGeoPosition")&&(t=e.getDistance(this._sessionModel.get("browserGeoPosition"))),this._mapView.updateModels([e]),this._tabView.setLocation(this._locationModel,t),this._mapView.resize(),this._mapView.bestViewByLocation(e),this._sessionModel.set("geoBox",this._mapView.getGeoBox()),Mappy.ControllerFactory.getHistoryController().pushState(!0,"AddressTabController"),Mappy.ControllerFactory.getXitiController().tagPage(Mappy.XitiController.PAGE_ADDRESS),this._locationModel.get("type")===p.TYPE_CITY&&this.searchVDE("address",null,"#ContentView")},o.prototype._setGeoentities=function(e){this._geoentities=e,this._addressView=new l(e),this._addressView.on("modelClick",this._onGeoentityClick,this),this._addressView.on("reservationClick",this._onReservationClick,this)},o.prototype._onMapClick=function(){this._mapView.toggleFullscreen()},o.prototype._onGeoentityClick=function(e,t){"fr_FR"===parameters.locale&&(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_DETAIL_FICHE_ADRESSE,e),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:e.get("id"),partnerId:t,geoentityModel:e}))},o.prototype._onReservationClick=function(e){"fr_FR"===parameters.locale&&window.open(e)},o.prototype._onItineraryToClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_GOTO_FICHE_ADDRESS,this._locationModel),Mappy.ControllerFactory.getUniverseController().setCurrentUniverse("itinerary"),Mappy.ControllerFactory.getHeaderFormController().setItineraryTo(this._locationModel)},o.prototype._onBackToSearchClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_BACK),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOME,{geoentities:this._sessionModel.get("lastGeoentitiesResults")&&this._sessionModel.get("lastGeoentitiesResults").getGeoentities(),locations:this._sessionModel.get("lastLocationsResults"),listMode:this._sessionModel.get("lastGeoentitiesResultsListMode")})},o.prototype.destroy=function(){this.destroyVDE(),this._indexView.$el.removeClass("address"),this._indexView.setRoadbookMode(!1),this._indexView.getMapView().clearModels(),this._sessionModel.set("currentAddress",null),this._tabView.off("backToSearch",this._onBackToSearchClick,this),this._tabView.off("itineraryTo",this._onItineraryToClick,this),this._mapView.off("fullscreen",this._toggleFullscreen,this),this._mapView.off("mapClick",this._onMapClick,this),this._addressView&&(this._addressView.off("modelClick",this._onGeoentityClick,this),this._addressView.destroy()),this._indexView.$el.removeClass("address"),this._indexView.resize(),n.prototype.destroy.call(this)},o.prototype._createTabView=function(){return new c}},{"../../model/LocationModel":121,"../../view/content/AddressView/AddressView":169,"../../view/left/tab/AddressTabView/AddressTabView":198,"../mixins/vde":70,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],75:[function(e,t,i){"use strict";function o(e,t,i,o){this._appId=o,n.call(this,e,t),this._model=i.getApplicationById(o)}var r=e("util"),s=e("./../../../lib/bower_components/underscore/underscore.js"),n=e("./AbstractGeoentitiesTabController"),a=e("../mixins/geoPositionsRenderer"),p=e("../../view/mixins/CategoryHeader/ApplicationHeaderView");t.exports=o,r.inherits(o,n),s.extend(o.prototype,a),o.prototype.build=function(e){this._sessionModel.set("app",this._model),this._sessionModel.set("fullListMode",!1);var t=n.prototype.build.call(this,e);return Mappy.ControllerFactory.getHeaderFormController().showSearchFormView(!1,this._model.get("label"),!0),Mappy.ControllerFactory.getUniverseController().setPreviousTab({id:Mappy.TabControllerFactory.TAB_APPLICATION,search:this._appId}),t},o.prototype._getHeaderView=function(){return new p({categoryOrSubcategory:this._model})}},{"../../view/mixins/CategoryHeader/ApplicationHeaderView":222,"../mixins/geoPositionsRenderer":67,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractGeoentitiesTabController":72,util:8}],76:[function(e,t,i){"use strict";function o(e,t,i,o){n.apply(this,arguments),this._categoryData=this._appCatConf.get("categories").getCategoryDataByRubricIds(o),this._model=this._categoryData.subcategory||this._categoryData.category,this._rubricIds=this._model.getRubricIds(),this._label=this._model.get("label"),parameters.app&&parameters.app.geoentitiesLabel&&(this._label=parameters.app.geoentitiesLabel,delete parameters.app.geoentitiesLabel)}var r=e("util"),s=e("./../../../lib/bower_components/underscore/underscore.js"),n=e("./AbstractGeoentitiesTabController"),a=e("../mixins/geoPositionsRenderer"),p=e("../../view/mixins/CategoryHeader/CategoryHeaderView");t.exports=o,r.inherits(o,n),s.extend(o.prototype,a),o.prototype.build=function(e){this._sessionModel.set("app",null);var t=n.prototype.build.call(this,e);return Mappy.ControllerFactory.getHeaderFormController().showSearchFormView(!1,this._model.get("label"),!0),Mappy.ControllerFactory.getUniverseController().setPreviousTab({id:this._categoryData.subcategory?Mappy.TabControllerFactory.TAB_SUBCATEGORY:Mappy.TabControllerFactory.TAB_CATEGORY,search:this._model.get("id"),rubricIds:this._rubricIds}),t},o.prototype._getHeaderView=function(e){return Mappy.deepGet(parameters,"defaults.fullListMode",!1)&&(e.label=this._label),this._categoryHeaderView=new p(s.extend({categoryOrSubcategory:this._model},e)),this._categoryHeaderView}},{"../../view/mixins/CategoryHeader/CategoryHeaderView":223,"../mixins/geoPositionsRenderer":67,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractGeoentitiesTabController":72,util:8}],77:[function(e,t,i){"use strict";function o(e,t){for(var i=0;i<e.length;i++)if(t.id===e[i].id)return i;return-1}function r(e){return new Promise(n.bind(function(t){function i(){o++,o===e.length&&t()}var o=0;n.each(e,function(e){e.then(i,function(e){Mappy.logError(e),i()})})}))}function s(){p.apply(this,arguments),this._tabView.on("itineraryTo",this._onItineraryToClick,this),this._tabView.on("showAddress",this._onShowAddress,this),this._tabView.on("searchByRubric",this._onSearchByRubric,this),this._tabView.on("back",this._onBackClick,this),this._tabView.on("next",this._onNextClick,this),this._tabView.on("backToResults",this._onBackToResultsClick,this),this._tabView.on("backToSearch",this._onBackToSearchClick,this),this._tabView.on("backToGeoentity",this._onBackToGeoentity,this),this._tabView.on("indoorClick",this._onIndoorClick,this),this._tabView.on("emailClick",this._onEmailClick,this),this._tabView.on("websiteClick",this._onWebsiteClick,this),this._tabView.on("reservationClick",this._onReservationClick,this),this._tabView.on("telToShowClick",this._onTelToShowClick,this),this._tabView.on("telClick",this._onTelClick,this),this._mapView.clearModels(),this._mapView.on("modelClick",this._onMapGeoentityClick,this),this._mapView.on("modelMouseover",this._mapView.highlightModel,this._mapView),this._mapView.on("modelMouseout",this._mapView.unhighlightModel,this._mapView)}var n=e("./../../../lib/bower_components/underscore/underscore.js"),a=e("util"),p=e("./AbstractTabController"),l=e("../mixins/geoPositionsRenderer"),c=e("../mixins/surveyRenderer"),u=e("../../model/ContentModel"),y=e("../../collection/GeoentityReviewCollection"),h=e("../../view/content/geoentity/GeoentityReviewView/GeoentityReviewView"),d=e("../../view/content/geoentity/PartnerView/GeoentityPartnerView"),g=e("../../model/GeoentityModel"),m=e("../../view/content/geoentity/GeoentityView/GeoentityView"),v=e("../../view/content/geoentity/GeoentityPartnerTabView/GeoentityPartnerTabView"),f=e("../../view/content/geoentity/GeoentitySocialView/GeoentitySocialView"),w=e("../../model/FiltersAndGeoentitiesModel"),_=e("../../collection/AddressAndGeoentityCollection"),T=e("../../model/SubCategoryModel"),b=e("../../view/content/geoentity/GeoentityOutdoorView/GeoentityOutdoorView"),x=e("../../view/left/tab/GeoentityTabView/GeoentityTabView"),k=e("../../core/utils/Device.js"),C={HotelContentWidgetController:e("../../contentwidgets/hotel/HotelContentWidgetController"),ContentWidgetController:e("../../contentwidgets/ContentWidgetController")};t.exports=s,a.inherits(s,p),n.extend(s.prototype,l),n.extend(s.prototype,c),s.prototype.build=function(e){e=e||{},this._unloadPreviousGeoentity(),this.bindRenderer();var t;return Promise.resolve().then(n.bind(function(){return this._loadGeoentity(e.geoentityModel||e.geoentityId||this._sessionModel.get("fullGeoentityId"))},this)).then(n.bind(function(i){return t=i,Mappy.ControllerFactory.getHeaderFormController().setItineraryTo(t),this._displayGeoentity(t,e.partnerId)},this)).then(n.bind(function(){this._mapView.resize(),this._mapView.setGeoPosition(t.get("location"),15)},this)).then(n.bind(function(){var e=this._sessionModel.get("lastGeoentitiesResults")&&this._sessionModel.get("lastGeoentitiesResults").getGeoentities(),i=o(e,t);e.length>0?this._tabView.showBackToResultsButton():this._tabView.showBackToSearchButton(),i>=0&&e[i+1]&&this._tabView.showNextButton(),i>=0&&e[i-1]&&this._tabView.showBackButton();var r={};if(k.has3dSupport()&&t.get("closestPanoramicId")){var s=parameters.services.pano+"panoramics/"+t.get("closestPanoramicId")+"/tiles/geodetic/"+t.get("location").get("lat")+","+t.get("location").get("lng")+"?redirect=true&fallbackradius=100";r.outdoor={url:s,model:t}}this._mapView.removeTileLayer(),this._mapView.setPOITools(r),this._mapView.on("view-outdoor",this._onMapOutdoorClick,this),this._sessionModel.isViewModeImmersive()&&(this._outdoorView.once("render",function(){this._outdoorView.addModel(t)},this),this._leftView.$el.height(this._leftView.$("#GeoentityTabView .name").outerHeight()+this._leftView.$("#GeoentityTabView .address").outerHeight())),Mappy.ControllerFactory.getXitiController().tagPJ(t),Mappy.ControllerFactory.getAdhesiveController().tagPage(Mappy.AdhesiveController.PAGE_RESPONSE_SEARCH)},this)).then(n.bind(p.prototype.build,this,Mappy.XitiController.PAGE_GEOENTITY)).then(n.bind(function(){var e=Mappy.ControllerFactory.getUniverseController().getPreviousTab()||{id:Mappy.TabControllerFactory.TAB_GEOENTITY,search:t.id};return Mappy.ControllerFactory.getUniverseController().setPreviousTab(e),this.searchGeoentities(t)},this))},s.prototype.unbind=function(){this._mapView.off("modelClick"),this._mapView.off("reservationClick"),this._mapView.off("view-outdoor"),this.unbindRenderer()},s.prototype.destroy=function(){this._unloadPreviousGeoentity(),this._sessionModel.set("fullGeoentityId",""),this._mapView.setFullTools(),this._mapView.enableScrollWheelZoom(),this._mapView.enableMapEvents(),this._mapView.enableInteractions(),this._indexView.$el.removeClass("geoentity"),this._indexView.setRoadbookMode(!1),this._indexView.resize(),this._mapView.clearModels(),this.destroySurvey(),this._contentWidget&&(this._contentWidget.destroy(),this._contentWidget=null),this.unbind(),p.prototype.destroy.call(this)},s.prototype._unloadPreviousGeoentity=function(){$(window).scrollTop(0),this._initialGeoentityModel=null,this._sessionModel.set("fullGeoentity",null),this._sessionModel.set("partner",null),this._sessionModel.set("partnerId",""),this._sessionModel.set("partnerTab",null),this._geoentityPartnerTabView&&this._geoentityPartnerTabView.remove(),this._geoentitySocialView&&this._geoentitySocialView.remove(),this._geoentityPartnerView&&this._geoentityPartnerView.remove(),this._geoentityView&&(this._geoentityView.destroy(),this._geoentityView.remove())},s.prototype._showGeoentityView=function(e,t,i,o){this._sessionModel.set("partner",t),this._sessionModel.set("partnerId",o),this._geoentityPartnerView&&(this._geoentityPartnerView.remove(),this._geoentityPartnerView=null),t instanceof u?this._showPartnerContent(e,t):t instanceof y&&this._showReviewsContent(e,t),this.hideGeoEntityPartnerViewThrobber(),i||Mappy.ControllerFactory.getXitiController().tagPage(Mappy.XitiController.PAGE_DETAIL_GEOENTITY),this._indexView.resize()},s.prototype._showPartnerContent=function(e,t){var i=this._appCatConf.getApplicationById(t.id);this._geoentityPartnerView=this._getPartnerView(e,t,i),this._geoentityPartnerView.off("linkClick").on("linkClick",n.bind(this._onViewLinkClick,this)),this._geoentityPartnerView.on("indoorFullscreenClick",function(t){Mappy.ControllerFactory.getNavigationController().switchToIndoorView(e,t)},this),this._geoentityPartnerView.on("tabChanged",function(t){Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_DETAIL_GEOENTITY_CONTENT_RUBRIC",e.id,t)},this),this._geoentityPartnerView.$el.appendTo($("#GeoentityPartnerViewContainer").empty()),this._geoentityPartnerView.loadKRPano().then(n.bind(function(){this._geoentityPartnerView.render(),this._geoentityPartnerView.setCurrentTab(e.get("rubricId")),t.get("morePoisLabel")?this._geoentityView.showApplicationLink(t):this._geoentityView.hideApplicationLink(),this._loadContentWidgets(i.getUrlIconBannerForScreen())},this))},s.prototype._showReviewsContent=function(e,t){this._geoentityView.hideApplicationLink(),this._geoentityPartnerView=this._getReviewView(e,t),this._geoentityPartnerView.off("linkClick").on("linkClick",n.bind(this._onViewLinkClick,this)),this._geoentityPartnerView.render().$el.appendTo($("#GeoentityPartnerViewContainer").empty())},s.prototype._getReviewView=function(e,t){var i=new h({collection:t,pjBlocId:e.get("pjBlocId"),banner:parameters.services.poiassets+"assets/1/apps/pj_reviews/images/content_icon-1.png"});return i.on("link-selected",function(t,i){var o="list"===t?Mappy.XitiController.REDIRECT_RATING:Mappy.XitiController.REDIRECT_RATING_NEW;Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_AVISPJ_GOTO",e.id);var r=Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(e,o,i.currentTarget);r||i.preventDefault()},this),i},s.prototype._getPartnerView=function(e,t,i){var o=new d({errorImage:parameters.services.bucket+"images/error.png",partner:t,appURL:parameters.services.geoentity+"assets/1.0/apps/"+t.get("id")+"/",banner:i.getUrlIconBannerForScreen(),geoentity:e});return o.off("linkClick").on("linkClick",n.bind(this._onViewLinkClick,this)),o},s.prototype.setPartner=function(e,t,i){if(this._geoentityPartnerTabView.activateTabById(t),this._sessionModel.set("partnerTab",{geoentityId:e.id,partnerId:t}),this.showGeoEntityPartnerViewThrobber(),"reviews"===t)return e.get("reviewCollection").fetch().then(n.bind(this._showGeoentityView,this,e,e.get("reviewCollection"),i,t));if("outdoor"===t)return this._showOutdoorView();var o=n.findWhere(e.get("contents"),{id:t});return o.get("blocks").fetch().then(n.bind(this._showGeoentityView,this,e,o,i,t))},s.prototype._loadGeoentity=function(e){var t=e instanceof g?e:new g({id:e},{appCatConf:this._appCatConf});return t.fetch().then(n.bind(function(e){this._sessionModel.set("fullGeoentity",e),this._sessionModel.set("fullGeoentityId",e.id);var t=e.get("location"),i=this._sessionModel.get("location");return t.set("regionCode",i.get("regionCode")),t.set("cityINSEECode",i.get("cityINSEECode")),t.set("countryNumericCode",i.get("countryNumericCode")),this._sessionModel.set("location",t),e},this))},s.prototype._displayGeoentity=function(e,t){Mappy.ControllerFactory.getHeaderFormController().hideForms();var i=Mappy.ControllerFactory.getUniverseController().getPreviousTab(),o=this._getIsolatedTab(e,i,t),r=this._getActiveTab(e,o,t),s=null===Mappy.ControllerFactory.getUniverseController().getPreviousTab(),n=this._sessionModel.get("browserGeoPosition")?e.get("location").getDistance(this._sessionModel.get("browserGeoPosition")):null;if(this._tabView.setGeoentity(e,s,n),this._geoentityView=new m({fullGeoentity:e,geoentityOthersTitleType:this._sessionModel.get("geoentityOthersTitleType")}),this._geoentityView.render(o),this._geoentityView.on("applicationLinkClick",this._onViewApplicationLinkClick,this),this._geoentityView.on("modelClick",this._onOtherGeoentityClick,this),this._geoentityView.on("reservationClick",this._onReservationClick,this),this._geoentityView.on("ohersGeoentitiesAction",this._onOthersGeoentitiesActionClick,this),this._geoentitySocialView=new f,Mappy.ControllerFactory.getShareController().setGeoentitySocialView(this._geoentitySocialView),this._mapView.disableMapEvents(),this._mapView.disableScrollWheelZoom(),this._indexView.$el.addClass("geoentity"),this._indexView.setRoadbookMode(!0),this._indexView.resize(),this._geoentityPartnerTabView=new v,this._geoentityPartnerTabView.on("tabClick",this._onViewTabClick,this),e.get("rubricId")&&!i){var a=this._appCatConf.get("categories").getCategoryDataByRubricIds(e.get("parentRubricId")||e.get("rubricId"));(a.subcategory||a.category)&&this.renderSurvey(a.subcategory?a.subcategory.get("id"):a.category.get("id"),"thumbnail")}return r?this.setPartner(e,r,!0):Promise.resolve()},s.prototype._getIsolatedTab=function(e,t,i){var o="";return t&&t.id===Mappy.TabControllerFactory.TAB_APP&&"hotel"!==t.search&&n.findWhere(e.get("contents"),{id:t.search})&&(o=t.search),i&&i!==o&&(o=""),o},s.prototype._getActiveTab=function(e,t,i){var o=null;if(t)return t;if(i)return i;for(var r=0;r<e.get("contents").length;r++)if(e.get("contents")[r].get("published")===!0)return e.get("contents")[r].get("id");return e.get("reviewCollection")&&(o="reviews"),e.get("visible")&&parameters.size<parameters.sizes.normal&&k.has3dSupport()&&(o="outdoor"),o},s.prototype._getOthersGeoentities=function(e,t,i){var o=0;return i>0&&(o=i+t-1>e.length?e.length-t:i-1),n.extend([],e).splice(o,t)},s.prototype.searchGeoentities=function(e){var t=[];t.push(this._searchGeoentities(e,this._mapView.getGeoBox(),20,"SPD_DETAIL_GEOENTITY_MAP").then(n.bind(function(t){t&&parameters.size>=parameters.sizes.normal&&this.renderGeoentities(t.pois||t.models),this._mapView.focusModel(e)},this)));var i=this._sessionModel.get("lastGeoentitiesResults").getGeoentities();if(i.length>0){var s=this._getOthersGeoentities(i,8,o(i,e));t.push(Promise.resolve(this._displayGeoentityListView(e,{pois:s})))}else t.push(this._searchGeoentities(e,this._mapView.getGeoBox().scale(3),7,"SPD_DETAIL_GEOENTITY_LIST").then(n.bind(function(t){this._displayGeoentityListView(e,t)},this)));return r(t)},s.prototype._searchGeoentities=function(e,t,i,o){var r,s=Mappy.ControllerFactory.getUniverseController().getPreviousTab(),a=null,p={};return s&&s.id!==Mappy.TabControllerFactory.TAB_GEOENTITY&&s.id!==Mappy.TabControllerFactory.TAB_HOME?s.id===Mappy.TabControllerFactory.TAB_CATEGORY||s.id===Mappy.TabControllerFactory.TAB_SUBCATEGORY?(a=new w(null,{appCatConf:this._appCatConf}),a.rubricIds=s.rubricIds):s.id===Mappy.TabControllerFactory.TAB_APPLICATION?(a=new w(null,{appCatConf:this._appCatConf}),a.appId=s.search):s.id===Mappy.TabControllerFactory.TAB_SEARCH&&(a=new _(null,{appCatConf:this._appCatConf}),a.keyword=s.search):(a=new w(null,{appCatConf:this._appCatConf}),a.rubricIds=[e.get("rubricId")]),a?(p=Mappy.deepGet(this._sessionModel.get("applicationParams"),"params.params",{}),r=n.extend({cache:!0,limit:i},p),o&&(r.bucTag=o),a.geoBox=t,a.fetch(r).then(function(){return a.get("geoentities")||a})):Promise.resolve()},s.prototype._displayGeoentityListView=function(e,t){t=t||[];var i=n.reject(t.pois||t.models,function(t){return t.id===e.id},this);i.length>0?this._geoentityView.displayGeoentityListView(i):this._geoentityView.removeGeoentityListView()},s.prototype._loadContentWidgets=function(e){$(".PartnerView-content-widget").each(n.bind(function(t,i){var o=$(i).find(".PartnerView-content-widget-body").data("contentWidgetId"),r=$(i).find(".PartnerView-content-widget-body").data("params");if(r.banner=e,o){var s=o.charAt(0).toUpperCase()+o.slice(1)+"ContentWidgetController";C[s]&&($(i).find(".PartnerView-content-widget-alternative").remove(),this._contentWidget=new C[s](this._indexView,this._sessionModel,this._appCatConf,o,r,n.bind(this._onAvailabilityChange,this)),$(i).find(".PartnerView-content-widget-body").html(this._contentWidget.getView().$el),this._contentWidget.getView().show(),"hotel"===o&&this._geoentityView.removeBanner())}},this))},s.prototype._onItineraryToClick=function(){var e=this._sessionModel.get("fullGeoentity");Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_GOTO_DETAIL,e),Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_GOTO",e.id),Mappy.ControllerFactory.getUniverseController().setCurrentUniverse("itinerary"),Mappy.ControllerFactory.getHeaderFormController().setItineraryTo(e),e.set("itineraryToClick",!0),this._sessionModel.set("currentToModel",e)},s.prototype._onAvailabilityChange=function(e){this._tabView.updateSiteLink(e.get("reservationUrl"))},s.prototype._onShowAddress=function(){var e=this._sessionModel.get("fullGeoentity");Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SEARCH_ADDRESS_LINK,e),Mappy.ControllerFactory.getHeaderFormController().search(e.get("location").get("addressStr"),{zoomLevel:7})},s.prototype._onSearchByRubric=function(){var e=this._sessionModel.get("fullGeoentity"),t=this._appCatConf.get("categories").getCategoryDataByRubricIds(e.get("rubricId"));if(t&&t.category&&t.subcategory)Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_RUBRIC_LINK_C,t.category,t.subcategory,e),Mappy.ControllerFactory.getUniverseController().openCategory(t.subcategory);else{var i=new T({id:e.get("rubricId"),rubricIds:[e.get("rubricId")]});Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_RUBRIC_LINK_S,i,e),Mappy.ControllerFactory.getHeaderFormController().search(e.get("rubricLabel"))}},s.prototype._onBackClick=function(){var e=this._sessionModel.get("fullGeoentity"),t=this._sessionModel.get("lastGeoentitiesResults").getGeoentities();Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_DETAIL_PREV,e);var i=o(t,e);i>=0&&t[i-1]&&Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:t[i-1].get("id"),geoentityModel:t[i-1]})},s.prototype._onNextClick=function(){var e=this._sessionModel.get("fullGeoentity"),t=this._sessionModel.get("lastGeoentitiesResults").getGeoentities();Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_DETAIL_NEXT,e);var i=o(t,e);i>=0&&t[i+1]&&Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:t[i+1].get("id"),geoentityModel:t[i+1]})},s.prototype._onBackToResultsClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_BACK);var e,t={geoentities:this._sessionModel.get("lastGeoentitiesResults"),locations:this._sessionModel.get("lastLocationsResults"),listMode:this._sessionModel.get("lastGeoentitiesResultsListMode")};switch(Mappy.ControllerFactory.getUniverseController().getPreviousTab().id){case Mappy.TabControllerFactory.TAB_ADDRESS:window.history.go(-1);break;case Mappy.TabControllerFactory.TAB_SEARCH:t.keyword=Mappy.ControllerFactory.getUniverseController().getPreviousTab().search,e=Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_SEARCH,t);break;case Mappy.TabControllerFactory.TAB_APP:case Mappy.TabControllerFactory.TAB_APPLICATION:case Mappy.TabControllerFactory.TAB_CATEGORY:case Mappy.TabControllerFactory.TAB_SUBCATEGORY:e=Mappy.ControllerFactory.getUniverseController().openTab(Mappy.ControllerFactory.getUniverseController().getPreviousTab().search,t)}e&&(e=e.then(n.bind(function(){this._mapView.resize()},this)))},s.prototype._onBackToSearchClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_BACK),this._sessionModel.set("searchKeyword",""+this._sessionModel.get("fullGeoentity").get("rubricLabel")),
Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_SEARCH)},s.prototype._onBackToGeoentity=function(){Mappy.ControllerFactory.getNavigationController().closeViews()},s.prototype._onIndoorClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_IMMERSIVE_INDOOR),Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_INDOOR",this._sessionModel.get("fullGeoentityId")),Mappy.ControllerFactory.getNavigationController().switchToIndoorView(this._sessionModel.get("fullGeoentity"))},s.prototype._onEmailClick=function(){Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_EMAIL",this._sessionModel.get("fullGeoentityId"))},s.prototype._onWebsiteClick=function(){Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_WEBSITE",this._sessionModel.get("fullGeoentityId")),Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(this._sessionModel.get("fullGeoentity"),Mappy.XitiController.REDIRECT_WEB)},s.prototype._onTelToShowClick=function(){var e=this._sessionModel.get("fullGeoentityId");Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_FANTOMAS",e),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_FANTOMAS,e)},s.prototype._onTelClick=function(){parameters.size<=parameters.sizes.medium&&(Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_PHONE",this._sessionModel.get("fullGeoentityId")),Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(this._sessionModel.get("fullGeoentity"),Mappy.XitiController.REDIRECT_PHONE))},s.prototype._onMapOutdoorClick=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_IMMERSIVE_DETAIL),Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_OUTDOOR",this._sessionModel.get("fullGeoentityId"));var e=this._sessionModel.get("fullGeoentity");Mappy.ControllerFactory.getNavigationController().switchToImmersiveView(e.get("location"),e.get("viewDirection"),e)},s.prototype._onMapGeoentityClick=function(e){this._sessionModel.get("fullGeoentityId")!==e.id&&(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_DETAIL_MAP,e),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:e.get("id"),geoentityModel:e}))},s.prototype._onOtherGeoentityClick=function(e,t){this._sessionModel.get("fullGeoentityId")!==e.id&&(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_DETAIL_CAROUSEL,e),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:e.get("id"),partnerId:t,geoentityModel:e}))},s.prototype._onReservationClick=function(e,t,i){Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(t,i||null,null,!0),Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_LINK",t.id),window.open(e)},s.prototype._onOthersGeoentitiesActionClick=function(){this._sessionModel.get("lastGeoentitiesResults").get("geoentities").length>0?this._onBackToResultsClick():this._onBackToSearchClick()},s.prototype._onViewTabClick=function(e){var t=this._sessionModel.get("fullGeoentity");this._sessionModel.get("partnerTab")&&this._sessionModel.get("partnerTab").partnerId===e||(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_DETAIL_TAB,t,new u({id:e})),"outdoor"===e&&this._showOutdoorView(),this.setPartner(t,e).then(void 0,Mappy.logError))},s.prototype._showOutdoorView=function(){var e=this._sessionModel.get("fullGeoentity"),t=new b({model:e});$("#GeoentityPartnerViewContainer").empty().append(t.render().$el),this._geoentityPartnerTabView.activateTabById("outdoor"),this._sessionModel.get("partnerTab").partnerId="outdoor"},s.prototype._onViewApplicationLinkClick=function(){var e=this._appCatConf.getApplicationById(this._sessionModel.get("partnerTab").partnerId);Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_MORE,e,e.get("categoryModel"),this._sessionModel.get("fullGeoentity")),Mappy.ControllerFactory.getUniverseController().openApplication(e)},s.prototype._onViewLinkClick=function(e){Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_LINK",this._sessionModel.get("fullGeoentityId"),null,$(e.currentTarget).attr("href"));var t=$(e.currentTarget),i=t.parent().hasClass("PartnerView-rating-meter")?Mappy.XitiController.REDIRECT_RATING:Mappy.XitiController.REDIRECT_DEFAULT;Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(this._sessionModel.get("fullGeoentity"),i),t.parent().hasClass("PartnerView-rating-meter")&&(e.preventDefault(),e.stopPropagation(),window.open($(e.currentTarget).attr("href")))},s.prototype._createTabView=function(){return new x(this._sessionModel.get("fullGeoentity"))},s.prototype.showGeoEntityPartnerViewThrobber=function(){$("#GeoentityPartnerView").append($('<div class="throbber"/>'))},s.prototype.hideGeoEntityPartnerViewThrobber=function(){$("#GeoentityPartnerView .throbber").remove()}},{"../../collection/AddressAndGeoentityCollection":37,"../../collection/GeoentityReviewCollection":42,"../../contentwidgets/ContentWidgetController":49,"../../contentwidgets/hotel/HotelContentWidgetController":50,"../../core/utils/Device.js":94,"../../model/ContentModel":114,"../../model/FiltersAndGeoentitiesModel":115,"../../model/GeoentityModel":117,"../../model/SubCategoryModel":131,"../../view/content/geoentity/GeoentityOutdoorView/GeoentityOutdoorView":170,"../../view/content/geoentity/GeoentityPartnerTabView/GeoentityPartnerTabView":171,"../../view/content/geoentity/GeoentityReviewView/GeoentityReviewView":173,"../../view/content/geoentity/GeoentitySocialView/GeoentitySocialView":176,"../../view/content/geoentity/GeoentityView/GeoentityView":177,"../../view/content/geoentity/PartnerView/GeoentityPartnerView":178,"../../view/left/tab/GeoentityTabView/GeoentityTabView":201,"../mixins/geoPositionsRenderer":67,"../mixins/surveyRenderer":69,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],78:[function(e,t,i){"use strict";function o(e,t){p.apply(this,arguments),t.resetApplicationParams("hotel"),this._categoryContainerView=this._indexView.getCategoryContainerView(),this._tabView.on("categoryClick",this._onViewCategoryClick,this),this._tabView.on("locationClick",this._onViewLocationClick,this)}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("../mixins/geoPositionsRenderer"),a=e("../mixins/vde"),p=e("./AbstractTabController"),l=e("../../view/left/tab/HomeTabView/HomeTabView"),c=e("../../model/FiltersAndGeoentitiesModel"),u=e("../../core/utils/Device.js");t.exports=o,s.inherits(o,p),r.extend(o.prototype,n),r.extend(o.prototype,a),o.prototype.build=function(e){return e=e||{},Mappy.ControllerFactory.getHeaderFormController().showSearchFormView(!1,""),u.hasTouchSupport()||this._indexView.getSearchFormView().focusKeyword(),parameters.size>=parameters.sizes.normal&&this._mapView.getZoomLevel()>=10&&this.searchVDE("discovery",null,!1),this._categoryContainerView.refreshCarouselView(),this._categoryContainerView.refreshTitle(),this.bindRenderer(),p.prototype.build.call(this,Mappy.XitiController.PAGE_DISCOVERY,"discovery").then(r.bind(function(){Mappy.ControllerFactory.getUniverseController().setPreviousTab({id:Mappy.TabControllerFactory.TAB_HOME}),this._sessionModel.set("lastGeoentitiesResults",new c(null,{appCatConf:this._appCatConf}))},this)).then(r.bind(function(){return e.isRebuild?Promise.resolve():this.refresh()},this))},o.prototype._createTabView=function(){return new l(parameters.seoLocations,this._appCatConf.get("categories").getQuickAccessSubcategories())},o.prototype._onViewCategoryClick=function(e){var t,i,o=this._appCatConf.get("categories").getCategoryDataByRubricIds(e);o&&o.category&&o.subcategory?(t=o.category,i=o.subcategory):(i=this._appCatConf.get("categories").findSubCategoryById(e),t=i),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_LIST,t,i),Mappy.ControllerFactory.getUniverseController().openCategory(i)},o.prototype._onViewLocationClick=function(e){Mappy.ControllerFactory.getHeaderFormController().search(e)},o.prototype.unbind=function(){this.unbindRenderer()},o.prototype.destroy=function(){this.destroyVDE(),this.unbind();var e=this._indexView.getSearchFormView().getKeyword();this._sessionModel.set("suggestKeyword",e),p.prototype.destroy.call(this)}},{"../../core/utils/Device.js":94,"../../model/FiltersAndGeoentitiesModel":115,"../../view/left/tab/HomeTabView/HomeTabView":202,"../mixins/geoPositionsRenderer":67,"../mixins/vde":70,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],79:[function(e,t,i){"use strict";function o(){s.apply(this,arguments)}var r=e("util"),s=e("./AbstractTabController"),n=e("../../view/left/tab/HotelTabView/HotelTabView");t.exports=o,r.inherits(o,s),o.prototype.build=function(){return s.prototype.build.call(this,Mappy.XitiController.PAGE_HOTEL,"traffic")},o.prototype._createTabView=function(){return new n(parameters.seoHotel)}},{"../../view/left/tab/HotelTabView/HotelTabView":203,"./AbstractTabController":73,util:8}],80:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._itineraryFormView=this._indexView.getItineraryFormView()}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./AbstractTabController"),a=e("../mixins/geoPositionsRenderer"),p=e("../mixins/vde"),l=e("../../model/form/ItineraryFormModel"),c=e("../../view/left/tab/ItineraryHomeTabView/ItineraryHomeTabView");t.exports=o,s.inherits(o,n),r.extend(o.prototype,a),r.extend(o.prototype,p),o.prototype.build=function(){var e=Mappy.ControllerFactory.getHeaderFormController();e.showItineraryFormView();var t=this._sessionModel.get("itineraryForm");if(e.setItineraryForm(t||new l),t||""===this._sessionModel.get("suggestKeyword")||e.isItineraryKeyword(this._sessionModel.get("suggestKeyword"))||e.setItineraryField(this._sessionModel.get("suggestKeyword"),"to"),this.bindRenderer(),parameters.size>parameters.sizes.medium)this._itineraryFormView.focusFrom();else{var i=r.bind(function(e,t,i){"from"===i&&e.$el.find("input").val().toLowerCase()===Template.getText("address_field.current_location").toLowerCase()&&e.setValue("")},this);this._itineraryFormView.on("focus input",i)}return parameters.size>=parameters.sizes.normal&&this._mapView.getZoomLevel()>=10&&this.searchVDE("itinerary_hp",null,!1),n.prototype.build.call(this,Mappy.XitiController.PAGE_ITINERARY,"itinerary_hp")},o.prototype._createTabView=function(){return new c(parameters.seoItineraries)},o.prototype.unbind=function(){this.unbindRenderer()},o.prototype.destroy=function(){this.destroyVDE(),this.unbind(),n.prototype.destroy.call(this)}},{"../../model/form/ItineraryFormModel":157,"../../view/left/tab/ItineraryHomeTabView/ItineraryHomeTabView":204,"../mixins/geoPositionsRenderer":67,"../mixins/vde":70,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],81:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._formView=this._leftView.getItineraryFormView(),this._itineraryModel=null,this._routeIdx=0,this._roadbookView=this._indexView.getRoadbookView(),this._categoryContainerView=this._indexView.getCategoryContainerView(),this._filtersAndGeoentitiesModel=new a(null,{appCatConf:this._appCatConf}),this.hooks.on("HomeTabController:afterConstruct, ShoppingTabController:afterConstruct, ItineraryHomeTabController:afterConstruct",r.bind(function(){this._mapView.clearItinerary()},this)),this.hooks.on("SubCategoryTabController:afterConstruct, CategoryTabController:afterConstruct, AppTabController:afterConstruct",r.bind(function(){this._mapView.showItinerary()},this)),this.hooks.on("GeoentityTabController:afterConstruct",r.bind(function(){this._mapView.hideItinerary()},this)),this.onFullscreen=r.bind(function(){this._indexView.$el.hasClass("fullscreen")&&this._mapView.bestView()},this)}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./AbstractTabController"),a=e("../../model/FiltersAndGeoentitiesModel"),p=e("../../model/ItineraryModel"),l=e("../../model/form/ItineraryFormModel"),c=e("../../model/CategoryModel"),u=e("../../model/ApplicationModel"),y=e("../../model/ContentModel"),h=e("../../model/UberPushModel"),d=e("../../model/OuibusPushModel"),g=e("../../view/left/tab/ItineraryTabView/ItineraryTabView"),m=e("../../view/map/LeafletMapView/LeafletMapView"),v=e("../../core/utils/Device.js");t.exports=o,s.inherits(o,n),o.prototype._itiDelay=null,o.prototype.search=function(e){var t={};t.steps=[],this._formView.removeEmptySteps(),this._formView.setSubmitState(!0);for(var i=["from","to"],o=0;o<this._formView.maxSteps;o++)i.push("step-"+o);for(var s=[],n=0;n<i.length;n++)s.push(this._geocodeField(e,t,i[n]));return this._sessionModel.set("itineraryForm",e),Promise.all(s).then(r.bind(function(){this._sessionModel.set("currentFromModel",t.from),this._sessionModel.set("currentSteps",t.steps);var i=this._sessionModel.get("currentToModel");i&&i.get("itineraryToClick")?i&&this._sessionModel.get("currentToModel").set("itineraryToClick",!1):this._sessionModel.set("currentToModel",t.to),parameters.size<=parameters.sizes.medium?this._indexView.showThrobber():this._tabView.displaySearching();var o=new p({fromLocation:t.from.getLocation(),toLocation:t.to.getLocation(),steps:t.steps,itineraryForm:e});return o.fetch()},this)).then(r.bind(function(e){if(e.get("error")){var i=Template.getText(e.get("error"));i===e.get("error")&&(i=Template.getText("itinerary.default.error"));var o={type:"serverError",root:e.get("error"),code:200,message:i,details:i};throw o}var r=t.from.getLocation(),s=t.to.getLocation();e.addAdvertisingParams({paysD:r.get("countryNumericCode"),deptD:r.get("zipCodes").length>0?r.get("zipCodes")[0].substr(0,2):"",villeD:r.get("city"),regionD:r.get("regionCode"),codeInseeD:r.get("cityINSEECode")||"",x1:r.get("lng"),y1:r.get("lat"),paysA:s.get("countryNumericCode"),deptA:s.get("zipCodes").length>0?s.get("zipCodes")[0].substr(0,2):"",villeA:s.get("city"),regionA:s.get("regionCode"),codeInseeA:s.get("cityINSEECode")||"",x2:s.get("lng"),y2:s.get("lat")}),this._formView.setSubmitState(!1),this._onItinerarySuccess(e),Mappy.ControllerFactory.getHistoryController().pushState(!0,"ItineraryTabController")},this)).then(void 0,r.bind(function(e){if(this._indexView.hideThrobber(),parameters.size<parameters.sizes.normal&&Mappy.ControllerFactory.getUniverseController().setTabController(Mappy.TabControllerFactory.TAB_HOME_ITINERARY),this._formView.setSubmitState(!1),e&&e.hasOwnProperty("type"))switch(e.type){case"ambigous":this._onItineraryError("ambigous",e.fieldName,e.models);break;case"noLocation":Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_KO,e.textField),this._onItineraryError("noLocation",e.fieldName);break;case"serverError":this._onItineraryError("serverError",null,null,e);break;default:this._onItineraryError("error",null,null,e)}},this))},o.prototype.openItinerary=function(e){this._roadbookView.setItineraryModel(this._itineraryModel,this._sessionModel.get("currentFromModel"),this._sessionModel.get("currentToModel"),this._sessionModel.get("itineraryForm"),e),parameters.size>=parameters.sizes.normal&&r.indexOf(this._itineraryModel.get("routes").at(e).get("pushes"),"hotel")>-1?(this._roadbookView.getPushHotelViewRight().show(),this._roadbookView.getPushHotelViewFooter().show(),this._filtersAndGeoentitiesModel.geoBox=this._itineraryModel.get("toLocation").toGeobox(1e4),this._filtersAndGeoentitiesModel.rubricIds="hotel",this._filtersAndGeoentitiesModel.fetch({bucTag:"SPD_RESPONSE_ITINERARY_PUSH_POI",limit:3}).then(r.bind(function(){if(this._roadbookView.getPushHotelViewRight().displayGeoentities(this._filtersAndGeoentitiesModel.getGeoentities().slice(0,3)),this._roadbookView.getPushHotelViewFooter().displayGeoentities(this._filtersAndGeoentitiesModel.getGeoentities().slice(0,10)),this._roadbookView.getPushHotelViewFooter().initCarousel(),this._sessionModel.get("itineraryForm").get("realtimeTraffic")){var e=this._sessionModel.get("itineraryForm").get("date").split("/"),t=new Date(e[2],e[1]-1,e[0]);this._roadbookView.getPushHotelViewRight().initDatePickers(t),this._roadbookView.getPushHotelViewFooter().initDatePickers(t)}else this._roadbookView.getPushHotelViewRight().initDatePickers(new Date),this._roadbookView.getPushHotelViewFooter().initDatePickers(new Date);this._roadbookView.getPushHotelViewRight().on("formSubmit",this.onPushHotelViewFormSubmit,this),this._roadbookView.getPushHotelViewFooter().on("formSubmit",this.onPushHotelViewFormSubmit,this),this._roadbookView.getPushHotelViewRight().on("click",r.bind(this.onPushHotelViewClick,this,Mappy.XitiController.XTC_DETAIL_FDR)),this._roadbookView.getPushHotelViewFooter().on("click",r.bind(this.onPushHotelViewClick,this,Mappy.XitiController.XTC_DETAIL_FDR_BAS)),this._roadbookView.getPushHotelViewRight().on("reservationClick",this.onPushHotelViewReservationClick,this),this._roadbookView.getPushHotelViewFooter().on("reservationClick",this.onPushHotelViewReservationClick,this)},this)).then(void 0,Mappy.logError)):(this._roadbookView.getPushHotelViewRight()&&this._roadbookView.getPushHotelViewRight().hide(),this._roadbookView.getPushHotelViewFooter()&&this._roadbookView.getPushHotelViewFooter().hide()),this._roadbookView.show(),this._indexView.setRoadbookMode(!0),this._indexView.resize(),this._indexView.$el.hasClass("fullscreen")?this._mapView.enableScrollWheelZoom():this._mapView.disableScrollWheelZoom(),this._leftView.getAdvertisingBLView().desactivate(),this._categoryContainerView.refreshCarouselView(),this._categoryContainerView.refreshTitle();var t=this._itineraryModel.get("routes").at(e).get("pushes");r.each(t,function(e){e=e.toLowerCase(),-1===["ouibus","hotel","uber"].indexOf(e)&&Mappy.ControllerFactory.getXitiController().tagRoadbookPushDisplay(e,!1)},this),this._checkUberPush(this._itineraryModel),this._checkOuibusPush(this._itineraryModel),Mappy.ControllerFactory.getHistoryController().pushState(!1,"ItineraryTabController - openItinerary")},o.prototype.onPushHotelViewFormSubmit=function(e){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_CALENDAR.replace("{eventLocation}","Calendrier"),new c({id:"hotel-hebergement"}),new u({id:"hotel"})),this._sessionModel.set("applicationParams",{appId:"hotel",params:e}),this.closeItinerary();var t=Mappy.ControllerFactory.getNavigationController();t.centerAt(this._sessionModel.get("itineraryForm").get("to").get("location").getLocation(),this._sessionModel.get("itineraryForm").get("to").get("location").getLocation().getZoomLevel()).then(r.bind(function(){this._sessionModel.set("geoBox",this._mapView.getGeoBox()),this._keepGeobox=!0,Mappy.ControllerFactory.getUniverseController().openApplication("hotel",e.params)},this)).then(void 0,Mappy.logError)},o.prototype.onPushHotelViewClick=function(e,t){"fr_FR"===parameters.locale&&(Mappy.ControllerFactory.getXitiController().tagAction(e,t,new y({id:"hotel"})),this.closeItinerary(),Mappy.ControllerFactory.getUniverseController().setPreviousTab({id:Mappy.TabControllerFactory.TAB_APP,search:"hotel"}),this._sessionModel.set("lastGeoentitiesResults",this._filtersAndGeoentitiesModel.clone()),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityId:t.get("id"),geoentityModel:t}).then(void 0,Mappy.logError))},o.prototype.onPushHotelViewReservationClick=function(e,t){Mappy.ControllerFactory.getXitiController().tagGeoentityRedirection(t),Mappy.ControllerFactory.getXitiController().tagBucClick("SPD_GEOENTITY_LINK",t.id),window.open(e)},o.prototype.closeItinerary=function(){this._roadbookView.isVisible()&&this._roadbookView.hide(),this._indexView.setRoadbookMode(!1),this._indexView.resize(),this._mapView.enableScrollWheelZoom(),this._mapView.enableInteractions(),this._leftView.getAdvertisingBLView().refresh(),Mappy.ControllerFactory.getHistoryController().pushState(!1,"ItineraryTabController - closeItinerary")},o.prototype._geocodeField=function(e,t,i){parameters.size<=parameters.sizes.medium?this._indexView.showThrobber():this._tabView.displaySearching();var o,s,n=!1;if("step"===i.substr(0,4)){if(n=!0,s=parseInt(i.substr(5,1),10),o=e.get("steps")[s],!o.get("value"))return Promise.resolve()}else o=e.get(i);return o.get("location")?(Mappy.ControllerFactory.getSearchHistoryCollection().add(o.get("location").getLocation().get("rawAddress")),n?t.steps.push(o.get("location")):t[i]=o.get("location"),Promise.resolve()):Mappy.ControllerFactory.getNavigationController().getActiveStrategy().searchByKeyword(o.get("value"),!0,!0).then(r.bind(function(e){this._tabView.hideMessage();var r=e.addresses.concat(e.pois);if(1===r.length)return Mappy.ControllerFactory.getSearchHistoryCollection().add(r[0].getAddressStr()),Mappy.ControllerFactory.getHeaderFormController().setItineraryField(r[0],i),o.set("location",r[0]),n?t.steps.push(r[0]):t[i]=r[0],r;throw r.length>1?{type:"ambigous",fieldName:i,models:r}:{type:"noLocation",fieldName:i,textField:o}},this))},o.prototype.build=function(){var e=this._sessionModel.get("itineraryForm")||new l;return this._mapView.setItineraryTools(),this._mapView.on("fullscreen",this.onFullscreen),Mappy.ControllerFactory.getHeaderFormController().hideForms(),this._formView.setMiniForm(!0),this._leftView.enableScrollPropagation(),this._formView.show(),this._formView.off("formclick").on("formclick",this._onFormClick,this),this._formView.off("modeClick").on("modeClick",this._onModeClick,this),this._formView.off("optionsClick").on("optionsClick",this._onOptionsClick,this),this._roadbookView.off("print").on("print",this._onRoadbookPrintClick,this),this._roadbookView.off("expense").on("expense",this._onRoadbookExpenseClick,this),this._roadbookView.off("covoiturageChange").on("covoiturageChange",this._onRoadbookCovoiturageChange,this),this._roadbookView.off("covoiturageClick").on("covoiturageClick",this._onRoadbookCovoiturageClick,this),this._roadbookView.off("uberClick").on("uberClick",this._onUberClick,this),this._roadbookView.off("ouibusClick").on("ouibusClick",this._onOuibusClick,this),this._roadbookView.off("roadbookStart").on("roadbookStart",this._onRoadbookStart,this),this._roadbookView.off("roadbookEnd").on("roadbookEnd",this._onRoadbookEnd,this),this._roadbookView.off("gps").on("gps",this._onGpsClick,this),this._tabView.off("overviewClick").on("overviewClick",this._onOverviewClick,this),this._tabView.off("overviewHover").on("overviewHover",this._onOverviewOver,this),this._tabView.off("overviewMouseLeave").on("overviewMouseLeave",this._onOverviewOut,this),this._tabView.off("back").on("back",this._onBackClick,this),this.search(e).then(r.bind(n.prototype.build,this)).then(r.bind(function(){this._indexView.resize()},this))},o.prototype.unbind=function(){this._formView.off("formclick",this._onFormClick,this),this._formView.off("modeClick",this._onModeClick,this),this._roadbookView.off("print",this._onRoadbookPrintClick,this),this._roadbookView.off("expense",this._onRoadbookExpenseClick,this),this._roadbookView.off("covoiturageChange",this._onRoadbookCovoiturageChange,this),this._roadbookView.off("covoiturageClick",this._onRoadbookCovoiturageClick,this),this._roadbookView.off("uberClick",this._onUberClick,this),this._roadbookView.off("roadbookStart",this._onRoadbookStart,this),this._roadbookView.off("roadbookEnd",this._onRoadbookEnd,this),this._roadbookView.off("gps",this._onGpsClick,this),this._tabView.off("overviewClick",this._onOverviewClick,this),this._tabView.off("overviewHover",this._onOverviewOver,this),this._tabView.off("overviewMouseLeave",this._onOverviewOut,this),this._tabView.off("back",this._onBackClick,this),this._mapView.off("fullscreen",this._checkGeoVeloLegend,this)},o.prototype.destroy=function(){this._indexView.$el.removeClass("itinerary"),this._mapView.setFullTools(),this._mapView.hideTrafficLayer(),this._mapView.enableInteractions(),this.closeItinerary();var e=new l;this._indexView.getMapView().clearModels(),this._formView.setFormModel(e),this._formView.setMiniForm(!1),this._leftView.enableScrollPropagation(),this.unbind(),this._sessionModel.set("itineraryForm",null),this._sessionModel.set("currentItinerary",null),this._sessionModel.set("currentFromModel",null),this._sessionModel.set("currentToModel",null),this._mapView._map.removeLegendControl(),this._indexView.getMapView().off("fullscreen",this.onFullscreen),this._keepGeobox||(this._mapView.bestView(null,!1),this._sessionModel.set("geoBox",this._mapView.getGeoBox())),n.prototype.destroy.call(this)},o.prototype._createTabView=function(){return new g},o.prototype._shouldShowTrafficLayer=function(){var e=this._parseDateFromItineraryForm(this._sessionModel.get("itineraryForm")),t=9e5;return"auto"===this._sessionModel.get("itineraryForm").get("mode")&&this._sessionModel.get("itineraryForm").get("realtimeTraffic")&&this._sessionModel.get("currentItinerary").get("routes").at(this._routeIdx).get("distance")/1e3<100&&e.getTime()-Date.now()<t},o.prototype._shouldShowBikeLegend=function(e){return!!e.get("routes").find(function(e){return"Geovelo"===e.get("summary").get("providerName")})},o.prototype._parseDateFromItineraryForm=function(e){var t=e.get("date").split("/"),i=parseInt(t[0],10),o=parseInt(t[1],10),r=parseInt(t[2],10),s=e.get("hour"),n=e.get("minutes");return new Date(r,o-1,i,s,n)},o.prototype._onItinerarySuccess=function(e){this._indexView.hideThrobber(),this._indexView.$el.addClass("itinerary"),this._itineraryModel=e,this._leftView.disableScrollPropagation(),this._routeIdx=parseInt(this._sessionModel.get("itineraryForm").get("routeIdx"),10),this._routeIdx>=e.get("routes").length&&(this._routeIdx=0),this._sessionModel.set("currentItinerary",e),this._tabView.setItinerary(e,this._routeIdx,this._sessionModel.get("itineraryForm")),this._mapView.clearModels(),this._tabView.on("detailsclick",function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_DETAIL,this._sessionModel.get("itineraryForm")),this._roadbookView.scrollToRoadbook(),this._indexView.$el.hasClass("fullscreen")&&r.defer(r.bind(function(){this._mapView.trigger("fullscreen",{active:!1})},this))},this),Mappy.ControllerFactory.getXitiController().tagPage(Mappy.XitiController.PAGE_DETAIL_ITINERARY),Mappy.ControllerFactory.getAdhesiveController().tagPage(Mappy.AdhesiveController.PAGE_DETAIL_ITINERARY),Mappy.ControllerFactory.getMainController().isInitializing()||this.openItinerary(this._routeIdx);var t={animate:parameters.size>=parameters.sizes.normal};this._mapView.resize(),clearTimeout(this._itiDelay),e.get("interstitial")===!0?this._itiDelay=setTimeout(r.bind(function(){this._mapView.setItinerary(e,this._routeIdx),this._mapView.bestViewById(m.LAYERID_SHAPE,t),-1!==navigator.userAgent.indexOf("Windows")&&-1!==navigator.userAgent.indexOf("Chrome")&&(this._formView.$el.get(0).style.width="100%"===this._formView.$el.get(0).style.width?"":"100%")},this),2e3):(this._mapView.setItinerary(e,this._routeIdx),this._mapView.bestViewById(m.LAYERID_SHAPE,t)),this._shouldShowTrafficLayer()?this._mapView.showTrafficLayer():this._mapView.hideTrafficLayer(),this._mapView.on("fullscreen",this._checkGeoVeloLegend,this),this._checkGeoVeloLegend()},o.prototype._checkGeoVeloLegend=function(){this._shouldShowBikeLegend(this._itineraryModel)&&parameters.size>parameters.sizes.medium?(this._mapView._map.removeLegendControl(),this._mapView._map.addLegendControl()):this._mapView._map.removeLegendControl()},o.prototype._checkOuibusPush=function(e){if(r.indexOf(e.get("routes").at(this._routeIdx).get("pushes"),"ouibus")>-1){var t=new d;t.set("itineraryModel",e),t.fetch().then(r.bind(function(e){this._roadbookView.showOuibusPush(e.toJSON()),Mappy.ControllerFactory.getXitiController().tagRoadbookPushDisplay("ouibus",!1)},this)).then(null,r.bind(function(){var e=this._sessionModel.get("currentFromModel"),t=this._sessionModel.get("currentToModel"),i=this._sessionModel.get("itineraryForm"),o={source:e.getLocation().toJSON(),destination:t.getLocation().toJSON()};i.get("realtimeTraffic")&&(o.driiveme_date=i.get("date").split("/").reverse().join("-")),this._roadbookView.showDriivemePush(o),v.isMobile(navigator.userAgent)||Mappy.ControllerFactory.getXitiController().tagRoadbookPushDisplay("driiveme",!1)},this))}},o.prototype._isUber=function(e){return e=r.defaults(e,{fromCountryCode:0,toCountryCode:0,locale:"",pushes:[]}),250===e.fromCountryCode&&250===e.toCountryCode&&"fr_FR"===e.locale&&1===e.pushes.length&&"uber"===e.pushes[0]},o.prototype._checkUberPush=function(e){var t,i=e.get("routes").at(this._routeIdx).get("pushes");this._isUber({fromCountryCode:e.get("fromLocation").get("countryNumericCode"),toCountryCode:e.get("toLocation").get("countryNumericCode"),locale:parameters.locale,pushes:i})&&(t=new h,t.set("itineraryModel",e),t.fetch().then(r.bind(function(){this._roadbookView.showUberPush(t),Mappy.ControllerFactory.getXitiController().tagRoadbookPushDisplay("uber",!0)},this)))},o.prototype._onItineraryError=function(e,t,i,o){this._mapView.clearItinerary(),this.closeItinerary(),this._indexView.$el.removeClass("itinerary"),Mappy.ControllerFactory.getErrorController().trigger("itinerary");var s={ambigous:r.bind(this._formView.ambigous,this._formView),noLocation:r.bind(function(e){this._tabView.hideSearching(),this._formView.noLocation(e)},this),serverError:r.bind(function(e,t,i){this._mapView.clearModels();var o=i&&i.details?i.details:Template.getText("_default");this._tabView.displayError(o),Mappy.logError(i)},this),error:r.bind(function(){this._tabView.displayError(Template.getText("_default")),Mappy.logError(o)},this)};s[e](t,i,o)},o.prototype._onFormClick=function(){this._formView.off("modeClick",this._onModeClick,this),this._formView.setMiniForm(!1)},o.prototype._onModeClick=function(e){Mappy.ControllerFactory._sessionModel.get("itineraryForm").get("mode")!==e&&this._formView.submit()},o.prototype._onOptionsClick=function(){this._formView.setMiniForm(!1),this._formView.off("modeClick",this._onModeClick,this),this._tabView.hideBody()},o.prototype._onBackClick=function(){var e=this._sessionModel.get("itineraryForm");Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOME_ITINERARY).then(function(){Mappy.ControllerFactory.getHeaderFormController().setItineraryForm(e)}).then(void 0,Mappy.logError)},o.prototype._onRoadbookPrintClick=function(e){window.open(e)},o.prototype._onRoadbookExpenseClick=function(e){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_NDF),window.open(e)},o.prototype._onRoadbookCovoiturageClick=function(){Mappy.ControllerFactory.getXitiController().tagActionSortie(Mappy.XitiController.XTC_ITINERARY_COVOITURAGE)},o.prototype._onUberClick=function(){Mappy.ControllerFactory.getXitiController().tagActionSortie(Mappy.XitiController.XTC_ITINERARY_UBER)},o.prototype._onOuibusClick=function(){Mappy.ControllerFactory.getXitiController().tagActionSortie(Mappy.XitiController.XTC_ITINERARY_OUIBUS)},o.prototype._onRoadbookCovoiturageChange=function(e){this._roadbookView.setCovoituragePrice(Math.floor(.065*this._sessionModel.get("currentItinerary").get("routes").at(this._routeIdx).get("distance")/1e3*e))},o.prototype._onRoadbookStart=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_DEPART)},o.prototype._onRoadbookEnd=function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_ARRIVEE)},o.prototype._onGpsClick=function(e,t){if(Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_GPS),v.isIPhone(navigator.userAgent)){var i=(new Date).valueOf();

setTimeout(function(){(new Date).valueOf()-i>100||(window.location=t.iosStore)},25),window.location=t.iosApp}else v.isAndroid(navigator.userAgent)?window.location=t.androidStore:v.isWindowsPhone(navigator.userAgent)&&(window.location=t.windowsStore)},o.prototype._onOverviewClick=function(e){this._routeIdx=e;var t=this._sessionModel.get("itineraryForm");t.set("routeIdx",e),this._sessionModel.set("itineraryForm",t),Mappy.ControllerFactory.getHistoryController().pushState(!0,"ItineraryTabController"),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_ALTERNATIVE,this._sessionModel.get("itineraryForm")),this._mapView.setItinerary(this._sessionModel.get("currentItinerary"),e),this.openItinerary(e),this._roadbookView.trigger("change:routeIdx",e)},o.prototype._onOverviewOver=function(e){this._mapView.showRoute(e)},o.prototype._onOverviewOut=function(e){e!==this._routeIdx&&this._mapView.hideRoute(e)}},{"../../core/utils/Device.js":94,"../../model/ApplicationModel":109,"../../model/CategoryModel":112,"../../model/ContentModel":114,"../../model/FiltersAndGeoentitiesModel":115,"../../model/ItineraryModel":120,"../../model/OuibusPushModel":122,"../../model/UberPushModel":136,"../../model/form/ItineraryFormModel":157,"../../view/left/tab/ItineraryTabView/ItineraryTabView":205,"../../view/map/LeafletMapView/LeafletMapView":211,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],82:[function(e,t,i){"use strict";function o(e,t,i,o){n.apply(this,arguments),this._filterParams={},this._searchFormView=this._indexView.getSearchFormView(),this._categoryFullListView=null,this._rubricIds=o,this._rubricLabel=parameters.app.rubricLabel,this._label=parameters.app.geoentitiesLabel,delete parameters.app.rubricLabel,delete parameters.app.geoentitiesLabel}{var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=(e("../../core/utils/Device"),e("./AbstractTabController")),a=e("./AbstractGeoentitiesTabController"),p=e("../mixins/geoPositionsRenderer"),l=(e("../../model/FiltersAndGeoentitiesModel"),e("../../view/left/tab/CategoryTabView/CategoryTabFullListView"),e("../../view/left/tab/CategoryTabView/CategoryTabView"),e("../../view/mixins/CategoryHeader/CategoryHeaderView"));e("../../model/GeoBoxModel"),e("../../model/LocationModel")}t.exports=o,s.inherits(o,a),r.extend(o.prototype,p),o.prototype._getHeaderView=function(e){return new l(r.extend({label:this._label},e))}},{"../../core/utils/Device":94,"../../model/FiltersAndGeoentitiesModel":115,"../../model/GeoBoxModel":116,"../../model/LocationModel":121,"../../view/left/tab/CategoryTabView/CategoryTabFullListView":199,"../../view/left/tab/CategoryTabView/CategoryTabView":200,"../../view/mixins/CategoryHeader/CategoryHeaderView":223,"../mixins/geoPositionsRenderer":67,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractGeoentitiesTabController":72,"./AbstractTabController":73,util:8}],83:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._searchFormView=this._indexView.getSearchFormView(),this._categoryContainerView=this._indexView.getCategoryContainerView(),this._refreshMode=!1,this._lock=!1,this.hooks.on("HomeTabController:afterConstruct, ShoppingTabController:afterConstruct, ItineraryHomeTabController:afterConstruct",r.bind(function(){this._indexView.getMapView().clearLocations()},this)),this.hooks.on("SubCategoryTabController:afterConstruct, CategoryTabController:afterConstruct, AppTabController:afterConstruct",r.bind(function(){this._indexView.getMapView().showLocations()},this)),this.hooks.on("GeoentityTabController:afterConstruct",r.bind(function(){this._indexView.getMapView().hideLocations()},this))}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./AbstractTabController"),a=e("../mixins/geoPositionsRenderer"),p=e("../mixins/vde"),l=e("../../model/LocationModel"),c=e("../../model/FiltersAndGeoentitiesModel"),u=(e("../../model/GeoBoxModel"),e("../../view/left/tab/SearchTabView/SearchTabView"));t.exports=o,s.inherits(o,n),r.extend(o.prototype,a),r.extend(o.prototype,p),o.prototype._searchStrategy=null,o.prototype.reset=function(){this._resetView(!0),this._searchFormView.focusKeyword(),this._sessionModel.set("searchKeyword","")},o.prototype.build=function(e){e=e||{},this._searchStrategy=Mappy.ControllerFactory.getNavigationController().getActiveStrategy(),Mappy.ControllerFactory.getHeaderFormController().showSearchFormView(!0),Mappy.ControllerFactory.getNavigationController().onChangeTab(),this._refreshMode=!1,this._mapView.clearModels(),this._searchFormView.on("switchListClick",this.onSwitchListClick,this),this._searchFormView.on("clear",this._onSearchFormClear,this),this._tabView.on("categoryClick",this._onViewCategoryClick,this),e.keyword&&(this._sessionModel.set("searchKeyword",""+e.keyword),this._searchFormView.setKeyword(e.keyword)),this._mapView.on("addressClick",this._onAddressClick,this);var t;return e.geoentities||e.locations?(this.showSwitchButton(),e.geoentities&&this._onSearchGeoentitiesSuccess(e.geoentities.getGeoentities()),e.locations&&this._onSearchLocationsSuccess(e.locations),this._mapView.bestView(),this._leftView.getAdvertisingBLView().refresh(Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl("search")),Mappy.ControllerFactory.getHistoryController().pushState(!0,"SearchTabController"),t=Promise.resolve()):t=this._search(this._sessionModel.get("searchKeyword"),e),this._tabView.show(),e.listMode&&this.switchSmallScreenList(),Mappy.ControllerFactory.getUniverseController().setPreviousTab({id:Mappy.TabControllerFactory.TAB_SEARCH,search:this._sessionModel.get("searchKeyword")}),this._categoryContainerView.refreshCarouselView(),this._categoryContainerView.refreshTitle(),this.bindRenderer(),t},o.prototype._onAddressClick=function(e){parameters.size<=parameters.sizes.medium&&(this._sessionModel.set("currentAddress",e.get("addressStr")),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_ADDRESS,{locationModel:e,geoentities:this._sessionModel.get("lastGeoentitiesResults")}).then(void 0,Mappy.logError))},o.prototype.refresh=function(){if(this._sessionModel.get("searchKeyword")){this._refreshMode=!0;var e=this._search(this._sessionModel.get("searchKeyword"));return Mappy.ControllerFactory.getUniverseController().setPreviousTab({id:Mappy.TabControllerFactory.TAB_SEARCH,search:this._sessionModel.get("searchKeyword")}),e}return Promise.resolve()},o.prototype._search=function(e,t){return this._lock?Promise.resolve():(this._lock=!0,this._refreshMode?this._searchRefresh(e):this._searchClassic(e,t))},o.prototype._searchRefresh=function(){return this._refreshMode=!0,this._resetView(!1),this._searchStrategy.searchByGeoBox(!1).then(r.bind(function(e){this._onSearchGeoentitiesSuccess(e.pois)},this)).then(r.bind(function(){this._sessionModel.set("lastLocation",this._sessionModel.get("location")),this._leftView.getAdvertisingBLView().refresh(Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl("search"))},this)).then(void 0,Mappy.logError).then(r.bind(function(){return this._lock=!1,this._onSearchEnds({type:"refresh"})},this))},o.prototype._searchClassic=function(e){this._refreshMode=!1,this._resetView(!0),this.destroyVDE(),this._sessionModel.set("searchKeyword",""+e),this._searchFormView.setKeyword(e),this._tabView.displaySearching(),this._tabView.showSearchResults(),this._sessionModel.set("currentLocationsResult",[]),this._sessionModel.set("lastGeoentitiesResults",new c(null,{appCatConf:this._appCatConf})),this._sessionModel.set("lastLocationsResults",[]);var t=/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/;return t.test(e)?this._searchLocationByLatLng(e):this._searchByGeoBox()},o.prototype._searchLocationByLatLng=function(e){var t=e.split(/,/),i=$.trim(t[0]),o=$.trim(t[1]),s=new l({lng:o,lat:i,"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]});return s.fetch().then(r.bind(function(t){t.set("separatedText",[e,""]),t.set("rawAddress",""),t.set("lat",i),t.set("lng",o),this._sessionModel.set("currentLocationsResult",[t]),this.refreshResultsDisplay("France"!==t.get("country"))},this)).then(r.bind(function(){this._mapView._map.setView(new L.LatLng(i,o),17)},this)).then(r.bind(function(){this._lock=!1,this._tabView.hideMessage(),Mappy.ControllerFactory.getHistoryController().pushState(!0,"SearchTabController")},this))},o.prototype._searchByGeoBox=function(){var e={type:"search"};return this._searchStrategy.searchByGeoBox(!0,parameters.size<=parameters.sizes.medium).then(r.bind(function(t){e.viewport=t.viewport,e.searchHint=t.searchHint;var i=0===r.filter(t.addresses,function(e){return"France"===e.get("country")}).length&&0!==t.addresses.length;if(1===t.addresses.length&&parameters.size<parameters.sizes.normal){var o=t.addresses[0];return this._sessionModel.set("currentLocationsResult",t.addresses),this._sessionModel.set("currentAddress",o.get("addressStr")),this._sessionModel.set("lastSearchLocationResults",t.addresses),Mappy.ControllerFactory.getAdhesiveController().tagPage(Mappy.AdhesiveController.PAGE_RESPONSE_SEARCH),this._mapView.setLocation(o),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_ADDRESS,{results:t}).then(void 0,Mappy.logError),void Mappy.ControllerFactory.getSearchHistoryCollection().add(o.get("rawAddress"))}if(t.addresses.length<1&&1===t.pois.length&&"located"===t.searchHint){var s=new c(t.pois,{appCatConf:this._appCatConf});return this._sessionModel.set("lastGeoentitiesResults",s),void Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_GEOENTITY,{geoentityModel:t.pois[0]}).then(void 0,Mappy.logError)}this._onSearchGeoentitiesSuccess(t.pois,i),this._onSearchLocationsSuccess(t.addresses,null,i)},this)).then(r.bind(this._onSearchLastLocationSet,this)).then(void 0,Mappy.logError).then(r.bind(function(){return this._lock=!1,this._onSearchEnds(e)},this))},o.prototype._onSearchLastLocationSet=function(){var e=this._geoentityListView?this._geoentityListView.getModels():[],t=this._locationListView?this._locationListView.getModels():[];this._sessionModel.set("lastLocation",t[0]||(e[0]?e[0].get("location"):null)),this._leftView.getAdvertisingBLView().refresh(Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl("search"),!0)},o.prototype._resetView=function(e){this._geoentityListView&&(this._geoentityListView.remove(),this._geoentityListView=null),e&&this._locationListView&&(this._locationListView.remove(),this._locationListView=null)},o.prototype._onSearchGeoentitiesSuccess=function(e,t){var i=this._appCatConf.get("applications").filterPublishedApps(),o=r.map(i,function(e){return e.id});r.each(e,function(e){var t=e.get("additionalInfo");t&&t.appId&&!r.contains(o,t.appId)&&e.unset("additionalInfo")}),1===e.length&&Mappy.ControllerFactory.getSearchHistoryCollection().add(e[0].getAddressStr());var s=new c(e,{appCatConf:this._appCatConf});this._sessionModel.set("lastGeoentitiesResults",s),this.refreshResultsDisplay(t)},o.prototype._onSearchLocationsSuccess=function(e,t,i){if(e.length>0)if(this._shouldGetDescription(e[0])&&this._updateDescription(e[0]),this._sessionModel.set("currentLocationsResult",e),this._sessionModel.set("lastLocationsResults",e),this.refreshResultsDisplay(i),1===e.length){var o=e[0];Mappy.ControllerFactory.getSearchHistoryCollection().add(o.get("rawAddress")),t&&t.zoomLevel||(this._mapView.bestViewByLocation(o),o.get("type")===l.TYPE_CITY&&parameters.size>=parameters.sizes.normal&&this.searchVDE("search",null,!1))}else this.switchSmallScreenList()},o.prototype._onRendererLocationClick=function(e){if(!(this._sessionModel.get("currentLocationsResult").length<2)){var t=e.get("rawAddress");if(Mappy.ControllerFactory.getSearchHistoryCollection().add(t),this._searchFormView.setKeyword(t),this._sessionModel.set("searchKeyword",t),this._sessionModel.set("currentLocationsResult",[e]),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_SEARCH_LOC),parameters.size<=parameters.sizes.medium)this._mapView.unhighlightModel(e),this._onAddressClick(e);else{var i={locations:[e]};Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_SEARCH,i)}}},o.prototype._shouldGetDescription=function(e){return"fr_FR"===window.parameters.locale&&e.get("type")===l.TYPE_CITY&&e.get("zipCodes").length>0?!0:!1},o.prototype._updateDescription=function(e){e.get("description").fetch().then(r.bind(function(t){t.get("description")&&this._locationListView.updateLocationDescription(e)},this)).then(void 0,Mappy.logError)},o.prototype._handlePageTag=function(e,t){if(this._sessionModel.get("searchKeyword")&&"refresh"!==t){var i=this._sessionModel.get("lastGeoentitiesResults").getGeoentities();Mappy.ControllerFactory.getAdhesiveController().tagPage(Mappy.AdhesiveController.PAGE_RESPONSE_SEARCH),i&&i.length?Mappy.ControllerFactory.getXitiController().tagPage(Mappy.XitiController.PAGE_RESPONSE_SEARCH_POI,{np:e,x4:i[0].get("rubricId")}):Mappy.ControllerFactory.getXitiController().tagPage(Mappy.XitiController.PAGE_RESPONSE_SEARCH,{np:e})}},o.prototype._onSearchEnds=function(e){this._tabView.hideMessage(),e=e||{};var t=this._sessionModel.get("lastGeoentitiesResults").getGeoentities(),i=this._sessionModel.get("currentLocationsResult"),o=!0;if(t&&0!==t.length||i&&0!==i.length){var s=this._mapView.getMap().getCenter();i&&1===i.length?this.hideSwitchButton():this.showSwitchButton(),"unlocated"!==e.searchHint||e.zoomLevel?"located"===e.searchHint&&(t.length>0||i.length>0)&&this._mapView.bestView():this._mapView.bestView(e.viewport);var n=this._mapView.getMap().getCenter();if(s.lng!==n.lng||s.lat!==n.lat){var a=new l({geoPosition:{lng:n.lng,lat:n.lat},"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]});a.fetch().then(r.bind(function(t){this._sessionModel.set("location",t),this._handlePageTag(1,e.type)},this)).then(void 0,Mappy.logError)}else i&&i.length>0?(this._sessionModel.set("location",i[0]),this._handlePageTag(1,e.type)):this._handlePageTag(1,e.type);i&&1===i.length?(this._mapView.highlightModel(i[0]),this.refreshVDEDisplay(),o=!1):t&&1===t.length&&(this._activeModelCid=t[0].cid,this._mapView.highlightModel(t[0]))}else this._handlePageTag(0,e.type),this._tabView.displayNoResults(),this.hideSwitchButton();return o&&this._leftView.getAdvertisingBLView().refresh(Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl("search"),this._refreshMode),Mappy.ControllerFactory.getHistoryController().pushState(!0,"SearchTabController"),null},o.prototype.refreshResultsDisplay=function(e){var t=this._getDisplayedPanels();r.indexOf(t,"geoentities")>-1?this.renderGeoentities(this._sessionModel.get("lastGeoentitiesResults").getGeoentities(),this._tabView):this._mapView.clearGeoentities(),r.indexOf(t,"addresses")>-1?this._refreshMode===!1&&this.renderLocations(this._sessionModel.get("currentLocationsResult"),this._tabView):this._mapView.clearLocations(),r.indexOf(t,"categories")>-1?(void 0!==e||0===this._sessionModel.get("currentLocationsResult").length)&&this._tabView.displayGeoentityCategories(e):this._tabView.removeGeoentityCategories(),this._tabView.displayGeoentityTitle(r.indexOf(t,"title")>-1)},o.prototype._getDisplayedPanels=function(){var e=this._sessionModel.get("currentLocationsResult")&&this._sessionModel.get("currentLocationsResult").length>0,t=this._sessionModel.get("lastGeoentitiesResults")&&this._sessionModel.get("lastGeoentitiesResults").getGeoentities().length>0;return e&&t?["addresses","title","geoentities"]:e?["addresses","title","categories"]:t?["geoentities"]:["title","categories"]},o.prototype._onViewCategoryClick=function(e){var t,i,o=this._appCatConf.get("categories").getCategoryDataByRubricIds(e);o&&o.category&&o.subcategory?(t=o.category,i=o.subcategory):(i=this._appCatConf.get("categories").findSubCategoryById(e),t=i),Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_CATEGORY_LIST,t,i),Mappy.ControllerFactory.getUniverseController().openCategory(i)},o.prototype._onSearchFormClear=function(){parameters.size<=parameters.sizes.medium&&Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOME)},o.prototype.onSwitchListClick=function(){$(".ListContainer").hasClass("active")?$(".mobAdBanner").empty():Mappy.ControllerFactory.getAdvertisingController().insertSmartAdv("mob_results_list","mob_banner",!1,!0,$(".mobAdBanner")[0]),this.switchSmallScreenList()},o.prototype.unbind=function(){this.unbindRenderer(),this._searchFormView.off("switchListClick",this.onSwitchListClick,this),this._searchFormView.off("clear",this._onSearchFormClear,this),this._mapView.off("addressClick",this._onAddressClick,this)},o.prototype.destroy=function(){this.destroyVDE(),this.unbind(),this.hideSwitchButton(),this._mapView.clearModels(),this._sessionModel.set("suggestKeyword",""),this._indexView.getSearchFormView().setKeyword(""),this._sessionModel.set("searchKeyword",""),this._sessionModel.set("currentLocationsResult",null),n.prototype.destroy.call(this)},o.prototype._createTabView=function(){return new u(this._appCatConf.get("categories").getQuickAccessSubcategories())}},{"../../model/FiltersAndGeoentitiesModel":115,"../../model/GeoBoxModel":116,"../../model/LocationModel":121,"../../view/left/tab/SearchTabView/SearchTabView":206,"../mixins/geoPositionsRenderer":67,"../mixins/vde":70,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],84:[function(e,t,i){"use strict";function o(){n.apply(this,arguments),this._shoppingSignCollection=new a,this._shoppingSuggestCollection=new p,this._productSuggestView=new l,this._tabView.on("addressFocus",this._onAddressFocus,this),this._tabView.on("productFocus",this._onProductFocus,this),this._tabView.on("geolocationClick",this._onGeolocationClick,this),this._tabView.on("brandClick",this._onBrandClick,this),this._tabView.on("submit",this._onSubmit,this),this._tabView.on("submit-error",this._handleError,this),this._shoppingSuggestCollection.on("reset",function(e){this._productSuggestView.renderSuggestions(e.toJSON())},this),this._shoppingSignCollection.on("reset",this._tabView.setSigns,this._tabView),this._shoppingSignCollection.fetch(),this._productSuggestView.on("typing",this._onProductSuggestTyping,this),this._productSuggestView.on("select",this._onProductSuggestSelect,this)}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./AbstractTabController"),a=e("../../collection/ShoppingSignCollection"),p=e("../../collection/ShoppingSuggestCollection"),l=e("../../view/mixins/suggest/ProductSuggestView/ProductSuggestView"),c=e("../mixins/geoPositionsRenderer"),u=e("../mixins/vde"),y=e("../../view/left/tab/ShoppingTabView/ShoppingTabView"),h=e("../../model/LocationModel");t.exports=o,s.inherits(o,n),r.extend(o.prototype,c),r.extend(o.prototype,u),o.prototype.build=function(){return Mappy.ControllerFactory.getHeaderFormController().hideForms(),parameters.size>=parameters.sizes.normal&&this._mapView.getZoomLevel()>=10&&this.searchVDE("shopping_hp"),this.bindRenderer(),n.prototype.build.call(this,Mappy.XitiController.PAGE_SHOPPING)},o.prototype.unbind=function(){this.unbindRenderer(),this._shoppingSuggestCollection.off("reset"),this._shoppingSignCollection.off("reset")},o.prototype.destroy=function(){this.destroyVDE(),this.unbind(),this._tabView.remove(),this._tabView=null,this._productSuggestView.remove(),this._productSuggestView=null,this._shoppingSuggestCollection=null,this._shoppingSignCollection=null,n.prototype.destroy.call(this)},o.prototype._createTabView=function(){return new y},o.prototype._onAddressFocus=function(e,t){Mappy.ControllerFactory.getHeaderFormController().getSuggestView().bindTo(e,t)},o.prototype._onProductFocus=function(e,t){this._productSuggestView.bindTo(e,t)},o.prototype._onProductSuggestSelect=function(e){this._productSuggestView.setFieldValue(e),this._tabView.focusWhere()},o.prototype._onProductSuggestTyping=function(e){if(e&&e.length>=2){var t=Mappy.ControllerFactory.getSessionModel().get("location");this._shoppingSuggestCollection.fetchByKeyword(e,t.get("lat"),t.get("lng"))}else this._productSuggestView.renderSuggestions([])},o.prototype._onGeolocationClick=function(){h.fromNavigatorGeolocation({"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]}).then(r.bind(function(e){this._sessionModel.set("browserGeoPosition",e.getGeoPosition()),this._tabView.setBrowserLocation(e)},this)).then(void 0,r.bind(this._handleError,this))},o.prototype._onBrandClick=function(e,t){Mappy.ControllerFactory.getXitiController().tagActionN(Mappy.XitiController.XTC_SHOPPING_BRAND,e,this._shoppingSignCollection.findWhere({name:t}))},o.prototype._onSubmit=function(e){Mappy.ControllerFactory.getXitiController().tagActionN(Mappy.XitiController.XTC_SHOPPING_FORM),setTimeout(function(){window.location=e},Xtconf.xttredir||500)}},{"../../collection/ShoppingSignCollection":47,"../../collection/ShoppingSuggestCollection":48,"../../model/LocationModel":121,"../../view/left/tab/ShoppingTabView/ShoppingTabView":207,"../../view/mixins/suggest/ProductSuggestView/ProductSuggestView":241,"../mixins/geoPositionsRenderer":67,"../mixins/vde":70,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],85:[function(e,t,i){"use strict";function o(){n.apply(this,arguments);for(var e in o)/^TAB_[A-Z_]+$/.test(e)&&this._createFactoryMethod(o[e])}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("../Controller"),a=e("../mixins/hooks");t.exports=o;var p={CategoryTabController:e("./CategoryTabController"),RubricTabController:e("./RubricTabController"),GeoentityTabController:e("./GeoentityTabController"),SearchTabController:e("./SearchTabController"),AbstractGeoentitiesTabController:e("./AbstractGeoentitiesTabController"),ApplicationTabController:e("./ApplicationTabController"),AbstractTabController:e("./AbstractTabController"),TrafficTabController:e("./TrafficTabController"),AddressTabController:e("./AddressTabController"),ShoppingTabController:e("./ShoppingTabController"),TrafficHomeTabController:e("./TrafficHomeTabController"),ItineraryHomeTabController:e("./ItineraryHomeTabController"),HomeTabController:e("./HomeTabController"),HotelTabController:e("./HotelTabController"),ItineraryTabController:e("./ItineraryTabController")};Mappy.TabControllerFactory=o,s.inherits(o,n),o.prototype.createTabController=function(e,t){var i=this._getMethodName(e);return i in this?this[i](t):null},o.prototype._createFactoryMethod=function(e){var t=this._getClassName(e),i=p[t]||window[t];i&&(this[this._getMethodName(e)]=function(e){var o;return r.extend(i.prototype,{hooks:new a}),o=new i(this._indexView,this._sessionModel,this._appCatConf,e),o.hooks.trigger(t+":afterConstruct"),o})},o.prototype._getMethodName=function(e){return"_create"+this._getClassName(e)},o.prototype._getClassName=function(e){return e+"TabController"},o.TAB_ADDRESS="Address",o.TAB_APP="App",o.TAB_APPLICATION="Application",o.TAB_CATEGORY="Category",o.TAB_SUBCATEGORY="Subcategory",o.TAB_RUBRIC="Rubric",o.TAB_SEARCH="Search",o.TAB_ITINERARY="Itinerary",o.TAB_TRAFFIC="Traffic",o.TAB_HOME_TRAFFIC="TrafficHome",o.TAB_HOTEL="Hotel",o.TAB_HOME="Home",o.TAB_HOME_ITINERARY="ItineraryHome",o.TAB_GEOENTITY="Geoentity",o.TAB_SHOPPING="Shopping"},{"../Controller":55,"../mixins/hooks":68,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractGeoentitiesTabController":72,"./AbstractTabController":73,"./AddressTabController":74,"./ApplicationTabController":75,"./CategoryTabController":76,"./GeoentityTabController":77,"./HomeTabController":78,"./HotelTabController":79,"./ItineraryHomeTabController":80,"./ItineraryTabController":81,"./RubricTabController":82,"./SearchTabController":83,"./ShoppingTabController":84,"./TrafficHomeTabController":86,"./TrafficTabController":87,util:8}],86:[function(e,t,i){"use strict";function o(){s.apply(this,arguments),this._tabView.on("cityClick",this._onCityClick,this)}var r=e("util"),s=e("./AbstractTabController"),n=e("../../view/left/tab/TrafficHomeTabView/TrafficHomeTabView");t.exports=o,r.inherits(o,s),o.prototype.build=function(){return Mappy.ControllerFactory.getHeaderFormController().showSearchFormView(!1),Mappy.ControllerFactory.getNavigationController().showTrafficLayer(),s.prototype.build.call(this,Mappy.XitiController.PAGE_TRAFFIC,"traffic")},o.prototype._onCityClick=function(e){this._sessionModel.set("searchKeyword",""+e),Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_TRAFFIC).then(void 0,Mappy.logError)},o.prototype._createTabView=function(){return new n(parameters.seoTraffic)}},{"../../view/left/tab/TrafficHomeTabView/TrafficHomeTabView":208,"./AbstractTabController":73,util:8}],87:[function(e,t,i){"use strict";function o(){n.apply(this,arguments)}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("util"),n=e("./AbstractTabController"),a=e("../../view/left/tab/TrafficTabView/TrafficTabView"),p=e("../../../../../views/shared/left/tab/TrafficTabView.html.twig");t.exports=o,s.inherits(o,n),o.prototype.build=function(){return Mappy.ControllerFactory.getHeaderFormController().showSearchFormView(!0),this._moveToCity(this._sessionModel.get("searchKeyword")).then(function(){Mappy.ControllerFactory.getNavigationController().showTrafficLayer()}).then(r.bind(n.prototype.build,this,Mappy.XitiController.PAGE_RESPONSE_TRAFFIC,"traffic"))},o.prototype.destroy=function(){this._sessionModel.set("searchKeyword",""),n.prototype.destroy.call(this)},o.prototype._createTabView=function(){return new a},o.prototype._moveToCity=function(e){var t,i=Mappy.ControllerFactory.getNavigationController();return i.getActiveStrategy().searchLocationByKeyword(e).then(function(e){return t=e.at(0),t?t.get("traffic").fetch():null}).then(r.bind(function(e){if(e){i.centerAt(t,12).then(void 0,Mappy.LogError);var o=$(p.render({description:e.get("description"),address:{town:t.get("city"),zip:t.get("zipCodes")[0]}}));this._tabView.replaceElement(o)}},this))}},{"../../../../../views/shared/left/tab/TrafficTabView.html.twig":315,"../../view/left/tab/TrafficTabView/TrafficTabView":209,"./../../../lib/bower_components/underscore/underscore.js":29,"./AbstractTabController":73,util:8}],88:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=t.exports={};r.NavigatorGeolocationError=function(e){Error.call(this),this.i18nId=e},o.extend(r.NavigatorGeolocationError.prototype,Error.prototype),r.JSONPTimeoutError=function(){Error.call(this),this.message="JSONP request has timeout!"},o.extend(r.JSONPTimeoutError.prototype,Error.prototype),r.FooterExpandError=function(){Error.call(this)},o.extend(r.FooterExpandError.prototype,Error.prototype)},{"./../../../lib/bower_components/underscore/underscore.js":29}],89:[function(e,t,i){!function(e){"use strict";var t={DDD:function(e){return Template.getText("date_days").toString().split(",")[e.getDay()]},DD:function(e){return Template.getText("date_days").toString().split(",")[e.getDay()].substring(0,3)},D:function(e){return Template.getText("date_days").toString().split(",")[e.getDay()].substring(0,1)},dd:function(e){return e=e.getDate(),10>e?"0"+e:e},d:function(e){return e.getDate()},MMM:function(e){return Template.getText("date_months").toString().split(",")[e.getMonth()]},MM:function(e){return Template.getText("date_months").toString().split(",")[e.getMonth()].substring(0,3)},M:function(e){return Template.getText("date_months").toString().split(",")[e.getMonth()].substring(0,1)},mm:function(e){return e=e.getMonth()+1,10>e?"0"+e:e},m:function(e){return e.getMonth()+1},yy:function(e){return e.getFullYear()},y:function(e){return e.getFullYear().toString().substring(2)},HH:function(e){var t="0"+e.getHours();return t.substring(t.length-2,t.length)},mmm:function(e){var t="0"+e.getMinutes();return t.substring(t.length-2,t.length)}};e.parseDate=function(e){var t=e.match(/(\d+).(\d+).(\d+)/);if(!t)return null;2===t[1].length&&2===t[2].length&&2===t[3].length&&(t[3]="20"+t[3]);var i,o;return 4===t[1].length?(i=parseInt(t[1],10),o=parseInt(t[3],10)):(i=parseInt(t[3],10),o=parseInt(t[1],10)),new Date(i,parseInt(t[2],10)-1,o)},e.dateFormat=function(e,i){for(var o=i.split(""),r=[],s=0,n=0,a=null;s<o.length;){for(;o[s+n]===o[s];)++n;a=o.slice(s,s+n).join(""),r.push(a in t?t[a](e):a),s+=n,n=0}return r.join("")}}(window.Mappy=window.Mappy||{})},{}],90:[function(e,t,i){!function(e){"use strict";e.stringFormat=function(e,t){var i=e.toString();for(var o in t)t.hasOwnProperty(o)&&(i=i.replace("{"+o+"}",t[o]));return i}}(window.Mappy=window.Mappy||{})},{}],91:[function(e,t,i){!function(e){"use strict";e.stringReplace=function(e,t,i){var o=e.toString();if(t&&t.pop&&t.shift){for(var r=0,s=t.length;s>r;r++)o=o.replace(new RegExp("%"+(r+1),"g"),t[r]);return o}return e.replace(t,i)}}(window.Mappy=window.Mappy||{})},{}],92:[function(e,t,i){!function(e){"use strict";e.stringSlug=function(e){if(!e)return"";var t={a:["À","Á","Â","Ã","Ä","ÅÆ","à","á","â","ã","ä","åæ"],b:["Þ","þ"],c:["Ç","ç"],d:["Ð","ð"],e:["È","É","Ê","Ë","è","é","ê","ë"],i:["Ì","Í","Î","Ï","ì","í","î","ï"],n:["Ñ","ñ"],o:["Ò","Ó","Ô","Õ","Ö","Ø","ò","ó","ô","õ","ö","ø"],r:["Ŕ","ŕ"],u:["Ù","Ú","Û","Ü","ù","ú","û"],y:["Ý","ý","ý","ÿ"],"-":[" "," ","&",'"',"'","(","è",")","=","~","#","{","[","|","`","\\","^","@","]","}","$","*","?","%","!",":",";",",","."]};for(var i in t)if(t.hasOwnProperty(i))for(var o=0,r=t[i];o<r.length;o++)e.indexOf(r[o])>-1&&(e=e.replace(new RegExp(("-"===i?"\\":"")+r[o]+"+","g"),i));return e.toLowerCase().replace(/\-+/g,"-")}}(window.Mappy=window.Mappy||{})},{}],93:[function(e,t,i){!function(e){"use strict";e.stringTrim=function(e){return(e||"").replace(/(^\s+)|(\s+$)/,"")}}(window.Mappy=window.Mappy||{})},{}],94:[function(require,module,exports){"use strict";var _=require("./../../../lib/bower_components/underscore/underscore.js"),webglSupport=_.memoize(function(){var e=!!window.WebGLRenderingContext;if(e){for(var t=document.createElement("canvas"),i=["webgl","experimental-webgl","moz-webgl","webkit-3d"],o=!1,r=0;4>r;r++)try{if(o=t.getContext(i[r]),o&&"function"==typeof o.getParameter)return!0}catch(s){}return!1}return!1}),css3dSupport=_.memoize(function(){if(!window.getComputedStyle)return!1;var e,t=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(t,null);for(var o in i)void 0!==t.style[o]&&(t.style[o]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(i[o]));return document.body.removeChild(t),void 0!==e&&e.length>0&&"none"!==e});module.exports={hasTouchSupport:function(){return!!("ontouchstart"in window)||!!("msmaxtouchpoints"in window.navigator)},getOrientation:function(){var e=document.documentElement.clientHeight>document.documentElement.clientWidth;return{portrait:e,landscape:!e}},isIE6:function(){return eval('/*@cc_on window._ie6_ = !("XMLHttpRequest" in window);@*/'),"undefined"!=typeof window._ie6_&&window._ie6_===!0},isIE7:function(e,t){if(!t)throw new Error("Parameter userAgent missing");if(!e)throw new Error("Parameter appVersion missing");return!(!/msie 7./i.test(e)||/opera/i.test(t))},isIE8:function(e){if(!e)throw new Error("Parameter appVersion missing");return/msie 8./i.test(e)},isWindowsPhone:function(e){if(!e)throw new Error("Parameter userAgent missing");

return!!e.match(/Windows Phone/i)},isIPad:function(e){if(!e)throw new Error("Parameter userAgent missing");return!!e.match(/ipad/i)&&!this.isWindowsPhone(e)},isIPhone:function(e){if(!e)throw new Error("Parameter userAgent missing");return!!e.match(/iphone/i)&&!this.isWindowsPhone(e)},isMobile:function(e){return this.isIPhone(e)||this.isAndroid(e)||this.isWindowsPhone(e)},isAndroid:function(e){if(!e)throw new Error("Parameter userAgent missing");if(!e)throw new Error("Parameter userAgent missing");return!!e.match(/android/i)&&!this.isWindowsPhone(e)},isCrappyGalaxy:function(e){if(!e)throw new Error("Parameter userAgent missing");return/.*(Android 4.[0-3]).*(SAMSUNG GT|GT-I|GT-N).*/.test(e)},isAndroidTablet:function(e){if(!e)throw new Error("Parameter userAgent missing");var t=this.getOrientation(),i=parameters.size;return this.isAndroid(e)&&(t.landscape&&i>=parameters.sizes.medium||t.portrait&&i>=parameters.sizes.small)},getAndroidVersion:function(e){if(!e)throw new Error("Parameter userAgent missing");var t=e.match(/Android (\d+.\d+)/i);return t&&2===t.length?parseFloat(t[1]):4},hasDatePickerSupport:_.memoize(function(){var e=document.createElement("input");e.setAttribute("type","date");var t="text"!==e.type;return t}),isRetina:_.memoize(function(){var e="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return"undefined"!=typeof window&&window.devicePixelRatio>1?!0:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia(e).matches?!0:!1}),has3dSupport:function(){return webglSupport()||css3dSupport()}}},{"./../../../lib/bower_components/underscore/underscore.js":29}],95:[function(e,t,i){"use strict";var o=e("../../model/SessionModel"),r=function(){};Mappy.Validator=r,r.prototype.isValidViewMode=function(e){return e===o.VIEW_MODE_MAP||e===o.VIEW_MODE_IMMERSIVE},r.prototype.isValidZoomLevel=function(e){return"number"==typeof e},r.prototype.isValidYaw=function(e){return"number"==typeof e},r.prototype.isValidPitch=function(e){return"number"==typeof e},r.prototype.isValidUUID=function(e){return"string"==typeof e},r.prototype.isValidLng=function(e){return"number"==typeof e},r.prototype.isValidLat=function(e){return"number"==typeof e},r.prototype.isValidAlt=function(e){return"number"==typeof e},r.prototype.isValidSearchKeyword=function(e){return"string"==typeof e}},{"../../model/SessionModel":126}],96:[function(e,t,i){!function(e){"use strict";e.deepGet=function(e,t,i){var o;if("string"!=typeof t)return i;o=t.split(".");for(var r=0;r<o.length;r++){if(!e||!e.hasOwnProperty(o[r]))return i;e=e[o[r]]}return e}}(window.Mappy=window.Mappy||{})},{}],97:[function(e,t,i){!function(e){"use strict";var t={_:function(e){var i=t[e];if(!i){if(e.length-1)i=String.fromCharCode(e.substring(e.length-3?2:1));else{var o=e.charCodeAt(0);i=256>o?"%"+(0+o.toString(16)).slice(-2).toUpperCase():"%u"+("000"+o.toString(16)).slice(-4).toUpperCase()}t[i]=e,t[e]=i}return i}},i=window;e.escape=i.escape?i.escape:i.escape||function(e){return e.replace(/[^\w @\*\-\+\.\/]/g,function(e){return t._(e)})},e.unescape=i.unescape?i.unescape:i.unescape||function(e){return e.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(e){return t._(e)})}}(window.Mappy=window.Mappy||{})},{}],98:[function(e,t,i){!function(e){"use strict";var t=function(){try{this.enabled=!!window.localStorage}catch(e){this.enabled=!1}if(this.enabled){try{localStorage.setItem("localStorageEnabled","ok")}catch(e){this.enabled=!1}localStorage.removeItem("localStorageEnabled")}};t.prototype.get=function(e){return this.enabled?localStorage.getItem(e):null},t.prototype.set=function(e,t){this.enabled&&localStorage.setItem(e,t)},t.prototype.getList=function(){return this.enabled?localStorage:{}},t.prototype.remove=function(e){this.enabled&&localStorage.removeItem(e)},t.prototype.clear=function(){this.enabled&&localStorage.clear()},e.localStore=new t}(Mappy)},{}],99:[function(e,t,i){"use strict";var o=e("./Device.js");t.exports={isRetina:function(){return o.isRetina()},getImgPath:function(e){var t,i;return e&&(t=e.match(/\.(?:jpg|gif|png)/))?(i=this.isRetina()?2:1,e.replace(t[0],"-"+i+t[0])):null}}},{"./Device.js":94}],100:[function(e,t,i){"use strict";t.exports={roundFloat:function(e,t){return t=parseInt(t,10)||0,!t||0>t?Math.round(e):(t=Math.pow(10,t),Math.round(e*t)/t)}}},{}],101:[function(e,t,i){!function(e){"use strict";e.unObfuscateLink=function(e,t){$(t).removeClass("hiddenLink");for(var i="0A12B34C56D78E9F",o=document.createElement("a"),r=t.className.split(" "),s=r[0],n="",a=0;a<s.length;a+=2){var p=i.indexOf(s.charAt(a)),l=i.indexOf(s.charAt(a+1));n+=String.fromCharCode(16*p+l)}r.shift(),o.className=r.join(" "),o.href=n,o.innerHTML=t.innerHTML,-1===n.indexOf(window.location.host)&&(o.target="_blank"),$(t).replaceWith(o)}}(window.Mappy=window.Mappy||{})},{}],102:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js");Mappy.initializeExpense=function(){var e=window.parameters.gasCosts,t=function(){var e,t=$("#ItineraryFormView-tmo-auto-gasType").find("option:selected");e=t.length>0?t.attr("data-fuel-id"):"",$("#ItineraryFormView-petrolType").val(e)},i=function(){var i=$("#ItineraryFormView-tmo-auto-gascost");t();var o=$("#ItineraryFormView-tmo-auto-gasType").find("option:selected"),r=o.attr("data-fuel-id");i.val(e[r])},r=function(){if($("#ExpenseView")){var e=$("#ExpenseView"),r=t;e.find(".printItinerary").click(o.bind(function(e){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_ITINERARY_NDF_PRINT),e.preventDefault(),window.print()},this)),e.find("#ItineraryFormView-tmo-auto-vehicle").change(function(){var t=$(this).val(),i="",o="0";if(/^[23]{1}-[a-z0-9]+/.test(t)){var r=t.split("-");i=r[0]+"ax",t=r[1]}"caravancar"===t&&(t="midcar",o="1"),e.find("input.cvn").val(o),e.find("input.veh").val(t),e.find("input.axl").val(i)}),e.find(".printExpense").click(o.bind(function(e){e.preventDefault();var t=$(".itineraryFormVehicleCompensation input").val();$(".itineraryFormVehicleCompensation input").val(t.replace(",","."));var i=$("#ItineraryFormView-tmo-auto-gascost").val();$("#ItineraryFormView-tmo-auto-gascost").val(i.replace(",",".")),r(),$("form").submit()},this)),e.find("#ItineraryFormView-tmo-auto-gasType").change(i)}},s=function(){var t=$("#ItineraryFormView-tmo-auto-gasType").find("option:selected"),i=t.attr("data-fuel-id"),o=e[i],s=$("#ItineraryFormView-gasCostDefault");s.val()>0&&(o!==s.val()&&$.each(e,function(e,t){var i="#option-"+e;t===s.val()?$(i).attr("selected","selected"):$(i).length>0&&$(i).removeAttr("selected")}),s.val("")),r()};s()}},{"./../../lib/bower_components/underscore/underscore.js":29}],103:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("../model/SessionModel"),s=e("../model/PanoTileModel"),n=e("../model/LocationModel"),a=e("../view/map/LeafletMapView/LeafletMapView"),p=e("../view/index/IndexView"),l=e("../core/utils/Device.js");Mappy.initializePrintItinerary=function(){Mappy.ControllerFactory.getXitiController().tagPage(Mappy.XitiController.PAGE_PRINT_ITINERARY),L.Mappy.setImgPath(parameters.services.bucket+"images/");var e=L.PolylineUtil.decode(parameters.roadbookParams.polylineDefinition.polyline),t=function(t,i){t.doubleClickZoom.disable(),t.dragging.disable(),t.scrollWheelZoom.disable();{var o=L.featureGroup().addTo(t);L.featureGroup().addTo(t)}parameters.roadbookParams.rawRoutes.route[parameters.roadbookParams.routeIdx]["polyline-definition"].polyline=e,o=L.Mappy.route(parameters.roadbookParams.rawRoutes,parameters.roadbookParams.routeIdx).addTo(t),i&&t.fitBounds(o.getBounds(),{paddingTopLeft:[20,45],paddingBottomRight:[20,10]})},i=function(){var i=new L.Mappy.Map("ItineraryPopupView-map",{logoControl:a.LOGO_OPTIONS,zoomControl:!1,layersControl:!1,attributionControl:{position:"bottomleft"}});if(t(i,!0),parameters.roadbookParams.modes.length>1){var r,s,n,p,l,c,u,y,h=L.featureGroup().addTo(i);o.each(parameters.roadbookParams.modes,function(t,i){if(t.polylineIdx&&!t.isWaypoint&&"pedestrian"!==t.type){r=t.polylineIdx,s=parameters.roadbookParams.modes[i+1]?parseInt(parameters.roadbookParams.modes[i+1].polylineIdx,10)-1:e.length-1,l=0,c=[];for(var a=r;s>a;a++)u=Math.sqrt(Math.pow(e[a][0]-e[a+1][0],2)+Math.pow(e[a][1]-e[a+1][1],2)),c.push({lengthBefore:l,segLength:u,idx:a}),l+=u;n=l/2,y=o.find(c,function(e){return e.lengthBefore<n&&e.lengthBefore+e.segLength>n});var d=n-y.lengthBefore,g=d/y.segLength;p=L.latLng((e[y.idx+1][0]-e[y.idx][0])*g+e[y.idx][0],(e[y.idx+1][1]-e[y.idx][1])*g+e[y.idx][1]),L.marker(p,{icon:L.divIcon({className:"transport-frame",iconSize:null,html:parameters.roadbookParams.transportIcons.shift()}),clickable:!1,zIndexOffset:500}).addTo(h)}})}},c=function(){var i=jQuery(".action[data-coordX]");i.each(function(o,r){if(5>o||o>=i.length-5){var p=jQuery(r),l=parseFloat(p.data("coordx")),c=parseFloat(p.data("coordy")),u=parseInt(p.data("plidx"),10),y=parseInt(p.data("plidxto"),10),h=jQuery('<div class="actionDetails" />');h.appendTo(p);var d=jQuery('<div id="map-action-'+o+'" class="actionMapView"></div>');d.appendTo(h);var g=new L.Mappy.Map("map-action-"+o,{logoControl:a.LOGO_OPTIONS,zoomControl:!1,layersControl:!1});g.setView([c,l],17),g.doubleClickZoom.disable(),g.dragging.disable(),g.scrollWheelZoom.disable();var m,v=new n({lng:l,lat:c});m=new n(o===i.length-1?{lng:parameters.roadbookParams.destination.x,lat:parameters.roadbookParams.destination.y}:u>=y?{lng:parseFloat($(i[o+1]).data("coordx")),lat:parseFloat($(i[o+1]).data("coordy"))}:e[y]);var f=new s({from:v,to:m});f.fetch().then(function(e){var t=jQuery('<div class="action360View"></div>');h.prepend(t),t.append('<img src="'+e.get("url")+'" />')}).then(void 0,function(){p.find(".actionMapView").css("width","630px"),g.invalidateSize()}),t(g)}})},u=function(e){jQuery(".printHeader button").mousedown(function(){var t=e||("0"===$(".headerFormOptions input:checked").val()?Mappy.XitiController.XTC_ITINERARY_PRINT_SIMPLE:Mappy.XitiController.XTC_ITINERARY_PRINT_EXTENDED);Mappy.ControllerFactory.getXitiController().tagAction(t)}),jQuery(".headerFormOptions input").change(function(){jQuery(".actionDetails").toggle()})};Mappy.ControllerFactory.setIndexView(new p({isPrint:!0})),Mappy.ControllerFactory.setSessionModel(r.initSessionModel()),l.isIE8(navigator.appVersion,navigator.userAgent)?u(Mappy.XitiController.XTC_ITINERARY_PRINT_SIMPLE):(c(Mappy.ControllerFactory.getNavigationController()),u()),i()},l.isIE8(navigator.appVersion,navigator.userAgent)&&(document.body.className+=" ie8")},{"../core/utils/Device.js":94,"../model/LocationModel":121,"../model/PanoTileModel":123,"../model/SessionModel":126,"../view/index/IndexView":186,"../view/map/LeafletMapView/LeafletMapView":211,"./../../lib/bower_components/underscore/underscore.js":29}],104:[function(e,t,i){"use strict";Mappy.initializePrintMap=function(e,t,i){var o=new Mappy.XitiController;o.tagPage(Mappy.XitiController.PAGE_PRINT_MAP),L.Mappy.setImgPath(parameters.services.bucket+"images/");var r=new L.Mappy.Map("MapPopupView-mapContent",{logoControl:{dir:parameters.services.bucket+"images/",position:"topleft"},zoomControl:!1,layersControl:!1,attributionControl:{position:"bottomleft"}}),s='<a href="http://corporate.mappy.com/conditions-dutilisation/copyright/" target=blank>© Mappy</a>';r.attributionControl.setPrefix(s);for(var n=0;n<e.length;n++)"standard"===e[n]||"map"===e[n]||"new_hybrid"===e[n]||"hybrid"===e[n]||"photo"===e[n]?r.setViewmode(e[n]):r.setOverlay(e[n]);r.setView(t,i)}},{}],105:[function(e,t,i){(function(t){"use strict";function i(){Mappy.ControllerFactory.setIndexView(new o),Mappy.ControllerFactory.getMainController().initialize()}var o=e("../view/index/IndexView"),r=e("../collection/AbTestCollection"),s=e("../model/ApplicationsCategoriesModel"),n=e("../core/utils/Device.js"),a=t.parameters;Mappy.initialize=function(){if(-1!==window.location.hash.indexOf("window_close")&&window.close(),n.isIE6()||n.isIE7(navigator.appVersion,navigator.userAgent))return void(window.location.href="/browser-update");n.hasTouchSupport()&&(document.body.className+=" touch"),o.updateSize();var e=new s({url:a.services.poiassets,locale:"fr_FR"===a.locale?"fr_FR":"fr_BE",menuName:a.sizes&&a.size>=a.sizes.medium?"web":"webmobile"});Mappy.ControllerFactory.setAppCatConf(e),Mappy.abTestCollection=new r,Mappy.abTestCollection.fetch().then(function(e){e.init()}).then(function(){return Mappy.ControllerFactory.getAppCatConf().init()}).then(function(){!document.hidden||document.hasFocus()?(i(),Mappy.abTestCollection.start("apptitle")):$(document).one("visibilitychange",i)}).then(null,function(){Mappy.ControllerFactory.getAppCatConf().init().then(function(){!document.hidden||document.hasFocus()?i():$(document).one("visibilitychange",i)}).then(null,Mappy.logError)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collection/AbTestCollection":35,"../core/utils/Device.js":94,"../model/ApplicationsCategoriesModel":110,"../view/index/IndexView":186}],106:[function(e,t,i){!function(t,i){"use strict";var o=e("./../lib/bower_components/underscore/underscore.js"),r=e("./../lib/bower_components/jquery/dist/jquery.js"),s=e("./../lib/bower_components/es6-promise/promise.js"),n=e("./core/utils/Device");o.each(["view","controller","core","model","collection"],function(e){t[e]={}}),t.logError=function(e,t,o){function r(e){window.console&&window.console.log&&window.console.log(e)}var s;if(e&&e.stack){var n=e.stack.split("\n");s=n[0].replace(/^\s+/g,"").replace(/\s+$/g,""),n[1]&&(s+=" "+n[1].replace(/^\s+/g,"").replace(/\s+$/g,"")),r(e.stack)}else try{e.responseText&&(e.responseText=""),s=JSON.stringify(e)}catch(a){s=e}finally{r(s)}(new Image).src=i.services.errorjs+(t?encodeURIComponent(t):"portal.js")+"/"+(void 0!==o?o:"NA")+"/"+encodeURIComponent(s)},s.polyfill(),r.ajaxSetup({cache:!0}),r("[name='apple-itunes-app']").remove(),n.isCrappyGalaxy(navigator.userAgent)&&r("head").append("<style>@font-face {font-family: 'MappyIcons'; src: url('"+i.services.bucket+"fonts/MappyIcons-Regular.svg') format('svg') !important;}</style>")}(window.Mappy||{},window.parameters)},{"./../lib/bower_components/es6-promise/promise.js":13,"./../lib/bower_components/jquery/dist/jquery.js":24,"./../lib/bower_components/underscore/underscore.js":29,"./core/utils/Device":94}],107:[function(e,t,i){"use strict";{var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel");t.exports=r.extend({parse:function(e){return e.id=e.id.replace(/-/g,"_"),e.from=new Date(e.from),e.to=new Date(e.to),e.variants=o.map(e.variants,function(e){return e.id=e.id.replace(/-/g,"_"),e}),e},validate:function(e){var t=["id","from","to","variants","conditions"];if(!o.every(t,function(t){return!!e[t]}))return"missing attribute in abtest configuration";var i=0,r=!0,s=0;return o.each(e.variants,function(e){e.from===i&&e.id||(r=!1),i=e.to,s+=e.to-e.from},this),r=100!==s?!1:r,r?e.conditions.platforms&&e.conditions.platforms.join&&e.conditions.locales&&e.conditions.locales.join?void 0:"invalid abtest conditions":"invalid abtest variants"},isTargetted:function(){return this.isTargettedByDate()&&this.isTargettedByPlatform()&&this.isTargettedByLocale()},isTargettedByDate:function(){var e=new Date;return this.get("from")<e&&this.get("to")>e},isTargettedByPlatform:function(){return o.indexOf(this.get("conditions").platforms,"ge")>-1&&parameters.size>parameters.sizes.medium?!0:o.indexOf(this.get("conditions").platforms,"pe")>-1&&parameters.size<=parameters.sizes.medium?!0:!1},isTargettedByLocale:function(){return o.indexOf(this.get("conditions").locales,window.parameters.locale)>-1},getRandomId:function(){var e=JSON.parse(Mappy.localStore.get("ab")||"{}");return e&&e.id===this.id||(e={id:this.id,randomId:Math.floor(100*Math.random())},Mappy.localStore.set("ab",JSON.stringify(e))),e.randomId},getVariant:function(){var e=o.find(this.get("variants"),o.bind(function(e){return this.getRandomId()>=e.from&&this.getRandomId()<e.to},this));return e},start:function(){if(!this.started){var e=this.getVariant().id,t=this.hash(""+this.id)+"["+this.id+"]-1-"+this.hash(""+this.id+e)+"["+e+"]";Mappy.ControllerFactory.getXitiController().tagAbTest(t),this.started=!0}},hash:function(e){return murmurhash3_32_gc(e,31)}},{})}},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],108:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=e("./RoadPoiModel"),n=t.exports=r.extend({defaults:{type:"",meter:0,sec:0,wpNum:0,town:"",country:"",name:"",x:0,y:0,polyLineIndex:"",polyLineIndexTo:"",label:"",nextRoad:"",roadPois:[],roadSign:"",distance:0,duration:0},parse:function(e){var t=[];this.set("country",e.country),this.set("label",e.label),this.set("name",e.name),this.set("meter",parseInt(e.rmeter,10)),this.set("polylineIndex",parseInt(e["polyline-index"],10)),this.set("polylineIndexTo",e["polyline-index-to"]),this.set("wpNum",e["wp-num"]),this.set("sec",e.sec),this.set("freeBikes",parseInt(e["free-bikes"],10)),this.set("freeBlocks",parseInt(e["free-blocks"],10)),this.set("town",e.town),this.set("x",e.x),this.set("y",e.y),this.set("dataProvider",e.dataprovider),this.set("mode",e.mode),this.set("lineName",e.lineName),this.set("lineDir",e.lineDir),this.set("depDate",this._parseDate(e.depDate)),this.set("arrDate",this._parseDate(e.arrDate)),this.set("depStation",e.depStation),this.set("arrStation",e.arrStation),this.set("stationName",e["station-name"]),this.set("type",e.type),this.set("diffMeter",e.diffmeter),this.set("rDiffMeter",e.rdiffmeter);var i=o.indexOf(["start","end","waypoint","continue","turn-left","turn-right","place","ramp-left","ramp-right","ped-to-veh","veh-to-ped","ferry-enter","ferry-exit","ped-to-urban-bike","urban-bike-to-ped","walk-start","transport-wait","connection","transport","turn-slight-left","turn-slight-right","u-turn","ped-to-bike","bike-to-ped"],this.get("type"));if(-1!==i){var r=this.get("type").split("-");this.set("roadSign",o.map(r,function(e){return e.substr(0,1).toUpperCase()+e.substr(1)}).join(""))}if(e.poi){var n=o.isArray(e.poi)?e.poi:[e.poi];o.each(n,o.bind(function(e){t.push(new s(e))},this))}"town-enter"===this.get("type")&&t.push(new s({type:"townSign",label:this.get("town")})),this.set("roadPois",t)},_parseDate:function(e){return e?Mappy.twig.datetimeToTsp(e):null},toJSON:function(){var e=n.__super__.toJSON.call(this);return e.roadPois=o.map(this.get("roadPois"),function(e){return e.toJSON()}),e}})},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111,"./RoadPoiModel":124}],109:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=e("../core/utils/path"),n=t.exports=r.extend({defaults:{id:"",name:"",description:"",url:"",categoryModel:null,header:null,startup:null,filter:[],title:"",backgroundColor:[255,255,255],textColor:[0,52,107],foregroundIcon:null,backgroundSize:null,banner:null,hasCalendar:!1,isOtherApp:!1},initialize:function(e){this.set("tabLabel",e.tabLabel||e.name),this.set("tags",e.tags||[]),e.header&&this.set("header",s.getImgPath(e.header)),e.headerlarge&&this.set("headerlarge",s.getImgPath(e.headerlarge)),e.menu&&this.set("menu",s.getImgPath(e.menu)),o.indexOf(["hotel","accor","booking","bestwestern","bbhotel"],e.id)>-1&&this.set("hasCalendar",!0)},toJSON:function(){var e=n.__super__.toJSON.call(this);return e.categoryModel&&(e.categoryModel=e.categoryModel.toJSON()),e},getUrlIconBanner:function(){return this.get("banner")},getUrlIconBannerForScreen:function(){return s.getImgPath(this.getUrlIconBanner())}})},{"../core/utils/path":99,"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],110:[function(e,t,i){(function(i){"use strict";{var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=e("../collection/CategoryCollection"),n=e("../collection/ApplicationCollection");i.parameters,t.exports=r.extend({defaults:function(){this.set({categories:new s,applications:new n})},initialize:function(e){this.url=[e.url,"configuration/configuration.",e.locale,".json"].join(""),this.set("menuName",e.menuName)},parse:function(e){var t=this.get("categories");t.reset(t.parse(e,{menuName:this.get("menuName")}));var i=this.get("applications");i.add(i.parse(e.apps,{categories:t,freeapps:!1})),i.add(i.parse(e.freeApps,{categories:t,freeapps:!0}))},getApplicationById:function(e){var t=this.get("applications").get(e);if(!t)throw"No app found for "+e;return t},getMenu:function(){var e={};e.categories=this.get("categories").map(function(e){return e.toJSON()});var t=o.chain(this.get("applications").filterPublishedApps()).map(function(e){return e.toJSON()}).value();return e.applications=o.object(o.pluck(t,"id"),t),e},isEmpty:function(){return!(this.get("categories")&&0!==this.get("categories").length||this.get("applications")&&0!==this.get("applications").length)},empty:function(){this.get("categories")&&this.get("categories").reset(null),this.get("applications")&&this.get("applications").reset(null)},init:function(){return new Promise(o.bind(function(e,t){var i=0,r=o.bind(function(){return Mappy.poiassets?(this.parse(Mappy.poiassets),void e()):i>=3e3?void t("unable to load poiassets configuration"):(i+=50,void setTimeout(r,50))},this);r()},this))}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collection/ApplicationCollection":38,"../collection/CategoryCollection":40,"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],111:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./../../lib/bower_components/jquery/dist/jquery.js"),s=e("./../../lib/bower_components/backbone/backbone.js"),n=e("../core/error/error");s.$=r;var a=t.exports=s.Model.extend({getHash:function(e){e=e||[];var t="",i=0;for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&(o.contains(e,r)||(t+=this.attributes[r]instanceof a?this.attributes[r].getHash():this.attributes[r]));for(var s=0;s<t.length;s++)i=(i<<5)-i+t.charCodeAt(s),i&=i;return"Model"+i},equals:function(e){return e instanceof a?this.getHash()===e.getHash():!1},serialize:function(){return JSON.stringify(this)},fetch:function(e){return e=e||{},new Promise(o.bind(function(t,i){var r;e.beforeSend=o.bind(function(e){e.model=this.modelName,e.url=o.isFunction(this.url)?this.url():this.url},this),"jsonp"===e.dataType&&(r=setTimeout(function(){e.error(null,new n.JSONPTimeoutError)},2e3)),e.success=function(e){clearTimeout(r),t(e)},e.error=function(e,t){clearTimeout(r),i(t)},this.on("invalid",function(e,t){i(t)}),a.__super__.fetch.call(this,e)},this))}},{unserialize:function(e){var t=JSON.parse(e);return new this(t)}})},{"../core/error/error":88,"./../../lib/bower_components/backbone/backbone.js":12,"./../../lib/bower_components/jquery/dist/jquery.js":24,"./../../lib/bower_components/underscore/underscore.js":29}],112:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=t.exports=r.extend({defaults:{id:"",label:"",intro:"",iconId:"",apps:[],freeApps:[]},getRubricIds:function(){var e,t=this.get("subcategories");return e=0===t.length?[this.get("id")]:o.flatten(o.map(t,function(e){return e.get("rubricIds")}))},toJSON:function(){var e=s.__super__.toJSON.call(this);return e.subcategories=o.map(e.subcategories,function(e){return e.toJSON()}),e}})},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],113:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=t.exports=o.extend({defaults:{slug:""},url:function(){return"/front-services/city/description/"+this.get("slug")},fetch:function(e){return e=e||{},r.__super__.fetch.call(this,e)}})},{"./BaseModel":111}],114:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=e("../collection/BlockCollection"),s=t.exports=o.extend({defaults:function(){return{name:"",tabLabel:"",morePoisLabel:!1,color:[0,0,0],visibility:s.NORMAL,blocks:null}},initialize:function(){this.has("tabLabel")||this.set("tabLabel",this.get("name"));var e={geoentityId:this.get("geoentityId"),partnerId:this.id};r&&(this.get("blocks")instanceof r||this.set("blocks",new r(this.get("blocks"),e)))}},{NORMAL:"normal",DETAILS_ONLY:"details_only",HIDDEN:"hidden"})},{"../collection/BlockCollection":39,"./BaseModel":111}],115:[function(e,t,i){(function(i){"use strict";var o=i.parameters,r=e("./../../lib/bower_components/underscore/underscore.js"),s=e("../collection/GeoentityCollection"),n=e("./../../lib/bower_components/backbone/backbone.js"),a=e("../service/BUCTagger"),p=new a,l=e("./BaseModel"),c=t.exports=l.extend({urlFormat:"applications/${A}?bbox=${Y1},${X1},${Y2},${X2}&max=${M}",appId:null,rubricIds:null,geoBox:null,filters:null,viewport:null,_fetchOptions:{},initialize:function(e,t){t=t||{},this.geoBox=t.geoBox,this._appCatConf=t.appCatConf,c.__super__.initialize.call(this,null,t),e&&this.set("geoentities",new s(e,{parse:!0,appCatConf:t.appCatConf}))},url:function(){this.bucTag=this.appId?"SPD_RESPONSE_APPLICATION":"SPD_RESPONSE_CATEGORY";var e=o.services.geoentity,t=this.geoBox.get("minLng"),i=this.geoBox.get("minLat"),n=this.geoBox.get("maxLng"),a=this.geoBox.get("maxLat");e+=this.urlFormat.replace("${X1}",t).replace("${Y1}",i).replace("${X2}",n).replace("${Y2}",a).replace("${A}",this.appId?this.appId:this.rubricIds).replace("${M}",this._fetchOptions.limit||s.SEARCH_MAX_GEOENTITIES);var l=r.chain(this._fetchOptions).omit(["reset","success","error","limit","keyword","bucTag","beforeSend"]).map(function(e,t){return e?t+"="+e:null}).reject(function(e){return!e}).value().join("&");return l&&(e+=(-1===e.indexOf("?")?"?":"&")+l),this._fetchOptions.bucTag?e=p.updateURL(e,this._fetchOptions.bucTag):this.bucTag&&(e=p.updateURL(e,this.bucTag)),e},parse:function(e){return{geoentities:new s(e.pois,{parse:!0,appCatConf:this._appCatConf}),filters:new n.Collection(e.filters||[]),viewport:e.viewport}},reset:function(){this.set("geoentities",null),this.set("filters",null)},fetch:function(e){var t;return o.app.geoentities?(t=r.clone(o.app.geoentities),delete o.app.geoentities,this.set({geoentities:new s(t,{parse:!0,appCatConf:this._appCatConf}),filters:new n.Collection(o.app.categoryFilters||o.app.appFilters||[]),viewport:[]}),Promise.resolve(this)):(this._fetchOptions=e||{},this._fetchOptions.from&&r.isDate(this._fetchOptions.from)&&this._fetchOptions.to&&r.isDate(this._fetchOptions.to)&&(this._fetchOptions.from=Mappy.dateFormat?Mappy.dateFormat(this._fetchOptions.from,"yy-mm-dd"):this._fetchOptions.from,this._fetchOptions.to=Mappy.dateFormat?Mappy.dateFormat(this._fetchOptions.to,"yy-mm-dd"):this._fetchOptions.to),c.__super__.fetch.call(this,this._fetchOptions))},getGeoentities:function(){return this.get("geoentities")?this.get("geoentities").models:[]},clone:function(){var e=new c(null,{geoBox:this.geoBox});return e.set("filters",this.get("filters")),e.set("geoentities",this.get("geoentities")),e.appId=this.appId,e}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collection/GeoentityCollection":41,"../service/BUCTagger":159,"./../../lib/bower_components/backbone/backbone.js":12,"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],116:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=t.exports=o.extend({defaults:{maxLat:0,maxLng:0,minLat:0,minLng:0},scale:function(e){var t=Math.abs(this.get("maxLat")-this.get("minLat")),i=Math.abs(this.get("maxLng")-this.get("minLng")),o=.5*(e*i-i),s=.5*(e*t-t);return new r({maxLng:this.get("maxLng")+o,minLng:this.get("minLng")-o,maxLat:this.get("maxLat")+s,minLat:this.get("minLat")-s})},toGeoentityUrlParameter:function(){return[this.get("minLat"),this.get("minLng"),this.get("maxLat"),this.get("maxLng")].join(",")}},{createFromApiBounds:function(e){return new r({maxLat:e.getNorth(),minLat:e.getSouth(),maxLng:e.getEast(),minLng:e.getWest()})}})},{"./BaseModel":111}],117:[function(e,t,i){(function(i){"use strict";var o="undefined"==typeof window,r=i.parameters,s=e("./../../lib/bower_components/underscore/underscore.js"),n=e("./BaseModel"),a=e("./ViewDirectionModel"),p=e("./LocationModel"),l=e("./ContentModel"),c=e("../collection/GeoentityReviewCollection"),u=e("../service/BUCTagger"),y=new u,h=t.exports=n.extend({defaults:function(){return{id:"",type:"",name:"",prov:"",rubricId:"",brandId:"",brandIconUrl:"",offer:"",provider:"",visible:!1,phone:"",phoneRateMsg:"",pjBlocId:"",closestPanoramicId:"",indoors:null,hasDetails:!1,description:"",fax:"",applications:[],cornerShops:[],mail:"",mobile:"",viewDirection:null,url:"",reviewCollection:null,offerType:"",contextualPoiUrl:null,openingHours:null,isTooltipFull:!0,reviews:null,lat:null,lng:null}},constructor:function(e,t){this.options=t,n.apply(this,arguments)},getIcon:function(){return this.get("iconIdParent")},getAddressStr:function(){return this.get("name")+" - "+this.get("location").get("addressStr")},getHash:function(){var e=["additionalInfo","description","fax","applications","mail","mobile","viewDirection","url","logoURL","hasDetails","tags","reviewCollection","cornerShops","isTooltipFull"],t=Array.prototype.slice.call(arguments),i=e.concat(t);return h.__super__.getHash.call(this,i)},toJSON:function(e){var t=h.__super__.toJSON.call(this);return t.isReachable=this.isReachable(),t.location=t.location.toJSON(),t.icon=this.getIcon(),t.contents=s.map(t.contents,function(e){return e.toJSON()}),e&&e instanceof p&&(t.distanceFrom=e.getDistance(this.get("location").getGeoPosition())),t},isReachable:function(){return""!==this.get("closestPanoramicId")},filterContents:function(e){var t=s.isArray(e)?e:[e];this.set("contents",s.filter(this.get("contents"),function(e){return s.indexOf(t,e.id)>-1}))},url:function(){var e;return e=this.get("contextualPoiUrl")?this.get("contextualPoiUrl").replace("http://","https://"):r.services.geoentity+"geoentity/"+this.id+".json",o||(e=y.updateURL(e,"SPD_DETAIL_GEOENTITY")),e},validate:function(e){return s.has(e,"id")&&s.has(e,"type")?void 0:{message:"The model is not valid!"}},getLocation:function(){return this.get("location")},getAddress:function(){return this.getLocation()&&this.getLocation()},shouldHideContactInformations:function(){return void 0!==s.find(this.get("contents"),function(e){return-1!==s.indexOf(["accor","booking","pierreetvacances","bpvcamping"],e.get("id"))})},parse:function(e,t){var i={id:e.id,name:e.name,brandId:(e.brand||"").toLowerCase(),brandIconUrl:e.brandIconUrl,offer:(e.offer||"").toLowerCase(),provider:e.prov,visible:!!e.closestPanoramicId,phone:e.phone,phoneRateMsg:e.phoneRateMsg||"",tags:e.tags||[],rubricId:e.rubric?e.rubric.id:"lieu",parentRubricId:e.rubric&&e.rubric.parent?e.rubric.parent:null,rubricLabel:e.rubric?e.rubric.label:null,iconIdParent:e.rubric?e.rubric.parent:null,pjBlocId:e.pjBlocId,closestPanoramicId:e.closestPanoramicId,illustration:e.illustration,additionalInfo:e.additionalInfo,indoors:e.indoors,hasDetails:!!t.xhr,description:e.description,fax:e.fax,applications:e.linkedApps,mail:e.mail,mobile:e.mobile,lng:e.slng||e.lng,lat:e.slat||e.lat,alt:e.alt,viewDirection:e.niceView&&a?new a({yaw:e.niceView.yaw,pitch:e.niceView.pitch}):null,url:e.url,offerType:e.offerType,contextualPoiUrl:e.contextualPoiUrl,cornerShops:e.cornerShops,openingHours:e.openingHours,reviews:e.reviews,communication:e.communication,location:new p({lng:e.slng||e.lng,lat:e.slat||e.lat,alt:e.alt,countryNumericCode:e.countryCode||"",city:e.town,cityINSEECode:e.townCode,street:e.way||"",zipCodes:e.pCode,dptCode:e.pCode?e.pCode.substr(0,2):"",regionCode:e.regionCode||"",type:p.TYPE_WAY}),pjId:e.pjId};if(i.iconId=i.rubricId,i.additionalInfo&&(i.additionalInfo=s.extend({teasing:"",rating:0,reservationTemplatizedUrl:"",promo:!1,illustration:{url:""
},appId:""},i.additionalInfo)),!t.collection){var o=this.options&&this.options.appCatConf||Mappy.ControllerFactory.getAppCatConf();i.contents=this._getContents(e.id,e.tabs,o)}return e.pjRatingId&&(i.reviewCollection=new c([],{pjRatingId:e.pjRatingId,geoentityId:e.id})),i},fetch:function(e){return this.options=s.extend({},this.options,e),h.__super__.fetch.call(this,e)},getParentRubric:function(){return this.get("iconIdParent")||""},_getContents:function(e,t,o){var r=[];if(t)for(var s in t)if(t.hasOwnProperty(s))try{var n=o&&o.getApplicationById(t[s].appId);if(n){var a=n.toJSON();a.geoentityId=e;var p=new l(a);p.url=t[s].url,n.get("published")||p.set("visibility",l.HIDDEN),r.push(p)}}catch(c){i&&i.console&&i.console.error&&i.console.error(c)}return r}},{unserialize:function(e){var t=JSON.parse(e);return new h(t,{appCatConf:this.options&&this.options.appCatConf})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collection/GeoentityReviewCollection":42,"../service/BUCTagger":159,"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111,"./ContentModel":114,"./LocationModel":121,"./ViewDirectionModel":139}],118:[function(e,t,i){"use strict";{var o=e("./BaseModel");t.exports=o.extend({defaults:{title:"",strength:"",weakness:""}})}},{"./BaseModel":111}],119:[function(e,t,i){(function(i){"use strict";var o=e("./BaseModel"),r=i.parameters,s=t.exports=o.extend({defaults:{id:"",from:"",to:"",capacity:0,label:"",price:0,currency:"€",reservationUrl:"",hotelExternalId:""},url:function(){var e=r.services.geoentity+"hotel/${ID}/${F},${T}.json";return e=e.replace("${ID}",this.get("id")).replace("${F}",Mappy.dateFormat(this.get("from"),"yy-mm-dd")).replace("${T}",Mappy.dateFormat(this.get("to"),"yy-mm-dd"))},validate:function(e){return e.reservationUrl?null:{message:"The reservation url is not valid!"}},fetch:function(e){return e=e||{},s.__super__.fetch.call(this,e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BaseModel":111}],120:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=e("../service/BUCTagger"),n=e("../collection/RouteCollection"),a=e("../model/RouteModel"),p=new s,l=t.exports=r.extend({defaults:{steps:null,fromLocation:null,toLocation:null,interstitial:!1,advertisingParams:{}},_locales:{fr:"fre",en:"eng",nl:"nld"},initialize:function(e){l.__super__.initialize.call(this,e),this.set("itineraryForm",e.itineraryForm)},url:function(){this.queryParams=this.get("itineraryForm").getQueryParams();var e=this.queryParams.transport_mode?parameters.services.rmm:parameters.services.rmmveh;this.queryParams.wt="json",this.queryParams["rb.lang"]=this._locales[parameters.locale.substr(0,2)]||"fre";var t=e+decodeURIComponent($.param(this.queryParams));return t=p.updateURL(t,"SPD_RESPONSE_ITINERARY")},parse:function(e){if(e.routes.route.stats&&e.routes.route.stats.error&&"none"!==e.routes.route.stats.error)return{error:e.routes.route.stats.error};e.routes.route.length||(e.routes.route=[e.routes.route]),o.each(e.routes.route,function(e){e["polyline-definition"]&&(e["polyline-definition"].polyline=L.PolylineUtil.decode(e["polyline-definition"].polyline))});var t=e.routes;e.routes=new n,o.each(t.route,o.bind(function(t){e.routes.add(new a(t,this.get("itineraryForm")||e.itineraryForm))},this)),e.rawRoutes=t;var i={},r=e.routes.models[0].get("distance"),s=e.routes.models[0].get("summary"),p=e.routes.models[0].get("mode"),l={comcar:"voiture-petite",midcar:"voiture-moyenne",sedcar:"voiture-routiere",luxcar:"voiture-grande",caravancar:"voiture-caravane","lt3.5":"pl",lt12:"pl",gt12a:"pl",gt12:"pl",mot:"moto",van:"campingcar",coa:"bus"};switch(p){case"tc":i.mode="transport";break;case"pieton":i.mode="pieton";break;case"velo":i.mode=s.get("urbanBikeTime")?"velib":"velo";break;default:if(i.mode=l[this.queryParams&&this.queryParams["rb.veh"]?this.queryParams["rb.veh"]:"midcar"],this.queryParams){var c=this.queryParams["rb.axl"];"2ax"===c?i.mode+="2":"3ax"===c&&(i.mode+="3"),this.queryParams["rb.cvn"]&&"1"===this.queryParams["rb.cvn"]&&(i.mode="utilitaire")}}return i.dist=100*Math.round(r/1e5),i.d=Math.round(r/1e3),e.advertisingParams=i,e},addAdvertisingParams:function(e){var t=this.get("advertisingParams");this.set("advertisingParams",o.extend(t,e))},fetch:function(e){return e=e||{},l.__super__.fetch.call(this,e).then(void 0,function(e){return e.type="serverError",Promise.reject(e)})}})},{"../collection/RouteCollection":44,"../model/RouteModel":125,"../service/BUCTagger":159,"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],121:[function(e,t,i){(function(i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=e("../core/error/error"),n=e("./CityDescriptionModel"),a=e("./TrafficDescriptionModel"),p=e("../service/slugify"),l=e("./GeoBoxModel"),c=i.parameters,u=t.exports=r.extend({defaults:{name:"",type:"",thoroughfare:"",thoroughfareLabel:"",geocodeLevel:3,addressStr:null,coordinates:null,zoomLevel:1,country:"",countryNumericCode:0,city:"",cityINSEECode:"",street:"",streetNumber:"",score:0,rawAddress:"",separatedText:"",description:null,traffic:null,regionCode:"",region:"",rid:null,ridPct:50,way:null,lat:null,lng:null},initialize:function(){o.indexOf(u.TRANSLATED_THOROUGHFARE,this.get("thoroughfare"))>-1&&"undefined"!=typeof Template&&this.set("thoroughfareLabel",Template.getText("thoroughfare.label."+this.get("thoroughfare")));var e=this.get("zipCodes");if(this.set("zipCodes",e?o.isArray(e)?e:[e]:[]),this.has("fullAddress")&&!this.get("addressStr")&&this.set("addressStr",this.get("fullAddress")),this.has("lat")&&this.get("lng")&&(this.set("lng",parseFloat(this.get("lng"))),this.set("lat",parseFloat(this.get("lat")))),this.unset("fullAddress"),this.has("way")||this.set("way",this.get("street")),this.has("addressStr")||this.set("addressStr",this.get("way")+", "+this.get("zipCodes")[0]+" "+this.get("city")),this.get("zipCodes").length&&this.get("city")){var t=this.get("zipCodes")[0];t=t.split(/\s*-\s*/)[0];var i=t+"-"+p(this.get("city"),!0);this.get("description")instanceof n||this.set("description",new n({slug:i})),this.get("traffic")instanceof a||this.set("traffic",new a({slug:i}))}},getAddressStr:function(){return this.get("rawAddress")},getZoomLevel:function(){var e=this.get("geocodeLevel");return u.GEOCODE_ZOOMLEVELS[e]||u.GEOCODE_ZOOMLEVELS_GEOJSON[e]||7},isEmpty:function(){return!this.has("lat")},toJSON:function(){var e=u.__super__.toJSON.call(this);return e.description=e.description?e.description.get("description"):null,e.traffic=e.traffic?e.traffic.toJSON():null,e.zip=this.getZip(),e.town=this.getTown(),e},serialize:function(){var e=this.toJSON();return e.description="",JSON.stringify(e)},validate:function(e){return this.has("geocodeLevel")&&e.lat?null:{message:"The location is not valid!"}},getLocation:function(){return this},parse:function(e){var t,i,o,r=u._resolve;if(e.type&&"Feature"===e.type){var s=e.geometry.geometries,n=e.properties,a=n.address_components;o=n.geocode_level,i=s[0].coordinates,t={name:n.formatted_address,geocodeLevel:o,thoroughfare:"",type:u.TYPE_CITY,lng:parseFloat(i[0]),lat:parseFloat(i[1]),coordinates:i,zoomLevel:o?u.GEOCODE_ZOOMLEVELS_GEOJSON[o]:3,addressStr:r("formatted_address.label",n),country:a.country.label,countryNumericCode:parseInt(a.country.code,10),city:r("town.label",a),cityINSEECode:r("town.code",a),zipCodes:a.postcode,score:100,rawAddress:n.formatted_address.label,separatedText:n.formatted_address.split_label,regionCode:a.admin_1?a.admin_1.code:a.admin_2?a.admin_2.code:a.admin_3?a.admin_3.code:a.admin_4?a.admin_4.code:a.admin_5?a.admin_5.code:a.admin_6?a.admin_6.code:a.admin_7?a.admin_7.code:"",region:a.admin_1?a.admin_1.label:a.admin_2?a.admin_2.label:a.admin_3?a.admin_3.label:a.admin_4?a.admin_4.label:a.admin_5?a.admin_5.label:a.admin_6?a.admin_6.label:a.admin_7?a.admin_7.label:"",dptCode:a.admin_7?a.admin_7.code:"",geojson:e},a.way&&(t.type=u.TYPE_WAY,t.street=a.way),a.way_number&&(t.streetNumber=a.way_number),o===u.TYPE_LANDMARK&&(t.type=u.TYPE_LANDMARK)}else{var p=e.kml&&e.kml.Document&&e.kml.Document.Placemark?r("kml.Document.Placemark",e):e;i=(r("Point.coordinates",p)||"").split(",");var l=r("ExtendedData",p),y=r("AddressDetails.Country",p),h=r("AdministrativeArea.Locality",y)||r("Locality",y),d=r("mappy:address_lines",l),g="Named place"===r("DependentLocality.Type",h),m=r("Thoroughfare",h)||r("DependentLocality.Thoroughfare",h),v=r("Thoroughfare.ThoroughfareNumber",h),f=u._extractZip(g,m,h);o=parseInt(r("mappy:LocalGeocodeLevel.mappy:code",l),10),t={name:r("name",p),geocodeLevel:o,thoroughfare:r("Thoroughfare.Type",h),lng:parseFloat(i[0]),lat:parseFloat(i[1]),coordinates:i,zoomLevel:u.GEOCODE_ZOOMLEVELS[o],addressStr:r("name",p),country:r("CountryName",y),countryNumericCode:parseInt(r("CountryNameCode.value",y),10),city:r("LocalityName",h),cityINSEECode:r("mappy:OfficialTownCode",l),zipCodes:f,score:parseFloat(r("mappy:global_score",l))||c.filterMinScore,rawAddress:r("mappy:address",l),separatedText:r("mappy:line",d),regionCode:r("mappy:SubcountryIsoCode",l),region:r("AdministrativeArea.AdministrativeAreaName",y),dptCode:f[0]?f[0].substr(0,2):""},m?(t.type=u.TYPE_WAY,t.street=r("Thoroughfare.ThoroughfareName",h)||r("DependentLocality.Thoroughfare.ThoroughfareName",h),v&&v.length&&(t.streetNumber=parseInt(r("value",v[0]),10))):(t.type=u.TYPE_CITY,g&&(t.street=r("DependentLocality.DependentLocalityName",h)))}return t},url:function(){var e=c.services.loc,t={"opt.format":"json","opt.language":"FRE","opt.xmlOutput":"3v0","opt.namedPlaceSearch":1};if(t["opt.favoriteCountry"]=this.get("opt.favoriteCountry"),t["opt.language"]=this.get("opt.language"),t["opt.interactive"]=this.get("opt.interactive")||0,this.isEmpty()){if(!this.has("addressStr"))throw new Error("The geoPosition or the address should be present!");t.fullAddress=encodeURIComponent(this.get("addressStr"))}else t.x=this.get("lng"),t.y=this.get("lat");return e+=o.map(t,function(e,t){return t+"="+e}).join("&")},fetch:function(e){return e=e||{},e.dataType="jsonp",u.__super__.fetch.call(this,e)},toString:function(){return this.get("street")+" "+this.get("zipCodes")+" "+this.get("city")},getHash:function(){var e=["score","description"],t=Array.prototype.slice.call(arguments),i=e.concat(t);return u.__super__.getHash.call(this,i)},isDetailed:function(){return!!this.get("addressStr")},getZip:function(){return this.get("zipCodes")[0]},getTown:function(){return this.get("city")},getInseeCode:function(){return this.get("cityINSEECode")},getDistance:function(e){var t=6378137,i=Math.pow(t,2),o=6356752.314,r=(e.lng-this.get("lng"))*Math.PI/180,s=(e.lat-this.get("lat"))*Math.PI/180,n=(e.lat+this.get("lat"))/2*Math.PI/180,a=Math.pow(Math.tan(n),2),p=Math.pow(i*r/Math.sqrt(i+o*o*a),2),l=Math.pow(s*t,2);return Math.sqrt(p+l)},toArray:function(){return[this.get("lat"),this.get("lng"),this.get("alt")]},getGeoPosition:function(){return{lat:this.get("lat"),lng:this.get("lng")}},toGeobox:function(e){var t=this._getDistantPoint(-e),i=this._getDistantPoint(e);return new l({maxLat:t.lat,maxLng:t.lng,minLat:i.lat,minLng:i.lng})},_getDistantPoint:function(e){var t=6378137;return{lat:this.get("lat")-e/t*180/Math.PI,lng:this.get("lng")-e*Math.sqrt(Math.pow(t,2)+t*Math.pow(Math.tan(this.get("lat")*Math.PI/180),2))/Math.pow(t,2)*180/Math.PI}}},{fromNavigatorGeolocation:function(e){return new Promise(function(t,i){return navigator.geolocation?void navigator.geolocation.getCurrentPosition(function(r){var n=o.extend({lng:r.coords.longitude,lat:r.coords.latitude},e);new u(n).fetch().then(t,function(){i(new s.NavigatorGeolocationError("navigator_geolocation.failed"))})},function(){i(new s.NavigatorGeolocationError("navigator_geolocation.disabled"))},{timeout:5e3}):void i(new s.NavigatorGeolocationError("navigator_geolocation.not_supported"))})},unserialize:function(e){var t=JSON.parse(e);return new u(t)},_resolve:function(e,t){var i=null;if(t){var o=e.split(".");i=t[o[0]];for(var r=1,s=o.length;s>r&&i;r++)i=i[o[r]]}return i||null},_objectToArray:function(e){var t=Object.prototype.toString.call(e).toLowerCase();return t.indexOf("array")>-1?e:e?[e]:[]},_extractZip:function(e,t,i){var o="";e&&t?o="DependentLocality.Thoroughfare.":e?o="DependentLocality.":t&&(o="Thoroughfare.");var r=this._objectToArray(this._resolve(o+"PostalCode.PostalCodeNumber",i));return r.length||(r=this._objectToArray(this._resolve("PostalCode.PostalCodeNumber",i))),r},TYPE_CITY:"town",TYPE_WAY:"way",TYPE_LANDMARK:"landmark",GEOCODE_ZOOMLEVELS:{1:5,2:8,3:11,4:15,5:17},GEOCODE_ZOOMLEVELS_GEOJSON:{country:5,admin_1:7,admin_2:7,admin_7:7,town:11,district:13,way:15,landmark:17,named_place:17,address_range:17,address_point:17},TRANSLATED_THOROUGHFARE:["3","6","8","12","14","15","11","13","20","23","25","31","42","44","46"]})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/error/error":88,"../service/slugify":162,"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111,"./CityDescriptionModel":113,"./GeoBoxModel":116,"./TrafficDescriptionModel":135}],122:[function(e,t,i){"use strict";var o=(e("./../../lib/bower_components/underscore/underscore.js"),e("./BaseModel")),r=t.exports=o.extend({defaults:{itineraryModel:null},parse:function(e){var t=new Date;return e.outboundDate=t.getTime()/1e3,e},validate:function(e){return e.error?"no ouibus results":void 0},url:function(){var e=this.get("itineraryModel").get("fromLocation"),t=this.get("itineraryModel").get("toLocation"),i=e.get("zipCodes")||[],o=t.get("zipCodes")||[],r=parameters.services.frontservices+"ouibus/fare?";return r+$.param({startlng:e.get("lng"),startlat:e.get("lat"),startpostcode:i[0]||"",endlng:t.get("lng"),endlat:t.get("lat"),endpostcode:o[0]||""})},fetch:function(e){return r.__super__.fetch.call(this,{validate:!0})}})},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],123:[function(e,t,i){(function(i){"use strict";{var o=e("./BaseModel"),r=i.parameters;t.exports=o.extend({url:function(){var e="panoramics/${X1},${Y1},100/tiles/geodetic/${X2},${Y2}.json".replace("${X1}",this.get("from").get("lat")).replace("${Y1}",this.get("from").get("lng")).replace("${X2}",this.get("to").get("lat")).replace("${Y2}",this.get("to").get("lng")).concat(this.get("preview")===!0?"?preview=true":"");return r.services.pano+e}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BaseModel":111}],124:[function(e,t,i){"use strict";{var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel");t.exports=r.extend({defaults:{type:"",meter:"",name:"",sec:"",x:"",y:"",label:"",speedLimit:"",len:"",currency:"",amount:"",pop:"",codeAlert:"",codeAlertC:"",quantity:"",comment:"",lines:[],heads:[]},initialize:function(e){this.set("speedLimit",e["speed-limit"]||""),this.set("codeAlert",e["code-alert"]||""),this.set("codeAlertC",e["code-alert-c"]||""),"shield"===this.get("type")&&this._parseShield(e)},_parseShield:function(e){var t=[],i=[];if(e.lines&&e.lines.line){var r=o.isArray(e.lines.line)?e.lines.line:[e.lines.line];if(o.each(r,function(e){t.push({type:e.dir.type,color:e.dir.color,fontColor:e.dir["font-color"],font:e.dir.font,value:e.dir.value})}),e.head){var s=o.isArray(e.head.num)?e.head.num:[e.head.num];o.each(s,function(e){i.push({color:e.color,fontColor:e["font-color"],value:e.value})})}this.set("heads",i),this.set("lines",t)}}})}},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],125:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=e("./SummaryModel"),n=e("./StageModel"),a=e("./ActionModel"),p=75,l=100,c=t.exports=r.extend({defaults:{summary:null,stages:null,distance:0,polyLine:"",mode:""},initialize:function(e,t){var i=e.summary||{};if(this.set("mode",t.get("mode")),this.set("summary",new s(e,t)),this.set("stages",this._parseStages(e)),this.set("distance",parseInt(i.length,10)),this.set("pushes",this._parsePushes(e.pushes||[])),e["polyline-definition"]){var o=e["polyline-definition"]["road-section-collection"]["road-sections"];this.set("polyline",e["polyline-definition"].polyline),this.set("roadSections",o.length?o:[o])}},_parsePushes:function(){var e=this.get("summary").get("length")/1e3,t=[];return"fr_FR"!==parameters.locale&&"fr_BE"!==parameters.locale?t:(e>=p&&"auto"===this.get("mode")?(t.push("hotel"),"fr_FR"===parameters.locale&&(t.push("vsc"),t.push("blablacar"),t.push(l>e||Math.random()>=.5?"driiveme":"ouibus"))):p>e&&t.push("uber"),t)},_parseStages:function(e){var t=[],i=0,o=new n;o.set("type","pedestrian");for(var r=null,s=e.actions.action||[],p=s.length-1,l=0;p>=l;l++){var c=s[l],u=p>l?s[l+1]:null,y=new a;y.parse(c);var h=this._getStageFromActionType(c.type);if(c.mode)t.push(o),o=new n,o.set("type",c.mode);else{switch(c.type){case"walk-start":"pedestrian"!==o.get("mode")&&(t.push(o),o=new n),o.set("type","pedestrian");break;case"ped-to-urban-bike":o.set("type","pedestrian"),t.push(o),o=new n,o.set("type","bike");break;case"urban-bike-to-ped":}r&&("transport"===r.type&&"pedestrian"!==o.get("type")&&(t.push(o),o=new n,o.set("type","connection")),"urban-bike-to-ped"===r.type&&(t.push(o),o=new n,o.set("type","pedestrian")))}if(p>l?(y.set("duration",parseInt(u.sec,10)-parseInt(c.sec,10)),y.set("distance",parseInt(u.rmeter,10)-parseInt(c.rmeter,10)),y.get("distance")<0&&y.set("distance",0)):l===p&&(y.set("distance",0),y.set("duration",0)),o.get("stageType")||o.set("stageType",h),h!==o.get("stageType")){var d=o.get("type");t.push(o),o=new n,o.set("stageType",h),o.set("type",d)}i+=parseInt(c["traffic-delay"]||0,10),y.set("sec",parseInt(y.get("sec"),10)+i),o.addAction(y),r=c}return t.push(o),t},_getStageFromActionType:function(e){switch(e){case"start":return"start";case"end":return"end";case"waypoint":return"waypoint";default:return"stage"}},toJSON:function(){var e=c.__super__.toJSON.call(this);return e.summary=this.get("summary").toJSON(),e.stages=o.map(this.get("stages"),function(e){return e.toJSON()}),this.get("summary").toJSON(),e}})},{"./../../lib/bower_components/underscore/underscore.js":29,"./ActionModel":108,"./BaseModel":111,"./StageModel":130,"./SummaryModel":133}],126:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("../core/utils/roundFloat.js").roundFloat,s=e("./BaseModel"),n=e("./LocationModel"),a=e("./form/ItineraryFormModel"),p=e("./FiltersAndGeoentitiesModel"),l=e("./ViewDirectionModel"),c=t.exports=s.extend({defaults:{viewMode:"map",activeTabId:"",location:null,geoBox:null,zoomLevel:0,searchKeyword:"",itineraryForm:null,immersiveRadius:0,fullGeoentity:null,fullGeoentityId:"",partner:null,partnerId:"",app:null,appId:"",viewDirection:null,lang:null,lastLocation:null,currentItinerary:null,currentFromModel:null,currentToModel:null,currentAddress:null,lastGeoentitiesResults:new p,lastGeoentitiesResultsListMode:!1,currentLocationsResult:[],lastLocationsResults:[],activeViewModes:null,suggestKeyword:"",permalinkInit:!("/"===window.location.pathname||"/new"===window.location.pathname)||!!window.location.hash,browserGeoPosition:null,fullListMode:null},merge:function(e){o.each(c.SESSION_ATTRIBUTES,o.bind(function(t){"location"===t&&e.get(t)?e.get(t).isEmpty()||this.set(t,e.get(t)):e.get(t)&&this.set(t,e.get(t))},this))},shouldDisplayUserSurvey:function(e){var t=o.indexOf([Mappy.TabControllerFactory.TAB_HOME,Mappy.TabControllerFactory.TAB_HOME_ITINERARY,Mappy.TabControllerFactory.TAB_SHOPPING],this.get("activeTabId"))>-1,i=parseInt(Mappy.localStore.get("userSurvey"),10)||0;return"fr_FR"!==window.parameters.locale||window.parameters.size<window.parameters.sizes.normal||i+2592e6>(new Date).getTime()||!t||Math.floor(100*e)>c.USERSURVEY_MAX_SCORE?!1:!0},isFirstVisit:function(){if(!this.get("firstVisit")){var e=Mappy.localStore.get("firstVisit");this.set("firstVisit",!e||parseInt(e,10)<(new Date).getTime()-31536e6)}return this.get("firstVisit")},saveFirstVisit:function(){Mappy.localStore.set("firstVisit",(new Date).getTime())},getPermalinkURL:function(){var e,t=[],i=window.location.protocol+"//"+window.location.host+"/",o="";return this.get("viewMode")&&(e=0,this.get("viewMode")===c.VIEW_MODE_IMMERSIVE?e=1:this.get("viewMode")===c.VIEW_MODE_MAP&&(e=2),t.push("M"+e)),this.get("activeTabId")&&t.push("T"+this.get("activeTabId")),this.get("currentAddress")&&t.push("A"+$.param({key:this.get("currentAddress")}).split("=")[1]),this.get("searchKeyword")&&t.push("S"+$.param({key:this.get("searchKeyword")}).split("=")[1]),!this.get("itineraryForm")||this.get("activeTabId")!==Mappy.TabControllerFactory.TAB_ITINERARY&&this.get("activeTabId")!==Mappy.TabControllerFactory.TAB_HOME_ITINERARY||t.push("I"+this.get("itineraryForm").urlSerialize(new a)),this.get("fullGeoentityId")&&(t.push("F"+this.get("fullGeoentityId")),this.get("fullGeoentity")&&(o="poi/"+this.get("fullGeoentity").get("id"))),this.get("viewDirection")&&this.get("location")&&t.push("N"+r(this.get("viewDirection").get("yaw"),5)+c.PERMALINK_VALUE_SPLIT+r(this.get("viewDirection").get("pitch"),5)+c.PERMALINK_VALUE_SPLIT+r(this.get("location").get("lng"),5)+c.PERMALINK_VALUE_SPLIT+r(this.get("location").get("lat"),5)),this.get("zoomLevel")&&t.push("Z"+this.get("zoomLevel")),t.splice(0,0,""),t.push(""),i+o+"#"+t.join(c.PERMALINK_SECTION_SPLIT)},getTitle:function(){var e=c.TITLES,t=this.get("activeTabId"),i=this._appCatConf.get("applications"),o=this._appCatConf.get("categories"),r=i.find(function(e){return e.get("id")===t});if(r)return r.get("name")+(r.get("menuDescription")?" - "+r.get("menuDescription"):"");if(o.findSubCategoryById(t))return o.findSubCategoryById(t).get("label");var s=o.find(function(e){return e.get("id")===t});if(s)return s.get("label")+" - "+s.get("intro");var n=e[t];return n?"string"==typeof n?Template.getText(n):"function"==typeof n?n.call(this,this):void 0:!1},getApplicationParams:function(e){return this.get("applicationParams")||this.set("applicationParams",{appId:e,params:{}}),null===e||this.get("applicationParams").appId===e||"hotel"===e&&-1!==o.indexOf(["hotel","accor","booking","bestwestern","bbhotel"],this.get("applicationParams").appId)||this.set("applicationParams",{appId:e,params:{}}),this.get("applicationParams").params.params||(this.get("applicationParams").params.params={}),this.get("applicationParams").params.display||(this.get("applicationParams").params.display={}),this.get("applicationParams").params},resetApplicationParams:function(e){e=o.isArray(e)?e:[e];var t=this.get("applicationParams")||{};o.contains(e,t.appId)&&this.set("applicationParams",null)},isViewModeImmersive:function(){return this.get("viewMode")===c.VIEW_MODE_IMMERSIVE},isViewModeMap:function(){return this.get("viewMode")===c.VIEW_MODE_MAP},isPermalinkInit:function(){return this.get("permalinkInit")}},{USERSURVEY_MAX_SCORE:6,SESSION_ATTRIBUTES:["viewMode","activeTabId","location","geoBox","zoomLevel","searchKeyword","itineraryForm","immersiveRadius","fullGeoentity","fullGeoentityId","partner","partnerId","app","appId","viewDirection","lang","activeViewModes","currentAddress","fullListMode"],PERMALINK_VALUE_SPLIT:",",PERMALINK_SECTION_SPLIT:"/",VIEW_MODE_IMMERSIVE:"immersive",VIEW_MODE_MAP:"map",TITLES:{Home:"title.default",ItineraryHome:"title.hpitinerary.auto",Itinerary:function(e){return Template.getText("meta.title.itinerary.auto",{"%from%":e.get("itineraryForm").get("from").get("value"),"%to%":e.get("itineraryForm").get("to").get("value")})},Geoentity:function(e){var t=e.get("fullGeoentity");return t?Template.getText("meta.title.poi",{"%name%":t.get("name"),"%rubrique%":t.get("rubricLabel"),"%way%":t.get("location").get("way"),"%zip%":t.get("location").get("zipCodes")[0],"%town%":t.get("location").get("city")}):!1},TrafficHome:"title.hpTraffic",Traffic:function(e){return Template.getText("title.traffic",{"%city%":e.get("searchKeyword")})},Hotel:"title.hotel",hotel:"title.hotel"},getDefaultSessionModel:function(){var e=new c({activeTabId:Mappy.TabControllerFactory.TAB_HOME,viewMode:c.VIEW_MODE,lang:"fr",viewDirection:new l(window.parameters.entryPoint.viewDirection||{})});return e},getPermalinkSessionModel:function(e){var t=new c({}),i=new a;if(!e&&"undefined"!=typeof parameters.defaults){var o=new Mappy.Validator;o.isValidUUID(parameters.defaults.fullGeoentityId)&&t.set("fullGeoentityId",parameters.defaults.fullGeoentityId),o.isValidLng(parameters.defaults.viewerLng)&&o.isValidLat(parameters.defaults.viewerLat)&&o.isValidAlt(parameters.defaults.viewerAlt)?t.set("location",new n({lng:parameters.defaults.viewerLng,lat:parameters.defaults.viewerLat,alt:parameters.defaults.viewerAlt,"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]})):o.isValidLng(parameters.defaults.viewerLng)&&o.isValidLat(parameters.defaults.viewerLat)&&t.set("location",new n({lng:parameters.defaults.viewerLng,lat:parameters.defaults.viewerLat,"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]})),o.isValidYaw(parameters.defaults.viewerYaw)&&o.isValidPitch(parameters.defaults.viewerPitch)&&t.set("viewDirection",new l({yaw:parameters.defaults.viewerYaw,pitch:parameters.defaults.viewerPitch})),o.isValidZoomLevel(parameters.defaults.mapZoomLevel)&&t.set("zoomLevel",parameters.defaults.mapZoomLevel),o.isValidUUID(parameters.defaults.appId)&&t.set("appId",parameters.defaults.appId),o.isValidViewMode(parameters.defaults.rendering)&&t.set("viewMode",parameters.defaults.rendering),parameters.defaults.itineraryForm&&t.set("itineraryForm",i.urlUnserialize(parameters.defaults.itineraryForm)),parameters.defaults.activeTabId&&t.set("activeTabId",parameters.defaults.activeTabId),o.isValidSearchKeyword(parameters.defaults.query)&&t.set("searchKeyword",parameters.defaults.query),parameters.defaults.fullListMode&&t.set("fullListMode",parameters.defaults.fullListMode)}var r,s,p=c.getURLFragmentSplit();for(r=0,s=p.length;s>r;r++){var u,y,h=p[r].charAt(0),d=p[r].substring(1);"M"===h?(u=+d,1===u?t.set("viewMode",c.VIEW_MODE_IMMERSIVE):2===u&&t.set("viewMode",c.VIEW_MODE_MAP)):"T"===h?(("Discovery"===d||"AppList"===d)&&(d="Home"),parameters.app&&t.get("activeTabId")!==d&&(delete parameters.app.geoentities,delete parameters.app.geoentitiesLabel,delete parameters.app.rubricLabel,t.set("fullListMode",!1)),t.set("activeTabId",d)):"S"===h?t.set("searchKeyword",decodeURIComponent(d).replace(/\+/g," ")):"A"===h?t.set("currentAddress",decodeURIComponent(d).replace(/\+/g," ")):"I"===h?t.set("itineraryForm",i.urlUnserialize(d)):"F"===h?t.set("fullGeoentityId",d):"N"===h?(y=d.split(c.PERMALINK_VALUE_SPLIT),t.set("viewDirection",new l({yaw:y[0],pitch:y[1]})),t.set("location",new n({lng:y[2],lat:y[3],"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]}))):"Z"===h?t.set("zoomLevel",+d):"L"===h&&"si"===d&&t.set("activeViewModes",["traffic"])}return t},getURLFragmentSplit:function(){var e=window.location.hash.split("#")[1]||"";return e.split(c.PERMALINK_SECTION_SPLIT)},initSessionModel:function(e){var t=c.getDefaultSessionModel();return t.merge(c.getPermalinkSessionModel()),t._appCatConf=e,t}})},{"../core/utils/roundFloat.js":100,"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111,"./FiltersAndGeoentitiesModel":115,"./LocationModel":121,"./ViewDirectionModel":139,"./form/ItineraryFormModel":157}],127:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=t.exports=o.extend({defaults:{tolist:null,subject:null,message:null,userMessage:null,link:null,dataimg:null,type:null,attach:0,tpl:"view"},url:"/front-services/sharer/",clear:function(e){return r.__super__.clear.call(this,e),this.set(this.defaults,{silent:!0})},validate:function(e){return/^[A-Z0-9._%+\-]+@(?:[A-Z0-9\-]+\.)+[A-Z]{2,4}$/i.test(e.tolist)?void 0:{code:"INVALID_EMAIL"}},save:function(e,t,i){var o,s=this.get("userMessage"),n=this.get("message");return null===e||"object"==typeof e?(o=e,i=t):(o={})[e]=t,s&&this.set({message:n+"\n\n"+s.slice(0,window.parameters.share.email.max_length)},{silent:!0}),r.__super__.save.call(this,o,i)}})},{"./BaseModel":111}],128:[function(e,t,i){"use strict";{var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel");t.exports=r.extend({defaults:{id:"",name:"",images:{small:"",medium:"",large:""}},parse:function(e){var t={};return t.id=e.id,t.name=e.name,t.images={},o.each(e.visualLinks,function(e){t.images[e.format]=e.url}),t}})}},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],129:[function(e,t,i){"use strict";{var o=e("./BaseModel");t.exports=o.extend({defaults:{name:"",brandId:"",signId:"",categoryId:""},idAttribute:"name"})}},{"./BaseModel":111}],130:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel"),s=t.exports=r.extend({defaults:{type:"",stageType:"",duration:0,distance:0,actions:null},initialize:function(){this.set("actions",[])},toJSON:function(){var e=s.__super__.toJSON.call(this);return e.actions=o.map(this.get("actions"),function(e){return e.toJSON()}),e},addAction:function(e){this.get("actions").push(e)}})},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],131:[function(e,t,i){"use strict";{var o=e("./BaseModel");t.exports=o.extend({defaults:{label:"",iconId:"",rubricIds:"",filterApps:[]},getRubricIds:function(){return this.get("rubricIds")}})}},{"./BaseModel":111}],132:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/jquery/dist/jquery.js"),r=e("./../../lib/bower_components/backbone/backbone.js");r.$=o;t.exports=r.Model.extend({defaults:{name:null,address:null,addressStr:null,addressStrWithoutTags:null,coordinates:null,lat:null,lng:null,type:"address"},parse:function(e){switch(e.lat&&e.lng&&(e.coordinates=L.latlng(e.lat,e.lng)),e.type){case"poi":e.addressStr=e.name+" - <span>"+e.address+"</span>";break;case"rubric":e.addressStr=e.name;break;default:e.addressStr=e.address}return e.addressStrWithoutTags=e.addressStrWithoutTags||e.addressStr.replace(/<\/?[a-z0-9 ]*>/gi,""),e}},{getCurrentLocationItem:function(){return{type:"geolocation",address:Template.getText("address_field.current_location")}}})},{"./../../lib/bower_components/backbone/backbone.js":12,"./../../lib/bower_components/jquery/dist/jquery.js":24}],133:[function(e,t,i){"use strict";{var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("./BaseModel");t.exports=r.extend({defaults:{type:"",time:0,length:0,name:"",date:"",closed:null,lengthOnFreeway:null,gas:null,totalGasCost:null,trafficGas:null,trafficTime:null,toll:null,fareZone:null,nbCorrespondances:null,correspondances:null,departDateTime:null,arrDateTime:null,providerName:null,providerNetwork:null,providerUrl:null,providerLogo:null,providerLogoRetina:null,urbanBikeLength:null,urbanBikeTime:null,freeBikes:null,freeBlocks:null,lengthOnFacilities:0},initialize:function(e,t){var i=e.summary||{};this.set("arrDateTime",i.arrDateTime),this.set("date",i.date),this.set("departDateTime",i.departDateTime),this.set("gas",parseFloat(i.gas,10)),this.set("length",parseInt(i.length,10)),this.set("lengthOnFacilities",parseInt(i.lengthOnFacilities,10)),this.set("name",i.name),this.set("time",i.time),this.set("fareZone",i.fareZone),this.set("gasCost",t.get("gasPrice")),this.set("closed",i.traffic&&i.traffic.closed),i.traffic&&(this.set("trafficGas",i.traffic.gas),this.set("trafficTime",i.traffic.time));var r=this.get(this.get("trafficGas")?"trafficGas":"gas");

if(this.set("totalGasCost",r*this.get("gasCost")),this.set("nbCorrespondances",i.nbCorrespondances?parseInt(i.nbCorrespondances,10):0),this.set("lengthOnFreeway",parseInt(i["length-on-freeway"],10)),this.set("type","auto"===t.get("mode")?"vehicle":t.get("mode")),i["urban-bike"]){this.set("urbanBikeLength",i["urban-bike"].length),this.set("urbanBikeTime",i["urban-bike"].time);for(var s,n,a=0;a<e.actions.action.length;a++){var p=e.actions.action[a];s=!s&&p["free-bikes"]?p["free-bikes"]:s,n=p["free-blocks"]?p["free-blocks"]:n}this.set("freeBikes",s),this.set("freeBlocks",n)}i.coverage&&(this.set("providerName",i.coverage.provider.name),this.set("providerNetwork",i.coverage.provider.network.aot),this.set("providerUrl",i.coverage.provider.network.link),o.each(i.coverage.provider.network.logo,o.bind(function(e){"iphone_retina"===e.platform?this.set("providerLogoRetina",e.image):"web"===e.platform&&this.set("providerLogo",e.image)},this)));var l={amount:0,country:"FRA",currency:"EUR"};if(i.tolls)if(o.isArray(i.tolls.toll)){var c=o.reduce(i.tolls.toll,function(e,t){return e=parseFloat(e.amount)||0,t=parseFloat(t.amount)||0,e+t});l=i.tolls.toll[0],l.amount=c}else l=i.tolls.toll;this.set("toll",l)}})}},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],134:[function(e,t,i){"use strict";var o=(e("./../../lib/bower_components/underscore/underscore.js"),e("./BaseModel")),r=t.exports=o.extend({defaults:{categoryId:null},validate:function(e){return e.error?"no survey":void 0},url:function(){return parameters.services.frontservices+"survey/"+this.get("categoryId")},fetch:function(e){return this.get("categoryId")?r.__super__.fetch.call(this,{validate:!0}):Promise.reject("No category id")}})},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],135:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=t.exports=o.extend({defaults:{slug:""},url:function(){return"/front-services/traffic/description/"+this.get("slug")},fetch:function(e){return e=e||{},r.__super__.fetch.call(this,e)}})},{"./BaseModel":111}],136:[function(e,t,i){"use strict";var o=(e("./../../lib/bower_components/underscore/underscore.js"),e("./BaseModel")),r=t.exports=o.extend({defaults:{itineraryModel:null},parse:function(e){return e.no_results?e:{lowEstimate:e.price.low_estimate,highEstimate:e.price.high_estimate,duration:e.price.duration,distance:e.price.distance,productId:e.price.product_id,eta:e.time&&e.time.estimate?e.time.estimate:0}},validate:function(e){return e.no_results?"no uber results":void 0},url:function(){var e=this.get("itineraryModel").get("fromLocation"),t=this.get("itineraryModel").get("toLocation"),i=parameters.size>parameters.sizes.medium?"price":"time",o=parameters.services.frontservices+"uber/"+i+"?";return o+=$.param({startLng:e.get("lng"),startLat:e.get("lat"),endLng:t.get("lng"),endLat:t.get("lat")})},fetch:function(e){return r.__super__.fetch.call(this,{validate:!0})}})},{"./../../lib/bower_components/underscore/underscore.js":29,"./BaseModel":111}],137:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=(e("./ApplicationsCategoriesModel"),e("../core/utils/Device.js")),s=t.exports=o.extend({defaults:{type:"",title:"",description:"",buttonLabel:"",imgUrlGE:"",imgUrlPE:"",vdeTrackUrl:"",editoLinkUrl:"",editoLinkTarget:"",appId:"",rubricIds:"",subcategoryId:"",subcategoryModel:null},appIds:[],pageId:"",initialize:function(e,t){t=t||{},this.pageId=t.pageId,this._appCatConf=t.appCatConf,this.timestamp=+new Date},url:function(){var e="//www.smartadserver.com/ac?siteid={siteid}&pgid={pageid}&fmtid=32899&visit=M&tmstp={timestamp}&tgt={appIds}";return e.replace("{timestamp}",this.timestamp).replace("{appIds}",encodeURIComponent("vde="+this.appIds.join(";vde="))).replace("{siteid}",parameters.size<parameters.sizes.normal?parameters.mob_siteid:parameters.siteid).replace("{pageid}",parameters.advertising[this.pageId])},fetch:function(e){return this.appIds=e.get("appIds")||[],s.__super__.fetch.call(this,{crossDomain:!0,xhrFields:{withCredentials:!0}})},parse:function(e){if(!e||!e.vde)return{};var t={type:e.vde.type,title:e.vde.title,description:e.vde.description,buttonLabel:e.vde.buttonLabel,imgUrlGE:r.isRetina()?e.vde.imgUrlGE2X:e.vde.imgUrlGE,imgUrlPE:r.isRetina()?e.vde.imgUrlPE2X:e.vde.imgUrlPE,vdeTrackUrl:e.vde.vdeTrackUrl,editoLinkUrl:e.vde.editoLinkUrl,editoLinkTarget:e.vde.editoLinkTarget,appId:e.vde.vdeAppId||e.vde.editoAppId,rubricIds:e.vde.editoRubricIds};if(e.vde.subcategoryId){var i=this._appCatConf.get("categories"),o=i.get(e.vde.subcategoryId);o||(o=i.findSubCategoryById(e.vde.subcategoryId)),t.subcategoryModel=o,t.subcategoryId=e.vde.subcategoryId;var s=o?o.getRubricIds():[];t.rubricIds=s.join(",")}return t},getIds:function(){return this.get("appId")||this.get("subcategoryId")||this.get("rubricIds")},expectGeoentities:function(){return""!==this.getIds()}})},{"../core/utils/Device.js":94,"./ApplicationsCategoriesModel":110,"./BaseModel":111}],138:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=t.exports=o.extend({url:function(){var e=parameters.services.geoentity+"vde/${geoBox}.json";return e.replace("${geoBox}",this.geoBox.toGeoentityUrlParameter())},fetch:function(e){return this.geoBox=e,r.__super__.fetch.call(this)}})},{"./BaseModel":111}],139:[function(e,t,i){"use strict";var o=e("./BaseModel"),r=e("../core/utils/roundFloat.js").roundFloat,s=t.exports=o.extend({initialize:function(e){this.set({yaw:e.yaw&&parseFloat(e.yaw)||0,pitch:e.pitch&&parseFloat(e.pitch)||0})},isEmpty:function(){return 0===this.get("yaw")&&0===this.get("pitch")},equals:function(e){if(e instanceof s){if(e.get("pitch")===this.get("pitch")&&e.get("yaw")===this.get("yaw"))return!0;var t=r((360+this.get("yaw"))%360,6),i=r((360+e.get("yaw"))%360,6);return t===i}return!1}})},{"../core/utils/roundFloat.js":100,"./BaseModel":111}],140:[function(e,t,i){"use strict";function o(e){var t=[];return r.each(e,function(e){t.push(e instanceof Array?o(e):e instanceof a||e instanceof n?e.toJSON():e)}),t}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("../BaseModel"),n=e("../../collection/BlockCollection"),a=t.exports=s.extend({defaults:{aspect:"",type:""},toJSON:function(){var e={};return r.each(r.clone(this.attributes),function(t,i){e[i]=t instanceof Array?o(t):t instanceof a?t.toJSON():t instanceof n?t.toJSON():t}),e}})},{"../../collection/BlockCollection":39,"../BaseModel":111,"./../../../lib/bower_components/underscore/underscore.js":29}],141:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({idAttribute:null,initialize:function(e){this.set("params",JSON.stringify(e.params||{}))}})}},{"./BlockModel":140}],142:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({})}},{"./BlockModel":140}],143:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{source:"",errorSource:"",label:"",link:"",width:0/0,height:0/0}})}},{"./BlockModel":140}],144:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({initialize:function(){this.set("images",[])}})}},{"./BlockModel":140}],145:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{playerUrl:"",settingsUrl:""},initialize:function(e){this.set("views",e.views||[])}})}},{"./BlockModel":140}],146:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({initialize:function(e){this.set("keyValue",e.keyValue||{})}})}},{"./BlockModel":140}],147:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{label:""},initialize:function(e){this.set("url",e.templatizedUrl||e.url||"")}})}},{"./BlockModel":140}],148:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{type:"price_list",sections:[]},initialize:function(e){this.set("sections",e.sections||{})}})}},{"./BlockModel":140}],149:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{rate:0,max:10,label:"",reviews:0/0},initialize:function(e){this.set("url",e.templatizedUrl||e.url||""),e.rate&&e.max&&this.set("percent",Math.round(e.rate/e.max*100))}})}},{"./BlockModel":140}],150:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({initialize:function(e){this.set("services",e.services||[])}})}},{"./BlockModel":140}],151:[function(e,t,i){"use strict";{var o=e("../../collection/BlockCollection"),r=e("./BlockModel");t.exports=r.extend({defaults:{title:"",blocks:null,tracking:"",context:""},initialize:function(e){this.set("blocks",new o(e.blocks))}})}},{"../../collection/BlockCollection":39,"./BlockModel":140}],152:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{type:"table"},initialize:function(e){this.set("rows",e.rows||[]),this.set("columns",e.columns||[])},addColumn:function(e){if(e){var t=this.get("rows");this.get("columns").push(e);for(var i=0;i<e.length;i++){var o=t[i]||[];o.push(e[i]),t[i]=o}}}})}},{"./BlockModel":140}],153:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{text:""}})}},{"./BlockModel":140}],154:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({initialize:function(e){this.set("textList",e.textList||[])}})}},{"./BlockModel":140}],155:[function(e,t,i){"use strict";{var o=e("./BlockModel");t.exports=o.extend({defaults:{title:"",illustrationUrl:!1},initialize:function(e){this.set("textList",e.textList||[])}})}},{"./BlockModel":140}],156:[function(e,t,i){"use strict";var o=e("../BaseModel");t.exports=o.extend({defaults:{longitude:0/0,latitude:0/0,location:null,required:!1,value:""}})},{"../BaseModel":111}],157:[function(e,t,i){(function(i){"use strict";function o(e){function t(e){return 10>e?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"}var r=e("./../../../lib/bower_components/underscore/underscore.js"),s=e("../BaseModel"),n=e("./AddressFieldModel"),a=e("./../../../lib/bower_components/backbone/backbone.js"),p=i.parameters,l=t.exports=s.extend({defaults:function(){return{from:new n({required:!0}),to:new n({required:!0}),steps:[new n,new n,new n,new n,new n,new n],mode:"auto",vehicle:"midcar",maidToll:!1,realtimeTraffic:!1,gasPrice:p.gasCosts.sp95,gasType:"petrol",compensation:"0",routeType:"time",routeIdx:"0",date:o(new Date).split("T")[0].split("-").reverse().join("/"),hour:(new Date).getHours(),minutes:(new Date).getMinutes(),timeSens:"",pathPreference:"1",tcTransportMode:"all",bikeType:"1",bikeDisponibility:!0}},set:function(e,t,i){return"date"===e&&-1!==t.indexOf("-")&&(t=t.split("-").reverse().join("/")),a.Model.prototype.set.call(this,e,t,i)},urlUnserialize:function(e){for(var t=decodeURIComponent(e).split("|"),i={},o=0;o<t.length;o++){var r=t[o].substr(0,2);"ST"===r?(i[r]=i[r]||[],i[r].push(t[o].substr(2).replace(/\+/g," "))):i[r]=t[o].substr(2).replace(/\+/g," ")}for(var s in l.ATTR_HASH_KEYS)if(l.ATTR_HASH_KEYS.hasOwnProperty(s)){var n=i[l.ATTR_HASH_KEYS[s]];if(n)if("steps"===s)for(var a=0;a<i.ST.length;a++)this.get("steps")[a].set("value",n[a]),this.get("steps")[a].set("visible",!0);else"boolean"==typeof this.get(s)?this.set(s,0!==parseInt(n,10)):this.get(s).set?this.get(s).set("value",n):this.set(s,n)}return this.getDateObject()<new Date&&(this.set("date",this.defaults().date),this.set("hour",this.defaults().hour),this.set("minutes",this.defaults().minutes)),this},urlSerialize:function(e){var t=[];for(var i in this.attributes)if(this.get(i)&&l.ATTR_HASH_KEYS[i]){var o=e.get(i).get?e.get(i).get("value"):e.get(i),s=this.get(i).get?this.get(i).get("value"):this.get(i);if("steps"===i)for(var n=0;n<this.get("steps").length;n++){var a=this.get("steps")[n].get("value");""!==a&&t.push(l.ATTR_HASH_KEYS[i]+encodeURIComponent(a))}else r.indexOf(["date","hour","minutes"],i)>-1?"tc"===this.get("mode")?t.push(l.ATTR_HASH_KEYS[i]+encodeURIComponent(s)):"auto"===this.get("mode")&&this.get("realtimeTraffic")&&t.push(l.ATTR_HASH_KEYS[i]+encodeURIComponent(s)):"from"===i?t.push(l.ATTR_HASH_KEYS[i]+encodeURIComponent(s)):(s!==o||"gasType"===i)&&t.push("boolean"==typeof e.get(i)?l.ATTR_HASH_KEYS[i]+(s?"1":"0"):l.ATTR_HASH_KEYS[i]+encodeURIComponent(s))}return t.join("|")},getDateObject:function(){var e=new Date(this.get("date").substr(6,4),this.get("date").substr(3,2)-1,this.get("date").substr(0,2),this.get("hour"),this.get("minutes"));return e},_completeDate:function(e){var t="";if(e)t=e.split("/").reverse().join("");else{t=new Date;var i=t.getDate(),o=t.getMonth();o++;var r=t.getFullYear();i=10>i?"0"+i:i,o=10>o?"0"+o:o,t=r+""+o+i}return t},_completeSens:function(e){return e?e:1},_completeTime:function(e,t){var i=parseInt(e,10),o=parseInt(t,10);return i=10>i?"0"+i:""+i,o=10>o?"0"+o:""+o,i+o},getPrintUrl:function(e){var t=this.getQueryParams();return"/print/"+(e?"expense":"itinerary")+"/"+this.get("mode")+"/"+this.get("from").get("location").getLocation().get("addressStr").replace("/","-")+"/"+this.get("to").get("location").getLocation().get("addressStr").replace("/","-")+"?"+decodeURIComponent($.param(t))},getSeoUrl:function(){var e=this.getQueryParams(),t=window.location.protocol+"//"+window.location.host+"/itineraire/",i=this.get("mode")+"/";switch(i){case"tc/":i="transports-en-commun/";break;case"auto/":i=""}return t+i+this.get("from").get("location").getLocation().get("addressStr")+"/"+this.get("to").get("location").getLocation().get("addressStr")+"?"+decodeURIComponent($.param(e))},getQueryParams:function(e){e=e||{};var t={};switch(this.get("mode")){case"auto":t={"rb.veh":this.get("vehicle")||"midcar","rt.cost":this.get("routeType"),"rt.notoll":this.get("maidToll")?"1":"0","rb.infotraffic":this.get("realtimeTraffic")?"1":"0","rb.gascost":this.get("gasPrice"),"rb.gas":this.get("gasType"),"rt.nbroutes":"3","opt.compensation":this.get("compensation"),routeidx:this.get("routeIdx")},"1"===t["rb.infotraffic"]&&this.get("timeSens")&&(t=$.extend(t,{"rt.date":this.get("date").split("/").reverse().join(""),"rt.time":this.get("hour").toString()+this.get("minutes").toString(),"rt.sens":this.get("timeSens"),"rt.nbroutes":"1"})),/^2-/.test(t["rb.veh"])&&(t["rb.veh"]=t["rb.veh"].replace(/^(2-)/,""),t["rb.axl"]="2ax"),/^3-/.test(t["rb.veh"])&&(t["rb.veh"]=t["rb.veh"].replace(/^(3-)/,""),t["rb.axl"]="3ax"),"caravancar"===t["rb.veh"]&&(t["rb.veh"]="midcar",t["rb.cvn"]="1");break;case"tc":t={date:this.get("date").split("/").reverse().join(""),time:this.get("hour")+""+this.get("minutes"),sens:this.get("timeSens"),criteria:this.get("pathPreference"),transport_mode:"pub_tp","rb.veh":function(e,t){switch(t){case"all":e=["metro","rer","bus","boat","tram","train"];break;case"railway":e=["metro","rer","tram","train"];break;case"bus":e=["bus","tram"]}return e.join("-")}([],this.get("tcTransportMode"))};break;case"velo":t="0"===this.get("bikeType")?{date:this._completeDate(this.get("date")),time:this._completeTime(this.get("hour"),this.get("minutes")),sens:this._completeSens(this.get("timeSens")),realtime:"1",transport_mode:"bike"}:{"rt.date":this._completeDate(this.get("date")),"rt.time":this._completeTime(this.get("hour"),this.get("minutes")),"rt.sens":this._completeSens(this.get("timeSens"))},t["rb.veh"]="bike";break;case"pieton":t={"rb.veh":"ped","rt.date":this._completeDate(this.get("date")),"rt.time":this._completeTime(this.get("hour"),this.get("minutes")),"rt.sens":this._completeSens(this.get("timeSens"))}}for(var i=[],o=0;o<this.get("steps").length;o++){var s=this.get("steps")[o].get("location");s&&i.push(s.getLocation().get("lng")+","+s.getLocation().get("lat"))}i.length>0&&(t.stops=i.join(";"));var n=[];r.each([this.get("from"),this.get("to")],function(e){e.get("location")&&e.get("location").get("id")&&n.push(e.get("location").get("id"))}),n.length>0&&(t.poiids=n.join(","));var a=this.get("from").get("location"),p=this.get("to").get("location");return a&&p&&(t.from=a.getLocation().get("lng")+","+a.getLocation().get("lat"),t.to=p.getLocation().get("lng")+","+p.getLocation().get("lat")),t.clientId="mappy",t}},{ATTR_HASH_KEYS:{from:"FR",to:"TO",steps:"ST",mode:"MO",vehicle:"VH",maidToll:"MT",realtimeTraffic:"TR",date:"DT",hour:"HR",minutes:"MN",timeSens:"TS",gasPrice:"GP",gasType:"GT",compensation:"CP",routeType:"RT",pathPreference:"PP",tcTransportMode:"TM",bikeType:"BT",bikeDisponibility:"BD",routeIdx:"RI"}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../BaseModel":111,"./../../../lib/bower_components/backbone/backbone.js":12,"./../../../lib/bower_components/underscore/underscore.js":29,"./AddressFieldModel":156}],158:[function(e,t,i){(function(t){"use strict";t.jQuery=t.$=e("./../lib/bower_components/jquery/dist/jquery.js"),e("./../lib/bower_components/jquery.browser/dist/jquery.browser.js"),e("./../lib/bower_components/jquery.scrollTo/jquery.scrollTo.js"),e("./../lib/bower_components/jquery-mousewheel-stop-propagation/mousewheelStopPropagation.js"),e("./../lib/bower_components/jquery.xdomainrequest/jquery.xdomainrequest.min.js"),e("./../lib/bower_components/jquery-ui/ui/core"),e("./../lib/bower_components/jquery-ui/ui/widget"),e("./../lib/bower_components/jquery-ui/ui/mouse"),e("./../lib/bower_components/jquery-ui/ui/draggable"),e("./../lib/bower_components/jquery-ui/ui/slider"),e("./../lib/bower_components/jqueryui-touch-punch/jquery.ui.touch-punch.min.js"),t.IScroll=e("./../lib/bower_components/iscroll/build/iscroll-probe"),t.murmurhash3_32_gc=e("./../lib/bower_components/murmurhash-js/murmurhash3_gc"),e("./../lib/bower_components/leaflet/dist/leaflet-src"),e("./../lib/bower_components/leaflet-polyline/Polyline.encoded"),e("./../lib/bower_components/web-api-map/dist/L.Mappy-src"),e("../lib/leaflet/L.Mappy.init"),e("./../lib/bower_components/Leaflet-active-area/src/leaflet.activearea"),e("./../lib/bower_components/Leaflet-rrose/rrose-src"),e("../lib/twig/twig-filters"),e("./mappy-init"),e("./core/utils/escape"),e("./core/utils/localStorage"),e("./core/utils/unObfuscateLink"),e("./core/utils/Validator"),e("./core/utils/deepGet"),e("./core/prototype/date/dateFormat"),e("./core/prototype/string/stringFormat"),e("./core/prototype/string/stringReplace"),e("./core/prototype/string/stringSlug"),e("./core/prototype/string/stringTrim"),e("./service/BlockParser"),e("./service/BUCTagger"),e("./service/stringHyphenate"),e("./service/stringNL2BR"),e("./service/stringSimpleFormat"),e("./service/stringTruncate"),e("../lib/xtcore"),e("./view/Template"),e("./controller/ControllerFactory"),e("./controller/tab/TabControllerFactory"),e("./controller/XitiController"),e("./controller/AdhesiveController"),e("./view/map/LeafletMapView/LeafletTools"),e("./view/map/MarkerCluster/DistanceGrid"),e("./view/map/MarkerCluster/MarkerCluster"),e("./view/map/MarkerCluster/MarkerClusterGroup"),e("./main/main"),e("./main/main-print-itinerary"),e("./main/main-print-map"),e("./main/main-expense")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/leaflet/L.Mappy.init":31,"../lib/twig/twig-filters":32,"../lib/xtcore":34,"./../lib/bower_components/Leaflet-active-area/src/leaflet.activearea":10,"./../lib/bower_components/Leaflet-rrose/rrose-src":11,"./../lib/bower_components/iscroll/build/iscroll-probe":14,"./../lib/bower_components/jquery-mousewheel-stop-propagation/mousewheelStopPropagation.js":15,"./../lib/bower_components/jquery-ui/ui/core":16,"./../lib/bower_components/jquery-ui/ui/draggable":17,"./../lib/bower_components/jquery-ui/ui/mouse":18,"./../lib/bower_components/jquery-ui/ui/slider":19,"./../lib/bower_components/jquery-ui/ui/widget":20,"./../lib/bower_components/jquery.browser/dist/jquery.browser.js":21,"./../lib/bower_components/jquery.scrollTo/jquery.scrollTo.js":22,"./../lib/bower_components/jquery.xdomainrequest/jquery.xdomainrequest.min.js":23,"./../lib/bower_components/jquery/dist/jquery.js":24,"./../lib/bower_components/jqueryui-touch-punch/jquery.ui.touch-punch.min.js":25,"./../lib/bower_components/leaflet-polyline/Polyline.encoded":26,"./../lib/bower_components/leaflet/dist/leaflet-src":27,"./../lib/bower_components/murmurhash-js/murmurhash3_gc":28,"./../lib/bower_components/web-api-map/dist/L.Mappy-src":30,"./controller/AdhesiveController":52,"./controller/ControllerFactory":56,"./controller/XitiController":66,"./controller/tab/TabControllerFactory":85,"./core/prototype/date/dateFormat":89,"./core/prototype/string/stringFormat":90,"./core/prototype/string/stringReplace":91,"./core/prototype/string/stringSlug":92,"./core/prototype/string/stringTrim":93,"./core/utils/Validator":95,"./core/utils/deepGet":96,"./core/utils/escape":97,"./core/utils/localStorage":98,"./core/utils/unObfuscateLink":101,"./main/main":105,"./main/main-expense":102,"./main/main-print-itinerary":103,"./main/main-print-map":104,"./mappy-init":106,"./service/BUCTagger":159,"./service/BlockParser":160,"./service/stringHyphenate":163,"./service/stringNL2BR":164,"./service/stringSimpleFormat":165,"./service/stringTruncate":166,"./view/Template":168,"./view/map/LeafletMapView/LeafletTools":212,"./view/map/MarkerCluster/DistanceGrid":213,"./view/map/MarkerCluster/MarkerCluster":214,"./view/map/MarkerCluster/MarkerClusterGroup":215}],159:[function(e,t,i){"use strict";function o(){}function r(){var e=[];e.push((new Date).getTime()),e.push(Math.random());var t=murmurhash3_32_gc(e.join("###"),31)+"";return t="9999999999".substr(0,10-t.length)+t,"0"===t.substr(t.length-1,1)?r():t}function s(e,t){t+="&"+a();var i=e.indexOf("?"),o=e+(-1===i?"?":i!==e.length-1?"&":"");return o+t}function n(e,t){var i=e.replace(/mid=[0-9]{9,10}(?:&tagid=[a-z_]+)?/i,t);return i}function a(){var e=Mappy.abTestCollection.getVariant();return e?"abtest="+Mappy.abTestCollection.current.get("id")+"-"+e.id:"abtest=NA"}t.exports=o,o.STORAGE_KEY="BUC_mid",o.prototype.getUserId=function(){try{var e=localStorage.getItem(o.STORAGE_KEY);return e||(e=r(),localStorage.setItem(o.STORAGE_KEY,e)),e}catch(t){return r()}},o.prototype.getMid=function(){return"mid="+this.getUserId()},o.prototype.updateURL=function(e,t){var i,o=e.indexOf("mid="),r=[];return r.push(this.getMid()),t&&r.push("tagid="+t),i=r.join("&"),-1===o?s(e,i):n(e,i)}},{}],160:[function(e,t,i){(function(t){"use strict";var i=e("./../../lib/bower_components/underscore/underscore.js"),o=e("../model/block/TabBlockModel"),r=e("../model/block/HRBlockModel"),s=e("../model/block/TitleBlockModel"),n=e("../model/block/TextBlockModel"),a=e("../model/block/LinkBlockModel"),p=e("../model/block/KeyValueBlockModel"),l=e("../model/block/TableBlockModel"),c=e("../model/block/ServicesBlockModel"),u=e("../model/block/ImageBlockModel"),y=e("../model/block/ImagesBlockModel"),h=e("../model/block/TextListBlockModel"),d=e("../model/block/IndoorTourBlockModel"),g=e("../model/block/RatingBlockModel"),m=e("../model/block/ContentWidgetBlockModel"),v=e("../model/block/PriceListBlockModel"),f=t.parameters,w=function(){};Mappy.BlockParser=w,w.prototype.parseJSONBlock=function(e){return this._parseJSONBlock(e)},w.prototype._getPortalURL=function(e){return f.services.bucket+(e||"")},w.prototype._getLibURL=function(){return f.services.bucket+"/lib/"},w.prototype._parseJSONBlock=function(e){var t="_parseJSONBlock_"+e.type;if(t in this){var i=this[t](e);return i.set("type",e.type||""),i.set("aspect",e.aspect||""),i}},w.prototype._parseJSONBlock_tab=function(e){return new o(e)},w.prototype._parseJSONBlock_horizontalRule=function(){return new r({})},w.prototype._parseJSONBlock_title=function(e){return new s(e)},w.prototype._parseJSONBlock_text=function(e){return new n(e)},w.prototype._parseJSONBlock_link=function(e){return new a(e)},w.prototype._parseJSONBlock_key_value=function(e){return new p(e)},w.prototype._parseJSONBlock_image=function(e){var t=this._getPortalURL("images/error.png");return new u({source:e.image&&e.image.length>0?e.image:t,aspect:e.aspect,errorSource:t,link:e.link,label:e.text,width:parseInt(e.width,10),height:parseInt(e.height,10)})},w.prototype._parseJSONBlock_table=function(e){for(var t=new l(e),i=0,o=e.table.length;o>i;i++){for(var r=e.table[i],s=[],n=0,a=r.length;a>n;n++){var p=this._parseJSONBlock(r[n]);p&&s.push(p)}s.length&&t.addColumn(s)}return t},w.prototype._parseJSONBlock_service_list=function(e){for(var t=new c({}),i=0,o=e.list.length;o>i;i++){var r=e.list[i];t.get("services").push(new u({aspect:"normal",source:r.imageUrl,label:r.label}))}return t},w.prototype._parseJSONBlock_image_list=function(e){for(var t=new y({}),o=[],r=0,s=e.list.length;s>r;r++){var n=e.list[r];o.push(this._parseJSONBlock_image(n))}return t.set("images",i.uniq(o,!1,function(e){return e.get("link")})),t},w.prototype._parseJSONBlock_text_list=function(e){for(var t=new h({}),i=0,o=e.list.length;o>i;i++){var r=e.list[i];t.get("textList").push(this._parseJSONBlock_text(r))}return t},w.prototype._parseJSONBlock_indoor_tour=function(e){e.settings=e.settings;for(var t=0;t<e.views.length;t++)e.views[t].thumbnail=e.views[t].thumbnail,e.views[t].descriptor=e.views[t].descriptor;return new d(e)},w.prototype._parseJSONBlock_rating=function(e){return new g(e)},w.prototype._parseJSONBlock_content_widget=function(e){return e.alt=this._parseJSONBlock(e.alt),new m(e)},w.prototype._parseJSONBlock_price_list=function(e){return new v(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../model/block/ContentWidgetBlockModel":141,"../model/block/HRBlockModel":142,"../model/block/ImageBlockModel":143,"../model/block/ImagesBlockModel":144,"../model/block/IndoorTourBlockModel":145,"../model/block/KeyValueBlockModel":146,"../model/block/LinkBlockModel":147,"../model/block/PriceListBlockModel":148,"../model/block/RatingBlockModel":149,"../model/block/ServicesBlockModel":150,"../model/block/TabBlockModel":151,"../model/block/TableBlockModel":152,"../model/block/TextBlockModel":153,"../model/block/TextListBlockModel":154,"../model/block/TitleBlockModel":155,"./../../lib/bower_components/underscore/underscore.js":29}],161:[function(e,t,i){"use strict";var o=e("./../../lib/bower_components/underscore/underscore.js"),r=e("../../../../../../../../web/js/sails_routes"),s=t.exports,n=/:(\w+)/g;s.generate=function(e,t){if(!e)throw new Error("Missing route parameter");t=t||{};var i=r[e];if(!i)throw new Error("The route "+e+" does not exist.");var s=i.path.match(n);return o.each(s,function(o){var r=o.slice(1);if(!t[r]){if(!i[r])throw new Error("The route "+e+' requires the parameter "'+r+'"');t[r]=i[r]}}),i.path.replace(n,function(e,i,o,r){var s=t[i];return s?s:e})}},{"../../../../../../../../web/js/sails_routes":339,"./../../lib/bower_components/underscore/underscore.js":29}],162:[function(e,t,i){"use strict";t.exports=function(e,t,i){var o=o||function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},r="àáäâèéëêìíïîòóöôùúüûñç",s="aaaaeeeeiiiioooouuuunc",n={"æ":"ae","œ":"oe"};i||(r+="·/_,:;",s+="------"),t&&(e=e.replace(/\d+er?\s\w+\s/,""),e=e.replace(/\d+.*rrondissement/,""));var a=e.toLowerCase().replace(new RegExp("["+r+"]","g"),function(e){return s.charAt(r.indexOf(e))}).replace(new RegExp("["+o(n).join("")+"]","g"),function(e){return n[e]});return i||(a=a.replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")),a}},{}],163:[function(e,t,i){!function(e){"use strict";e.stringHyphenate=function(t,i){var o=t.length;if(o>i){for(var r,s=0,n=[],a=Math.floor(o/i),p=o%i;a>s;){var l=s*i;r=l+i,n.push(t.substring(l,r)),s++}return p&&n.push(t.substring(r)),n.join(e.stringHyphenate.SEPARATOR)}return t},e.stringHyphenate.SEPARATOR="- "}(window.Mappy=window.Mappy||{})},{}],164:[function(e,t,i){!function(e){"use strict";e.stringNL2BR=function(e){return e.replace("\r","").replace(/\n/g,"<br />")}}(window.Mappy=window.Mappy||{})},{}],165:[function(e,t,i){!function(t){"use strict";var i=e("./../../lib/bower_components/jquery/dist/jquery.js");t.stringSimpleFormat=function(e,o){if(o=i.extend({nobr:!1,hyphenate:!1,truncate:!1,stripScript:!1},o),e=String(e||""),o.stripScript&&(e=e.replace(/<script[^>]*>([\s\S]*?)<\/script>/gim,"")),"number"==typeof o.truncate&&o.truncate>0&&(e=t.stringTruncate(e,o.truncate,"...")),"number"==typeof o.hyphenate&&o.hyphenate>0){for(var r=e.split(" "),s=o.hyphenate,n=0,a=r.length;a>n;n++)r[n].length>s&&(r[n]=t.stringHyphenate(r[n],s));e=r.join(" ")}return o.truncate&&o.hyphenate&&e.match(/\.\.\.$/)&&(e=e.replace(/[\n\s\-_]+\.\.\.$/,"...")),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),o.nobr?e:t.stringNL2BR(e)}}(window.Mappy=window.Mappy||{})},{"./../../lib/bower_components/jquery/dist/jquery.js":24}],166:[function(e,t,i){!function(e){"use strict";e.stringTruncate=function(e,t,i){return i=i||"...",t=t||50,e.length>t-i.length?e.slice(0,t)+i:e}}(window.Mappy=window.Mappy||{})},{}],167:[function(e,t,i){"use strict";function o(e){for(var t=[],i=e;i;)Array.prototype.push.apply(t,l.keys(i)),i=i.constructor.__super__;return t}function r(e,t){return l.chain(t).map(function(t){return{name:t,ref:e[t]}}).partition(function(e){return/views$/i.test(e.name)||e.ref instanceof c.View}).value()}function s(e){var t=l.partition(e,function(e){return l.isArray(e.ref)}),i=l.partition(t[1],function(e){return e instanceof c.View}),o=l.chain(i[1]).map(function(e){return l.values(e.ref)}).flatten().value();return l.flatten(t[0]).concat(i[0]).concat(o)}function n(e){l.chain(e).filter(function(e){return e instanceof c.View}).each(function(e){e.remove()})}function a(e,t){l.chain(t).filter(function(e){return e.ref instanceof $&&"$el"!==e.name}).each(function(t){t.ref.remove(),e[t.name]=null})}function p(e){var t=r(e,o(e)),i=s(t[0]);n(i),a(e,t[1])}var l=e("./../../lib/bower_components/underscore/underscore.js"),c=e("./../../lib/bower_components/backbone/backbone.js"),u=t.exports=c.View.extend({show:function(){this.$el.show()},hide:function(){this.$el.hide()},isVisible:function(){return this.$el.is(":visible")},remove:function(){p(this),u.__super__.remove.call(this)}})},{"./../../lib/bower_components/backbone/backbone.js":12,"./../../lib/bower_components/underscore/underscore.js":29}],168:[function(e,t,i){(function(i){!function(){"use strict";var o=e("./../../lib/bower_components/backbone/backbone.js"),r="undefined"!=typeof t?i:window;r.Template=o.View.extend({},{setI18n:function(e,t){t=t||"fr",this._i18n[t]!==e&&(this._i18n[t]=e)},getText:function(e,t,i){i=i||"fr";var o=this._i18n[i]||{},r=o[e]||e;if(t&&t instanceof Object)for(var s in t)t.hasOwnProperty(s)&&(r=r.replace(new RegExp(s,"g"),t[s]));return r},addressToString:function(e,t){for(var i;null!==(i=t.match(/%([cCyYsSzZr])/));){var o=t.substring(0,i.index).lastIndexOf("["),r=t.indexOf("]",i.index),s="";"c"===i[1]?s=e.get("country"):"C"===i[1]?s=e.get("countryNumericCode"):"y"===i[1]?s=e.get("city"):"Y"===i[1]?s=e.get("cityINSEECode"):"s"===i[1]?s=e.get("streetNumber"):"S"===i[1]?s=e.get("street"):"z"===i[1]?s=e.get("zipCodes")[0]:"Z"===i[1]?s=e.get("zipCodes").join(", "):"r"===i[1]&&(s=e.score()),t=o<i.index&&i.index<r&&o>-1&&r>-1?s?t.replace(t.substring(o,r+1),t.substring(o,r+1).replace(/^\[|\]$/g,"").replace(i[0],s)):t.replace(t.substring(o,r+1),""):t.replace(i[0],s)}return t},_i18n:{}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../../lib/bower_components/backbone/backbone.js":12}],169:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../left/list/GeoentityListView/GeoentityListView"),n=e("../../../../../../views/shared/center/AddressView/AddressView.html.twig");t.exports=r.extend({template:"AddressView",initialize:function(e){this._models=e,this.render()},render:function(){this.$el=$(n.render({geoentities:this._models})),this.geoentityListView=new s(this._models),this.geoentityListView.on("modelClick",o.bind(this.trigger,this,"modelClick")),this.geoentityListView.on("reservationClick",o.bind(this.trigger,this,"reservationClick")),
this.$el.find(".geoentityListView").append(this.geoentityListView.$el),$("#ContentView").html(this.$el)},destroy:function(){this.geoentityListView.off("modelClick"),this.geoentityListView.off("reservationClick"),$("#ContentView").empty()}})}},{"../../../../../../views/shared/center/AddressView/AddressView.html.twig":252,"../../BaseView":167,"../../left/list/GeoentityListView/GeoentityListView":194,"./../../../../lib/bower_components/underscore/underscore.js":29}],170:[function(e,t,i){"use strict";{var o=e("../../../BaseView"),r=e("../../../../../../../views/shared/center/GeoentityView/GeoentityOutdoorView.html.twig");t.exports=o.extend({className:"GeoentityOutdoorView",template:"GeoentityOutdoorView",events:{click:"_openOutdoorView"},initialize:function(){},render:function(){var e=this.model,t=parameters.services.pano+"panoramics/"+e.get("closestPanoramicId")+"/tiles/geodetic/"+this.model.get("location").get("lat")+","+this.model.get("location").get("lng")+"?redirect=true&fallbackradius=100";return this.$el.empty().append(r.render({urlPano:t})),this},_openOutdoorView:function(){Mappy.ControllerFactory.getNavigationController().switchToImmersiveView(this.model.get("location"),this.model.get("viewDirection"),this.model,this.model.get("location"))}})}},{"../../../../../../../views/shared/center/GeoentityView/GeoentityOutdoorView.html.twig":254,"../../../BaseView":167}],171:[function(e,t,i){"use strict";{var o=e("../../../BaseView"),r=e("../../../mixins/CarouselView/JCarouselView");t.exports=o.extend({el:"#GeoentityPartnerTabView",carouselView:null,_tabs:null,_tabSlider:null,_more:null,events:{"click .carousel li.tab":"_onTabClick"},initialize:function(){this._tabs=this.$(".carousel li.tab"),this._more=this.$(".carousel li.more"),this._tabSlider=this.$(".carousel ul"),this.carouselView=new r({el:this.$(".carousel")}).render()},activateTabById:function(e){this._tabs.removeClass("active"),this._tabs.filter("[data-id="+e+"]").addClass("active")},_onTabClick:function(e){var t=$(e.currentTarget).data("id");this.trigger("tabClick",t)}})}},{"../../../BaseView":167,"../../../mixins/CarouselView/JCarouselView":220}],172:[function(e,t,i){"use strict";{var o=e("../../../BaseView"),r=e("../../../../../../../views/shared/center/GeoentityView/GeoentityReviewItemView.html.twig");t.exports=o.extend({tagName:"li",className:"review",events:{"click .link":"_renderAllText"},render:function(){return this.$el.html(r.render(this.model.toJSON())),this},_renderAllText:function(e){e.preventDefault(),this.render()}})}},{"../../../../../../../views/shared/center/GeoentityView/GeoentityReviewItemView.html.twig":256,"../../../BaseView":167}],173:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("./GeoentityReviewItemView"),n=e("../../../../../../../views/shared/center/GeoentityView/GeoentityReviewView.html.twig");t.exports=r.extend({attributes:{id:"GeoentityPartnerView"},items:[],events:{"click .all-reviews,.add-review":"_linkClicked"},pjBlocId:0,initialize:function(e){this.pjBlocId=e.pjBlocId,this.banner=e.banner,this.render()},render:function(){var e=0===this.collection.context.total_reviews?this.collection.models.length:this.collection.context.total_reviews;this.$el.html(n.render({banner:this.banner,pjBlocId:this.pjBlocId,pjRatingId:this.collection.pjRatingId,total_reviews:e,overall_review_rating:this.collection.context.overall_review_rating}));var t=this.$(".reviews");return this.collection.forEach(function(e){var i=new s({model:e});i.render().$el.appendTo(t),this.items.push(i)},this),this},remove:function(){o.forEach(this.items,function(e){e.remove()}),this.undelegateEvents()},_linkClicked:function(e){var t=$(e.currentTarget).hasClass("all-reviews")?"list":"add";this.trigger("link-selected",t,e)}})}},{"../../../../../../../views/shared/center/GeoentityView/GeoentityReviewView.html.twig":257,"../../../BaseView":167,"./../../../../../lib/bower_components/underscore/underscore.js":29,"./GeoentityReviewItemView":172}],174:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("../../../../../../../views/shared/mixins/ViewerTitle.html.twig");t.exports=r.extend({images:[],carousel:null,current:null,initialize:function(e){var t,i;this.carousel=e.carousel,this.images=[],t=this.carousel.find(".jcarousel-item img"),i=t.length,t.each(o.bind(function(e,t){this.images.push({type:"image",href:$(t).data("url"),thumbnail:$(t).data("original"),title:s.render({i:e,pageCount:i})}),$(t).on("click",o.bind(this.openLightbox,this,e))},this))},openLightbox:function(e){Mappy.ControllerFactory.getIndexView().openFancybox(this.images,{arrows:!0,nextClick:!1,index:e,loop:!1,helpers:{thumbs:{width:100,height:100,source:function(e){return e.thumbnail}},overlay:{locked:!1}},beforeLoad:o.bind(this.removeZoom,this),afterLoad:o.bind(this.imageLoaded,this),afterShow:o.bind(this.initZoom,this),beforeClose:o.bind(this.removeZoom,this)})},removeZoom:function(){$(".fancybox-inner").trigger("zoom.destroy"),$("body").removeClass("fancybox-print")},imageLoaded:function(e){this.current=e,$(".fancybox-wrap").on("click",".print a",o.bind(function(e){e.preventDefault(),window.print()},this))},initZoom:function(){(this.current.width!==$(".fancybox-inner").width()||this.current.height!==$(".fancybox-inner").height())&&$(".fancybox-inner").zoom({on:"click",url:this.current.href,onZoomIn:function(){$(".zoomImg").addClass("isZoomed")},onZoomOut:function(){$(".zoomImg").removeClass("isZoomed")}}),$("body").addClass("fancybox-print")}})}},{"../../../../../../../views/shared/mixins/ViewerTitle.html.twig":325,"../../../BaseView":167,"./../../../../../lib/bower_components/underscore/underscore.js":29}],175:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("./../../../../../lib/bower_components/backbone/backbone.js"),n=e("../../../../../../../views/shared/mixins/TouchGallery.html.twig");t.exports=r.extend({catalog:[],initialize:function(e){this.carousel=e.carousel;var t=this.carousel.find(".jcarousel-item img");this.catalog=o.map(t,function(e){return{href:$(e).data("url")||$(e).data("original")||$(e).attr("src")}}),this.carousel.on("click","img",o.bind(this.render,this))},render:function(e){$(n.render({images:this.catalog})).prependTo($("body"));var t=this.carousel.find(".jcarousel-item img"),i=t.index($(e.currentTarget));$(".slider > a").on("click",o.bind(function(e){e.preventDefault(),$(".slider > a").off("click"),$(".sliderHolder").remove(),TouchNSwipe.removeAll()},this)),window.TouchNSwipe?(TouchNSwipe.init(),TouchNSwipe.getSlider(0).index(i)):$.getScript(parameters.services.bucket+"js/touchnswipe.js",function(){TouchNSwipe.getSlider(0).index(i)})},remove:function(){return $(".slider > a").off("click"),$(".sliderHolder").remove(),window.TouchNSwipe&&TouchNSwipe.removeAll(),s.View.prototype.remove.call(this)}})}},{"../../../../../../../views/shared/mixins/TouchGallery.html.twig":324,"../../../BaseView":167,"./../../../../../lib/bower_components/backbone/backbone.js":12,"./../../../../../lib/bower_components/underscore/underscore.js":29}],176:[function(e,t,i){"use strict";{var o=e("../../../BaseView");t.exports=o.extend({el:"#GeoentitySocialView",events:{"click .share a":"onShareClick"},setTwitterLink:function(e){this.$(".twitter").attr("href",e)},onShareClick:function(e){e.preventDefault(),this.trigger("share",e,$(e.currentTarget).attr("class"))}})}},{"../../../BaseView":167}],177:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("../../../left/list/GeoentityListView/GeoentityListView"),n=e("../../../../model/ContentModel"),a=e("../../../../core/utils/Device.js"),p=e("../../../../../../../views/shared/center/GeoentityView/GeoentityView.html.twig"),l=e("../../../../../../../views/shared/center/GeoentityView/GeoentityOthersView.html.twig"),c=e("../../../../core/utils/path");t.exports=r.extend({el:"#GeoentityView",_fullGeoentity:null,events:{"click .GeoentityPartnerTabView-applink":"_onPartnerAppLinkClick","click .GeoentityOthersAction":"_onGeoentityOhersActionClick"},initialize:function(e){this._fullGeoentity=e.fullGeoentity,this._geoentityOthersTitleType=e.geoentityOthersTitleType},render:function(e){this.$el=$(p.render({fullGeoentity:this._fullGeoentity.toJSON(),isolatedTabId:e,origin:"JS",displayOutdoorView:parameters.size<parameters.sizes.normal&&a.has3dSupport()})),$("#ContentView").html(this.$el),this.$appLink=this.$(".GeoentityPartnerTabView-applink"),this.delegateEvents()},destroy:function(){this.undelegateEvents(),$("#ContentView").empty()},displayGeoentityListView:function(e){this.$("#GeoentityOthersView").html(l.render({title:this.getTitle()})),this.geoentityListView=new s(e),this.geoentityListView.on("modelClick",o.bind(this.trigger,this,"modelClick")),this.geoentityListView.on("reservationClick",o.bind(this.trigger,this,"reservationClick")),this.$("#GeoentityListView").html(this.geoentityListView.$el),this.delegateEvents()},removeGeoentityListView:function(){this.$("#GeoentityOthersView").remove()},showApplicationLink:function(e){o.defer(o.bind(function(){var t;e instanceof n&&(t=c.getImgPath(e.get("favicon")),this.$appLink.find("span").html(e.get("morePoisLabel")),this.$appLink.find("img").attr("src",t),this.$appLink.show())},this))},hideApplicationLink:function(){this.$appLink.hide()},removeBanner:function(){this.$(".PartnerView-banner").remove()},_onPartnerAppLinkClick:function(){this.trigger("applicationLinkClick")},_onGeoentityOhersActionClick:function(){this.trigger("ohersGeoentitiesAction")},getTitle:function(){var e=this._geoentityOthersTitleType,t=this._fullGeoentity.get("rubricLabel");if("textsearch"===e)return Template.getText("geoentity.others");if(!e){if(!t)return Template.getText("geoentity.others");e=t}return Template.getText("geoentity.others.title",{"%type%":e})}})}},{"../../../../../../../views/shared/center/GeoentityView/GeoentityOthersView.html.twig":253,"../../../../../../../views/shared/center/GeoentityView/GeoentityView.html.twig":258,"../../../../core/utils/Device.js":94,"../../../../core/utils/path":99,"../../../../model/ContentModel":114,"../../../BaseView":167,"../../../left/list/GeoentityListView/GeoentityListView":194,"./../../../../../lib/bower_components/underscore/underscore.js":29}],178:[function(e,t,i){"use strict";function o(e){return{load:function(t){e.call('loadpano("'+t+'", null, MERGE, BLEND(1));"')},getContext:function(){return{xmlUrl:e.get("xml.url"),viewHLookAt:e.get("view.hlookat"),viewVLookAt:e.get("view.vlookat")}},remove:function(){-1===$("#"+e.id).text().indexOf("FATAL ERROR")&&"function"==typeof window.removepano&&removepano(e.id)}}}var r=e("./../../../../../lib/bower_components/underscore/underscore.js"),s=e("../../../BaseView"),n=e("../../../../model/block/IndoorTourBlockModel"),a=e("../../../mixins/selectFilter/TabFilterView/TabFilterView"),p=e("../../../mixins/CarouselView/JCarouselView"),l=e("../../../mixins/CarouselView/iScrollCarouselView"),c=e("../GeoentitySliderView/TouchnswipeGeoentitySliderView"),u=e("../GeoentitySliderView/FancyGeoentitySliderView"),y=e("../../../../core/utils/Device.js"),h=e("../../../../../../../views/shared/center/GeoentityView/PartnerView.html.twig"),d=t.exports=s.extend({attributes:{id:"GeoentityPartnerView"},_partner:null,_filterView:null,_krpano:null,_sliderViews:null,_carouselViews:null,_errorImage:"",_banner:"",_appURL:"",events:{"click a":"linkClick","click #IndoorViewTab .jcarousel li a":"_switchPano","click .switchToViewIcon":"_showIndoorFullscreen"},initialize:function(e){this._partner=e.partner,this._errorImage=e.errorImage,this._banner=e.banner,this._appURL=e.appURL,this._geoentity=e.geoentity,this._sliderViews=[],this._carouselViews=[]},render:function(){var e,t=h.render({partner:this._partner,tabs:this._partner.get("blocks").toJSON(),appURL:this._appURL,banner:this._banner});return this.$el.html(t),e=this._partner.get("blocks").first().get("blocks").find(function(e){return e instanceof n}),"pj"===this._partner.id&&"OVM"===this._geoentity.get("offerType")&&this.$(".PartnerView-banner").remove(),this._createCarousel(),this._initializeTabs(),e&&(this._krpano=this._loadKrpanoBlock(e)),r.each(this.$(".PartnerView-rating-meter a"),r.bind(function(e){var t=$(e);t.attr("href",Mappy.ControllerFactory.getGeoentityController().getPartnerUrl(t.attr("href")))},this)),this},remove:function(){this._partner=null,this._krpano&&(this._krpano.remove(),this._krpano=null),r.each(this._sliderViews,function(e){e.remove()}),r.each(this._carouselViews,function(e){e.remove()}),d.__super__.remove.call(this)},loadKRPano:function(){return new Promise(r.bind(function(e,t){"function"==typeof window.embedpano&&"function"==typeof window.removepano?e():$.getScript(parameters.services.bucket+"js/krpano.js").done(e).fail(function(){t(new Error("Cannot load krpano.js"))})},this))},linkClick:function(e){var t=$(e.currentTarget);t.hasClass("jcarousel-control")||t.hasClass("PartnerView-content-widget")||t.parents(".TabFilterView").length||this.trigger("linkClick",e)},_initializeTabs:function(){this.$(".TabFilterView").length&&(this._filterView=new a({el:".TabFilterView"}),this._filterView.on("itemClick",function(e){this.trigger("tabChanged",e),this.$(".PartnerView-tab").hide(),this.$(".PartnerView-tab[data-id="+e+"]").show()},this))},setCurrentTab:function(e){null!==this._fiterView&&this.$(".PartnerView-tab[data-id="+e+"]").length&&(this.$(".PartnerView-tab").hide(),this.$(".PartnerView-tab[data-id="+e+"]").show())},_loadKrpanoBlock:function(e){var t="IndoorViewTabFullscreenPlayer";if("function"==typeof embedpano&&embedpano({xml:e.get("settings"),target:"IndoorViewTabPlayer",id:t,html5:"only",wmode:"opaque"}),e.get("views").length>2){var i=new p({el:this.$(".jcarousel")}).render();this._carouselViews.push(i)}return o(this.$("#"+t)[0])},_switchPano:function(e){e.preventDefault(),this.$el.find("#IndoorViewTab > span").html($(e.currentTarget).find("span").html()),this._krpano.load($(e.currentTarget).data("descriptor"))},_showIndoorFullscreen:function(e){e.preventDefault(),this.trigger("indoorFullscreenClick",this._krpano.getContext())},_createCarousel:function(){this.$(".PartnerView-images .jcarousel")&&r.each(this.$(".PartnerView-images .jcarousel"),function(e){e=$(e);var t=y.hasTouchSupport()?new l({carousel:e}):new p({el:e}).render();t.on("animationEnd",r.bind(this._lazyLoading,this,e)),e.find(".jcarousel-item img").on("load",r.bind(function(){t.refresh(),this._lazyLoading(e)},this)),this._carouselViews.push(t);var i=y.hasTouchSupport()?new c({carousel:e}):new u({carousel:e});this._sliderViews.push(i),this._lazyLoading(e)},this)},_lazyLoading:function(e){var t=-1*e.find("ul").position().left,i=e.find('img[src=""]:first');i.length>0&&i.position().left<t+e.width()+200&&i.attr("src",i.data("original"))}})},{"../../../../../../../views/shared/center/GeoentityView/PartnerView.html.twig":259,"../../../../core/utils/Device.js":94,"../../../../model/block/IndoorTourBlockModel":145,"../../../BaseView":167,"../../../mixins/CarouselView/JCarouselView":220,"../../../mixins/CarouselView/iScrollCarouselView":221,"../../../mixins/selectFilter/TabFilterView/TabFilterView":238,"../GeoentitySliderView/FancyGeoentitySliderView":174,"../GeoentitySliderView/TouchnswipeGeoentitySliderView":175,"./../../../../../lib/bower_components/underscore/underscore.js":29}],179:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("../../../left/list/GeoentityListView/GeoentityListView"),n=e("../../../mixins/DatePickerView/RangeDatePickerView"),a=e("../../../mixins/CarouselView/JCarouselView");t.exports=r.extend({_rangeDatePickerView:null,$scrollableElement:null,events:{"submit form":"_onFormSubmit"},displayGeoentities:function(e){this._geoentityListView=new s(e),this._geoentityListView.on("modelClick",o.bind(this.trigger,this,"click")),this._geoentityListView.on("reservationClick",o.bind(this.trigger,this,"reservationClick")),this.$el.find("#PushHotelView-geoentities").empty().append(this._geoentityListView.$el)},initDatePickers:function(e){this._rangeDatePickerView||(this._rangeDatePickerView=new n({el:this.$(".DatePickers"),currentDate:e}).render()),this._rangeDatePickerView.setCurrentDates({start:e})},destroy:function(){this.$scrollableElement&&(this.$scrollableElement.off("scroll"),this.$scrollableElement=null),this.remove()},_onFormSubmit:function(e){e.preventDefault();var t=this._rangeDatePickerView.getCurrentDates(),i=this._rangeDatePickerView.getCurrentValues();this.trigger("formSubmit",{params:{from:t.start,to:t.end},display:{"date-start":i.start,"date-end":i.end}})},bindToScroll:function(e){this.$scrollableElement=e;var t=this.$el.parents(".roadbookRight");this.$scrollableElement.scroll(o.bind(function(){var e=$(window).scrollTop()+$("#IndexView").offset().top+70,i=t.offset().top+t.find("#roadbookAdvBlock").height(),o=t.offset().top+t.height()-t.find(".roadbookRight-last").height()-this.$el.outerHeight(!0);i>e?(this.$el.css("position","relative"),this.$el.css("top","0")):o>e?(this.$el.css("position","fixed"),this.$el.css("top",$("body").hasClass("adwrapper")?"185px":"60px")):(this.$el.css("position","absolute"),this.$el.css("top",o-t.offset().top+"px"))},this))},initCarousel:function(){this.carouselView=new a({el:this.$(".jcarousel")}).render()}})}},{"../../../BaseView":167,"../../../left/list/GeoentityListView/GeoentityListView":194,"../../../mixins/CarouselView/JCarouselView":220,"../../../mixins/DatePickerView/RangeDatePickerView":235,"./../../../../../lib/bower_components/underscore/underscore.js":29}],180:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("../PushHotelView/PushHotelView"),n=e("../../../../controller/ShareController"),a=e("../../../../core/utils/Device.js"),p=e("../../../../../../../views/shared/itinerary/index.html.twig"),l=e("../../../../../../../views/shared/center/pushes/voyages-sncf.html.twig"),c=e("../../../../../../../views/shared/center/pushes/blablacar.html.twig"),u=e("../../../../../../../views/shared/center/pushes/ouibus.html.twig"),y=e("../../../../../../../views/shared/center/pushes/driiveme.html.twig"),h=e("../../../../../../../views/shared/center/pushes/uber.html.twig"),d=t.exports=r.extend({id:"RoadbookView",events:{"click .print":"_onPrintClick","click .expense":"_onExpenseClick","click .share":"_onShareClick","click .showroadbook":"_onRoadbookClick","click .gps":"_onGpsClick","click .backToTop":"_onBackToTopClick","change .pushItiSummary.blablacar select":"_onCovoiturageChange","click .pushItiSummary.blablacar a":"_onCovoiturageClick"},initialize:function(){this.on("change:routeIdx",this.changeLinkItiId)},changeLinkItiId:function(e){var t=this.$(".print"),i=t.data("link");t.data("link",this.getUrlRouteIdx(i,e))},getUrlRouteIdx:function(e,t){var i=new RegExp(/(&routeidx=)+(\d)?/),r="&routeidx="+t;return!e||o.isNaN(parseInt(t,10))?e:i.test(e)?e.replace(i,r):e+r},hide:function(){$("#ContentView").empty(),this.undelegateEvents(),this._removePushes(),d.__super__.hide.call(this)},setEmptyWaypoints:function(e,t){var i=e.get("steps"),r=0;o.each(t.get("stages"),function(e){"waypoint"===e.get("stageType")&&(o.each(e.get("actions"),function(e){var t=i[r];t&&(e.set("name",t.get("value")),e.set("label","Étape : "+t.get("value")))}),r++)})},setItineraryModel:function(e,t,i,r,n){var u=e.get("routes").at(n||0),y=u.get("pushes");this.setEmptyWaypoints(r,u),this.$el.html(p.render({appCDN:parameters.services.bucket,mode:u.get("mode"),source:{label:t.getAddressStr(),inseeCode:t.getLocation().get("cityINSEECode"),x:t.getLocation().get("lat"),y:t.getLocation().get("lng")},destination:{label:i.getAddressStr(),inseeCode:i.getLocation().get("cityINSEECode"),x:i.getLocation().get("lat"),y:i.getLocation().get("lng")},route:u.toJSON(),pushes:y,locale:parameters.locale,printUrl:r.getPrintUrl(),expenseUrl:r.getPrintUrl(!0)})),$("#ContentView").html(this.$el),this.delegateEvents(),this._removePushes(),parameters.language.french&&o.contains(y,"hotel")&&(this._pushHotelViewRight=new s({el:"#PushHotelView-right"}),this._pushHotelViewRight.bindToScroll($(window)),this._pushHotelViewFooter=new s({el:"#PushHotelView-footer"})),!a.hasTouchSupport()&&parameters.size>=parameters.sizes.normal&&this._showAdvertising();var h=a.isIPhone(navigator.userAgent)||a.isWindowsPhone(navigator.userAgent)||a.isAndroid(navigator.userAgent)&&!a.isAndroidTablet(navigator.userAgent);if(h&&this.$(".buttonGps").length&&(this.$(".buttonGps").css("display","block"),this.$(".summaryRight").addClass("twoButtons")),this.trackRoadbookVisibility(),y.length){var d=$("#roadbookPushes"),g={source:t.getLocation().toJSON(),destination:i.getLocation().toJSON(),distance:u.get("distance")};!g.source.coordinates&&t.getLocation().has("geoPosition")&&(g.source.coordinates=t.getLocation().getGeoPosition()),!g.destination.coordinates&&i.getLocation().has("geoPosition")&&(g.destination.coordinates=i.getLocation().getGeoPosition()),g.source.city=g.source.city||g.source.rawAddress,g.destination.city=g.destination.city||g.destination.rawAddress,o.contains(y,"vsc")&&$(l.render(g)).appendTo(d),o.contains(y,"blablacar")&&$(c.render(g)).appendTo(d),o.contains(y,"driiveme")&&(r.get("realtimeTraffic")&&(g.driiveme_date=r.get("date").split("/").reverse().join("-")),this.showDriivemePush(g)),this.shouldShowPushes(y,parameters,d)&&d.show()}},showDriivemePush:function(e){$(y.render(e)).appendTo($("#roadbookPushes"))},showOuibusPush:function(e){var t=$(u.render(e));t.appendTo($("#roadbookPushes")),t.find(".redirect").on("click",o.bind(function(){this.trigger("ouibusClick")},this))},shouldShowPushes:function(e,t,i){return!o.contains(e,"uber",0)&&i.children().length&&t.size>=t.sizes.normal},getUberUrl:function(e){var t;if(e&&e.mobile){var i=["uber://?client_id=WgAa0W6TC_CgFK5Vp-pqQ3yYW3GJ8OJi&action=setPickup","&product_id=",e.productId,"&pickup[latitude]=",e.from.lat,"&pickup[longitude]=",e.from.lng,"&pickup[formatted_address]=",encodeURIComponent(e.from.label),"&dropoff[latitude]=",e.to.lat,"&dropoff[longitude]=",e.to.lng,"&dropoff[formatted_address]=",encodeURIComponent(e.to.label),"&campaign=webbox"].join(""),o=["https://m.uber.com/sign-up?client_id=WgAa0W6TC_CgFK5Vp-pqQ3yYW3GJ8OJi","&product_id=",e.productId,"&pickup_latitude=",e.from.lat,"&pickup_longitude=",e.from.lng,"&pickup_address=",encodeURIComponent(e.from.label),"&dropoff_latitude=",e.to.lat,"&dropoff_longitude=",e.to.lng,"&dropoff_address=",encodeURIComponent(e.to.label),"&campaign=webbox"].join("");t={actionUrl:i,fallbackUrl:o}}else t="https://get.uber.com/p/mappy";return t},showUberPush:function(e){var t=$("#roadbookPushes");t.addClass("pushUber"),t.show(),t.html($(h.render(e.toJSON()))),t.click(o.bind(function(){var t=parameters.size<parameters.sizes.normal;if(t){var i={mobile:!0,productId:e.get("productId"),from:e.get("itineraryModel").get("fromLocation").getGeoPosition(),to:e.get("itineraryModel").get("toLocation").getGeoPosition()};i.from.label=e.get("itineraryModel").get("itineraryForm").get("from").get("value"),i.to.label=e.get("itineraryModel").get("itineraryForm").get("to").get("value");var o=this.getUberUrl(i);this.tagUberWithDelay(function(){a.isCrappyGalaxy(navigator.userAgent)?window.location.href=o.fallbackUrl:(setTimeout(function(){window.location.href=o.fallbackUrl},25),window.location.href=o.actionUrl)})}else window.open(this.getUberUrl()),this.trigger("uberClick")},this))},tagUberWithDelay:function(e){this.trigger("uberClick"),setTimeout(e,150)},_removePushes:function(){this._pushHotelViewRight&&this._pushHotelViewRight.destroy(),this._pushHotelViewFooter&&this._pushHotelViewFooter.destroy()},_getDomain:function(e){var t=e.indexOf("/",e.indexOf("//")+2),i=e.substring(0,t);return-1===e.indexOf("http:")&&-1===e.indexOf("https:")&&(i=location.protocol+i),i},_showAdvertising:function(){this._showHoryzonMediaAds(),this._showOASAds()},_showHoryzonMediaAds:function(){var e=Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl("roadbook","megaban"),t=Mappy.ControllerFactory.getAdvertisingController().getSmartAdvUrl("roadbook","block",!0);this.$el.find("#roadbookAdvBanner").html('<iframe src="'+e+'" width="728" height="90" marginwidth="0" marginheight="0" hspace="0" vspace="0" scrolling="no" frameborder="0"></iframe>');var i=this.$el.find("#roadbookAdvBlock");i.html('<iframe src="'+t+'" height="250" width="300" marginwidth="0" marginheight="0" hspace="0" vspace="0" scrolling="no" frameborder="0"></iframe>');var r=i.find("iframe");r.on("load",o.bind(function(){$(window).on("message",function(e){if(e&&e.originalEvent&&e.originalEvent.data&&o.isNumber(e.originalEvent.data)){var t=parseInt(e.originalEvent.data,10);t>=200&&800>=t&&i.find("iframe").height(t)}}),r.get(0).contentWindow.postMessage("getHeight",this._getDomain(t))},this))},_showOASAds:function(){var e=Mappy.ControllerFactory.getAdvertisingController().getOASUrl();this.$el.find("#roadbookOASBlock").html('<iframe src="'+e+'" width="300" height="250" marginwidth="0" marginheight="0" hspace="0" vspace="0" scrolling="no" frameborder="0"></iframe>')},trackRoadbookVisibility:function(){var e=o.once(o.bind(function(){this.trigger("roadbookStart")},this)),t=o.once(o.bind(function(){this.trigger("roadbookEnd")},this));$(document).scroll(o.bind(function(){this._isElementInViewport(this.$el.find(".actionStart"))&&e(),this._isElementInViewport(this.$el.find(".actionEnd"))&&t()},this))},setCovoituragePrice:function(e){this.$el.find(".pushItiSummary.blablacar .price strong").html(e+" €")},scrollToRoadbook:function(){$("html, body").animate({scrollTop:this.$el.offset().top-$("#ItineraryFormView").offset().top},"slow")},getPushHotelViewRight:function(){return this._pushHotelViewRight},getPushHotelViewFooter:function(){return this._pushHotelViewFooter},_onPrintClick:function(e){e.preventDefault(),this.trigger("print",$(e.currentTarget).data("link"))},_onExpenseClick:function(e){e.preventDefault(),this.trigger("expense",$(e.currentTarget).data("link"))},_onShareClick:function(e){e.preventDefault(),this.trigger("share",e,n.SHARE)},_onRoadbookClick:function(e){e.preventDefault(),this.$(".mobAdBanner").empty(),Mappy.ControllerFactory.getAdvertisingController().insertSmartAdv("mob_itinerary","mob_banner",!1,!0,this.$(".mobAdBanner")[0]),this.$(".roadbook").show(),$(window).scrollTop(this.$(".roadbook").offset().top-20)},_onGpsClick:function(e){e.preventDefault(),this.trigger("gps",e,$(e.currentTarget).data())},_onBackToTopClick:function(e){e.preventDefault(),$(window).scrollTop(0)},_onCovoiturageChange:function(e){e.preventDefault(),this.trigger("covoiturageChange",$(e.target).val())},_onCovoiturageClick:function(){this.trigger("covoiturageClick")},_isElementInViewport:function(e){var t=e[0].getBoundingClientRect();return e.is(":visible")&&t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}})},{"../../../../../../../views/shared/center/pushes/blablacar.html.twig":269,"../../../../../../../views/shared/center/pushes/driiveme.html.twig":270,"../../../../../../../views/shared/center/pushes/ouibus.html.twig":271,"../../../../../../../views/shared/center/pushes/uber.html.twig":272,"../../../../../../../views/shared/center/pushes/voyages-sncf.html.twig":273,"../../../../../../../views/shared/itinerary/index.html.twig":283,"../../../../controller/ShareController":64,"../../../../core/utils/Device.js":94,"../../../BaseView":167,"../PushHotelView/PushHotelView":179,"./../../../../../lib/bower_components/underscore/underscore.js":29}],181:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("../BaseView"),s=e("./../../../lib/bower_components/jquery/dist/jquery.js"),n=t.exports=r.extend({_expanded:!1,events:{"click .closeButton":"_onCloseButtonClick","click .languageSwitcher p":"_onLanguageClick","click .languageSwitcher .list span":"_onLanguageClick","click ._contact":"_onContactClick"},initialize:function(e){this.options=e},render:function(){return this._expanded||this.options.isStatic||this.$el.hide(),this.$langSwitchP=this.$(".languageSwitcher p"),this.$langSwitchList=this.$(".languageSwitcher .list"),this},_onContactClick:function(){this.trigger("contactClick")},_onCloseButtonClick:function(e){e.preventDefault(),this.trigger("footerCloseButtonClick")},_onLanguageClick:function(e){e.preventDefault(),this.toggleLanguage()},open:function(){Mappy.ControllerFactory.getIndexView().modalize(o.bind(this.toggle,this)),this.$el.show().addClass("active"),this.$el.css("bottom","-"+(this.$el.height()+2)+"px"),this.$el.animate({bottom:0},{duration:"slow",complete:o.bind(function(){},this)}),this._expanded=!0},close:function(){Mappy.ControllerFactory.getIndexView().unmodalize(),this.$el.animate({bottom:"-"+(this.$el.height()+2)+"px"},{duration:"slow",complete:o.bind(function(){this.$el.css("bottom",null).removeClass("active").hide()},this)}),this._expanded=!1,this.trigger("close")},toggle:function(){this._expanded===!0?this.close():this.open()},isExpanded:function(){return this._expanded},hide:s.noop(),toggleLanguage:function(){this.$langSwitchP.hasClass("hidden")?(this.$langSwitchP.removeClass("hidden"),this.$langSwitchList.addClass("hidden")):(this.$langSwitchP.addClass("hidden"),this.$langSwitchList.removeClass("hidden"))}});s(function(){if(s("#static").size()>0){var e=new n({el:"#FooterView",isStatic:!0});e.render()}})},{"../BaseView":167,"./../../../lib/bower_components/jquery/dist/jquery.js":24,"./../../../lib/bower_components/underscore/underscore.js":29}],182:[function(e,t,i){"use strict";var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../core/utils/Device.js"),n=e("../../../../../../views/shared/header/CategoryContainerView.html.twig"),a=t.exports=r.extend({el:"#CategoryContainerView",_displayTimer:null,_isActive:!1,_lastCategory:null,$itemsContainer:null,_mouseEntered:0,events:function(){var e={click:"_onClick","click .categories > li > a":"_onCategoryClick","click .subcategories a":"_onSubCategoryClick","click .recommendations a":"_onApplicationClick","click .next":"slideRight","click .previous":"slideLeft","click .icon-close":"closeSubCategoryMenu"};return s.hasTouchSupport()||(e=o.extend(e,{"mouseenter .categories a":"_onCategoryMouseEnter","mouseleave .categories a":"_onCategoryMouseLeave","mouseenter .categoriesSubmenus":"_onCategorySubMenuMouseEnter","mouseleave .categoriesSubmenus":"_onCategorySubMenuMouseLeave"})),e},initialize:function(e){e.applicationsCategoriesModel&&(this.model=e.applicationsCategoriesModel,this.render(),this.$categories=this.$(".categories a"),this.$submenus=this.$(".categoriesSubmenus"),s.hasTouchSupport()&&(this._onOutsideMenuClick=this._getOutsideMenuClickHandler(),$("body").on("click",this._onOutsideMenuClick)),$(window).on("resize",o.bind(this._onResize,this)),this._onResize())},render:function(){var e=this.model.getMenu();e.isRetina=s.isRetina();var t=$(n.render(e));return this.setElement(t),this},remove:function(){this._onOutsideMenuClick&&($("body").off("click",this._onOutsideMenuClick),this._onOutsideMenuClick=null),a.__super__.remove.call(this)},openSubCategoryMenu:function(e){var t=this.$categories.filter('[data-category="'+e.get("id")+'"]'),i=this.$submenus.filter("."+e.get("id")),r=1e3;this.$categories.removeClass("active"),this.$submenus.removeClass("active"),this._isActive=!0,t.addClass("active"),i.addClass("active"),i.scrollTop(0),i.find("img").each(function(e,t){var i=$(t);i.attr("src")||i.attr("src",i.data("src"))}),parameters.size<parameters.sizes.normal&&($("#IndexView").hasClass("ItineraryTab")||$("#IndexView").hasClass("AddressTab"))&&$("body").scrollTop(this.$el.offset().top),
clearTimeout(this._displayTimer),this._displayTimer=o.delay(o.bind(this.trigger,this,"categoryDisplayedFor",e),r)},closeSubCategoryMenu:function(){return this.$categories?(this._lastCategory=null,this.$categories.removeClass("active"),this.$submenus.removeClass("active"),this.$el.removeClass("active"),this.trigger("closeSubCategoryMenu"),clearTimeout(this._displayTimer),!0):void 0},_onCategoryMouseEnter:function(e){this._mouseEntered++;var t=$(e.currentTarget).data("category");if(t){var i=this.model.get("categories").get(t);this.openSubCategoryMenu(i),this.trigger("categoryMouseEnter",i)}},_onCategoryMouseLeave:function(){this._mouseEntered>0&&this._mouseEntered--,o.delay(o.bind(function(){0===this._mouseEntered&&this.closeSubCategoryMenu()},this),100)},_onCategorySubMenuMouseEnter:function(){this._mouseEntered++},_onCategorySubMenuMouseLeave:function(){this._mouseEntered>0&&this._mouseEntered--,o.delay(o.bind(function(){0===this._mouseEntered&&this.closeSubCategoryMenu()},this),100)},_getOutsideMenuClickHandler:function(){return o.bind(function(){return this._isActive=!1,this.closeSubCategoryMenu(),!0},this)},_onClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click")},_onCategoryClick:function(e){e.preventDefault();var t=$(e.currentTarget).data("category"),i=$(e.currentTarget).data("subcategory"),o="hotel-hebergement";if(i){var r=this.model.get("categories").findSubCategoryById(i)||this.model.get("categories").get(i);i===o?this.trigger("hotelSelection",r):this.trigger("subCategorySelection",r)}else{var n=this.model.get("categories").get(t);if(s.hasTouchSupport()){if(this._lastCategory===n)return this.closeSubCategoryMenu(),this._lastCategory=null,!0;this._lastCategory=n,this.openSubCategoryMenu(n)}else t===o?this.trigger("hotelSelection",n):this.trigger("categorySelection",n)}},_onSubCategoryClick:function(e){e.preventDefault();var t=$(e.currentTarget).data("rubricids"),i=this.model.get("categories").getCategoryDataByRubricIds(t);this.trigger("subCategorySelection",i.subcategory,i.category)},_onApplicationClick:function(e){e.preventDefault();var t=$(e.currentTarget).data("appid"),i=$(e.currentTarget).parents(".categoriesSubmenus").data("category"),o=this.model.getApplicationById(t),r=this.model.get("categories").get(i);this.trigger("applicationSelection",o,r)},_bindIscrollCarousel:function(){this.$itemsContainer=this.$el.find(".categories").parent(),this._itemsContainerWidth=this.$itemsContainer.width(),this.$items=this.$itemsContainer.find(".categories"),this._nbItems=this.$items.children().length,this._itemsWidth=this.$items.width(),this._itemWidth=this.$items.children(":first-child").width(),this.$navArrowLeft=this.$("> .previous"),this.$navArrowRight=this.$("> .next"),this._iscrollInstance=new window.IScroll("#CategoryContainerView div.categoriesMenu",{probeType:2,bounce:!1,mouseWheel:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,momentum:!1,useTransform:!1}),this._onResize(),this._iscrollInstance.on("scroll",o.bind(this._onIscrollMove,this)),this._iscrollInstance.on("scrollEnd",o.bind(this._onIscrollEnd,this))},_onIscrollEnd:function(){var e=this._iscrollInstance.x,t=e%this._itemWidth;0!==t&&(t=t<this._itemWidth/-2?this._itemWidth+t:t,e-=t,this._iscrollInstance.scrollTo(e,0,200)),this._toggleArrowsStyle(e)},_onIscrollMove:function(){var e=this._iscrollInstance.x;this._toggleArrowsStyle(e)},slideLeft:function(e){e.preventDefault(),1===parseInt(this.$navArrowLeft.css("opacity"),10)&&this._slide("left")},slideRight:function(e){e.preventDefault(),1===parseInt(this.$navArrowRight.css("opacity"),10)&&this._slide("right")},_slide:function(e){var t=0;"left"===e?t=this._itemWidth:"right"===e&&(t=-1*this._itemWidth),this._iscrollInstance.scrollBy(t,0,500),this._toggleArrowsStyle(this._iscrollInstance.x)},_toggleArrowsStyle:function(e){e>=0?(this.$navArrowLeft.css("opacity",0),this._itemsContainerWidth>=this._itemsWidth?this.$navArrowRight.css("opacity",0):this.$navArrowRight.css("opacity",1)):e<=this._itemsContainerWidth-this._itemsWidth?(this.$navArrowLeft.css("opacity",1),this.$navArrowRight.css("opacity",0)):(this.$navArrowRight.css("opacity",1),this.$navArrowLeft.css("opacity",1))},_onResize:function(){if(parameters.size<parameters.sizes.normal&&!this._iscrollInstance&&o.defer(o.bind(function(){this.$categories.length&&(this.$el.addClass("visible"),this._bindIscrollCarousel(),this.$el.removeClass("visible"))},this)),this._iscrollInstance){var e=this._iscrollInstance.x;if(this._itemsContainerWidth=this.$itemsContainer.width(),this._toggleArrowsStyle(e),0>e&&this._itemsWidth+e<this._itemsContainerWidth){var t=parseInt(this._itemsContainerWidth/this._itemWidth,10);t>this._nbItems&&(t=this._nbItems),this._iscrollInstance.scrollBy((this._nbItems-t)*-this._itemWidth,0)}}},refreshCarouselView:function(){this._iscrollInstance&&(this._iscrollInstance.refresh(),this._toggleArrowsStyle(this._iscrollInstance.x))},refreshTitle:function(){$("#IndexView").hasClass("ItineraryTab")?(this.$el.find(".nearby-title").html(Template.getText("category_container_view.discover_arrival")),this.$el.addClass("withTitle")):$("#IndexView").hasClass("AddressTab")?(this.$el.find(".nearby-title").html(Template.getText("category_container_view.discover_nearby")),this.$el.addClass("withTitle")):this.$el.removeClass("withTitle")}})},{"../../../../../../views/shared/header/CategoryContainerView.html.twig":274,"../../../core/utils/Device.js":94,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],183:[function(e,t,i){"use strict";{var o=e("../../BaseView"),r=(e("../../../model/ApplicationsCategoriesModel"),e("../CategoryContainerView/CategoryContainerView"));t.exports=o.extend({el:"#NavBarTopView",_categoryContainerView:null,initialize:function(){var e={applicationsCategoriesModel:parameters.language.french?Mappy.ControllerFactory.getAppCatConf():null};this._categoryContainerView=new r(e),this.$el.append(this._categoryContainerView.$el)},getCategoryContainerView:function(){return this._categoryContainerView},hide:$.noop()})}},{"../../../model/ApplicationsCategoriesModel":110,"../../BaseView":167,"../CategoryContainerView/CategoryContainerView":182}],184:[function(e,t,i){"use strict";{var o=e("../../BaseView");t.exports=o.extend({el:"#UniverseView",events:{"click a.logo":"_onLogoClick","click nav a":"_onUniverseClick"},initialize:function(){this.show()},_onLogoClick:function(e){e.preventDefault(),this.trigger("universeClick",Mappy.UniverseController.UNIVERSE_LOCATIONS)},_onUniverseClick:function(e){e.preventDefault(),this.trigger("universeClick",$(e.currentTarget).attr("data-universe"))},setCurrentUniverse:function(e){this.$("a").parent("li").removeClass("active"),this.$("a."+e).parent("li").addClass("active")},setMiniHeader:function(e){e?this.$el.addClass("miniHeader"):this.$el.removeClass("miniHeader")}})}},{"../../BaseView":167}],185:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("../BaseView"),s=e("../../core/utils/Device.js"),n=e("../../../../../views/shared/center/AdWrapperView/top.html.twig"),a=e("../../../../../views/shared/center/AdWrapperView/left.html.twig"),p=e("../../../../../views/shared/center/AdWrapperView/right.html.twig"),l="ad_wrapper_hide_date",c=864e5,u=t.exports=r.extend({el:".AdWrapperView",events:{"click .AdWrapperDisplay":"_onWrapperClick","click #AdWrapperView-close":"_onCloseClick"},hasAdWrapper:!1,_config:null,_topWrapper:null,_leftWrapper:null,_rightWrapper:null,initialize:function(){window.__AdWrap=this,this.shouldDisplayAdWrapper()&&this.request()},request:function(){var e="https://ads.horyzon-media.com/call/pubj/"+parameters.siteid+"/"+parameters.advertising.discovery+"/6330/S/"+parameters.initTmstp+"/";$.getScript(e)},render:function(){return this.hasAdWrapper?(this._topWrapper=$(n.render()),this._topWrapper.css({"background-image":"url("+this._config.imgTop+")","background-color":this._config.bgColorTop}),this._leftWrapper=$(a.render()),this._leftWrapper.css({"background-image":"url("+this._config.imgLeft+")","background-color":this._config.bgColorLeft}),this._rightWrapper=$(p.render()),this._rightWrapper.css({"background-image":"url("+this._config.imgRight+")","background-color":this._config.bgColorRight}),this._config.bgColorButton&&this._rightWrapper.find("#AdWrapperView-close").addClass("AdWrapperView-close-"+this._config.bgColorButton),this.$el.append(this._topWrapper).append(this._leftWrapper).append(this._rightWrapper),this.show(),this):this},loadConfig:function(e){this.hasAdWrapper=this.getWindowSize().width<1024&&this.getWindowSize().height<740||s.hasTouchSupport()?!1:!!e,this._config=e,this.render()},hide:function(){this._config&&(this.$el.find(".AdWrapperDisplay").hide(),this.hasAdWrapper=!1,this.resize(),this.trigger("hide"))},show:function(){this._config&&(this.$el.find(".AdWrapperDisplay").show(),this.hasAdWrapper=!0,this.resize(),this.trigger("show"))},resize:function(){var e=this.getWindowSize(),t=e.width,i=e.height;if(this.hasAdWrapper){$("body").addClass("adwrapper");var o=t-u.VIEWPORT_MIN_WIDTH>0?(t-u.VIEWPORT_MIN_WIDTH)/2:0;o=o<u.AD_MAX_SIZE?o+"px":u.AD_MAX_SIZE+"px",this.$el.css({"margin-top":u.AD_MAX_SIZE+"px","margin-left":o,"margin-right":o}),this._leftWrapper.css({width:o,height:i+"px"}),this._rightWrapper.css({width:o,height:i+"px"})}else $("body").removeClass("adwrapper"),this.$el.css({"margin-top":0,"margin-left":0,"margin-right":0})},getWindowSize:function(){var e=$(window);return{width:e.width(),height:e.height()}},sendPixels:function(){this.hasAdWrapper&&u.sendPixels(this._config)},shouldDisplayAdWrapper:function(){return(!Mappy.localStore.get(l)||+new Date-parseInt(Mappy.localStore.get(l),10)>=c)&&!s.hasTouchSupport()&&parameters.size>=parameters.sizes.normal?!0:!1},_onWrapperClick:function(){"_blank"===this._config.linkTarget?window.open(this._config.linkUrl):window.location(this._config.linkUrl)},_onCloseClick:function(e){e.preventDefault(),e.stopPropagation(),Mappy.localStore.set(l,+new Date),this.hide(),this.trigger("close")}},{sendPixels:function(e){function t(t){return e[t]}function i(e){if(!e)return null;var t=+new Date;return/\?$/.test(e)?e+t:e+"?"+t}function r(e){e&&((new Image).src=e)}o.chain(["PixelHoryzonUrl","PixelAgencyUrl"]).map(t).map(i).each(r)}});u.VIEWPORT_MIN_WIDTH=1024,u.AD_MAX_SIZE=125},{"../../../../../views/shared/center/AdWrapperView/left.html.twig":249,"../../../../../views/shared/center/AdWrapperView/right.html.twig":250,"../../../../../views/shared/center/AdWrapperView/top.html.twig":251,"../../core/utils/Device.js":94,"../BaseView":167,"./../../../lib/bower_components/underscore/underscore.js":29}],186:[function(e,t,i){"use strict";var o=e("./../../../lib/bower_components/underscore/underscore.js"),r=e("../BaseView"),s=e("./AdWrapperView"),n=e("../header/NavBarTopView/NavBarTopView"),a=e("../content/roadbook/RoadbookView/RoadbookView"),p=e("../left/LeftView/LeftView"),l=e("../map/OutdoorView/OutdoorView"),c=e("../footer/FooterView"),u=e("../map/LeafletMapView/LeafletMapView"),y=e("../overlay/AdInterView"),h=e("../overlay/DownloadAppView/DownloadAppView"),d=e("../../core/utils/Device.js"),g=e("../../../../../views/shared/BaseView/alert.html.twig"),m=e("../../../../../views/shared/IndexView/firstVisitPrivacy.html.twig"),v=t.exports=r.extend({el:"#IndexView",initialize:function(e){e=e||{},e.isPrint||(this._adWrapperView=new s,this._adWrapperView.on("show hide",function(){this._mapView&&this._mapView.resize(),this._outdoorView&&this._outdoorView.resize(),this._leftView.getAdvertisingBLView().resize()},this),this._navBarTopView=new n),this._roadbookView=e.isPrint?new a({el:$(".roadbook")}):new a,this._leftView=new p,this._outdoorView=new l,this._footerView=new c({el:"#FooterView"}),this._mapView=new u,this._mapView.on("browserGeolocationError",function(e){this.alert(e.i18nId).then(void 0,Mappy.logError)},this),!d.hasTouchSupport()&&parameters.size>=parameters.sizes.normal&&(this._adInterView=new y,$("body").prepend(this._adInterView.$el)),this._footerView.render(),$(".hiddenLink").each(Mappy.unObfuscateLink),$("#loadingLayer").remove(),$(window).on("orientationchange",o.bind(function(){setTimeout(o.bind(this.resize,this),500)},this)).on("resize",o.bind(this.resize,this)),this.resize()},hide:$.noop(),resize:function(){this._roadbookMode?this.$el.hasClass("fullscreen")||$("body").addClass("scrollable"):(parameters.size>=parameters.sizes.normal&&$(window).scrollTop(0),$("body").removeClass("scrollable")),v.updateSize(),this._adWrapperView&&this._adWrapperView.resize(),this._leftView.getAdvertisingBLView().resize(),this.trigger("resize")},alert:function(e){var t=Template.getText(e)||e,i=$(g.render({message:t}));return new Promise(o.bind(function(e,t){this.openFancybox(i,{autoSize:!0,type:"inline",padding:0,afterClose:e}).then(void 0,t)},this))},_loadFancybox:function(){return $.fancybox?Promise.resolve():new Promise(o.bind(function(e,t){$.getScript(parameters.services.bucket+"js/fancybox.js").done(o.bind(function(){$.extend($.fancybox.defaults,{tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"></iframe>',error:'<p class="fancybox-error">'+Template.getText("fancybox.error")+"</p>",closeBtn:'<a title="'+Template.getText("close")+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="'+Template.getText("next")+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="'+Template.getText("previous")+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}}),e()},this)).fail(function(){t(new Error("Cannot load fancybox.js"))})},this))},openFancybox:function(e,t){return this._loadFancybox().then(function(){$.fancybox(e,t)})},showFirstVisitMessage:function(){this._firstVisitMessage||(this._firstVisitMessage=$(m.render()),this.$el.append(this._firstVisitMessage),this._firstVisitMessage.find(".close").click(o.bind(function(){this._firstVisitMessage.remove()},this)))},showInterstitiel:function(){Mappy.ControllerFactory.getAdvertisingController().insertSmartAdv("mob_interstitiel","mob_interstitiel",!1,!0,document.body)},showDownloadAppView:function(){this._downloadAppView=new h,this._downloadAppView.render().$el.appendTo("#IndexView"),this._downloadAppView.on("close",function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_APPLICATION_CONTINUER),this._downloadAppView.remove()},this).on("redirect",function(){Mappy.ControllerFactory.getXitiController().tagAction(Mappy.XitiController.XTC_APPLICATION_TELECHARGER),this._downloadAppView.remove()},this)},closeDownloadAppView:function(){this._downloadAppView&&(this._downloadAppView.remove(),this._downloadAppView=null)},closeFirstVisitMessage:function(){this._firstVisitMessage&&this._firstVisitMessage.remove()},modalize:function(e){$("#modalizeLayer").length||$('<div id="modalizeLayer"></div>').appendTo(this.$el).css("opacity",.7).on("click",e)},unmodalize:function(){$("#modalizeLayer").length>0&&($("#modalizeLayer").off("click").css("opacity",0),setTimeout(function(){$("#modalizeLayer").remove()},800))},setRoadbookMode:function(e){this._roadbookMode=e},getWidth:function(){return $(window).width()},getHeight:function(){return $(window).height()},getAdWrapperView:function(){return this._adWrapperView},getHeaderView:function(){return this._navBarTopView},getSearchFormView:function(){return this._leftView.getSearchFormView()},getItineraryFormView:function(){return this._leftView.getItineraryFormView()},getMapView:function(){return this._mapView},getOutdoorView:function(){return this._outdoorView},getLeftView:function(){return this._leftView},getCategoryContainerView:function(){return this._navBarTopView.getCategoryContainerView()},getRoadbookView:function(){return this._roadbookView},getFooterView:function(){return this._footerView},showThrobber:function(){$("#TrobberLayer").show()},hideThrobber:function(){$("#TrobberLayer").hide()}},{updateSize:function(){var e=$(window).width();parameters.size=e>=1680?parameters.sizes.xxl:e>1280?parameters.sizes.large:e>=1e3?parameters.sizes.normal:e>=768?parameters.sizes.medium:e>=480?parameters.sizes.small:parameters.sizes.tiny}})},{"../../../../../views/shared/BaseView/alert.html.twig":247,"../../../../../views/shared/IndexView/firstVisitPrivacy.html.twig":248,"../../core/utils/Device.js":94,"../BaseView":167,"../content/roadbook/RoadbookView/RoadbookView":180,"../footer/FooterView":181,"../header/NavBarTopView/NavBarTopView":183,"../left/LeftView/LeftView":188,"../map/LeafletMapView/LeafletMapView":211,"../map/OutdoorView/OutdoorView":216,"../overlay/AdInterView":242,"../overlay/DownloadAppView/DownloadAppView":243,"./../../../lib/bower_components/underscore/underscore.js":29,"./AdWrapperView":185}],187:[function(e,t,i){"use strict";var o=e("../../BaseView"),r=e("../../../core/utils/Device.js"),s=e("../../../../../../views/shared/left/AdvertisingBLView.html.twig"),n=t.exports=o.extend({id:"AdvertisingBL",_refreshMinThreshold:5e3,doRefresh:null,url:null,_lastShow:null,_needToDisplay:!1,_needToDisplaySave:null,_heightLimit:600,initialize:function(){window.__AdvBLV=this},render:function(){var e=$(s.render({previousUrl:this.url}));return this.$el.empty().append(e),this},show:function(){$("#LeftView").addClass("advertising"),n.__super__.show.call(this)},hide:function(){$("#LeftView").removeClass("advertising"),n.__super__.hide.call(this)},desactivate:function(e){e&&(this._needToDisplaySave=this._needToDisplay),this._needToDisplay=!1,this.hide()},reactivate:function(){this._needToDisplay=this._needToDisplaySave,this._needToDisplaySave=null,this._needToDisplay&&$("#IndexView").innerHeight()>this._heightLimit&&(this.show(),this.refresh())},refresh:function(e,t){if(r.hasTouchSupport()||parameters.size<parameters.sizes.normal)return void this.desactivate();if(null===this._needToDisplaySave){e&&(this.url=e);var i=(new Date).getTime();(t||i-this._lastShow>this._refreshMinThreshold)&&(this._lastShow=i,this.doRefresh=!0),this._needToDisplay=!0,$("#IndexView").innerHeight()>this._heightLimit?(this.doRefresh&&(this.render(),this.doRefresh=!1,parameters.homepage=!1),this.show()):(this._lastShow=0,this.hide())}},resize:function(){this._needToDisplay&&$("#IndexView").innerHeight()>this._heightLimit?(this.show(),this.refresh()):this.hide()},setHeightLimit:function(e){this._heightLimit=e}})},{"../../../../../../views/shared/left/AdvertisingBLView.html.twig":298,"../../../core/utils/Device.js":94,"../../BaseView":167}],188:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../AdvertisingBLView/AdvertisingBLView"),n=e("../form/SearchFormView/SearchFormView"),a=e("../form/ItineraryFormView/ItineraryFormView");t.exports=r.extend({el:"#LeftView",_searchFormView:null,_itineraryFormView:null,_advertisingBLView:null,_miniHeaderPersistant:!1,events:{"click nav.universes a":"_onUniverseClick"},initialize:function(){this._advertisingBLView=new s,this._searchFormView=new n,this._itineraryFormView=new a,this.$el.append(this._advertisingBLView.$el),this.$("#ScrollableLeftView").on("scroll",o.bind(this._onScroll,this))},disableScrollPropagation:function(){parameters.size>=parameters.size.normal&&this.$("#ScrollableLeftView").mousewheelStopPropagation()},enableScrollPropagation:function(){parameters.size>=parameters.size.normal&&this.$("#ScrollableLeftView").off("mousewheel mousewheel wheel DOMMouseScroll")},getAdvertisingBLView:function(){return this._advertisingBLView},hide:$.noop(),_onUniverseClick:function(e){e.preventDefault(),this.trigger("universeClick",$(e.currentTarget).attr("data-universe"))},setCurrentUniverse:function(e){this.$("nav.universes a").parent("li").removeClass("active"),this.$("nav.universes a."+e).parent("li").addClass("active")},forceMiniHeader:function(){!this._miniHeaderPersistant&&this.$("#ScrollableLeftView").scrollTop()<130&&this.$("#ScrollableLeftView").scrollTop(130)},_onScroll:function(){if(!(parameters.size<=parameters.sizes.medium)&&(this.trigger("scroll"),this._miniHeaderPersistant!==!0)){var e=this.$("#ScrollableLeftView").scrollTop();e>=130&&!this.$el.hasClass("miniHeaderOnScroll")?(this.$el.addClass("miniHeaderOnScroll"),this.trigger("setMiniHeader",!0)):50>=e&&this.$el.hasClass("miniHeaderOnScroll")&&(this.$el.removeClass("miniHeaderOnScroll"),this.trigger("setMiniHeader",!1))}},setMiniHeaderSearchForm:function(){this.$el.addClass("miniHeaderSearchForm")},setMiniHeader:function(e){this._miniHeaderPersistant=e,this.$("#TabView").scrollTop(0),this.$("#ScrollableLeftView").scrollTop(0),this.$el.removeClass("miniHeaderOnScroll miniHeaderSearchForm"),this._miniHeaderPersistant===!0?(this.trigger("setMiniHeader",!0),this.$el.addClass("miniHeader")):(this.trigger("setMiniHeader",!1),this.$el.removeClass("miniHeader"))},getSearchFormView:function(){return this._searchFormView},getItineraryFormView:function(){return this._itineraryFormView},hasMiniHeaderPersistant:function(){return this._miniHeaderPersistant}})}},{"../../BaseView":167,"../AdvertisingBLView/AdvertisingBLView":187,"../form/ItineraryFormView/ItineraryFormView":190,"../form/SearchFormView/SearchFormView":191,"./../../../../lib/bower_components/underscore/underscore.js":29}],189:[function(e,t,i){"use strict";{var o=e("../../BaseView");t.exports=o.extend({el:"#TabView",initialize:function(){this.show()},setCurrentTabView:function(e){this.removeCurrentTabView(),this.$el.append(e.$el)},removeCurrentTabView:function(){this.$el.empty()}})}},{"../../BaseView":167}],190:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("../../../../model/form/AddressFieldModel"),n=e("../TextfieldView/AddressFieldView"),a=e("../../../mixins/AmbiguityView/AmbiguityView"),p=e("../../../mixins/DatePickerView/DatePickerView"),l=e("../../../../../../../views/shared/left/ItineraryFormView/step.html.twig");t.exports=r.extend({el:"#ItineraryFormView",_datePickrs:null,_model:null,maxSteps:6,events:{"submit form":"_onFormSubmit","click .itineraryMode li a":"_onModeClick","click #realtimeTraffic":"_onRealTimeTrafficClick","change #ItineraryFormView-tmo-auto-gasType":"_updatePriceFieldValue","change #ItineraryFormView-tmo-auto-hour,#ItineraryFormView-tmo-tc-hour":"_onHourChange","click .itineraryOptionAddStep":"_createStepField","click .itineraryOptionInvert":"_invertFields","click .itineraryFormToggleOptions a":"_toggleOptions","click .itineraryOptionLocalize":"_onLocalizeClick","click a.itineraryOptionRemoveStep":"_removeStepField","click a.options":"_onOptionsClick","keyup input[type=text]":"_onTextFieldKeyup"},initialize:function(){this._datePickrs={},this._resolvedAmbiguities={},this._gasCosts=window.parameters.gasCosts,this.fromField=new n({el:this.$("input[name=from]").parent()}),this.fromField.on("clear",function(){this.$(".itineraryOptionLocalize").removeClass("active")},this),this.fromField.on("clear",o.bind(this._clearIntent,this.fromField)),this.fromField.on("clear",this._onFormClick,this),this.fromField.on("focus",this._onTextFieldFocus,this),this.toField=new n({el:this.$("input[name=to]").parent()}),this.toField.on("clear",o.bind(this._clearIntent,this.toField)),this.toField.on("clear",this._onFormClick,this),this.toField.on("focus",this._onTextFieldFocus,this),this._ambiguityView=new a,this._ambiguityView.on("ambiguityResolved",this._onAmbiguityResolved,this),this._resolvedAmbiguities={},this.hide()},setFormModel:function(e){this._model=e,this._stepFields=[],this._stepFieldsInsances=[],this.$(".stepFormField").remove();for(var t=0;t<e.get("steps").length;t++)e.get("steps")[t].get("visible")&&(this._createStepField(),this._stepFields[this._stepFields.length-1].find("input")[0].value=e.get("steps")[t].get("value"));this.$(".headerFormLayer").removeClass("open"),this.$("#ItineraryFormView-itinerary-options-container").removeClass("open"),this.$el.hide(),this.mode=this._model.get("mode"),"tc"===this.mode?this.$(".ItineraryFormTCDescription").removeClass("none"):this.$(".ItineraryFormTCDescription").addClass("none"),this._bindDatepicker(this.mode),this.$("#ItineraryFormView-transport-mode").val(this.mode),("auto"===this.mode||"tc"===this.mode)&&this._updateHourSelector(Mappy.dateFormat(e.getDateObject(),"dd/mm/yy")),e.get("vehicle")&&this.$("#ItineraryFormView-tmo-auto-vehicle").val(e.get("vehicle")),this.$(".itineraryMode li").removeClass("active"),this.$(".itineraryMode li[data-mode="+this.mode+"]").addClass("active"),this.$(".itineraryFormOptions").addClass("none"),this.$("#ItineraryFormView-tmo-"+this.mode).removeClass("none"),this.$("input[type=text]").removeClass("error");for(var i in e.attributes)if(e.get(i)){var o=this.$("[name="+i+"]");if(o.length)if("checkbox"===o[0].type&&e.get(i))o[0].checked=!0;else if("radio"===o[0].type){for(var r=0;r<o.length;r++)if(o[r].value===e.get(i)){o[r].checked=!0;break}}else{var s=e.get(i).get?e.get(i).get("value"):e.get(i);"hour"===i&&(s=parseInt(s,10)<10?"0"+parseInt(s,10):s),o.val(s)}}this._updatePriceFieldValue(),parameters.size<parameters.sizes.normal&&!this.fromField.hasValue()&&this.fromField.setValueToCurrentLocation()},hide:function(){r.prototype.hide.call(this),this._ambiguityView.remove()},show:function(){r.prototype.show.call(this),this.$(".itineraryOptionLocalize").removeClass("active")},setBrowserLocation:function(e){this.setFieldValue("from",e.get("rawAddress")),this.$(".itineraryOptionLocalize").addClass("active")},getFormModel:function(){return this._model},getStepFields:function(){return this._stepFields},focusFrom:function(){this.fromField.focus()},focusNext:function(e){var t=e.parents(".stepLine").next().find("input[type=text]");t.length>0&&(t.data("intent")||e.one("blur",function(){t.focus()}))},setFieldValue:function(e,t){var i=this.$("input[name="+e+"]");0===i.length&&(i=this._createStepField()),i.val(t),i.blur()},setFieldStatus:function(e,t){var i=this.$("input[name="+e+"]");i.length&&i.removeClass("error"),i.addClass(t)},noLocation:function(e){this.$("input[name="+e+"]").focus(),this.setMiniForm(!1),setTimeout(o.bind(function(){this.setFieldStatus(e,"error")},this),0)},ambigous:function(e,t){this.setFieldStatus(e,"error"),this._ambigousField="input[name="+e+"]",this._onFormClick();var i=this.$(this._ambigousField);this._ambiguityView.showAmbigous(t).$el.appendTo(i.parent()),this._ambiguityView.$el.css("width",this.toField.$el.css("width")),i.focus(),i.off("keydown"),i.on("keydown",o.bind(function(e){13===e.which&&(this._ambiguityView.resolveCurrentSelected(),this._ambiguityView.remove()),38===e.which&&this._ambiguityView.selectRow("down"),40===e.which&&this._ambiguityView.selectRow("up")},this))},setMiniForm:function(e){this.$el.toggleClass("mini",e)},selectMode:function(){this.$(".itineraryFormOptions").addClass("none"),o.defer(function(e){var t=e.$("#ItineraryFormView-transport-mode").val();e.$(".itineraryFormOptions.options-"+t).removeClass("none")},this)},_bindDatepicker:function(e){this._datePickrs[e]||(this._datePickrs[e]=new p({el:this.$("#ItineraryFormView-tmo-"+e+"-date").parent()}).render(),this._datePickrs[e].on("date_select",function(e){this._updateHourSelector(e)},this))},_onTextFieldFocus:function(e){this._onFormClick(),this.trigger("focus",e,e.$el.parents(".formField"),e.$el.find("input").attr("name"))},_onTextFieldKeyup:function(e){if(13!==e.keyCode){var t=$(e.target);t.removeClass("error"),"from"===t.attr("name")&&this.$(".itineraryOptionLocalize").removeClass("active"),this.trigger("keypress")}this._ambiguityView.remove()},_onFormClick:function(){this.trigger("formclick")},_onOptionsClick:function(e){e.preventDefault(),this.trigger("optionsClick")},_onLocalizeClick:function(e){e.preventDefault(),this._onFormClick();var t=this.$(".itineraryOptionLocalize");t.hasClass("active")?(t.removeClass("active"),this.setFieldValue("from","")):this.trigger("geocodeclick")},_onModeClick:function(e){e.preventDefault(),this.$el.hasClass("mini")&&e.stopPropagation();var t=$(e.currentTarget).parent(),i=t.attr("data-mode");this.$("#ItineraryFormView-transport-mode").val(i),this.$(".itineraryMode li").removeClass("active"),t.addClass("active"),"tc"===i?this.$(".ItineraryFormTCDescription").removeClass("none"):this.$(".ItineraryFormTCDescription").addClass("none"),this.$(".itineraryFormOptions").addClass("none"),this.$("#ItineraryFormView-tmo-"+i).removeClass("none"),this.mode=i,("auto"===i||"tc"===i)&&(this._bindDatepicker(i),this._updateHourSelector(Mappy.dateFormat(new Date,"dd/mm/yy"))),this.trigger("modeClick",i)},_onRealTimeTrafficClick:function(e){e.target.checked?($(".options-auto .itineraryFormDates").removeClass("disabled"),$(".options-auto .itineraryFormDates select, .options-auto .itineraryFormDates input").removeAttr("disabled"),$(".options-auto .itineraryFormDates input").removeAttr("disabled").removeAttr("readonly")):($(".options-auto .itineraryFormDates").addClass("disabled"),$(".options-auto .itineraryFormDates select, .options-auto .itineraryFormDates input").attr("disabled","disabled"))},_updatePriceFieldValue:function(){var e=this.$("#ItineraryFormView-tmo-auto-gasPrice"),t=this.$("#ItineraryFormView-tmo-auto-gasType").find("option:selected").attr("data-fuel-id");e.val(this._gasCosts[t])},_onHourChange:function(e){var t=this._datePickrs[this.mode].getCurrentValue();this._updateMinuteSelector(t,parseInt($(e.target).val(),10))},_updateHourSelector:function(e){var t=this.$("#ItineraryFormView-tmo-"+this.mode+"-hour"),i=new Date,o=Mappy.dateFormat(i,"dd/mm/yy");if(o===e)if(t.find("option").each(function(){var e=$(this);parseInt(e.val(),10)<i.getHours()?e.attr("disabled",!0).attr("selected",!1):e.attr("disabled",!1)}),parseInt(t.val(),10)<i.getHours()){var r=i.getHours()%24;r=("0"+r).slice(-2),t.val(r)}else t.val(t.find("option:not(:disabled)").eq(0).val());else t.find("option").attr("disabled",!1);this._updateMinuteSelector(e,parseInt(t.val(),10))},_updateMinuteSelector:function(e,t){function i(e){o.delay(function(){r.val(e)})}var r=this.$("#ItineraryFormView-tmo-"+this.mode+"-minutes"),s=new Date,n=Mappy.dateFormat(s,"dd/mm/yy");if(n===e&&t===s.getHours())if(r.find("option").each(function(){var e=$(this);parseInt(e.val(),10)<s.getMinutes()?e.attr("disabled",!0).attr("selected",!1):e.attr("disabled",!1)}),parseInt(r.val()||0,10)<s.getMinutes()){var a=5*(parseInt(s.getMinutes()/5,10)+1);a%=60,a=("0"+a).slice(-2),i(a)}else i(r.find("option:not(:disabled)").eq(0).val());else r.find("option").attr("disabled",!1)},_onAmbiguityResolved:function(e){e&&($(this._ambigousField).val(e.getAddressStr()).attr("data-amb","true").removeClass("error").blur(),this._resolvedAmbiguities[$(this._ambigousField).attr("name")]=e,this.submit())},submit:function(){this.$("form").submit()},setSubmitState:function(e){e?this.$("input").addClass("geocoding"):this.$("input").removeClass("geocoding")},_onFormSubmit:function(e){e.preventDefault(),this._ambiguityView.remove();var t=$.fn.serializeArray;$.fn.extend({serializeArray:function(){var e=t.apply(this),i=$(this).find("input[type=checkbox]").map(function(){return{name:this.name,value:this.checked}}).get(),o=$.map(i,function(e){return e.name}),r=$.grep(e,function(e){return-1===$.inArray(e.name,o)});return $.merge(r,i)}});var i=$(e.currentTarget?e.currentTarget:e.srcElement),r=i.serializeArray(),n=this.$("#ItineraryFormView-transport-mode")[0].value,a={};"tc"===n||"auto"===n?(a.timeSens=this.$("#ItineraryFormView-tmo-"+n+"-timeSens")[0].value,a.date=this._datePickrs[n].getCurrentValue(),a.hour=this.$("#ItineraryFormView-tmo-"+n+"-hour")[0].value,a.minutes=this.$("#ItineraryFormView-tmo-"+n+"-minutes")[0].value):(a.hour=(new Date).getHours(),a.minutes=(new Date).getMinutes());

for(var p=!0,l=0;l<r.length;l++){var c,u=r[l];if("step"===u.name.substr(0,4)){var y=parseInt(u.name.substr(5,1),10);c=$("input[name='"+u.name+"']",i);var h=this._model.get("steps")[y];h.set("value",c.val().replace(/^\s+|\s+$/gm,"")),h.set("visible",!0),this._fillModelField(h,c)}else if(u.name in this._model.attributes){var d=u.name;this._model.get(d)instanceof s&&(c=this.$("input[name='"+u.name+"']",i),""===c.val().replace(/^\s+|\s+$/gm,"")&&this._model.get(d).get("required")&&(this.setFieldStatus(c.attr("name"),"error"),p=!1),this._fillModelField(this._model.get(d),c));var g=a[u.name]?a[u.name]:u.value;"auto"===n&&"timeSens"===u.name&&a[u.name]&&!this.$("#realtimeTraffic:checked").length&&(g=""),this._model.get(d).set?this._model.get(d).set("value",g):this._model.set(d,g)}}if($.fn.serializeArray=t,p){var m=[this.fromField.resolveValue(),this.toField.resolveValue()],v=o.map(this._stepFieldsInsances,function(e){return e.resolveValue()});Promise.all(m.concat(v)).then(o.bind(function(e){this._model.get("from").set("value",e[0]),this._model.get("to").set("value",e[1]);for(var t=this._model.get("steps"),i=0;i<v.length;i++)t[i].set("value",e[i+2]);this.trigger("submit",this._model)},this)).then(void 0,o.bind(this.trigger,this,"submit-error"))}else{var f=this.$('input[type="text"][autocomplete="off"]').filter(function(){return""===this.value}).first();o.defer(o.bind(f.focus,f))}},_fillModelField:function(e,t){var i=this._resolvedAmbiguities[t.attr("name")]||null;"true"===t.attr("data-amb")&&i?(e.set("location",i),e.set("longitude",i.getLocation().get("lng")),e.set("latitude",i.getLocation().get("lat"))):(!i||e.get("location")&&t.val()!==i.getAddressStr())&&(e.set("location",null),e.set("longitude",null),e.set("latitude",null)),t.removeAttr("data-amb")},removeEmptySteps:function(){for(var e=o.bind(this._removeStepFieldByIndex,this),t=this.$el.find(".stepFormField"),i=t.length-1;i>=0;i--)$(t[i]).find("input")[0].value||e(i)},_removeStepField:function(e){e.preventDefault();var t=$(e.currentTarget).parent("div").index(".stepFormField");this._removeStepFieldByIndex(t)},_removeStepFieldByIndex:function(e){for(var t=[],i=0;i<this._stepFields.length;i++)i!==e&&t.push(this._stepFields[i].find("input")[0].value);this._stepFieldsInsances[this._stepFieldsInsances.length-1].remove(),this._stepFieldsInsances.pop(),this._stepFields[this._stepFields.length-1].remove(),this._stepFields.pop(),this.$(".itineraryOptionAddStep").show();for(var o=0;o<t.length;o++)this._stepFields[o].find("input")[0].value=t[o];this._model.get("steps").splice(e,1),this._model.get("steps").push(new s)},_createStepField:function(e){if(e&&e.preventDefault(),this._onFormClick(),this._stepFields.length<this.maxSteps){var t=this._stepFields.length,i=$(l.render({stepIdx:t}));this.$(".endFormField").before(i),this._stepFields.push(i),6===this._stepFields.length&&this.$(".itineraryOptionAddStep").hide(),this.delegateEvents();var r=new n({el:i.find(".TextfieldView")});r.on("focus",this._onTextFieldFocus,this),r.focus(!1),this._stepFieldsInsances.push(r),r.on("clear",o.bind(this._clearIntent,r)),r.on("clear",this._onFormClick,this)}},_invertFields:function(e){e.preventDefault(),this._onFormClick();var t=this.fromField.getValue();this.fromField.setValue(this.toField.getValue()),this.toField.setValue(t)},_toggleOptions:function(e){e.preventDefault(),this.$(".optionsDetail").toggleClass("none");var t=this.$(".optionsDetail").hasClass("none")?"itineraryForm_more_options":"itineraryForm_less_options";this.$(".itineraryFormToggleOptions a").html(Template.getText(t))},_clearIntent:function(){this.$input.removeData("intent")}})}},{"../../../../../../../views/shared/left/ItineraryFormView/step.html.twig":301,"../../../../model/form/AddressFieldModel":156,"../../../BaseView":167,"../../../mixins/AmbiguityView/AmbiguityView":219,"../../../mixins/DatePickerView/DatePickerView":234,"../TextfieldView/AddressFieldView":192,"./../../../../../lib/bower_components/underscore/underscore.js":29}],191:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("../TextfieldView/AddressFieldView"),n=e("../../../../core/utils/Device");t.exports=r.extend({el:"#SearchFormView",events:{"submit form":"_onFormSubmit","mousedown input[type=submit]":"_onFormSubmit","click .switch-list":"_onSwitchListClick"},initialize:function(){this.textfield=new s({el:this.$(".TextfieldView")}),this.textfield.on("focus",this._onInputFocus,this),this.textfield.on("clear",this._onInputClear,this),this.textfield.on("blur",this._onInputBlur,this)},resolveKeyword:function(){return this.textfield.resolveValue()},getKeyword:function(){return this.textfield.getValue()},setKeyword:function(e){this.textfield.setValue(e)},focusKeyword:function(){this.textfield.focus()},submit:function(){this.$el.find("form").submit()},_onFormSubmit:function(e){return e.preventDefault(),this.textfield.hasValue()&&""!==this.textfield.getValue()?(this.resolveKeyword().then(o.bind(function(e){this.trigger("submit",e),this.textfield.blur()},this)).then(void 0,o.bind(this.trigger,this,"submit-error")),!0):(this.textfield.error(),!1)},_onInputFocus:function(e){this.isAndroid()&&this.setMappyViewportHeight(),this.$(".TextfieldView").addClass("focus"),this.trigger("focus",e,this.$el)},_onInputBlur:function(){this.$(".TextfieldView").removeClass("focus"),this.isAndroid()&&setTimeout(function(){this.setMappyViewportHeight("auto")}.bind(this),2e3)},setMappyViewportHeight:function(e){var t=Mappy.ControllerFactory.getIndexView().getMapView().$el;e=e||t.height(),t.css("height",e)},isAndroid:function(){return n.isAndroid(navigator.userAgent)},_onInputClear:function(){this.trigger("clear")},_onSwitchListClick:function(){this.trigger("switchListClick")}})}},{"../../../../core/utils/Device":94,"../../../BaseView":167,"../TextfieldView/AddressFieldView":192,"./../../../../../lib/bower_components/underscore/underscore.js":29}],192:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("./TextfieldView"),s=e("../../../../model/LocationModel");t.exports=r.extend({resolveValue:function(){return this.getValue().toLowerCase()===Template.getText("address_field.current_location").toLowerCase()?s.fromNavigatorGeolocation({"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]}).then(o.bind(function(e){return this.setValue(e.get("name")),this.getValue()},this)):Promise.resolve(this.getValue())},setValueToCurrentLocation:function(){this.setValue(Template.getText("address_field.current_location"))}})}},{"../../../../model/LocationModel":121,"./../../../../../lib/bower_components/underscore/underscore.js":29,"./TextfieldView":193}],193:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=e("../../../../core/utils/Device.js"),n=e("../../../../../../../views/shared/left/form/TextfieldView.html.twig"),a=t.exports=r.extend({events:{"touchstart span":"_onClearClick","mousedown span":"_onClearClick","click input[type=text]":"_onClick","blur input[type=text]":"_onInputBlur","keyup input[type=text]":"_onInputKeyup","focus input[type=text]":"_onInputFocus"},initialize:function(e){a.__super__.initialize.call(this,e),this._setup()},render:function(e){return this.$el=$(n.render(e)),this.delegateEvents(),this._setup(),this},focus:function(){o.defer(o.bind(this.$input.focus,this.$input))},blur:function(){this.$input.blur()},error:function(){this.$input.addClass("error")},hasValue:function(){return""!==this.getValue()},getValue:function(){return this.$input.val().replace(/^\s+|\s+$/gm,"")},setValue:function(e){this.$input.val(e),this._toggleClearAndRemoveError()},scrollTop:function(){s.hasTouchSupport()&&(window.scrollTo(0,0),document.body.scrollTop=0,parameters.size<parameters.sizes.normal?window.scrollTo(0,this.$el.offset().top-10):$("#ScrollableLeftView").scrollTo(this.$el,{offset:-10}))},_setup:function(){this.$input=this.$("input"),this.$clear=this.$("span")},_toggleClearAndRemoveError:function(){this.$input.removeClass("error"),this.$clear.toggle(this.hasValue())},_onClick:function(){this.trigger("click")},_onClearClick:function(e){e.preventDefault(),e.stopPropagation(),this.$input.val(""),this._toggleClearAndRemoveError(),this.trigger("clear"),this.focus()},_onInputKeyup:function(e){13!==e.keyCode&&this._toggleClearAndRemoveError()},_onInputFocus:function(){this.scrollTop(),this.trigger("focus",this)},_onInputBlur:function(){this._toggleClearAndRemoveError(),this.trigger("blur")}})},{"../../../../../../../views/shared/left/form/TextfieldView.html.twig":303,"../../../../core/utils/Device.js":94,"../../../BaseView":167,"./../../../../../lib/bower_components/underscore/underscore.js":29}],194:[function(e,t,i){"use strict";{var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../ListView/ListView"),s=e("../../../../core/utils/Device.js");t.exports=r.extend({template:e("../../../../../../../views/shared/left/GeoentityListView.html.twig"),events:{"click h3 a":"_onTitleClick","click a.button":"_onReservationButtonClick","click a.partnerTabLink":"_onPartnerTabLinkClick","click .geoentity":"_onGeoentityClick","mouseenter .geoentity":"_onGeoentityMouseover","mouseleave .geoentity":"_onGeoentityMouseout","mousedown .geoentity":"_onGeoentityMousedown"},initialize:function(e,t){this._models=e,this._browserGeoPosition=t,this.render()},render:function(){var e=[];return this._browserGeoPosition&&o.each(this._models,o.bind(function(t){var i=L.latLng(this._browserGeoPosition.lat,this._browserGeoPosition.lng),o=L.latLng(t.get("location").get("lat"),t.get("location").get("lng"));e.push(i.distanceTo(o))},this)),this.$el.html(this.template.render({models:o.invoke(this._models,"toJSON"),distances:e,isRetina:s.isRetina()})),this.$("a.button").each(o.bind(function(e,t){var i=$(t),o=i.attr("href");i.attr("href",Mappy.ControllerFactory.getGeoentityController().getPartnerUrl(o))},this)),this},_onTitleClick:function(e){return e.metaKey===!0||e.ctrlKey?(e.stopPropagation(),!0):void e.preventDefault()},_onReservationButtonClick:function(e){e.stopPropagation(),e.preventDefault(),this.trigger("reservationClick",$(e.currentTarget).attr("href"),this._models[$(e.currentTarget).parents(".geoentity").index()])},_onPartnerTabLinkClick:function(e){return e.metaKey===!0||e.ctrlKey?(e.stopPropagation(),!0):(e.stopPropagation(),e.preventDefault(),void this.trigger("modelClick",this._models[$(e.currentTarget).parents(".geoentity").index()],$(e.currentTarget).data("partnerid")))},_onGeoentityClick:function(e){if(e.clientX!==this._mousedownPosition.clientX&&e.clientY!==this._mousedownPosition.clientY)return this._mousedownPosition={},!1;var t=$(e.target).hasClass("more-info");this.trigger("modelClick",this._models[$(e.currentTarget).index()],null,t)},_onGeoentityMouseover:function(e){var t;s.hasTouchSupport()||(t=this._models[$(e.currentTarget).index()],t.set({isTooltipFull:!1},{silent:!0}),this.trigger("modelOver",t))},_onGeoentityMouseout:function(e){s.hasTouchSupport()||this.trigger("modelOut",this._models[$(e.currentTarget).index()])},_onGeoentityMousedown:function(e){this._mousedownPosition={clientX:e.clientX,clientY:e.clientY}},highlightModel:function(e){this.$el.find(".geoentity").removeClass("hover"),this.getModelElement(e).addClass("hover")},unhighlightModel:function(e){this.getModelElement(e).removeClass("hover")}})}},{"../../../../../../../views/shared/left/GeoentityListView.html.twig":300,"../../../../core/utils/Device.js":94,"../ListView/ListView":195,"./../../../../../lib/bower_components/underscore/underscore.js":29}],195:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../BaseView"),s=t.exports=r.extend({template:null,models:[],initialize:function(e){this._models=e,this.render()},render:function(){return this.$el=$(this.template.render({models:o.invoke(this._models,"toJSON")})),this},getModelElement:function(e){return $(this.$el.children().get(o.indexOf(this._models,e)))},getModels:function(){return this._models},remove:function(){this._models=null,this.undelegateEvents(),s.__super__.remove.call(this)}})},{"../../../BaseView":167,"./../../../../../lib/bower_components/underscore/underscore.js":29}],196:[function(e,t,i){"use strict";var o=e("../ListView/ListView"),r=e("../../../../../../../views/shared/left/LocationListView.html.twig"),s=t.exports=o.extend({template:r,events:{"click .location":"_onLocationClick","mouseenter .location":"_onLocationMouseover","mouseleave .location":"_onLocationMouseout","click a.readMore":"_onLocationDescriptionClick","click .smallButton":"_onLocationItineraryClick"},render:function(){s.__super__.render.call(this),this.delegateEvents()},updateLocationDescription:function(e){var t=e.toJSON();t.description=Mappy.stringTruncate(t.description,150);var i=$(r.render({models:[t]})).find("p");this.getModelElement(e).find(".informations").append(i),this.delegateEvents()},_onLocationClick:function(e){this.trigger("modelClick",this._models[$(e.currentTarget).index()])},_onLocationMouseover:function(e){this.trigger("modelOver",this._models[$(e.currentTarget).index()])},_onLocationMouseout:function(e){this.trigger("modelOut",this._models[$(e.currentTarget).index()])},highlightModel:function(e){this.$el.find(".location").removeClass("hover"),this.getModelElement(e).addClass("hover")},unhighlightModel:function(e){this.getModelElement(e).removeClass("hover")},_onLocationItineraryClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("modelGoToItinerary",this._models[$(e.currentTarget).index()])},_onLocationDescriptionClick:function(e){e.preventDefault(),e.stopPropagation();var t=this._models[$(e.currentTarget).index()].get("description").get("description");$(e.currentTarget).parent().html(t)}})},{"../../../../../../../views/shared/left/LocationListView.html.twig":302,"../ListView/ListView":195}],197:[function(e,t,i){"use strict";{var o=e("../../BaseView");t.exports=o.extend({initialize:function(e){if(!this.template)throw"Template property must be defined";var t=e&&e.viewParameters?e.viewParameters:{};this.render(t).show()},render:function(e){return this.$el=$(this.template.render(e)),this.delegateEvents(),this}})}},{"../../BaseView":167}],198:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../AbstractTabView"),s=e("../../../../model/PanoTileModel"),n=t.exports=r.extend({template:e("../../../../../../../views/shared/left/tab/AddressTabView.html.twig"),events:{"click .backToSearch":"_onBackToSearchClick","click .itinerary-to":"_onGoToClick","click .switchToViewIcon":"_onViewIconClick"},render:function(){return n.__super__.render.call(this),this},setLocation:function(e,t){var i=$(this.template.render({location:e.toJSON(),distance:t}));this._locationModel=e,this.$el.replaceWith(i),this.setElement(i),this._displayBackgroundAndViewIcon(e)},_onBackToSearchClick:function(e){e.preventDefault(),this.trigger("backToSearch")},_onGoToClick:function(e){e.preventDefault(),this.trigger("itineraryTo")},_onViewIconClick:function(e){e.preventDefault(),this._locationModel&&Mappy.ControllerFactory.getNavigationController().switchToImmersiveView(this._locationModel)},_displayBackgroundAndViewIcon:function(e){new s({from:e,to:e,preview:!1}).fetch().then(o.bind(function(e){this.$el.find("#address-background").css("background-image","url("+e.get("url")+")").css("background-size","cover").css("background-position","50%"),this.$el.find(".identity h1").append($("<a />").addClass("switchToViewIcon"))},this)).then(void 0,o.bind(function(){this._map=new L.Mappy.Map("address-background",{layersControl:!1,zoomControl:!1,scrollWheelZoom:!1,tileLayerOptions:{minZoom:2,detectRetina:!0,unloadInvisibleTiles:!0}}),this._map.disableInteractions(),this._map.setViewmode("photo"),this._map.setView(L.latLng(e.get("lat"),e.get("lng")),e.get("zoomLevel"))},this))}})},{"../../../../../../../views/shared/left/tab/AddressTabView.html.twig":304,"../../../../model/PanoTileModel":123,"../AbstractTabView":197,"./../../../../../lib/bower_components/underscore/underscore.js":29}],199:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../AbstractTabView"),s=e("../../../../../../../views/shared/left/GeoentityFullListView.html.twig"),n=t.exports=r.extend({template:e("../../../../../../../views/shared/left/tab/CategoryTabFullListView.html.twig"),events:{"click h2 a":"_onTitleClick","click a.link-description-list":"_onReservationButtonClick","click button":"_onPartnerTabLinkClick","click .geoentity":"_onGeoentityClick","click .mappy-button-footer-expand":"_onFooterClick"},initialize:function(e){e=e||{},this.render(),this.delegateEvents(),this._rubricLabel=e.rubricLabel,$("#RightView").html(this.$el)},render:function(){return n.__super__.render.call(this),this.$list=this.$(".CategoryTabFullListView-list"),this.$noresults=this.$(".CategoryTabFullListView-noresults"),this.$throbber=this.$(".CategoryTabFullListView-throbber"),this},renderGeoentities:function(e){this.hideThrobber(),this.$noresults.hide(),this._showList(),this._models=e,this.$list.html(s.render(this.getTemplateDate())),this.$list.find("a.link-description-list").each(o.bind(function(e,t){var i=$(t),o=i.attr("href");i.attr("href",Mappy.ControllerFactory.getGeoentityController().getPartnerUrl(o))},this)),this.delegateEvents()},getTemplateDate:function(){var e=o.invoke(this._models,"toJSON");return e=o.map(e,function(e){var t=e&&e.reviews&&e.reviews.averageNote;return t&&(e.reviews.averageNote=o.stringReplace(t,".",",")),e}),{geoentities:e,rubrique:this._rubricLabel}},displayNoResults:function(){this.$noresults.show()},hideNoResults:function(){this.$noresults.hide()},removeGeoentities:function(){this.undelegateEvents(),this.$list.empty()},showGeoentities:function(){this._showList()},hideGeoentities:function(){this._hideList()},showThrobber:function(){this.$throbber.show(),this.$noresults.hide(),this._hideList()},hideThrobber:function(){this.$throbber.hide()},_showList:function(){this.$list.show(),$("#RightView").show()},_hideList:function(){this.$list.hide()},hideRightView:function(){$("#RightView").hide()},_onTitleClick:function(e){return e.metaKey===!0||e.ctrlKey?(e.stopPropagation(),!0):void e.preventDefault()},_onReservationButtonClick:function(e){e.stopPropagation(),e.preventDefault(),this.trigger("reservationClick",$(e.currentTarget).attr("href"),this._models[$(e.currentTarget).parents(".geoentity").index()])},_onPartnerTabLinkClick:function(e){var t;return e.metaKey===!0||e.ctrlKey?(e.stopPropagation(),!0):(e.stopPropagation(),e.preventDefault(),t=$(e.currentTarget).parents("li"),void this.trigger("modelClick",this._models[t.index()],$(e.currentTarget).data("partnerid")))},_onGeoentityClick:function(e){var t=$(e.currentTarget).parents("li");this.trigger("modelClick",this._models[t.index()],null,!1)},_onFooterClick:function(){this.trigger("footerClick")},remove:function(){this.hideRightView(),r.__super__.remove.call(this,arguments)}})},{"../../../../../../../views/shared/left/GeoentityFullListView.html.twig":299,"../../../../../../../views/shared/left/tab/CategoryTabFullListView.html.twig":305,"../AbstractTabView":197,"./../../../../../lib/bower_components/underscore/underscore.js":29}],200:[function(e,t,i){"use strict";var o=e("../AbstractTabView"),r=t.exports=o.extend({template:e("../../../../../../../views/shared/left/tab/CategoryTabView.html.twig"),render:function(e){return r.__super__.render.call(this,e),this.$category=this.$(".CategoryTabView-category"),this.$noresults=this.$(".CategoryTabView-noresults"),this.$throbber=this.$(".CategoryTabView-throbber"),this},displayGeoentities:function(e){this.hideThrobber(),this.$noresults.hide(),this.$category.show(),this.$category.empty().append(e.$el)},displayNoResults:function(){this.$noresults.show()},hideNoResults:function(){this.$noresults.hide()},removeGeoentities:function(){this.$category.empty()},showGeoentities:function(){this.$category.show()},hideGeoentities:function(){this.$category.hide()},showAllFilters:function(){this.$el.addClass("fulllist")},hideAllFilters:function(){this.$el.removeClass("fulllist")},showThrobber:function(){this.$throbber.show(),this.$noresults.hide(),this.$category.hide()},hideThrobber:function(){this.$throbber.hide()},locationFilterError:function(){this.$(".LocationFilterView .TextfieldView input").addClass("error")}})},{"../../../../../../../views/shared/left/tab/CategoryTabView.html.twig":306,"../AbstractTabView":197}],201:[function(e,t,i){"use strict";{var o=(e("./../../../../../lib/bower_components/underscore/underscore.js"),e("../AbstractTabView"));t.exports=o.extend({template:e("../../../../../../../views/shared/left/tab/GeoentityTabView.html.twig"),events:{"click .back":"_onBackClick","click .next":"_onNextClick","click .backToResults":"_onBackToResultsClick","click .backToSearch":"_onBackToSearchClick","click .backToGeoentity":"_onBacktoGeoentityClick","click .address .lightBlueButton":"_onGoToClick","click .address h2":"_onAddressClick","click .name h2":"_onRubricClick","click .switchToViewIcon":"_onIndoorButtonClick","click .email a":"_onEmailClick","click .url a":"_onWebsiteClick","click .identity":"_onClickFullscreen","click .tel.clickToShow":"_onClickTelToShow","click .tel":"_onClickTel"},setGeoentity:function(e,t,i){var o=this.getTemplateData(e,t,i);o.geoentityModel&&o.geoentityModel.additionalInfo&&o.geoentityModel.additionalInfo.reservationTemplatizedUrl&&"hotel"===o.geoentityModel.rubricId&&(o.reservationUrl=Mappy.ControllerFactory.getGeoentityController().getPartnerUrl(o.geoentityModel.additionalInfo.reservationTemplatizedUrl));var r=$(this.template.render(o));this.$el.replaceWith(r),this.setElement(r),this.model=e},getTemplateData:function(e,t,i){return{geoentityModel:e.toJSON(),distance:i,hideContactInformations:e.shouldHideContactInformations(),shouldHideBackButton:t||!1,displayTelClickToShow:parameters.size>parameters.sizes.small}},showBackToResultsButton:function(){this.$el.find(".backToResults").removeClass("disabled")},showBackToSearchButton:function(){this.$el.find(".backToSearch").removeClass("disabled")},showBackButton:function(){this.$el.find(".back").removeClass("disabled")},showNextButton:function(){this.$el.find(".next").removeClass("disabled")},updateSiteLink:function(e){var t=this.$el.find(".url a");t.attr("href",Mappy.twig.geoentity_templatized_url(Mappy.ControllerFactory.getGeoentityController().getPartnerUrl(e))),t.addClass("reservation")},_onGoToClick:function(e){e.preventDefault(),this.trigger("itineraryTo")},_onAddressClick:function(){this.trigger("showAddress")},_onRubricClick:function(){this.trigger("searchByRubric")},_onBackClick:function(e){e.preventDefault(),this.trigger("back")},_onNextClick:function(e){e.preventDefault(),this.trigger("next")},_onBackToResultsClick:function(e){e.preventDefault(),this.trigger("backToResults")},_onBackToSearchClick:function(e){e.preventDefault(),this.trigger("backToSearch")},_onBacktoGeoentityClick:function(e){e.preventDefault(),this.trigger("backToGeoentity")},_onIndoorButtonClick:function(e){e.preventDefault(),this.trigger("indoorClick")},_onEmailClick:function(){this.trigger("emailClick")},_onWebsiteClick:function(e){var t=$(e.target);t.hasClass("reservation")?(e.preventDefault(),this.trigger("reservationClick",t.attr("href"),this.model,Mappy.XitiController.REDIRECT_WEB)):this.trigger("websiteClick")},_onClickFullscreen:function(e){var t=$(e.target).closest(".address .smallButton, .address h2, .name h2, .email a, .url a").length;if(!(window.parameters.size>window.parameters.sizes.medium||t)){var i=Mappy.ControllerFactory.getIndexView(),o=i.$el.is(".fullscreen");if(i._mapView.trigger("fullscreen",{active:!o}),o){var r=Mappy.ControllerFactory.getIndexView().getMapView();r.switchIconSize(r._modelFocused,"medium")}var s=$(".mappy-control-fullscreen");s.css("display",o?"none":"block"),Mappy.ControllerFactory.getIndexView()._mapView.once("fullscreen",function(e){$(".mappy-control-fullscreen").css("display",e.active?"block":"none")}),s.find("a").attr("data-active",o?"0":"1").toggleClass("mappy-button-active",!o),s.find("span").text(o?'"':"N")}},_onClickTel:function(e){e.stopImmediatePropagation(),this.trigger("telClick")},_onClickTelToShow:function(e){e.stopImmediatePropagation(),this.$(e.target).remove(),this.$(".tel").removeClass("hide"),this.trigger("telToShowClick")}})}},{"../../../../../../../views/shared/left/tab/GeoentityTabView.html.twig":307,"../AbstractTabView":197,"./../../../../../lib/bower_components/underscore/underscore.js":29}],202:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../AbstractTabView"),s=t.exports=r.extend({template:e("../../../../../../../views/shared/left/tab/HomeTabView.html.twig"),events:{"click .seoLocations a":"_onSEOLocationClick","click .categories ul li":"_onSEOCategoryClick"},initialize:function(e,t){s.__super__.initialize.call(this,{viewParameters:{seoLocationsLV:e,quickAccessSubcategories:o.invoke(t,"toJSON")}})},_onSEOLocationClick:function(e){e.preventDefault(),this.trigger("locationClick",e.target.innerHTML.replace(/Plan /i,"").replace(/Map /i,"").replace(/Kaart /i,""))},_onSEOCategoryClick:function(e){e.preventDefault(),this.trigger("categoryClick",$(e.currentTarget).find("a").attr("data-rubricids"))}})},{"../../../../../../../views/shared/left/tab/HomeTabView.html.twig":308,"../AbstractTabView":197,"./../../../../../lib/bower_components/underscore/underscore.js":29}],203:[function(e,t,i){"use strict";var o=e("../AbstractTabView"),r=t.exports=o.extend({template:e("../../../../../../../views/shared/left/tab/HotelTabView.html.twig"),initialize:function(e){r.__super__.initialize.call(this,{viewParameters:{seoHotelLV:e}})}})},{"../../../../../../../views/shared/left/tab/HotelTabView.html.twig":309,"../AbstractTabView":197}],204:[function(e,t,i){"use strict";var o=e("../AbstractTabView"),r=t.exports=o.extend({template:e("../../../../../../../views/shared/left/tab/ItineraryHomeTabView.html.twig"),events:{"click a":"_onLinkClick"},initialize:function(e){r.__super__.initialize.call(this,{viewParameters:{seoItineraryMode:window.parameters.seoItineraryMode||"auto",seoItinerariesLV:e}})},_onLinkClick:function(e){e.preventDefault();var t=e.target.href;t=t.split("/");var i=t.pop().replace("-"," "),o=t.pop().replace("-"," ");Mappy.ControllerFactory.getHeaderFormController().setItineraryForm(),Mappy.ControllerFactory.getHeaderFormController().setItineraryFrom(o),Mappy.ControllerFactory.getHeaderFormController().setItineraryTo(i),Mappy.ControllerFactory.getHeaderFormController().searchItinerary()}})},{"../../../../../../../views/shared/left/tab/ItineraryHomeTabView.html.twig":310,"../AbstractTabView":197}],205:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../AbstractTabView"),s=e("../../../../core/utils/Device.js"),n={auto:e("../../../../../../../views/shared/itinerary/overview/auto.html.twig"),pieton:e("../../../../../../../views/shared/itinerary/overview/pieton.html.twig"),tc:e("../../../../../../../views/shared/itinerary/overview/tc.html.twig"),velo:e("../../../../../../../views/shared/itinerary/overview/velo.html.twig")},a=t.exports=r.extend({template:e("../../../../../../../views/shared/left/tab/ItineraryTabView.html.twig"),overviewElements:[],events:{"click .back":"_onBackClick"},render:function(){return a.__super__.render.call(this),this.$throbber=this.$("#ItineraryTabView-throbber"),this.$message=this.$("#ItineraryTabView-message"),this.$body=this.$("#ItineraryTabView-body"),this.$overviews=this.$body.find(".overviews"),this.$stif=this.$("#ItineraryTabView-stif"),this},displaySearching:function(){this.$throbber.show(),this.$message.hide(),this.$body.hide(),this.$body.length&&this.$overviews.empty()},hideSearching:function(){this.$throbber.hide()},displayError:function(e){this.$overviews.empty(),this.$throbber.hide(),this.$message.html(e).show(),this.$body.hide()},hideMessage:function(){this.$message.hide()},hideBody:function(){this.$body.hide()},setItinerary:function(e,t,i){t=t||0,this.$throbber.hide(),this.$message.empty().hide(),this.$overviews.empty(),this.overviewElements=[];var r=$("<h1 />").html(Template.getText("itinerary_to",{"%address%":i.get("to").get("value"),"%mode%":i.get("mode")}));this.$(".itineraryTitle h1").remove(),this.$(".itineraryTitle").append(r);var s=e.get("routes");s.each(function(t,i){this.createOverview(t,e.get("itineraryForm"),i)},this),this._setActiveOverview(t),e.get("interstitial")===!0&&parameters.size>=parameters.sizes.normal?(this.showInterstitial(),setTimeout(o.bind(this.hideInterstitial,this),2e3)):this.$body.show()},showInterstitial:function(){this.$body.hide(),this.$stif.show()},hideInterstitial:function(){this.$stif.hide(),this.$body.show()},createOverview:function(e,t,i){var r=t.getQueryParams(),a=$(n[e.get("mode")].render({mode:e.get("mode"),summary:e.get("summary").toJSON(),options:r,multimodal:!!r.transport_mode,itiIdx:i}));this.$overviews.append(a).show(),a.find("a.more").click(o.bind(function(e){e.preventDefault(),e.stopPropagation(),this.trigger("detailsclick",i)},this)),a.click(o.bind(function(){this._setActiveOverview(i),this.trigger("overviewClick",i)},this)),s.hasTouchSupport()||(a.hover(o.bind(function(e){$(e.currentTarget).addClass("over"),this.trigger("overviewHover",i)},this)),a.mouseleave(o.bind(function(e){$(e.currentTarget).removeClass("over"),this.trigger("overviewMouseLeave",i)},this))),this.overviewElements.push(a)},_setActiveOverview:function(e){for(var t=0;t<this.overviewElements.length;t++)this.overviewElements[t].removeClass("active");this.overviewElements[e].addClass("active")},_onBackClick:function(e){e.preventDefault(),this.trigger("back")}})},{"../../../../../../../views/shared/itinerary/overview/auto.html.twig":284,"../../../../../../../views/shared/itinerary/overview/pieton.html.twig":286,"../../../../../../../views/shared/itinerary/overview/tc.html.twig":287,"../../../../../../../views/shared/itinerary/overview/velo.html.twig":288,"../../../../../../../views/shared/left/tab/ItineraryTabView.html.twig":311,"../../../../core/utils/Device.js":94,"../AbstractTabView":197,"./../../../../../lib/bower_components/underscore/underscore.js":29}],206:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../AbstractTabView"),s=t.exports=r.extend({template:e("../../../../../../../views/shared/left/tab/SearchTabView.html.twig"),_geoentityListView:null,events:{"click  .categories a":"_onClickCategory"},initialize:function(e){this.quickAccessSubcategories=o.invoke(e,"toJSON"),this.render()},render:function(){return s.__super__.render.call(this,{viewParameters:{quickAccessSubcategories:this.quickAccessSubcategories}}),this.$message=this.$("#SearchTabView-message"),this.$content=this.$("#SearchTabView-content"),this.$category=this.$("#SearchTabView-category-name"),this},displayLocations:function(e){this.$("#SearchTabView-results-locations").empty().append(e.$el).show()},displayGeoentities:function(e){this._geoentityListView=e,this.$("#SearchTabView-results-geoentities").append(e.$el).show(),this.displayGeoentityTitle(!0)},displayGeoentityTitle:function(e){this.$("#SearchTabView-results-geoentities h2").toggle(e)},removeGeoentities:function(){this._geoentityListView&&(this._geoentityListView.remove(),this._geoentityListView=null),this.$("#SearchTabView-results-geoentities").hide()},removeGeoentityCategories:function(){this.$("#SearchTabView-results-geoentities .categories").remove()},displayGeoentityCategories:function(e){if(parameters.language.french){var t=e?o.filter(this.quickAccessSubcategories,function(e){
return"hotel"===e.id}):this.quickAccessSubcategories,i=this.$("#SearchTabView-results-geoentities"),r=$(this.template.render({quickAccessSubcategories:t})).find("#SearchTabView-results-geoentities");i.replaceWith(r),r.show()}},displayNoResults:function(){this.$message.html(Template.getText("search_no_results")).show()},displaySearching:function(){$("#TabView .throbber").remove(),parameters.size>parameters.sizes.medium&&this.$message.html("<div id='SearchTabView-throbber'></div>").show(),this.$content.empty(),this.$category.hide()},displayErrorMessage:function(e){this.$message.html(e).show(),this.$content.empty()},hideMessage:function(){this.$message.hide()},showSearchResults:function(){var e=$(this.template.render({quickAccessSubcategories:this.quickAccessSubcategories})).find("#SearchTabView-results");this.$content.html(e)},_onClickCategory:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("categoryClick",$(e.target).attr("data-rubricids"))}})},{"../../../../../../../views/shared/left/tab/SearchTabView.html.twig":312,"../AbstractTabView":197,"./../../../../../lib/bower_components/underscore/underscore.js":29}],207:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("../AbstractTabView"),s=e("../../form/TextfieldView/TextfieldView"),n=e("../../form/TextfieldView/AddressFieldView"),a=e("../../../mixins/AmbiguityView/AmbiguityView"),p=e("../../../../core/utils/Device.js"),l=t.exports=r.extend({template:e("../../../../../../../views/shared/left/tab/ShoppingTabView.html.twig"),events:{"submit form":"_onFormSubmit","click ul a":"_onBrandClick","click form > span.icon-geolocation":"_onGeolocationClick","touchstart form > span.icon-geolocation":"_onGeolocationClick","keyup input[name=fullAddress]":"_onAddressKeyup"},initialize:function(e){l.__super__.initialize.call(this,e),this.inputWhat=new s({el:this.$("input[name=whatSearchInput]").parent()}),this.inputWhere=new n({el:this.$("input[name=fullAddress]").parent()}),this.inputWhat.on("focus",o.bind(this._onFocus,this,"productFocus")),this.inputWhere.on("focus",o.bind(this._onFocus,this,"addressFocus")),this.inputWhere.on("clear",this.deactiveGeolocationIcon,this),this._ambiguityView=new a,this._ambiguityView.on("ambiguityResolved",this.goToShoppingSite,this),this.$geolocation=this.$el.find("form > span.icon-geolocation"),!p.hasTouchSupport()&&parameters.size>=parameters.sizes.normal&&this.inputWhat.focus()},_onFocus:function(e,t){this.trigger(e,t,this.$("form"))},setSigns:function(e){var t=$(this.template.render({signs:o.shuffle(e.toJSON()),format:p.isRetina()?"large":"small"}));this.$el.append(t.find(".signs")),this.delegateEvents()},setBrowserLocation:function(e){this.inputWhere.setValue(e.get("rawAddress")),this.$geolocation.addClass("active")},focusWhere:function(){this.inputWhere.focus()},_onFormSubmit:function(e){e.preventDefault();var t=!0;o.each([this.inputWhere,this.inputWhat],function(e){e.hasValue()||(e.error(),e.focus(),t=!1)},this),t&&this.inputWhere.resolveValue().then(o.bind(this.searchAddress,this)).then(void 0,o.bind(this.trigger,this,"submit-error"))},searchAddress:function(){return Mappy.ControllerFactory.getNavigationController().getActiveStrategy().searchByKeyword(this.$("form input[name=fullAddress]").val(),!0,!0).then(o.bind(function(e){return e.addresses.length>=2?void this.ambigous("fullAddress",e.addresses):void(1===e.addresses.length&&this.goToShoppingSite(e.addresses[0]))},this))},goToShoppingSite:function(e){var t={lat:e.get("lat"),lng:e.get("lng"),fullAddress:e.get("addressStr"),whatSearchInput:this.$("form input[name=whatSearchInput]").val()};this.trigger("submit",this.$("form").attr("action")+$.param(t))},setFieldStatus:function(e,t){var i=this.$("input[name="+e+"]");i.length&&i.removeClass("error"),i.addClass(t)},blurFieldStatus:function(e){this.$("input[name="+e+"]").blur()},ambigous:function(e,t){this.blurFieldStatus(e),this.setFieldStatus(e,"error"),this._ambigousField="input[name="+e+"]";var i=this.$(this._ambigousField);this._ambiguityView.showAmbigous(t).$el.appendTo(i.parent()),i.on("keydown",o.bind(function(){this._ambiguityView.remove()},this))},_onGeolocationClick:function(e){e.preventDefault(),e.stopPropagation(),this.$geolocation.hasClass("active")?(this.$geolocation.removeClass("active"),this.inputWhere.setValue("")):this.trigger("geolocationClick")},_onBrandClick:function(e){e.preventDefault();var t=$(e.currentTarget);this.trigger("brandClick",t.attr("href"),t.attr("title"))},deactiveGeolocationIcon:function(){this.$geolocation.removeClass("active")},_onAddressKeyup:function(e){13!==e.keyCode&&this.deactiveGeolocationIcon()}})},{"../../../../../../../views/shared/left/tab/ShoppingTabView.html.twig":313,"../../../../core/utils/Device.js":94,"../../../mixins/AmbiguityView/AmbiguityView":219,"../../form/TextfieldView/AddressFieldView":192,"../../form/TextfieldView/TextfieldView":193,"../AbstractTabView":197,"./../../../../../lib/bower_components/underscore/underscore.js":29}],208:[function(e,t,i){"use strict";var o=e("../AbstractTabView"),r=t.exports=o.extend({template:e("../../../../../../../views/shared/left/tab/TrafficHomeTabView.html.twig"),events:{"click a":"_onCityClick"},initialize:function(e){r.__super__.initialize.call(this,{viewParameters:{seoTrafficLV:e}})},_onCityClick:function(e){e.preventDefault(),this.trigger("cityClick",e.target.href.split("/").pop())}})},{"../../../../../../../views/shared/left/tab/TrafficHomeTabView.html.twig":314,"../AbstractTabView":197}],209:[function(e,t,i){"use strict";{var o=e("../AbstractTabView");t.exports=o.extend({template:e("../../../../../../../views/shared/left/tab/TrafficTabView.html.twig"),overviewElements:[],replaceElement:function(e){this.$el.replaceWith(e).addClass("scroll"),this.$el=e}})}},{"../../../../../../../views/shared/left/tab/TrafficTabView.html.twig":315,"../AbstractTabView":197}],210:[function(e,t,i){"use strict";function o(e,t,i,o){i.html(t.find("span").html()),e.call("loadpano('"+t.data("descriptor")+"', null, MERGE,"+(o?"BLEND(1)":"NOBLEND")+");")}function r(e,t,i,r){var s=t.find('a[data-descriptor="'+r.xmlUrl+'"]');s.length&&o(e,s,i,!1),e.call("lookat("+r.viewHLookAt+","+r.viewVLookAt+")")}var s=e("./../../../../lib/bower_components/underscore/underscore.js"),n=e("../../BaseView"),a=e("../../mixins/CarouselView/JCarouselView"),p="IndoorViewFullscreen",l=e("../../../../../../views/shared/center/IndoorView.html.twig"),c=t.exports=n.extend({el:"#IndoorView",events:{"click .jcarousel li a":"_onOtherViewClick"},_geoentityModel:null,_context:null,$closeButton:null,initialize:function(e,t){this._geoentityModel=e,this._context=t,this.$closeButton=$("#OutdoorView-close"),this.$closeButton.click(s.bind(function(){this.trigger("closeIndoorView")},this)),c.__super__.initialize.call(this),this.loadKRPano().then(s.bind(this.render,this))},render:function(){this.$el=$(l.render({views:this._geoentityModel.get("indoors").views})),this.$caption=this.$("> span"),this.delegateEvents(),$("#MapContainer").append(this.$el),"function"==typeof embedpano&&embedpano({xml:this._geoentityModel.get("indoors").settings,target:"IndoorViewPlayer",id:p,html5:"only",wmode:"opaque"});var e=this.$(".jcarousel");this._context&&r(document.getElementById(p),e,this.$caption,this._context),this.show(),this._geoentityModel.get("indoors").views.length>2&&(this.carouselView=new a({el:e}).render())},loadKRPano:function(){return new Promise(s.bind(function(e,t){"function"==typeof window.embedpano&&"function"==typeof window.removepano?e():$.getScript(parameters.services.bucket+"js/krpano.js").done(e).fail(function(){t(new Error("Cannot load krpano.js"))})},this))},show:function(){this.$closeButton.show(),c.__super__.show.call(this)},hide:function(){this.$closeButton.hide(),c.__super__.hide.call(this)},remove:function(){this.$closeButton.hide(),this.$closeButton=null,this.loadKRPano().then(s.bind(function(){"function"==typeof removepano&&removepano(p),c.__super__.remove.call(this)},this))},_onOtherViewClick:function(e){e.preventDefault(),o(document.getElementById(p),$(e.currentTarget),this.$caption,!0)}})},{"../../../../../../views/shared/center/IndoorView.html.twig":264,"../../BaseView":167,"../../mixins/CarouselView/JCarouselView":220,"./../../../../lib/bower_components/underscore/underscore.js":29}],211:[function(e,t,i){"use strict";var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../TooltipView/TooltipView"),n=e("../../../model/GeoentityModel"),a=e("../../../model/PanoTileModel"),p=e("../../../model/GeoBoxModel"),l=e("../../../model/LocationModel"),c=e("../../../controller/ShareController"),u=e("../../../core/error/error"),y=e("../../../core/utils/Device.js"),h=e("../../../../../../views/shared/itinerary/urbanbikeIcons.html.twig"),d=e("../../../../../../views/shared/itinerary/transportIcons.html.twig");L.Mappy.setImgPath(parameters.services.bucket+"images/");var g=t.exports=r.extend({el:"#LeafletMapView",events:{click:"_onMapClick","click ._contact":"_onContactClick"},tools:[],initialize:function(e){e=e||{},this._initialZoomLevel=17,this._location=null,this._map=null,this._bestViewEvent=!1,this._routeIdx=0,this._models=[],this._highlightedCandidateModel=null,this._geoentityPopupTimeout=null,this._attributions={},this._attributions.prefix='<a href="http://corporate.mappy.com/conditions-dutilisation/vie-privee/" target="_blank">'+Template.getText("privacy")+"</a> | ",this._attributions.prefix+='<a class="_contact" href="https://mappy.uservoice.com/" target="_blank">'+Template.getText("contact")+"</a>",this._poiLayer=null,this._addressLayer=null,this._flagLayer=null,this._shapeLayers=[],this._poiMarkers={},this._addressMarkers={},this._lockLocation=!1},_onContactClick:function(){this.trigger("contactClick")},_onMapClick:function(){this.trigger("mapClick")},toggleFullscreen:function(){var e=!!this.$el.closest(".fullscreen").length,t=window.parameters.size;this._map&&!e&&t<=parameters.sizes.medium&&(Mappy.ControllerFactory._instances.navigation._toggleFullscreen({active:!0}),this.$(".mappy-button-fullscreen").addClass("mappy-button-active").attr("data-active","1"),this.$(".mappy-button-fullscreen span").text("N"))},setInitialZoomLevel:function(e){this._initialZoomLevel=e,this._map&&this.setZoomLevel(e)},setInitialLocation:function(e){this._location=e,this._map&&this.setLocation(e)},_createPopupForMarker:function(e,t){return t.tooltip=new s({model:e,className:e instanceof n?"GeoentityTipView":"AddressTipView"}),t.tooltip.on("details_click",function(e){this.trigger("modelClick",e)},this).on("itinerary_to_click",function(e){this.trigger("modelGoToItinerary",e)},this).on("hotel_click",function(){this.trigger("locationApplicationClick","hotel")},this).on("restaurant_click",function(){this.trigger("locationCategoryClick","restaurant")},this).on("parking_click",function(){this.trigger("locationCategoryClick","parking")},this).on("address_click",function(){this.trigger("modelClick",e)},this),y.has3dSupport()&&t.tooltip.on("immersive_view_thumbnail_click",function(e){this.trigger("modelGoToOutdoor",e)},this),y.hasTouchSupport()||t.tooltip.on("mouseover",o.bind(function(){clearTimeout(this._onMarkerMouseOutTimeout),t.tooltip.on("mouseout",o.bind(this._onMarkerMouseOut,this,t,e))},this)),t.tooltip.createPopup(this._map.getViewportBounds(),t.options.icon.options)},_getPopupLocationPano:function(e,t){new a({from:e,to:e,preview:!0}).fetch().then(o.bind(function(e){t.tooltip.setOutdoorLocationUrl(e.get("url")),t.getPopup().update()},this))},highlightModel:function(e){if(e===this._highlightedCandidateModel)return void clearTimeout(this._onMarkerMouseOutTimeout);var t=this._highlightedCandidateModel;this._highlightedCandidateModel=e,clearTimeout(this._modelPopupTimeout),this._modelPopupTimeout=setTimeout(o.bind(function(){y.hasTouchSupport()||this.trigger("modelMouseout",t);var i=e.get("marker")||this.getMarker(e);if(i){if(e.id&&this.trigger("geoentityTipRendered",e),!i.tooltip){var r=this._createPopupForMarker(e,i);i.bindPopup(r,i.tooltip.parameters),e instanceof n||this._getPopupLocationPano(e,i)}i.tooltip.render(),o.defer(function(){i.openPopup(),e.set({isTooltipFull:!0},{silent:!0})}),this._map.on("click",o.bind(function(){this.trigger("modelMouseout",e)},this))}},this),200)},unhighlightModel:function(e){this._highlightedCandidateModel=null,this._map.off("click");var t=this.getMarker(e);t&&t.closePopup(),clearTimeout(this._modelPopupTimeout)},focusModel:function(e){var t,i=L.divIcon({className:"dot-marker",iconAnchor:[10,10],iconSize:[20,20]}),r=!1;this._modelFocused&&this._bindEventsOnMarker(this._modelFocused.get("marker"),this._modelFocused);for(var s=0;s<this._models.length;s++)if(t=this.getMarker(this._models[s]))if(this._models[s].get("id")===e.get("id")){var n=e.clone();-1===o.indexOf(["branded","premium"],n.get("offer"))&&n.set("offer","premium"),this._modelFocused=e,this._modelFocused.set("marker",t),t.setIcon(this.getMarkerIcon(n,"large")),t.off("mouseover"),t.off("mouseout"),t.off("click"),r=!0}else t.setIcon(i);r||(this.addModel(e),this.focusModel(e))},switchIconSize:function(e,t){var i=this.getMarker(e);i.setIcon(this.getMarkerIcon(e,t,!0))},setGeoPosition:function(e,t){if(this._map){var i=e.toArray();this._map.setView(i,t,{animate:!1})}},setLocation:function(e,t){return this._location===e||this._map.getZoom()===t?Promise.resolve():this._map?new Promise(o.bind(function(i){this._location=e,this._lockLocation=!0,this._map.once("moveend",function(e){i(e)}),this._map.setView(e.toArray(),t||this._map.getZoom())},this)):Promise.reject()},_drawRoute:function(e,t){this._shapeLayers[t]=L.Mappy.route(e.get("rawRoutes"),t,t!==this._routeIdx),t===this._routeIdx&&this._map.addLayer(this._shapeLayers[t])},_delayRouteRendering:function(e,t){setTimeout(o.bind(function(){this._drawRoute(e,t)},this),0)},setItinerary:function(e,t){this._routeIdx=parseInt(t||0,10),this._flagLayer||(this._flagLayer=L.featureGroup().addTo(this._map)),this.clearItinerary();var i=e.get("routes");i.each(function(t,i){i!==this._routeIdx?this._delayRouteRendering(e,i):this._drawRoute(e,i)},this),this.clearModels();try{this._showTransportFrameMarkers(i)}catch(o){Mappy.logError(o)}},_showTransportFrameMarkers:function(e){var t=e.at(this._routeIdx),i=[];o.each(t.get("roadSections"),o.bind(function(e){if("vehicle-mode"===e.type)for(var t,o=0,r=e["road-section"].split(" "),s=0;s<r.length;s+=2)t=parseInt(r[s+1],10),i.push({startIdx:o,endIdx:t}),o=t},this)),o.each(t.get("stages"),o.bind(function(e){o.each(e.get("actions"),o.bind(function(e){("transport"===e.get("type")||"ped-to-urban-bike"===e.get("type"))&&o.each(i,function(t){t.startIdx<=e.get("polylineIndex")&&t.endIdx>e.get("polylineIndex")&&(t.action=e)})},this))},this));var r,s,n,a,p,l=t.get("polyline"),c=function(e){return e.lengthBefore<r&&e.lengthBefore+e.segLength>r};o.each(i,o.bind(function(e){if(e.action){for(var t=0,i=[],u=e.startIdx;u<e.endIdx;u++){var y=Math.sqrt(Math.pow(l[u][0]-l[u+1][0],2)+Math.pow(l[u][1]-l[u+1][1],2));i.push({lengthBefore:t,segLength:y,idx:u}),t+=y}r=t/2,p=o.find(i,c),a=r-p.lengthBefore,n=a/p.segLength,s=L.latLng((l[p.idx+1][0]-l[p.idx][0])*n+l[p.idx][0],(l[p.idx+1][1]-l[p.idx][1])*n+l[p.idx][1]);var g;g="transport"===e.action.get("type")?d.render({action:e.action.toJSON()}):h.render(Templates.itinerary.urbanbikeIcons),L.marker(s,{icon:L.divIcon({className:"transport-frame-marker",iconSize:null,html:g}),clickable:!1,zIndexOffset:500}).addTo(this._shapeLayers[this._routeIdx])}},this))},getLocation:function(){return this._location},getGeoBox:function(){var e=this._map&&this._map.getViewportLatLngBounds();return new p(e?{maxLat:e.getNorth(),minLat:e.getSouth(),maxLng:e.getEast(),minLng:e.getWest()}:{})},setZoomLevel:function(e,t){this._map.getZoom()!==e&&(this._bestViewEvent=!t,this._map.setZoom(e))},getZoomLevel:function(){return this._map?this._map.getZoom():this._initialZoomLevel},bestView:function(e,t,i){var r=null,s=this._poiLayer.getLayers().length>1?18:17;if(t=void 0===t?!0:t,this._bestViewEvent=!0,e)return r=L.latLngBounds(L.latLng(e[1],e[0]),L.latLng(e[3],e[2])),void(o.isEmpty(r)||this._map.fitBounds(r,{maxZoom:s}));var n=[this._addressLayer,this._poiLayer];o.size(this._shapeLayers)>0&&(n=this._shapeLayers);for(var a=0;a<n.length;a++){var p=n[a].getBounds();p.isValid()&&(r?(r.extend(p.getSouthWest()),r.extend(p.getNorthEast())):r=p)}r&&r.isValid()&&(1!==this._addressLayer.getLayers().length||i)&&this._map.fitBounds(r,{maxZoom:s,animate:t})},bestViewByLocation:function(e,t){if(this._bestViewEvent=!0,e.get("geojson")){var i=e.get("geojson").properties.viewport||e.get("geojson").bbox,o=L.latLng(i[1],i[0]),r=L.latLng(i[3],i[2]),s=L.latLngBounds(o,r);this._map.fitBounds(s,{animate:!1}),this._onMoveEnd()}else this._map.setView(e.toArray(),this._limitZoom(e.getZoomLevel()),t)},bestViewById:function(e,t){var i=this._getLayerById(e);if(i){var o=i.getBounds();this._bestViewEvent=!0,this._map.setView(o.getCenter(),this._limitZoom(this._map.getBoundsZoom(o)),t)}},hasShapeLayers:function(){return!!o.size(this._shapeLayers)},refreshModels:function(){},clearModels:function(){this.clearGeoentities(),this._models=[]},clearGeoentities:function(){this._removeMarkers(this._poiMarkers,[],this._poiLayer),this._poiLayer.clearLayers(),this._poiMarkers={}},clearLocations:function(){this._removeMarkers(this._addressMarkers,[],this._addressLayer),this._addressLayer.clearLayers(),this._addressMarkers={}},showLocations:function(){this._map.addLayer(this._addressLayer)},hideLocations:function(){this._map.removeLayer(this._addressLayer)},clearItinerary:function(){for(var e=0;e<this._shapeLayers.length;e++)this._shapeLayers[e].clearLayers(),this._map.removeLayer(this._shapeLayers[e]);this._shapeLayers=[],this._flagLayer&&this._flagLayer.clearLayers()},showItinerary:function(){for(var e=0;e<this._shapeLayers.length;e++)this._map.addLayer(this._shapeLayers[0])},hideItinerary:function(){for(var e=0;e<this._shapeLayers.length;e++)this._map.removeLayer(this._shapeLayers[e])},showRoute:function(e){e&&(this._map.addLayer(this._shapeLayers[e]),e!==this._routeIdx&&this._shapeLayers[this._routeIdx].bringToBack())},hideRoute:function(e){this._map.removeLayer(this._shapeLayers[e]),this._shapeLayers[this._routeIdx].bringToFront()},addModel:function(e,t){e instanceof n?this._createMarkerIfDoesNotExists(this._poiMarkers,e,this._poiLayer):e instanceof l&&this._createMarkerIfDoesNotExists(this._addressMarkers,e,this._addressLayer,t),this._models.push(e)},removeModel:function(){},updateModels:function(e){this._addressLayer._map=this._addressLayer._map||this._map,this._poiLayer._map=this._poiLayer._map||this._map,e.length&&e[0]instanceof l?this._removeMarkers(this._addressMarkers,e,this._addressLayer):this._removeMarkers(this._poiMarkers,e,this._poiLayer),this._models=[];for(var t=0;t<e.length;t++)this.addModel(e[t],t+1);this._poiLayer&&this._poiLayer.spiderfy&&this._poiLayer.spiderfy()},setPanoramaById:function(){},show:function(){g.__super__.show.apply(this),this._map||this._createMap()},hide:function(){g.__super__.hide.apply(this)},getMap:function(){return this._map},addTileLayer:function(e){this._map.setOverlay(e)},removeTileLayer:function(){this._map.setOverlay()},setViewMode:function(e){this._map.setViewmode(e)},getActiveViewModes:function(){var e=[this._map.getTilelayer().options.name],t=this._map.getTilelayer("overlay");return t&&e.push(t.options.name),e},disableScrollWheelZoom:function(){return this._map.scrollWheelZoom.disable()},enableScrollWheelZoom:function(){return this._map.scrollWheelZoom.enable()},disableInteractions:function(){return this._map.disableInteractions()},enableInteractions:function(){return this._map.enableInteractions()},activateGeolocation:function(){this._map.geolocationControl&&(this._activateGeolocationFromCode=!0,this._map.geolocationControl.activateGeolocation(),this._activateGeolocationFromCode=!1)},_createElement:function(){return this.byId()},_createMap:function(){var e=parameters.size<=parameters.sizes.medium;this._map=new L.Mappy.Map("LeafletMapView-container",{logoControl:g.LOGO_OPTIONS,layersControl:!1,zoomControl:!1,scrollWheelZoom:!0,tap:y.hasTouchSupport(),geolocationControl:{position:"bottomleft",geolocationMarker:e},tileLayerOptions:{minZoom:4,detectRetina:!0,unloadInvisibleTiles:!0}}).setActiveArea("mappy-viewport layerOnInnerLeft layerOnRight"),o.defer(o.bind(function(){e&&this.activateGeolocation()},this)),this._map.on("locationsearch",function(){this._bestViewEvent=!1;var e=!this._activateGeolocationFromCode;this.trigger("onGeolocationSearch",e)},this),this._map.on("locationfound",function(e){this.trigger("browserGeolocation",{lat:e.latlng.lat,lng:e.latlng.lng}),this._triggerMapEvents(this,!1)},this),this._map.on("locationerror",function(){this.trigger("browserGeolocationError",new u.NavigatorGeolocationError("navigator_geolocation.disabled"))},this),this._map.on("preclick popupopen",function(){this.trigger("focus")},this),this._map.setView(L.latLng(this._location.get("lat"),this._location.get("lng")),this._initialZoomLevel||12),this._map.trafficLegend=new L.control.TrafficLegend,this.setFullTools();var t='<a href="http://corporate.mappy.com/conditions-dutilisation/copyright/" target=blank>© Mappy</a>';this._map.attributionControl.setPrefix(t),this._addressLayer=L.featureGroup().addTo(this._map),this._poiLayer=parameters.size<=parameters.sizes.medium?L.featureGroup().addTo(this._map):L.markerClusterGroup().addTo(this._map),this.enableMapEvents()},setFullTools:function(e){this.removeTools();var t=!y.has3dSupport()||y.isIPad(navigator.userAgent)||y.isAndroid(navigator.userAgent)?null:L.control.upi({singleToolBox:!0}),i=parameters.size>parameters.sizes.medium;this.tools=[L.control.footer().addTo(this._map),L.control.fullscreen({activated:e}).addTo(this._map)],t&&this.tools.push(t.addTo(this._map)),this.tools.push(L.control.zoom({singleToolBox:!0,zoomSlider:!0}).addTo(this._map),L.control.layers(this._map.baseLayers,this._map.overlays,{singleToolBox:i}).addTo(this._map),L.control.sharePrint().addTo(this._map),L.control.privacy(this._attributions).addTo(this._map)),this._map.on("fullscreen",function(e){this.trigger("fullscreen",e)},this).on("share",function(e){this.trigger("share",e,c.SHARE)},this).on("print",function(e){this.trigger("share",e,c.PRINT_MAP)},this).on("footer",function(e){this.trigger("footer",e)},this).on("viewmode-hybrid",function(){this.trigger("viewmode-hybrid")},this).on("viewmode-photo",function(){this.trigger("viewmode-photo")},this).on("viewmode-standard",function(){this.trigger("viewmode-standard")},this).on("overlay-traffic",function(){this.trigger("overlay-traffic")},this).on("overlay-public_transport",function(){this.trigger("overlay-public_transport")},this).on("overlay-disabled",function(){this.trigger("overlay-disabled")},this),$(".leaflet-top.leaflet-right",this._map.getContainer()).addClass("full"),t&&this.trigger("upiUpdate",t.getUpiView())},setPOITools:function(e){this.removeTools(),this.tools=[L.control.fullscreen().addTo(this._map),L.control.zoom().addTo(this._map),L.control.privacy(this._attributions).addTo(this._map)],e&&e.outdoor&&(this.tools.push(L.control.outdoorView(e.outdoor).addTo(this._map)),this._map.off("view-outdoor").on("view-outdoor",function(e){this.trigger("view-outdoor",e.model)},this)),this._map.on("fullscreen",function(e){if(this._modelFocused){if(y.isMobile(navigator.userAgent)){var t=this.getMarker(this._modelFocused);t&&e.active?t.setIcon(L.divIcon({className:"dot-marker",iconAnchor:[10,10],iconSize:[20,20]})):this.focusModel(this._modelFocused)}this.trigger("fullscreen",e)}},this)},setItineraryTools:function(){this.removeTools(),this.tools=[L.control.fullscreen().addTo(this._map),L.control.zoom().addTo(this._map),L.control.layers(this._map.baseLayers,this._map.overlays,{viewMode:!1,publicTransport:!1}).addTo(this._map),L.control.privacy(this._attributions).addTo(this._map)],this._map.on("fullscreen",function(e){this.trigger("fullscreen",e)},this).on("overlay-traffic",function(){this.trigger("overlay-traffic")},this)},removeTools:function(){for(var e=0;e<this.tools.length;e++)this.tools[e].removeFrom(this._map),this.tools[e]=null;this._map.off("fullscreen").off("share").off("print").off("footer"),$(".leaflet-top.leaflet-right",this._map.getContainer()).removeClass("full")},_triggerMapEvents:o.debounce(function(e,t){e.trigger("geoboxChanged",e.getGeoBox(),e._location,e.getZoomLevel(),t),e.trigger("viewLocationChanged",e._location,e._viewDirection,t),e.trigger("viewerReady")},1e3),_onMoveEnd:function(e){var t=this._bestViewEvent,i=this._map.getCenter();if(this._bestViewEvent=!1,this._lockLocation)return this._triggerMapEvents(this,t),void(this._lockLocation=!1);var r=parameters.size<parameters.sizes.medium?30:100;e&&"dragend"===e.type&&e.distance<r&&(t=!0);var s=new l({lng:i.lng,lat:i.lat,"opt.favoriteCountry":parameters.locales[parameters.locale].services.loc["opt.favoriteCountry"],"opt.language":parameters.locales[parameters.locale].services.loc["opt.language"]});s.fetch().then(o.bind(function(e){e.validate(e.attributes)||(this._location=e,this._triggerMapEvents(this,t))},this)).then(void 0,o.bind(function(e){this._location=s,this._triggerMapEvents(this,t),Mappy.logError(e)},this)),s.once("invalid",function(){this.trigger("viewLocationChanged",s,this._viewDirection,t)},this)},enableMapEvents:function(){this._map.on("zoomend",this._onMoveEnd,this),this._map.on("dragend",this._onMoveEnd,this)},desactivateFullscreen:function(){this.$(".mappy-button-fullscreen.mappy-button-active span").click()},disableMapEvents:function(){this._map.off("dragend",this._onMoveEnd,this),this._map.off("zoomend",this._onMoveEnd,this)},_bindEventsOnMarker:function(e,t){return e.on("click",function(e){L.DomEvent.stop(e),this.trigger("modelClick",t)},this),y.hasTouchSupport()||(e.on("mouseover",o.bind(this._onMarkerMouseOver,this,e,t)),e.on("mouseout",o.bind(this._onMarkerMouseOut,this,e,t))),e},_onMarkerMouseOver:function(e,t){clearTimeout(this._onMarkerMouseOutTimeout),this.trigger("modelMouseover",t)},_onMarkerMouseOut:function(e,t,i){clearTimeout(this._onMarkerMouseOutTimeout);for(var r=i.originalEvent.relatedTarget||i.originalEvent.toElement,s=null;null!==r;){if(r.className&&$(r).hasClass("leaflet-rrose")||$(r).hasClass("leaflet-marker-icon")){s=r;break}r=r.parentNode}s===e._icon||$(s).hasClass("leaflet-rrose")||(this._onMarkerMouseOutTimeout=setTimeout(o.bind(function(){this.trigger("modelMouseout",t)},this),300))},getMarkerIcon:function(e,t,i){var o={small:{anchor:[10,10],size:[20,20],mobileAnchor:[0,0],prefix:""},medium:{anchor:[20,50],size:[40,50],mobileAnchor:[0,30],prefix:""},large:{anchor:[30,74],size:[60,74],mobileAnchor:[0,50],prefix:"big-"}};if(!(e instanceof n))return L.divIcon({className:"marker marker-green",html:'<span class="icon icon-dot"></span>',iconAnchor:o.medium.anchor,iconSize:o.medium.size,popupAnchor:o.medium.mobileAnchor});var r=t?o[t]:o.medium;switch(e.get("offer")){case"branded":var s={medium:"map",large:"fd"};return L.icon({className:"geoentity-marker branding-marker",iconUrl:Mappy.twig.geoentityBrandingIcon(e,[s[t||"medium"]]),iconRetinaUrl:Mappy.twig.geoentityBrandingIcon(e,[s[t||"medium"],!0]),iconAnchor:r.anchor,iconSize:r.size,popupAnchor:r.mobileAnchor});case"premium":return L.divIcon({className:"geoentity-marker "+r.prefix+"marker "+r.prefix+"marker-blue",html:'<span class="icon icon-rub-default icon-rub-'+e.get("iconIdParent")+" icon-rub-"+e.get("iconId")+'"></span>',iconAnchor:r.anchor,iconSize:r.size,popupAnchor:r.mobileAnchor});default:return L.divIcon(i?{className:"geoentity-marker "+r.prefix+"marker "+r.prefix+"marker-blue",html:'<span class="icon icon-rub-default icon-rub-'+e.get("iconIdParent")+" icon-rub-"+e.get("iconId")+'"></span>',iconAnchor:r.anchor,iconSize:r.size,popupAnchor:r.mobileAnchor}:{className:"geoentity-marker dot-marker",iconAnchor:o.small.anchor,iconSize:o.small.size,popupAnchor:o.small.mobileAnchor})}},showTrafficLayer:function(){this._map.setOverlay("traffic")},hideTrafficLayer:function(){this._map.setOverlay()},resize:function(){this._map&&this._map.invalidateSize({pan:!1})},_createMarkerFromModel:function(e){var t=L.marker({lng:e.getLocation().get("lng"),lat:e.getLocation().get("lat")},{icon:this.getMarkerIcon(e),zIndexOffset:e instanceof n?0:1});return this._bindEventsOnMarker(t,e)},_removeMarkers:function(e,t,i){var o,r=[];for(var s in e)if(e.hasOwnProperty(s)){var n=e[s];n.tooltip&&(n.tooltip.off(),n.tooltip.$el.parents(".leaflet-popup").find(".leaflet-popup-tip").remove(),n.tooltip.remove(),n.tooltip=null),o=!1;for(var a=0;a<t.length;a++)t[a].getHash()===s&&(o=!0);o||(n.off("mouseover"),n.off("mouseout"),n.off("click"),i.removeLayer(n),r.push(s))}for(var p=0;p<r.length;p++)delete e[r[p]]},_createMarkerIfDoesNotExists:function(e,t,i,o){var r=t.getHash();if(e[r])e[r].setIcon(this.getMarkerIcon(t));else{var s=this._createMarkerFromModel(t,o).addTo(i);e[r]=s}},getMarker:function(e){var t;if(e instanceof n)t=this._poiMarkers;else{if(!(e instanceof l))return null;t=this._addressMarkers}return t[e.getHash()]||null},_getLayerById:function(e){switch(e){case g.LAYERID_POI:return this._poiLayer;case g.LAYERID_LOCATION:return this._addressLayer;case g.LAYERID_SHAPE:return this._shapeLayers[this._routeIdx];default:return null}},_limitZoom:function(e){return Math.min(Math.max(4,e),17)}},{LAYERID_POI:"poi",LAYERID_LOCATION:"location",LAYERID_SHAPE:"shape",LOGO_OPTIONS:{position:"topleft"}})},{"../../../../../../views/shared/itinerary/transportIcons.html.twig":295,"../../../../../../views/shared/itinerary/urbanbikeIcons.html.twig":297,"../../../controller/ShareController":64,"../../../core/error/error":88,"../../../core/utils/Device.js":94,"../../../model/GeoBoxModel":116,"../../../model/GeoentityModel":117,"../../../model/LocationModel":121,"../../../model/PanoTileModel":123,"../../BaseView":167,"../TooltipView/TooltipView":217,"./../../../../lib/bower_components/underscore/underscore.js":29}],212:[function(e,t,i){!function(t,i){"use strict";var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../UPIView/UPIView");i.Control.Fullscreen=i.Mappy.Control.extend({options:{position:"topright",activated:!1},onAdd:function(e){this._container=this._getContainer("fullscreen");var t=Template.getText("fullscreenOn"),o=Template.getText("fullscreenOff"),r=this._createSwitch("<span>"+t+"</span>",null,null,"fullscreen",function(){e.fireEvent("fullscreen",{active:!0}),r.innerHTML="<span>"+o+"</span>"},function(){e.fireEvent("fullscreen",{active:!1}),r.innerHTML="<span>"+t+"</span>"});return this.options.activated&&(r.innerHTML="<span>"+o+"</span>",i.DomUtil.addClass(r,"mappy-button-active")),this._buttons.fullscreen=r,this._container}}),i.control.fullscreen=function(e){return new i.Control.Fullscreen(e)},i.Control.UPI=i.Mappy.Control.extend({onAdd:function(e){this._container=this._getContainer("UPI"),this._buttons.upi=this._createButton("<span>¤</span>",Template.getText("upiview.tooltip.dragme"),"upi",function(){});var t=$(this._buttons.upi);return this._upiView=new r($(this._buttons.upi),e),this._upiView.on("drag",o.bind(function(){this._closeTooltips(),t.html("<span>]</span>"),$(this._container).addClass("upi-drag"),$(this._tooltips.upi).addClass("hidden")},this)),this._upiView.on("dragstop",o.bind(function(){t.html("<span>¤</span>"),$(this._container).removeClass("upi-drag"),$(this._tooltips.upi).removeClass("hidden").remove()},this)),this._container},getUpiView:function(){return this._upiView},onRemove:function(){this._upiView&&this._upiView.off("drag")}}),i.control.upi=function(e){return new i.Control.UPI(e)},i.Control.Privacy=i.Control.Attribution.extend({options:{position:"bottomleft",prefix:""},onAdd:function(){return this._container=i.DomUtil.create("div","leaflet-control-privacy"),i.DomEvent.disableClickPropagation(this._container),this._update(),this._container}}),i.control.privacy=function(e){return new i.Control.Privacy(e);

},i.Control.SharePrint=i.Mappy.Control.extend({onAdd:function(e){return this._container=this._createContainer("shareprint"),this._buttons.share=this._createButton("<span>(</span>",Template.getText("share")+"...","share",function(){e.fireEvent("share")}),this._buttons.print=this._createButton("<span>\\</span>",Template.getText("print"),"print",function(){e.fireEvent("print")}),this._container}}),i.control.sharePrint=function(){return new i.Control.SharePrint},i.Control.Footer=i.Mappy.Control.extend({options:{position:"bottomright"},onAdd:function(e){return this._container=this._createContainer("footer"),this._buttons.footer=this._createButton("<span>***</span>",null,"footer",function(){e.fireEvent("footer")}),this._container}}),i.control.footer=function(){return new i.Control.Footer},i.Control.OutdoorView=i.Mappy.Control.extend({options:{position:"topright"},initialize:function(e){this._url=e.url,this._model=e.model,i.Mappy.Control.prototype.initialize.call(this,e)},onAdd:function(){this._container=this._createContainer("outdoor-view");var e=i.DomUtil.create("a","switchToViewIcon",this._container);i.DomEvent.on(e,"click",this.onClick,this);var t=this._createButton("",null,"outdoor-view",this.onClick);return t.style.backgroundImage="url("+this._url+")",this._container},onClick:function(e){i.DomEvent.stopPropagation(e),this._map.fireEvent("view-outdoor",{model:this._model})}}),i.control.outdoorView=function(e){return new i.Control.OutdoorView(e)}}(window.Mappy||{},L||{})},{"../UPIView/UPIView":218,"./../../../../lib/bower_components/underscore/underscore.js":29}],213:[function(e,t,i){!function(t){"use strict";var i=e("./../../../../lib/bower_components/underscore/underscore.js");t.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},t.DistanceGrid.prototype={addObject:function(e,i){var o=this._getCoord(i.x),r=this._getCoord(i.y),s=this._grid,n=s[r]=s[r]||{},a=n[o]=n[o]||[],p=t.Util.stamp(e);this._objectPoint[p]=i,a.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,o){var r=this._getCoord(o.x),s=this._getCoord(o.y),n=this._grid,a=n[s]=n[s]||{},p=a[r]=a[r]||[];return delete this._objectPoint[t.Util.stamp(e)],a[r]=i.without(p,e),0===a[r].length&&delete a[r],this},eachObject:function(e,t){i.each(this._grid,function(o){i.each(o,function(o){i.each(o,e,t)},this)},this)},getNearObject:function(e){var o,r=this._getCoord(e.x),s=this._getCoord(e.y),n=this._objectPoint,a=this._sqCellSize,p=null;return i.each([s-1,s,s+1],function(s){var l=this._grid[s];l&&i.each([r-1,r,r+1],function(r){i.each(l[r],function(i){o=this._sqDist(n[t.Util.stamp(i)],e),a>o&&(a=o,p=i)},this)},this)},this),p},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o}}}(L||{})},{"./../../../../lib/bower_components/underscore/underscore.js":29}],214:[function(e,t,i){!function(t){"use strict";var i=e("./../../../../lib/bower_components/underscore/underscore.js");t.MarkerCluster=t.FeatureGroup.extend({_2PI:2*Math.PI,_circleFootSeparation:20,_circleStartAngle:-3*Math.PI/4,_nbVisibleMarkers:10,_spiderfied:!1,minZoom:7,initialize:function(e){t.FeatureGroup.prototype.initialize.call(this),this._latlng=e},onAdd:function(e){this._map=e,t.FeatureGroup.prototype.onAdd.call(this,e),this._map.on("zoomstart",this.unspiderfy,this),this._map.on("zoomend",this.spiderfy,this)},onRemove:function(){this.unspiderfy(),this.clearLayers(),this._map.off("zoomstart",this.unspiderfy,this),this._map.off("zoomend",this.spiderfy,this),this._map=null},addLayers:function(e){return i.each(e,this.addLayer,this),this},spiderfy:function(){if(!(this._spiderfied||!this._map||this._map.getZoom()<=this.minZoom)){var e,o=this.getLayers(),r=this._map.latLngToLayerPoint(this._latlng);this._spiderfied=!0;var s=o.length>this._nbVisibleMarkers?this._nbVisibleMarkers:o.length;e=this._generatePointsCircle(s,r),i.each(o,function(i,o){if(o>=s)return void i.setOpacity(0);var r=this._map.layerPointToLatLng(e[o]);i._preSpiderfyLatlng=i._latlng,i.setLatLng(r);var n=new t.Polyline([this._latlng,r],{weight:1.5,color:"#666"});this._map.addLayer(n),i._spiderLeg=n},this)}},_generatePointsCircle:function(e,i){var o,r,s=(this._map.getZoom()-this.minZoom)/(this._map.getMaxZoom()-this.minZoom),n=this._circleFootSeparation*(2+e)*s,a=n/this._2PI,p=2===e?Math.PI/2:this._2PI/e,l=[];for(l.length=e,o=0;e>o;o++)r=this._circleStartAngle+o*p,l[o]=new t.Point(i.x+a*Math.cos(r),i.y+a*Math.sin(r))._round();return l},unspiderfy:function(){this._spiderfied&&(this._spiderfied=!1,i.each(this.getLayers(),function(e){e.setOpacity(1),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e._spiderLeg&&(this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)},this))}})}(L||{})},{"./../../../../lib/bower_components/underscore/underscore.js":29}],215:[function(e,t,i){!function(t){"use strict";var i=e("./../../../../lib/bower_components/underscore/underscore.js");t.MarkerClusterGroup=t.FeatureGroup.extend({options:{maxClusterRadius:2},_isZooming:!1,_isWaiting:!1,initialize:function(e){t.Util.setOptions(this,e),this._featureGroup=t.featureGroup(),this._nonPointGroup=t.featureGroup(),this._needsClustering=[],this._needsRemoving=[]},_generateInitialClusters:function(){this._gridClusters=new t.DistanceGrid(this.options.maxClusterRadius),this._gridUnclustered=new t.DistanceGrid(this.options.maxClusterRadius)},addLayer:function(e){return e instanceof t.LayerGroup?(i.each(e._layers,this.addLayer,this),this):e.getLatLng?this._map?(this._addLayer(e),this):(this._needsClustering.push(e),this):(this._nonPointGroup.addLayer(e),this)},_addLayer:function(e){if(!this.hasLayer(e)){var i=this._map.project(e.getLatLng(),this._map.getMaxZoom()),o=this._gridClusters.getNearObject(i);if(this._featureGroup.addLayer(e),o)return void o.addLayer(e);if(o=this._gridUnclustered.getNearObject(i)){var r=new t.MarkerCluster(e.getLatLng());return r.addLayers([e,o]).addTo(this._map),this._gridClusters.addObject(r,this._map.project(e.getLatLng(),this._map.getMaxZoom())),void this._gridUnclustered.removeObject(o,this._map.project(o.getLatLng(),this._map.getMaxZoom()))}this._gridUnclustered.addObject(e,i)}},removeLayer:function(e){return e instanceof t.LayerGroup?(i.each(e._layers,this.removeLayer,this),this):e.getLatLng?this._map?(this._removeLayer(e),this):(this._needsClustering=i.without(this._needsClustering,e),this.hasLayer(e)&&this._needsRemoving.push(e),this):(this._nonPointGroup.removeLayer(e),this)},clearLayers:function(){return this.unspiderfy(),this._gridClusters.eachObject(function(e){e.clearLayers(),this._map.removeLayer(e)},this),this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this._map&&this._generateInitialClusters(),this},_removeLayer:function(e){this._featureGroup.removeLayer(e),this._gridUnclustered.removeObject(e,this._map.project(e.getLatLng(),this._map.getMaxZoom())),this._gridClusters.eachObject(function(t){if(t.hasLayer(e)){t.unspiderfy(),t.removeLayer(e);var i=t.getLayers();1===i.length?(this._gridClusters.removeObject(t,this._map.project(e.getLatLng(),this._map.getMaxZoom())),this._gridUnclustered.addObject(i[0],this._map.project(i[0].getLatLng(),this._map.getMaxZoom())),this._map.removeLayer(t)):t.spiderfy()}},this)},getBounds:function(){var e=new t.LatLngBounds;return e.extend(this._featureGroup.getBounds()),e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){i.each(this._needsClustering,e,t),this._featureGroup.eachLayer(e,t),this._nonPointGroup.eachLayer(e,t)},getLayers:function(){return i.union(this._featureGroup.getLayers(),this._nonPointGroup.getLayers(),this._needsClustering)},getLayer:function(e){return i.find(this.getLayers,function(t){return e===t})},hasLayer:function(e){return e?i.contains(this._needsClustering,e)?!0:i.contains(this._needsRemoving,e)?!1:this._featureGroup.hasLayer(e)||this._nonPointGroup.hasLayer(e):!1},onAdd:function(e){if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";this._map.on("zoomstart",function(){this._isZooming=!0},this),this._map.on("zoomend",function(){this._isZooming=!1,this._isWaiting&&this.spiderfy()},this),this._featureGroup.onAdd(e),this._nonPointGroup.onAdd(e),this._gridClusters||this._generateInitialClusters(),i.each(this._needsRemoving,this._removeLayer,this),this._needsRemoving=[],i.each(this._needsClustering,this._addLayer,this),this._needsClustering=[]},onRemove:function(e){this.unspiderfy(),this.clearLayers(),this._featureGroup.onRemove(e),this._nonPointGroup.onRemove(e),this._map=null},spiderfy:function(){return this._isZooming?void(this._isWaiting=!0):(this._isWaiting=!1,void this._gridClusters.eachObject(function(e){e.spiderfy()},this))},unspiderfy:function(){this._gridClusters.eachObject(function(e){e.unspiderfy()})}}),t.markerClusterGroup=function(e){return new t.MarkerClusterGroup(e)}}(L||{})},{"./../../../../lib/bower_components/underscore/underscore.js":29}],216:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../model/LocationModel"),n=e("../../../model/GeoentityModel"),a=e("../../../model/ViewDirectionModel"),p=e("../../../../../../views/shared/center/GeoentityView/GeoentityOutdoorViewHeader.html.twig");t.exports=r.extend({el:"#OutdoorView",events:{"click .outdoorBack":"onAddressBackClick","click .outdoorGo":"onAddressGoClick"},initialize:function(){this.$closeButton=$("#OutdoorView-close"),this.$closeButton.on("click",o.bind(this._onCloseButtonClick,this)),this._outdoorView=null},_onCloseButtonClick:function(e){e.preventDefault(),this.trigger("closeOutdoorView")},show:function(){this.$el.show(),this.$closeButton.show(),this.debugHandlerBind=o.bind(this.debugHandler,this),$(document.body).on("keydown",this.debugHandlerBind)},hide:function(){this.$el.empty().hide(),this.$closeButton.hide(),this.$el.removeClass("mappy-outdoor-view").removeClass("mappy-map-fullscreen"),$(document.body).off("keydown",this.debugHandlerBind)},addModel:function(e){if(e instanceof s)return this.addLocationModel(e);if(e instanceof n&&this._outdoorView){var t=e.get("location");if(t){var i=this._outdoorView.createMarker({lat:t.get("lat"),lon:t.get("lng"),label:e.get("name")}),o=$(i.element);"branded"===e.get("offer")?i.element.style.backgroundImage='url("'+Mappy.twig.geoentityBrandingIcon(e,["map"])+'")':e.get("iconIdParent")&&e.get("iconId")&&(o.addClass("marker marker-blue"),o.css("width","auto"),o.find("span").css("margin-left","5px"),o.prepend($("<span />").addClass("icon icon-rub-"+e.get("iconIdParent")+" icon-rub-"+e.get("iconId")).css({"background-color":"transparent","margin-left":"5px"})))}}},addLocationModel:function(e){if(e instanceof s&&this._outdoorView){var t=e.get("location");t&&this._outdoorView.createMarker({lat:t.get("lat"),lon:t.get("lng"),label:e.get("name").label})}},debugHandler:function(e){68===e.keyCode&&this._outdoorView.toggleDebug()},lookAt:function(e){this._outdoorView&&this._outdoorView.lookAt(e)},createOutdoorView:function(e){return new Promise(o.bind(function(t,i){var r=o.bind(function(){this._outdoorView=new window.MappyOutdoor.View(this.el,e.get("panoramicId"),{clientId:"mappy",domain:parameters.servicesdomain,imgPath:parameters.services.bucket+"/images/360/",map:!0,overrideFullscreenCallback:o.bind(this.trigger,this,"closeOutdoorView"),locale:parameters.locale}),this._outdoorView.on("positionChange",o.bind(function(e){var t=new s({type:s.TYPE_WAY,lat:e.lat,lng:e.lon});this.trigger("positionChange",t)},this)),this._outdoorView.on("orientationChange",o.bind(function(e){var t=new a(e);this.trigger("orientationChange",t)},this)),t()},this);window.MappyOutdoor&&window.MappyOutdoor.View?r():$.getScript(parameters.services.bucket+"js/outdoorview.js").done(r).fail(function(){i(new Error("Cannot load geoentity.js"))})},this))},loadOutdoorView:function(){return new Promise(o.bind(function(e,t){window.MappyOutdoor&&window.MappyOutdoor.View?e():$.getScript(parameters.services.bucket+"js/outdoorview.js").done(e).fail(function(){t(new Error("Cannot load geoentity.js"))})},this))},displayAddress:function(e,t){this.currentAddressLocation=t,this.$closeButton.hide(),this.headerElement=p.render({address:e.attributes}),this.$el.prepend(this.headerElement)},destroy:function(){this._outdoorView&&(this._outdoorView.removeAllListeners(),this._outdoorView.destroy(),this._outdoorView=void 0)},onAddressBackClick:function(){this.$closeButton.show(),this.trigger("closeOutdoorView")},onAddressGoClick:function(){Mappy.ControllerFactory.getUniverseController().setCurrentUniverse("itinerary"),Mappy.ControllerFactory.getHeaderFormController().setItineraryTo(this.currentAddressLocation)},resize:function(){this._outdoorView&&this._outdoorView.resize()}})}},{"../../../../../../views/shared/center/GeoentityView/GeoentityOutdoorViewHeader.html.twig":255,"../../../model/GeoentityModel":117,"../../../model/LocationModel":121,"../../../model/ViewDirectionModel":139,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],217:[function(e,t,i){"use strict";{var o=e("../../BaseView"),r=e("../../../model/GeoentityModel"),s=e("../../../core/utils/Device.js"),n={AddressTipView:e("../../../../../../views/shared/center/TooltipView/AddressTipView.html.twig"),GeoentityTipView:e("../../../../../../views/shared/center/TooltipView/GeoentityTipView.html.twig")};t.exports=o.extend({_popup:null,parameters:{closeButton:!1,closeOnClick:!0,autoPan:!1,maxWidth:400},events:{"click .TooltipView-immersiveViewThumbnail":"_onTooltipLinkClick","click .TooltipView-links li a":"_onTooltipLinkClick","click .GeoentityName":"_onTooltipLinkClick","click .AddressLabel":"_onTooltipLinkClick",click:"_onClick",mouseover:"_onMouseOver",mousemove:"_onMouseMove",mouseout:"_onMouseOut"},_onMouseOver:function(e){e.preventDefault(),this.trigger("mouseover")},_onMouseMove:function(e){e.preventDefault(),e.stopPropagation()},_onMouseOut:function(e){e.preventDefault(),this.trigger("mouseout",e)},_onClick:function(){parameters.size<parameters.sizes.normal&&this.model instanceof r&&this.trigger("details_click",this.model)},setOutdoorLocationUrl:function(e){this.$(".TooltipView-immersiveViewThumbnail").css("background-image","url("+e+")").css("-ms-filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='scale')").show()},_onTooltipLinkClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger($(e.currentTarget).data("event"),this.model)},createPopup:function(e,t){var i=parameters.size>parameters.sizes.medium?"iconAnchor":"popupAnchor";return this.parameters.offset=L.point(0,-t[i][1]),this.parameters.bounds=L.bounds(e.min.add(L.point(180,180)),e.max.subtract(L.point(180,0))),this._popup=parameters.size>parameters.sizes.medium?new L.Rrose(this.parameters):new L.Popup(this.parameters),this._popup},render:function(){this.$el=$(n[this.className].render({model:this.model.toJSON(),has3dSupport:s.has3dSupport()})),this._popup.setContent(this.$el[0]);var e=this.model.get("closestPanoramicId");return s.has3dSupport()&&e&&parameters.size>parameters.sizes.medium&&this.setOutdoorLocationUrl(parameters.services.pano+"panoramics/"+e+"/tiles/geodetic/"+this.model.get("location").get("lat")+","+this.model.get("location").get("lng")+"?redirect=true&fallbackradius=100"),this.delegateEvents(),this}})}},{"../../../../../../views/shared/center/TooltipView/AddressTipView.html.twig":265,"../../../../../../views/shared/center/TooltipView/GeoentityTipView.html.twig":266,"../../../core/utils/Device.js":94,"../../../model/GeoentityModel":117,"../../BaseView":167}],218:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../../../../views/shared/center/UpiPopin.html.twig");t.exports=r.extend({_map:null,_upiElement:null,_upiGeolocMarker:null,_upiGeolocpopup:null,initialize:function(e,t){this._map=t,this._upiElement=e.draggable({revert:!0,revertDuration:0,cursorAt:{bottom:0,left:22}}),this._bindUpiEvents()},clear:function(){this._upiGeolocMarker&&(this._map.removeLayer(this._upiGeolocMarker),this._upiGeolocMarker=null),this._upiGeolocPopup&&(this._map.removeLayer(this._upiGeolocPopup),this._upiGeolocPopup=null),clearTimeout(this._dragTimeout)},openPanoTooltip:function(e,t){var i=s.render({screenShotURL:t});this._openTooltip(i,e)},openErrorTooltip:function(e,t){var i=s.render({error:"centerview.noImmersiveView"});this._openTooltip(i,e),t&&setTimeout(o.bind(this.clear,this),3e3)},_openTooltip:function(e,t){this.clear();var i=L.latLng(t.get("lat"),t.get("lng"));this._createGeolocMarker(i),this._upiGeolocPopup=L.popup({closeButton:!1,offset:L.point(0,-7)}).setLatLng(i).setContent(o.isArray(e)?e[0]:e).openOn(this._map)},_bindUpiEvents:function(){L.DomEvent.on(this._upiElement[0],"MSPointerDown",L.DomEvent.stopPropagation),this._upiElement.draggable("option",{scroll:!1,drag:o.bind(function(e){this._lastStaticEvent&&e.clientX===this._lastStaticEvent.clientX&&e.clientY===this._lastStaticEvent.clientY||(this.trigger("drag"),this.clear(),this._dragTimeout=setTimeout(o.bind(function(){this._lastStaticEvent=e,this.trigger("static",this._map.mouseEventToLatLng(e))},this),500))},this),stop:o.bind(function(e){this.trigger("dragstop",this._map.mouseEventToLatLng(e))},this)})},_createGeolocMarker:function(e){this._upiGeolocMarker=L.marker(e,{icon:L.divIcon({className:"upiGeolocMarker",iconSize:[18,18],iconAnchor:[9,6]})}).addTo(this._map)}})}},{"../../../../../../views/shared/center/UpiPopin.html.twig":267,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],219:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../model/GeoentityModel"),n=e("../../../../../../views/shared/mixins/AmbiguityView.html.twig");t.exports=r.extend({className:"AmbiguityView-ambigous",locations:null,events:{"click .AmbiguityView-ambigous-address":"ambiguityRowClicked"},render:function(e){var t=o.map(this.locations,function(e){var t=e instanceof s,i=t?e.get("location").get("addressStr"):e.get("addressStr");return{name:t?e.get("name"):e.get("name").label,address:i,type:t?"geo":"address"}});return this.$el=$(n.render({addresses:t,limit:e})),this.delegateEvents(),this.currentSelectedRow=void 0,this},showAmbigous:function(e){this.remove(),this.locations=e;var t=Math.min(15,e.length);return this.render(t)},ambiguityRowClicked:function(e){e.stopPropagation();var t=this.locations[$(e.currentTarget).data("location")];this.trigger("ambiguityResolved",t),this.remove()},selectRow:function(e){"undefined"==typeof this.currentSelectedRow?this.currentSelectedRow=0:("up"===e&&this.currentSelectedRow++,"down"===e&&this.currentSelectedRow--),this.currentSelectedRow<0&&(this.currentSelectedRow=this.locations.length-1),this.currentSelectedRow>this.locations.length-1&&(this.currentSelectedRow=0),this.$el.find(".AmbiguityView-ambigous-address").removeClass("selected"),$(this.$el.find(".AmbiguityView-ambigous-address")[this.currentSelectedRow]).addClass("selected")},resolveCurrentSelected:function(){if(this.locations&&void 0!==typeof this.currentSelectedRow){var e=this.locations[this.currentSelectedRow];this.trigger("ambiguityResolved",e)}},remove:function(){this.$el.remove(),this.locations=null,this.undelegateEvents()}})}},{"../../../../../../views/shared/mixins/AmbiguityView.html.twig":317,"../../../model/GeoentityModel":117,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],220:[function(e,t,i){"use strict";var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=t.exports=r.extend({_$carousel:null,_$first:null,_$last:null,_$nextArrow:null,_$prevArrow:null,_isAnimated:!1,_duration:400,_animation:"linear",_refresh:null,initialize:function(e){e.duration&&(this._duration=e.duration),this._refresh=o.bind(this.refresh,this)},render:function(){return this._$carousel=this.$el.find("ul"),this.$el.find("li:first").outerHeight(!0)>0&&this._$carousel.height(this.$el.find("li:first").outerHeight(!0)),this._$prevArrow=this.$el.parent().find("a.jcarousel-prev"),this._$prevArrow.off("click").on("click",o.bind(this._goToPrev,this)),this._$nextArrow=this.$el.parent().find("a.jcarousel-next"),this._$nextArrow.off("click").on("click",o.bind(this._goToNext,this)),this._$first=this._$carousel.find("li:visible:first"),this._$last=this._$carousel.find("li:visible:last"),this.refresh(),this._unbindWindowEvents(),this._bindWindowEvents(),this},remove:function(){this._unbindWindowEvents(),s.__super__.remove.call(this)},refreshElements:function(){this._$last=this._$carousel.find("li:visible:last"),this.refresh()},refresh:function(){this._$first.length&&0!==this._$first.position().left?this._$prevArrow.removeClass("disable"):this._$prevArrow.addClass("disable"),this._$last.length&&(this._$last.position().left+this._$last.innerWidth()>=-1*this._$carousel.position().left+this.$el.innerWidth()||this._$last.position().top>0)?this._$nextArrow.removeClass("disable"):this._$nextArrow.addClass("disable")},_goToNext:function(e){e.preventDefault(),this._$nextArrow.hasClass("disable")||this._isAnimated||(this._isAnimated=!0,this._$carousel.animate({left:"-="+this._$first.outerWidth(!0)},this._duration,this._animation,o.bind(this._animationDone,this)),this._$first=this._$first.next(),this._$prevArrow.removeClass("disable"),this.trigger("scroll",1))},_goToPrev:function(e){e.preventDefault(),this._$prevArrow.hasClass("disable")||this._isAnimated||(this._isAnimated=!0,this._$first=this._$first.prev(),this._$carousel.animate({left:"+="+this._$first.outerWidth(!0)},this._duration,this._animation,o.bind(this._animationDone,this)),this._$nextArrow.removeClass("disable"),this.trigger("scroll",-1))},_animationDone:function(){this._isAnimated=!1,this.refresh(),this.trigger("animationEnd")},_bindWindowEvents:function(){$(window).on("resize",this._refresh).on("orientationchange",this._refresh)},_unbindWindowEvents:function(){$(window).off("resize",this._refresh).off("orientationchange",this._refresh)}})},{"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],221:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("./../../../../lib/bower_components/backbone/backbone.js");t.exports=r.extend({initialize:function(e){this.$el=e.carousel,this.render()},render:function(){return this._bindImageCarousel(),this},refresh:function(){},remove:function(){return this._destroyImageCarousel(),s.View.prototype.remove.call(this)},_bindImageCarousel:function(){var e=this.$el.parent(".PartnerView-images").get(0),t=new window.IScroll(e,{probeType:3,bounce:!1,mouseWheel:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,momentum:!0});t.on("scroll",o.bind(function(){var i=$(e).find('.jcarousel img[src=""]').eq(0);if(i.length<=0){var o=60;$(e).find(".jcarousel li").each(function(e,t){o+=$(t).outerWidth(!0)}),$(e).find(".jcarousel").width()!==o&&($(e).find(".jcarousel").width(o),t.refresh())}else i.offset().left<$(e).width()+200&&i.attr("src",i.attr("data-original"))},this)),t.on("scrollStart",o.bind(function(){this.fullscreenAllowed=!1},this)),t.on("scrollEnd",o.bind(function(){this.fullscreenAllowed=!0},this)),this.iscrollInstance=t},_destroyImageCarousel:function(){this.iscrollInstance.destroy()}})}},{"../../BaseView":167,"./../../../../lib/bower_components/backbone/backbone.js":12,"./../../../../lib/bower_components/underscore/underscore.js":29}],222:[function(e,t,i){"use strict";{var o=(e("./../../../../lib/bower_components/underscore/underscore.js"),e("../../../../../../views/shared/mixins/ApplicationHeaderView.html.twig")),r=e("./CategoryHeaderView");t.exports=r.extend({className:"ApplicationHeader",initialize:function(e){this.options=e||{},this.selectedFilter=null},render:function(){return this.$el.html(o.render({applicationModel:this.options.categoryOrSubcategory.toJSON(),size:parameters.size})),this}})}},{"../../../../../../views/shared/mixins/ApplicationHeaderView.html.twig":318,"./../../../../lib/bower_components/underscore/underscore.js":29,"./CategoryHeaderView":223}],223:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../view/BaseView"),s=(e("../../../core/utils/Device.js"),e("./filters/FilterBuilder")),n=e("../../../../../../views/shared/mixins/CategoryHeaderView.html.twig"),a=e("../../../../../../views/shared/mixins/FilterTitleView.html.twig"),p=e("../../../core/utils/path");t.exports=r.extend({className:"CategoryHeader",datesFilterName:"Dates",events:{"click .filter":"onFilterClick","click .detailListButton":"toggleListView","click .backButton":"goToHome"},initialize:function(e){this.options=e||{},this.selectedFilter=null},render:function(){return this.$el.html(n.render({name:this.options.label||this.options.categoryOrSubcategory.get("label"),show:this.options.show||"map"})),this.setBackground(),this},setBackground:function(){var e=this.options.categoryOrSubcategory&&this.options.categoryOrSubcategory.get("header");e=e||parameters.services.poiassets+"/assets/1/categories/header/header_neutre.jpg",e=p.getImgPath(e),this.$el.find(".background").css("background-image","url("+e+")")},giveFocusToFilter:function(e){var t=o.indexOf(this.filters,e);this.$el.find(".filter").removeClass("focus"),this.$el.find(".filterComponents > div").addClass("hidden"),this.$el.find(".filters .filter").eq(t).addClass("focus"),this.$el.find(".filterComponents > div").eq(t).removeClass("hidden"),this.selectedFilter=e},getCategoryType:function(){var e=this.options.categoryOrSubcategory?this.options.categoryOrSubcategory:{};return e.id},onFilterClick:function(e){var t=this.filters[$(e.target).attr("data-index")];return t===this.selectedFilter?this.unSelectFilter():void this.selectFilter(t)},getFilterByName:function(e){return o.find(this.filters,function(t){return e===t.name})},selectFilter:function(e){this.giveFocusToFilter(e),this.trigger("toggle",!0,e.name)},unSelectFilter:function(){this.selectedFilter=null,this.$el.find(".filterComponents > div").addClass("hidden"),this.$el.find(".filter").removeClass("focus"),this.trigger("toggle",!1)},removeLocation:function(){this.$el.find(".name span").remove()},buildFilters:function(e,t){var i=2,r=this.filters&&e&&e.models&&this.filters.length===e.models.length+i;if(!r){this.$el.find(".filters").html(""),this.$el.find(".filterComponents").html(""),this.filters=[];var n=s.build(e,t);o.forEach(n,function(e){this.listenTo(e.view,"change",this.removeLocation,this)},this);var p=0;o.each(n,o.bind(function(e,t){if(e){this.filters.push(e),$(e.view.$el).addClass("hidden");var i=$(a.render({filter:e,index:p}));e.onlyInFullList&&i.hide(),this.$el.find(".filters").append(i),this.$el.find(".filterComponents").append(e.view.$el),e.view.bind("all",o.bind(function(t,i){return"change"===t?void this.trigger("filterValueChange",this.getValues(),e.view.xitiTagName,e.name,e.view):void this.trigger(t,i)},this)),e.name===this.datesFilterName&&this.giveFocusToFilter(e),p++}},this))}},toggleListView:function(e){$(".detailListButton").toggleClass("active"),this.trigger("switchListClick"),this.$el.find(".name").text(this.options.categoryOrSubcategory.get("label"))},setFiltersValues:function(e){e&&o.each(this.filters,function(t){t.view.setValues&&t.view.setValues(e)})},getValues:function(){var e={};return o.each(this.filters,function(t){if(t.view.getValues){var i=t.view.getValues();o.forEach(i,function(t,i){return e[i]?void(e[i]+=","+t):void(e[i]=t)})}}),e},remove:function(){o.each(this.filters,function(e){e.view.remove()}),r.prototype.remove.call(this)},goToHome:function(){Mappy.ControllerFactory.getUniverseController().openTab(Mappy.TabControllerFactory.TAB_HOME).then(void 0,Mappy.logError)}})}},{"../../../../../../views/shared/mixins/CategoryHeaderView.html.twig":319,"../../../../../../views/shared/mixins/FilterTitleView.html.twig":321,"../../../core/utils/Device.js":94,"../../../core/utils/path":99,"../../../view/BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29,"./filters/FilterBuilder":224}],224:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=e("./mosaic/MosaicFilterView"),s=e("./datepicker/DatePickerFilterView"),n=e("./slider/SliderPriceFilterView"),a=e("./checkbox/CheckboxFilterView"),p=e("./select/SelectFilterView"),l=e("./multiselect/MultiSelectFilterView"),c=e("./location/LocationFilterView"),u=e("./slider/SliderDistanceFilterView"),y=function(){};y.prototype.createFilterView=function(e){var t,i=Mappy.ControllerFactory.getSessionModel().get("applicationParams"),c=i?i.params.params:{};switch(o.extend(e,c),e.type){case"mosaic":t=new r(e).render();break;case"multidatepicker":t=new s(e).render();break;case"slider":t=new n(e).render(),c[e.maxParameter]&&t.setValue(c[e.maxParameter]);break;case"checkbox":t=new a(e).render();break;case"combobox":t=new p(e).render();break;case"multicombobox":t=new l(e).render()}return{name:e.shortLabel,view:t}},y.prototype.build=function(e,t){var i=[{name:"ville",view:new c({shortLabel:"Autour de",value:t.city}).render(),onlyInFullList:!0},{name:"distance",view:new u({shortLabel:"Distance max",value:t.zoomLevel}).render(),onlyInFullList:!0}],r=e.map(o.bind(function(e){if("slider"===e.get("type")){var t=e.get("unit");e.set("description","{minPrice}"+t+" à {maxPrice}"+t+" et +")}return this.createFilterView(e.toJSON())},this));return i.concat(r)},t.exports=new y},{"./../../../../../lib/bower_components/underscore/underscore.js":29,"./checkbox/CheckboxFilterView":225,"./datepicker/DatePickerFilterView":226,"./location/LocationFilterView":227,"./mosaic/MosaicFilterView":228,"./multiselect/MultiSelectFilterView":229,"./select/SelectFilterView":230,"./slider/SliderDistanceFilterView":232,"./slider/SliderPriceFilterView":233}],225:[function(e,t,i){"use strict";{var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../../BaseView"),s=e("../../../../../../../../views/shared/mixins/filters/CheckboxFilterView.html.twig");t.exports=r.extend({className:"CheckboxFilterView",xitiTagName:"checkbox",events:{"change input":"_selectOption"},initialize:function(e){this.options=e||{}},render:function(){return this.$el.html(s.render(this.options)),this},_selectOption:function(e){e.preventDefault(),this._selectedValue=e.target.checked?this.options.value:null,this.trigger("change")},getValues:function(){var e={};return this._selectedValue&&(e[this.options.parameter]=this._selectedValue),e},setValues:function(e){var t=this.$el.find("input"),i=e[this.options.parameter]||"";t[0].checked=!1,o.each(i.split(","),o.bind(function(e){e===this.options.value&&(this._selectedValue=e,t[0].checked=!0)},this))}})}},{"../../../../../../../../views/shared/mixins/filters/CheckboxFilterView.html.twig":326,"../../../../BaseView":167,"./../../../../../../lib/bower_components/underscore/underscore.js":29}],226:[function(e,t,i){"use strict";{var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../../BaseView"),s=e("../../../../../../../../views/shared/mixins/filters/DatePickerFilterView.html.twig"),n=e("../../../../mixins/DatePickerView/RangeDatePickerView");t.exports=r.extend({className:"DatePickerFilterView",xitiTagName:"Calendrier",initialize:function(e){this.options=e||{}},render:function(){return this.$el.html(s.render()),this._rangeDatePickerView=new n({el:this.$el,customDateFormat:"dd/mm/y",from:this.options.from,to:this.options.to}).render(),this._rangeDatePickerView.on("change",o.bind(function(){this.trigger("change")},this)),this},getValues:function(){var e=this._rangeDatePickerView.getCurrentValues(),t={};return e.start&&e.end&&(t[this.options.fromDateParameter]=Mappy.parseDate(e.start),
t[this.options.toDateParameter]=Mappy.parseDate(e.end)),t},setValues:function(e){var t=e[this.options.fromDateParameter],i=e[this.options.toDateParameter];this.options.from=t,this.options.to=i,t&&i?this._rangeDatePickerView.setCurrentDates({start:t,end:i},!1):this.render()}})}},{"../../../../../../../../views/shared/mixins/filters/DatePickerFilterView.html.twig":327,"../../../../BaseView":167,"../../../../mixins/DatePickerView/RangeDatePickerView":235,"./../../../../../../lib/bower_components/underscore/underscore.js":29}],227:[function(e,t,i){"use strict";{var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../../BaseView"),s=e("../../../../../../../../views/shared/mixins/filters/LocationFilterView.html.twig"),n=e("../../../../left/form/TextfieldView/AddressFieldView");t.exports=r.extend({className:"LocationFilterView",events:{"click span.icon-geolocation":"_onGeolocationClick","keyup input":"_onAddressKeyup"},initialize:function(e){this.options=e||{}},render:function(){return this.$el.html(s.render({label:this.options.shortLabel,value:this.options.value})),this.$geolocation=this.$el.find("span.icon-geolocation"),this._textfieldView=new n({el:this.$(".TextfieldView")}),this._textfieldView.on("focus",o.bind(this._onFocus,this,"addressFocus")),this._textfieldView.on("clear",this.deactiveGeolocationIcon,this),this},getTextFieldView:function(){return this._textfieldView},deactiveGeolocationIcon:function(){this.$geolocation.removeClass("active")},setValue:function(e){this.$geolocation.removeClass("active"),this._textfieldView.setValue(e)},_onFocus:function(e){this.trigger(e,this._textFieldView,this.$el)},_onGeolocationClick:function(e){e.preventDefault(),e.stopPropagation(),this.$geolocation.hasClass("active")?(this.$geolocation.removeClass("active"),this._textfieldView.setValue("")):this.trigger("geolocationClick")},_onAddressKeyup:function(e){13!==e.keyCode?this.deactiveGeolocationIcon():this.trigger("change")}})}},{"../../../../../../../../views/shared/mixins/filters/LocationFilterView.html.twig":328,"../../../../BaseView":167,"../../../../left/form/TextfieldView/AddressFieldView":192,"./../../../../../../lib/bower_components/underscore/underscore.js":29}],228:[function(e,t,i){"use strict";{var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../../BaseView"),s=e("../../../../../../../../views/shared/mixins/filters/MosaicFilterView.html.twig"),n=e("../../../../../core/utils/path");t.exports=r.extend({className:"MozaicFilterView",xitiTagName:"Marque",events:{"click li":"onAppClick"},initialize:function(e){this.options=JSON.parse(JSON.stringify(e||{})),o.each(!o.isEmpty(this.options.sections)&&this.options.sections[0].values,function(e){return e.menu&&(e.menu=n.getImgPath(e.menu)),e.icon&&(e.icon=n.getImgPath(e.icon)),e})},render:function(){var e=o.findWhere(this.options.sections,{type:"image"}),t=o.findWhere(this.options.sections,{type:"text"});return this.$el.html(s.render({rubricsWithoutImages:t?t.values:[],rubricsWithImages:e?e.values:[],label:this.options.shortLabel})),this},onAppClick:function(e){this.trigger("filters:mosaic:onAppClick",{appId:$(e.target).closest("li").attr("data-id")})},setValues:function(){}})}},{"../../../../../../../../views/shared/mixins/filters/MosaicFilterView.html.twig":329,"../../../../../core/utils/path":99,"../../../../BaseView":167,"./../../../../../../lib/bower_components/underscore/underscore.js":29}],229:[function(e,t,i){"use strict";{var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../../BaseView"),s=e("../../../../../../../../views/shared/mixins/filters/MultiSelectFilterView.html.twig");t.exports=r.extend({className:"MultiSelectFilterView",xitiTagName:"Etoiles",events:{"click .multiSelectOption":"selectOne"},initialize:function(e){this.options=e||{},this.selectedElements=[]},render:function(){return this.options.values=o.map(this.options.values,o.bind(function(e){return e.isSelected=!1,o.indexOf(this.selectedElements,e.id)>-1&&(e.isSelected=!0),e},this)),this.$el.html(s.render({values:this.options.values,label:this.options.shortLabel})),this},selectOne:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-id");-1===o.indexOf(this.selectedElements,t)?this.selectedElements.push(t):this.selectedElements=o.without(this.selectedElements,t),this.render(),this.trigger("change")},getValues:function(){var e={};return this.selectedElements&&(e[this.options.parameter]=this.selectedElements.join(",")),e},setValues:function(e){this.selectedElements=[],e[this.options.parameter]&&(this.selectedElements=e[this.options.parameter].split(",")),this.render()}})}},{"../../../../../../../../views/shared/mixins/filters/MultiSelectFilterView.html.twig":330,"../../../../BaseView":167,"./../../../../../../lib/bower_components/underscore/underscore.js":29}],230:[function(e,t,i){"use strict";{var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../../BaseView"),s=e("../../../../../../../../views/shared/mixins/filters/SelectFilterView.html.twig");t.exports=r.extend({className:"SelectFilterView",xitiTagName:"Liste",events:{"click label.selectOption":"_selectOption"},initialize:function(e){this.options=e||{}},render:function(){return this.$el.html(s.render({label:this.options.shortLabel,sections:this.options.sections})),this},_selectOption:function(e){e.preventDefault();var t=$(e.target);this._selectedOptionId!==t.attr("data-id")&&(this._selectedOptionId=t.attr("data-id"),this.$el.find(".selectOptions label").removeClass("active"),t.addClass("active"),this.trigger("change"))},getValues:function(){var e={};return this._selectedOptionId&&(e[this.options.parameter]=this._selectedOptionId),e},setValues:function(e){var t,i=e[this.options.parameter]||"discarded";this.$el.find(".selectOptions label").removeClass("active"),this._selectedOptionId=null,o.each(i.split(","),o.bind(function(e){t=this.$el.find('.selectOptions label[data-id="'+e+'"]'),t.length>0&&(this._selectedOptionId=e,t.addClass("active"))},this))}})}},{"../../../../../../../../views/shared/mixins/filters/SelectFilterView.html.twig":331,"../../../../BaseView":167,"./../../../../../../lib/bower_components/underscore/underscore.js":29}],231:[function(e,t,i){"use strict";{var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("../../../../BaseView"),s=e("../../../../../../../../views/shared/mixins/filters/SliderFilterView.html.twig");t.exports=r.extend({className:"SliderFilterView",initialize:function(e){this.options=e||{},this.options.max&&(this.max=this.options.max),this.options.min&&(this.min=this.options.min),this.value=this.options.value||this.max},render:function(){this.$el.html(s.render({label:this.options.shortLabel}));var e=this.$tooltip=$('<div class="tooltip" />');return this.$el.find(".sliderContainer").slider({range:"min",step:this.step,label:this.options.shortLabel,min:this.min,max:this.max,value:this.value,slide:o.bind(this.onSlide,this),create:function(t,i){$(t.target).find(".ui-slider-handle").append(e)},start:function(){e.addClass("active")},stop:o.bind(function(){e.removeClass("active"),this.trigger("change")},this)}),this.onSlide(null,{value:this.value,label:"Distance max"}),this},onSlide:function(e,t){this.max=t.value,this.$tooltip.html(this.max)},getValues:function(){var e={};return e[this.options.maxParameter]=this.max,e},setValue:function(e){this.max=e,this.$el.find(".sliderContainer").slider("value",e),this.onSlide(null,{value:this.max})}})}},{"../../../../../../../../views/shared/mixins/filters/SliderFilterView.html.twig":332,"../../../../BaseView":167,"./../../../../../../lib/bower_components/underscore/underscore.js":29}],232:[function(e,t,i){"use strict";var o=e("./../../../../../../lib/bower_components/underscore/underscore.js"),r=e("./AbstractSliderFilterView"),s=(e("../../../../../../../../views/shared/mixins/filters/SliderFilterView.html.twig"),[{zoomLevel:19,label:"100 m"},{zoomLevel:18,label:"200 m"},{zoomLevel:17,label:"500 m"},{zoomLevel:16,label:"1 km"},{zoomLevel:15,label:"2 km"},{zoomLevel:14,label:"4 km"},{zoomLevel:13,label:"8 km"},{zoomLevel:12,label:"15 km"},{zoomLevel:11,label:"30 km"},{zoomLevel:10,label:"60 km"},{zoomLevel:9,label:"120 km"},{zoomLevel:8,label:"240 km"},{zoomLevel:7,label:"500 km"},{zoomLevel:6,label:"1000 km"},{zoomLevel:5,label:"2000 km"},{zoomLevel:4,label:"4000 km"}]),n=t.exports=r.extend({min:0,max:15,step:1,initialize:function(e){n.__super__.initialize.call(this,e),e.value&&(this.value=this.getIndexFromZoomLevel(e.value))},onSlide:function(e,t){var i=t.value;this.max=i,this.$tooltip.removeClass("long"),-1!==i&&this.$tooltip.html(this.getLabelFromValue(i)),i>11&&this.$tooltip.addClass("long")},getValues:function(){return{}},setValue:function(e){this.max=this.getIndexFromZoomLevel(e),this.$el.find(".sliderContainer").slider("value",this.max),this.onSlide(null,{value:this.max})},getLabelFromValue:function(e){return s[e].label},getZoomLevelFromValue:function(){return s[this.max].zoomLevel},getIndexFromZoomLevel:function(e){return o.findIndex(s,function(t){return t.zoomLevel===e})}})},{"../../../../../../../../views/shared/mixins/filters/SliderFilterView.html.twig":332,"./../../../../../../lib/bower_components/underscore/underscore.js":29,"./AbstractSliderFilterView":231}],233:[function(e,t,i){"use strict";var o=(e("./../../../../../../lib/bower_components/underscore/underscore.js"),e("./AbstractSliderFilterView")),r=(e("../../../../../../../../views/shared/mixins/filters/SliderFilterView.html.twig"),t.exports=o.extend({xitiTagName:"Prix",step:10,initialize:function(e){e.min=10,r.__super__.initialize.call(this,e)},onSlide:function(e,t){this.max=t.value,this.$tooltip.removeClass("long");var i="";this.max===this.options.max&&(i=" et +",this.$tooltip.addClass("long")),this.$tooltip.html(this.max+" €"+i)}}))},{"../../../../../../../../views/shared/mixins/filters/SliderFilterView.html.twig":332,"./../../../../../../lib/bower_components/underscore/underscore.js":29,"./AbstractSliderFilterView":231}],234:[function(e,t,i){"use strict";var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../core/utils/Device.js"),n=t.exports=r.extend({_config:null,_$input:null,_$calendar:null,_$calendarTable:null,_$calendarTableBody:null,_$months:null,_$month:null,_$prevMonth:null,_$nextMonth:null,events:{click:"_onClick","click input":"_onInputClick"},initialize:function(e){this._config={},o.extend(this._config,n.config(),e.userConfig),this._$input=this.$el.find("input"),window.ii=this._$input,this.nativeDatePicker=this._hasNativeDatePicker(navigator.userAgent),this.nativeDatePicker||(this._$calendar=$("<div />").addClass("DatePickerView").appendTo($("body")))},open:function(e,t,i){e&&t&&i&&(this._selectedYearView=e,this._selectedMonthView=t,this._selectedDayView=i,this._selectedDate=new Date(e,t,i)),this.hasNativeDatePicker||(this._handleMonthClick(),this._setPrevMonthVisibility(),this._moveUnderInput(),this._$calendar.show(),this.trigger("open"))},close:function(){this.nativeDatePicker||this._$calendar.is(":visible")&&(this._$calendar.hide(),this.trigger("close"))},getCurrentDate:function(){return Mappy.parseDate(this._$input.val())},setCurrentDate:function(e,t){this._selectedDate=e,this._$input.val(this.nativeDatePicker?Mappy.dateFormat(e,"yy-mm-dd"):Mappy.dateFormat(e,this._config.customDateFormat||"dd/mm/yy")),this._selectedYearView=this._selectedDate.getFullYear(),this._selectedMonthView=this._selectedDate.getMonth(),this._selectedDayView=this._selectedDate.getDate(),t&&this.setMinDate(e)},getMinDate:function(){return this._initialDate||this._config.currentDate},setMinDate:function(e){this._initialDate=e,this._initialYear=e.getFullYear(),this._initialMonth=e.getMonth(),this._initialDay=e.getDate(),(!this._selectedDate||this._selectedDate<e)&&(this._selectedDate=e,this._selectedYearView=this._initialYear,this._selectedMonthView=this._initialMonth,this._selectedDayView=this._initialDay),this.nativeDatePicker&&this._$input.attr("min",Mappy.dateFormat(e,"dd/mm/yy"))},getCurrentValue:function(){return this.nativeDatePicker?Mappy.dateFormat(this._selectedDate,"dd/mm/yy"):this._$input.val()},render:function(){return this.nativeDatePicker&&(this._$input.next(".icon-calendar").remove(),this._$input.attr("type","date")),this.setMinDate(this.getMinDate()),this.nativeDatePicker?(this._$input.on("change",o.bind(function(){var e=this.getCurrentDate();e&&(e<this._initialDate?(this.setCurrentDate(this._initialDate),e=this._initialDate):this.setCurrentDate(e),this.trigger("date_select",this.getCurrentValue(),e))},this)).on("blur",o.bind(function(){var e=this.getCurrentDate();e<this._initialDate&&(this.setCurrentDate(this._initialDate),this.trigger("date_select",this.getCurrentValue(),this._initialDate)),this.trigger("close")},this)),this):(this._$calendar.css({display:"none",top:this._config.top,left:this._config.left,width:this._config.width,height:this._config.height}),this._config.position&&this._$calendar.css({position:this._config.position}),this._$prevMonth=this._jBuild("a",{className:"prev-month",href:"#"},this._jBuild("span",{},"")),this._$nextMonth=this._jBuild("a",{className:"next-month",href:"#"},this._jBuild("span",{},"")),this._$month=this._jBuild("span",{className:"current-month"},this._getMonthToString()+" "+this._selectedYearView),this._$months=this._jBuild("div",{className:"months"}),this._$months.append(this._$prevMonth),this._$months.append(this._$nextMonth),this._$months.append(this._$month),this._$calendarTable=this._jBuild("table",{},this._jBuild("thead",{},this._jBuild("tr",{className:"weekdays"},this._buildWeekdays()))),this._$calendarTableBody=this._buildCalendar(),this._$calendarTable.append(this._$calendarTableBody),this._$calendar.append(this._$months),this._$calendar.append(this._$calendarTable),this._config.closeOnOutClick&&(this._onDocumentClick=this._getDocumentClickHandler(),$(document).on("click",this._onDocumentClick)),this._setPrevMonthVisibility(),this._bindMonthLinks(),this._bindDayLinks(),this)},remove:function(){this._onDocumentClick&&$(document).off("click",this._onDocumentClick),n.__super__.remove.call(this)},_onClick:function(e){if(!this.nativeDatePicker&&"disabled"!==this._$input.attr("disabled")){e.stopPropagation(),e.preventDefault(),this.close();var t=this.getCurrentDate();t?this.open(t.getFullYear(),t.getMonth(),t.getDate()):this.open()}},_onInputClick:function(){this.nativeDatePicker||"disabled"===this._$input.attr("disabled")||this.open()},_getDocumentClickHandler:function(){return o.bind(function(e){var t=e.target;if(t!==this.$el[0])for(var i=t.parentNode;i!==this.$el[0];){if(null===i){this.close();break}i=i.parentNode}},this)},_getMonthToString:function(){var e=this._selectedMonthView,t=this._config.fullCurrentMonth;return this._monthToStr(e,t)},_buildWeekdays:function(){for(var e=document.createDocumentFragment(),t=0,i=this._config.weekdays.length;i>t;t++)e.appendChild(this._jBuild("th",{},this._config.weekdays[t].substring(0,2))[0]);return e},_buildCalendar:function(){for(var e=$("<tbody />"),t=[],i=new Date(this._selectedYearView,this._selectedMonthView+1,0).getDate(),o=new Date(this._selectedYearView,this._selectedMonthView,1).getDay()||7,r=1;o>r;r++)t.push($("<td />"));for(var s=1;i>=s;s++)t.push(this._buildCalendarDay(s));for(var n=0;n<t.length%7;n++)t.push($("<td />"));for(var a,p=0;p<t.length;p++)p%7===0&&(a=$("<tr />"),e.append(a)),a.append(t[p]);return e},_buildCalendarDay:function(e){var t=$("<td />"),i=this._selectedMonthView===this._selectedDate.getMonth(),o=this._selectedYearView===this._initialYear&&this._selectedMonthView===this._initialMonth,r=o?this._initialDay:1;return r>e?(t.html('<span class="DatePickerView-inactive-cell">'+e+"</span>"),t):(t.html('<span class="DatePickerView-cell">'+e+"</span>"),this._config.cellHover&&t.addClass("DatePickerView-cell-hover"),i&&e===parseInt(this._selectedDayView,10)&&t.addClass("DatePickerView-selected"),t)},_bindDayLinks:function(){for(var e=$(".DatePickerView-cell",this._$calendar),t=o.bind(function(e){e.stopPropagation(),this._selectedDayView=$(e.currentTarget).html();var t=new Date(this._selectedYearView,this._selectedMonthView,this._selectedDayView);return this.setCurrentDate(t),this.trigger("date_select",this._$input.val(),t),this._config.closeOnSelect&&this.close(),!1},this),i=0,r=e.length;r>i;i++)$(e[i]).on("click",t)},_bindMonthLinks:function(){this._$prevMonth.click(o.bind(function(e){return e.stopPropagation(),this._initialYear<this._selectedYearView||this._initialMonth<this._selectedMonthView?(this._selectedMonthView--,this._setPrevMonthVisibility(),this._$nextMonth.show(),this._handleMonthClick(e)):!1},this)),this._$nextMonth.click(o.bind(function(e){return e.stopPropagation(),this._$prevMonth.show(),this._selectedMonthView++,this._handleMonthClick(e)},this))},_handleMonthClick:function(e){e&&e.stopPropagation(),this._selectedMonthView<0&&(this._selectedYearView--,this._selectedMonthView=11),this._selectedMonthView>11&&(this._selectedYearView++,this._selectedMonthView=0),this._$month.html(this._getMonthToString()+" "+this._selectedYearView);var t=this._buildCalendar();return this._$calendarTableBody.replaceWith(t),this._$calendarTableBody=t,this._bindDayLinks(),!1},_setPrevMonthVisibility:function(){this._selectedYearView===this._initialYear&&this._selectedMonthView<=this._initialMonth?this._$prevMonth.hide():this._$prevMonth.show()},_moveUnderInput:function(){var e=this._$input.offset();this._$calendar.css({top:e.top,left:e.left>28?e.left-28:e.left})},_monthToStr:function(e,t){return t?this._config.months[e]:this._config.months[e].length>3?this._config.months[e].substring(0,3):this._config.months[e]},_jBuild:function(e,t,i){var o=$("<"+e+">");if(null!==t)for(var r in t)t.hasOwnProperty(r)&&("className"===r?o.addClass(t[r]):o.attr(t[r]));return o.append(i),o},_hasNativeDatePicker:function(e){var t=s.isAndroid(e)&&s.getAndroidVersion(e)<4.4;return s.hasTouchSupport()&&s.hasDatePickerSupport()&&!t}},{config:function(){return{fullCurrentMonth:!0,dateFormat:"d/m/Y",left:0,top:0,position:"absolute",width:"auto",height:"auto",closeOnSelect:!0,closeOnOutClick:!0,currentDate:new Date,cellHover:!0,weekdays:["L","M","M","J","V","S","D"],months:["JANVIER","FEVRIER","MARS","AVRIL","MAI","JUIN","JUILLET","AOUT","SEPTEMBRE","OCTOBRE","NOVEMBRE","DECEMBRE"]}}})},{"../../../core/utils/Device.js":94,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],235:[function(e,t,i){"use strict";{var o=e("../../BaseView"),r=e("./DatePickerView"),s=e("./../../../../lib/bower_components/underscore/underscore.js");t.exports=o.extend({_startDatePickerView:null,_endDatePickerView:null,_oneDay:864e5,initialize:function(e){this._startDatePickerView=new r({el:this.$("input[name=date-start]").parent(),userConfig:e}),this._startDatePickerView.on("date_select",this._setEndDate,this).on("open",function(){this._endDatePickerView.close()},this),this._endDatePickerView=new r({el:this.$("input[name=date-end]").parent(),userConfig:{currentDate:this._getEndDate(),customDateFormat:e.customDateFormat}}),this._endDatePickerView.on("date_select",this._setStartDate,this).on("open",function(){this._startDatePickerView.close()},this),this._startDatePickerView.on("date_select",s.bind(function(){this._isStartDateAuto=!1,this.trigger("change")},this)),this._endDatePickerView.on("date_select",s.bind(function(){this.trigger("change")},this)),e.from&&e.to&&(this._startDatePickerView.setCurrentDate(new Date(e.from)),this._endDatePickerView.setCurrentDate(new Date(e.to)))},render:function(){return this._startDatePickerView.render(),this._endDatePickerView.render(),this},getCurrentDates:function(){return{start:this._startDatePickerView.getCurrentDate(),end:this._endDatePickerView.getCurrentDate()}},setCurrentDates:function(e,t){if(e.start&&(this._startDatePickerView.setCurrentDate(e.start,t),this._setEndDate()),e.end){var i=this._startDatePickerView.getCurrentDate();i<e.end&&this._endDatePickerView.setCurrentDate(e.end,!1)}},getCurrentValues:function(){return{start:this._startDatePickerView.getCurrentValue(),end:this._endDatePickerView.getCurrentValue()}},_getEndDate:function(){var e=this._startDatePickerView.getCurrentDate()||this._startDatePickerView.getMinDate();return new Date(e.getTime()+this._oneDay)},_setEndDate:function(){var e=this._getEndDate();this._endDatePickerView.setCurrentDate(e,!0)},_getStartDate:function(){var e=this._endDatePickerView.getCurrentDate()||this._endDatePickerView.getMinDate();return new Date(e.getTime()-this._oneDay)},_isStartDateAuto:!0,_setStartDate:function(){var e=this._startDatePickerView.getCurrentDate();if(this._isStartDateAuto||null===e){var t=this._getStartDate();this._startDatePickerView.setCurrentDate(t)}}})}},{"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29,"./DatePickerView":234}],236:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../../../../views/shared/mixins/survey/Form.html.twig"),n=e("../../../../../../views/shared/mixins/survey/Thumbnail.html.twig");t.exports=r.extend({className:"SurveyFormView",initialize:function(e,t){this._surveyData=e,this.$el="form"===t?this._getForm():this._getThumbnail(),$("#IndexView").append(this.$el),this.$el.find(".icon-close").click(o.bind(this._onCloseClick,this))},remove:function(){this.$el.remove()},_getForm:function(){var e=$(s.render(this._surveyData.toJSON()));return this.$form=e.find("form"),e.find(".survey-submit").click(o.bind(this._onSubmit,this)),e.find(".survey-next").click(o.bind(this._onNextClick,this)),e.find(".survey-radio input").click(o.bind(this._refreshRadioLabels,this)),e},_refreshRadioLabels:function(){var e;o.forEach(this.$form.find(".survey-radio input"),o.bind(function(t){e=$(t).parent().find("label"),e.removeClass("active"),t.checked&&e.addClass("active")},this))},_getThumbnail:function(){var e=$(n.render({}));return e.find(".open-survey").click(o.bind(this._onOpenClick,this)),e},_onOpenClick:function(){Mappy.ControllerFactory.getIndexView().openFancybox(this._getForm())},_onCloseClick:function(){this.trigger("surveyClose")},_onNextClick:function(){return 0===this.$form.find(".survey-radio input:checked").length?void this.$form.find(".survey-error").show():(this.$form.find(".survey-error").hide(),void this.$form.find(".survey-page").toggleClass("active"))},_onSubmit:function(){var e=this.$form.serializeArray();$.fancybox&&$.fancybox.close(),this.trigger("surveySubmit",e)}})}},{"../../../../../../views/shared/mixins/survey/Form.html.twig":333,"../../../../../../views/shared/mixins/survey/Thumbnail.html.twig":334,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],237:[function(e,t,i){"use strict";{var o=e("../../../BaseView");t.exports=o.extend({events:{"click div":"_onSelectClick","click a":"_onItemClick"},_onSelectClick:function(){this.$el.toggleClass("active"),this.trigger("toggle",this.$el.hasClass("active"))},_onItemClick:function(e){e.preventDefault(),this.$el.find(">div").contents().first().replaceWith($(e.currentTarget).text()),this.$el.removeClass("active"),this.trigger("itemClick",$(e.currentTarget).attr("data-id"))}})}},{"../../../BaseView":167}],238:[function(e,t,i){"use strict";{var o=e("../AbstractFilterView/AbstractFilterView");t.exports=o.extend({})}},{"../AbstractFilterView/AbstractFilterView":237}],239:[function(e,t,i){"use strict";var o=e("./../../../../../lib/bower_components/underscore/underscore.js"),r=(e("./../../../../../lib/bower_components/backbone/backbone.js"),e("../../../BaseView")),s=e("../../../../core/utils/path.js"),n=13,a=40,p=38,l=9;e("../../../../../lib/underscore/mixin.js");var c=t.exports=r.extend({textFieldView:null,$input:null,lastPosition:null,events:{"mousedown li":"selectSuggestion"},initialize:function(){this.render()},render:function(){return this.$el=$(this.template.render({rows:[]})),$(window).scroll(o.bind(function(){this.lastPosition&&this.lastPosition.top!==this.getPosition().top&&this.hide()},this)),this},show:function(){if(this.$input.is(":focus")){var e=this.getPosition();this.$el.css(e),this.lastPosition=e,c.__super__.show.call(this),this.textFieldView.scrollTop()}},getPosition:function(){return{top:this.$input.offset().top+this.$input.outerHeight()-$("#IndexView").offset().top+5,left:(this.$container.outerWidth()-this.$container.width())/2,width:this.$container.width()}},bindTo:function(e,t){this.textFieldView=e,null!==this.$input&&(this.$input.off("keydown.suggestView"),this.$input.off("keyup.suggestView"),this.$input.off("blur.suggestView"),this.$input.off("click.suggestView")),this.renderSuggestions([]),this.$container=t,this.$input=e.$input,this.$input.attr("autocomplete","off"),this.$input.on("blur.suggestView",o.bind(this.hide,this)),this.$input.on("keyup.suggestView",o.bind(this._onKeyup,this)),this.$input.on("keydown.suggestView",o.bind(this._onKeydown,this)),this.$el.appendTo($("#IndexView"))},refreshSuggestPosition:function(){this.$input&&this.$el.css(this.getPosition())},hasSelectedSuggestion:function(){return this.$("li.selected").length>0},_onKeydown:function(e){return e.keyCode===l&&this.$("li.selected").length?void this.selectSuggestion(e,this.$("li.selected")):void(e.keyCode===n&&1===this.$("li.selected").length&&(e.preventDefault(),this.selectSuggestion(e,this.$("li.selected"))))},_onKeyup:function(e){var t;switch(e.keyCode){case n:case l:break;case a:t=this.$("li.selected"),0===t.length?this.$("li:first").addClass("selected"):t===this.$("li:last")?t.removeClass("selected"):t.removeClass("selected").next("li").addClass("selected");break;case p:t=this.$("li.selected"),0===t.length?this.$("li:last").addClass("selected"):t===this.$("li:first")?t.removeClass("selected"):t.removeClass("selected").prev("li").addClass("selected");break;default:this.trigger("typing",this.$input.val())}},selectSuggestion:function(e,t){e.preventDefault(),e.stopPropagation(),void 0===t&&(t=this.getParentListItem(e)),t.removeClass("selected"),this.fireSelection(t.data("label"))},fireSelection:function(e){this.hide(),this.trigger("select",e,this.$input)},getParentListItem:function(e){var t;return t=$(e.target).is("li")?$(e.target):$(e.target).parents("li")},renderSuggestions:function(e){var t=this.getTemplateData(e),i=$(this.template.render(t));this.$el.html(i.html()),this.delegateEvents(),e.length>0&&!this.$input.hasClass("error")&&!this.$input.hasClass("geocoding")?this.show():this.hide()},getTemplateData:function(e){var t={};return t.rows=o.map(e,function(e){return e.isIconImage=this.shouldShowIconCssImage(e),e.iconCssClass=this.shouldShowIconCssImage(e)?void 0:this.getIconCssClass(e),{isIconImage:e.isIconImage,iconCssClass:e.iconCssClass,brandIconUrl:s.getImgPath(e.brandIconUrl),label:this.getSuggestionLabel(e),name:e.name,address:e.address,type:e.type,subtype:e.subtype?e.subtype.id:"default"}},this),t},getSuggestionLabel:function(e){var t=o.tripTag(e.name),i=o.tripTag(e.address);return o.compact([t,i]).join(" - ")},shouldShowIconCssImage:function(e){return!!e&&!!e.brandIconUrl},getIconCssClass:function(e){var t=this.getPrefix(e.type),i=this.getTypeIcon(e);return i&&0!==i.length?o.map(i,function(e){return t+e}).join(" "):""},getKeyFromType:function(e){var t={type:["category","history"],subtype:["address","poi","rubric"]};return o.findKey(t,function(t){return o.contains(t,e)})},getTypeIcon:function(e){var t=this.getKeyFromType(e&&e.type);return"type"===t?[e[t]]:o.values(e[t]).reverse()},getPrefix:function(e){var t="icon-",i=["category","rubric"];return"poi"===e?"icon-rub-":(o.contains(i,e)&&(t+=e.slice(0,3)+"-"),t)},getInput:function(){return this.$input},setFieldValue:function(e){this.$input.val(e)}})},{"../../../../../lib/underscore/mixin.js":33,"../../../../core/utils/path.js":99,"../../../BaseView":167,"./../../../../../lib/bower_components/backbone/backbone.js":12,"./../../../../../lib/bower_components/underscore/underscore.js":29}],240:[function(e,t,i){"use strict";{var o=(e("./../../../../../lib/bower_components/underscore/underscore.js"),e("../AbstractSuggestView/AbstractSuggestView")),r=e("../../../../../../../views/shared/mixins/AddressSuggestView.html.twig");t.exports=o.extend({template:r,events:{"mousedown li":"selectSuggestion","mousedown a":"_onFlushHistoryClick"},selectSuggestion:function(e,t){void 0===t&&(t=this.getParentListItem(e)),this.updateIntent(e,t),t.removeClass("selected");var i=t.data("label");this.fireSelection(i)},updateIntent:function(e,t){var i={};i.type="NA",i.subtype="default"===t.data("subtype")?"NA":t.data("subtype"),t.hasClass("poi")?i.type="POI":t.hasClass("history")?(i.type="Historique",i.subtype="NA"):t.hasClass("address")?i.type="Adresse":t.hasClass("rubric")?i.type="Rubrique":t.hasClass("store_chain")&&(i.type="Enseigne"),this.$input.data("intent",i)},showHistoryBottom:function(){this.$("a").show()},hideHistoryBottom:function(){this.$("a").hide()},_onFlushHistoryClick:function(e){e.preventDefault(),this.trigger("flushHistory")}})}},{"../../../../../../../views/shared/mixins/AddressSuggestView.html.twig":316,"../AbstractSuggestView/AbstractSuggestView":239,"./../../../../../lib/bower_components/underscore/underscore.js":29}],241:[function(e,t,i){"use strict";{var o=e("../AbstractSuggestView/AbstractSuggestView"),r=e("../../../../../../../views/shared/mixins/ProductSuggestView.html.twig");t.exports=o.extend({template:r})}},{"../../../../../../../views/shared/mixins/ProductSuggestView.html.twig":322,"../AbstractSuggestView/AbstractSuggestView":239}],242:[function(e,t,i){"use strict";{var o=e("../BaseView");t.exports=o.extend({id:"AdInterView",tagName:"iframe",width:728,height:90,initialize:function(){this.urlMedia="https://ads.horyzon-media.com/call/pubif/"+parameters.siteid+"/"+parameters.advertising.discovery+"/6320/S/"+parameters.initTmstp+"/",this.render()},render:function(){return this.$el.attr({src:this.urlMedia,height:this.height,width:this.width,marginwidth:"0",marginheight:"0",scrolling:"0",frameBorder:"0"}).hide(),this}})}},{"../BaseView":167}],243:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../core/utils/Device.js"),n=e("../../../../../../views/shared/overlay/DownloadAppView.html.twig");t.exports=r.extend({id:"DownloadAppView",isVisible:!1,events:{"click .icon-remove":"close","click .button":"redirect","click .image":"redirect"},render:function(){this.$el.html(n.render()),Mappy.abTestCollection.start("smb");var e=Mappy.abTestCollection.getVariant("smb");if(e&&e.id)switch(e.id){case"smbB":this.$el.find(".image").html('<img src="'+parameters.services.bucket+'/images/smart-banner-1-2x.gif" />');break;case"smbC":this.$el.find(".image").html('<img src="'+parameters.services.bucket+'/images/smart-banner-2-2x.gif" />');break;case"smbD":this.$el.find(".image").html('<img src="'+parameters.services.bucket+'/images/smart-banner-3-2x.gif" />');break;default:this.$el.find(".image").hide()}else this.$el.find(".image").hide();return this.delegateEvents(),this.isVisible=!0,this},redirect:function(){function e(e,t){o.delay(function(){(!t||t())&&(window.location=e)},3e3)}function t(t,i){window.location=t,e(i,function(){return!("hidden"in document?document.hidden:document.webkitHidden)})}this.trigger("redirect"),s.isIPad(navigator.userAgent)?t("mappy://fr.mappy.com"+window.location.pathname+window.location.hash,"https://itunes.apple.com/fr/app/mappy-pour-ipad-itineraire/id411892135"):s.isIPhone(navigator.userAgent)?t("mappy://fr.mappy.com"+window.location.pathname+window.location.hash,"https://itunes.apple.com/fr/app/mappy-itineraire-et-recherche/id313834655"):s.isAndroid(navigator.userAgent)&&t("mappy://fr.mappy.com"+window.location.pathname+window.location.hash,"https://play.google.com/store/apps/details?id=com.mappy.app&hl=fr")},close:function(){
Mappy.localStore.set("smartBannerClose",(new Date).getTime()),this.trigger("close")}})}},{"../../../../../../views/shared/overlay/DownloadAppView.html.twig":335,"../../../core/utils/Device.js":94,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],244:[function(e,t,i){"use strict";var o=e("../../BaseView"),r=e("../../../../../../views/shared/overlay/UserSurveyView.html.twig"),s=t.exports=o.extend({id:"UserSurveyView",events:{"click .userSurveyNoButton":"close","click .userSurveyOkButton":"openSurvey"},initialize:function(e){this.surveyType=e||"userSurvey",s.__super__.initialize.call(this)},render:function(){return this.$el.html(r.render()),this.delegateEvents(),this},openSurvey:function(){var e=window.open("/survey/wait.html?t="+this.surveyType,"mappyUserSurvey","width=900,height=400,scrollbars=yes,resizable=yes,toolbar=no,location=no");e.blur(),setTimeout(window.focus,0),this.close()},close:function(){this.undelegateEvents(),$.fancybox.close()}})},{"../../../../../../views/shared/overlay/UserSurveyView.html.twig":337,"../../BaseView":167}],245:[function(e,t,i){"use strict";{var o=e("../../BaseView"),r=e("../../../../../../views/shared/overlay/VDEAdView.html.twig");t.exports=o.extend({id:"VDEAdView",events:{"click .closeButton":"close","click a":"click"},render:function(){return this.$el.html(r.render({vde:this.model.toJSON()})),this.delegateEvents(),this},close:function(e){e.stopPropagation(),e.preventDefault(),this.trigger("close")},click:function(e){this.trigger("click",e)}})}},{"../../../../../../views/shared/overlay/VDEAdView.html.twig":338,"../../BaseView":167}],246:[function(e,t,i){"use strict";{var o=e("./../../../../lib/bower_components/underscore/underscore.js"),r=e("../../BaseView"),s=e("../../../../../../views/shared/overlay/ShareView.html.twig");t.exports=r.extend({className:"share-view",events:{"click input[type=submit]":"_onEmailSubmit","click .social-network":"_onSocialNetworkClick"},render:function(){return this.$el.html(s.render(this.model.toJSON())),this.$shareTo=this.$("#share-to"),this.$shareTo.on("change",function(){$(this).removeClass("error")}),this.$shareMessage=this.$("#share-message"),this.$shareMessage.on("keydown paste",function(){return $(this).val().length>window.parameters.share.email.max_length?!1:void 0}),this.$errorMessage=this.$(".error-message"),this.$button=this.$(".button"),this},setSucceedState:function(){this.$button.attr("disabled",!1),this.hide()},setFailedState:function(){this.$button.attr("disabled",!1),this.$errorMessage.show()},setInvalidState:function(){this.$button.attr("disabled",!1),"INVALID_EMAIL"===this.model.validationError.code&&this.$shareTo.addClass("error").focus()},show:function(){Mappy.ControllerFactory.getIndexView().openFancybox(this.$el,{autoSize:!1,type:"inline",padding:0,width:"auto",height:"auto",helpers:{overlay:{locked:!1}},afterClose:o.bind(function(){this.trigger("close")},this)})},hide:function(){$.fancybox.close()},_onEmailSubmit:function(e){e.preventDefault(),this.model.set({tolist:this.$shareTo.val(),userMessage:this.$shareMessage.val()},{silent:!0}),this.$button.attr("disabled",!0),this.$errorMessage.hide(),this.trigger("email-submit")},_onSocialNetworkClick:function(e){var t=$(e.currentTarget).has(".facebook").length?Mappy.ShareController.SHARE_FACEBOOK:Mappy.ShareController.SHARE_TWITTER;e.preventDefault(),this.trigger("share",e,t)}})}},{"../../../../../../views/shared/overlay/ShareView.html.twig":336,"../../BaseView":167,"./../../../../lib/bower_components/underscore/underscore.js":29}],247:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/BaseView/alert.html.twig",data:[{type:"raw",value:'<div id="BaseView-alert">    '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:'    <div id="BaseView-alert-buttons">        <span class="button" onclick="$.fancybox.close()">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"ok"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],248:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/IndexView/firstVisitPrivacy.html.twig",data:[{type:"raw",value:'<div id="IndexView-first-visit" class="layerOnInnerLeft">    <p>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"header.firstVisit"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:' <a href="http://corporate.mappy.com/conditions-dutilisation/cookies/">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"read_more"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:'</a></p>    <a class="close"><span class="icon icon-close"></span></a></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],249:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/AdWrapperView/left.html.twig",data:[{type:"raw",value:'<div id="AdWrapperView-left" class="AdWrapperDisplay"></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],250:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/AdWrapperView/right.html.twig",data:[{type:"raw",value:'<div id="AdWrapperView-right" class="AdWrapperDisplay">    <button id="AdWrapperView-close">    	'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"ad_wrapper.close"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'    	<span class="closeButton icon icon-close"></span>    </button></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],251:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/AdWrapperView/top.html.twig",data:[{type:"raw",value:'<div id="AdWrapperView-top" class="AdWrapperDisplay"></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],252:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/AddressView/AddressView.html.twig",data:[{type:"raw",value:'<div id="AddressView">    <h2>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"address_view.near_address"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:'</h2>    <div class="geoentityListView"></div></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],253:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/left/GeoentityListView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityOthersView.html.twig",data:[{type:"raw",value:'<div class="GeoentityOthersTitle">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:'</div><div id="GeoentityListView">'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.string",value:"SEO"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/GeoentityListView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"models"},{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"origin"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}}]}},{type:"raw",value:'</div><div class="GeoentityOthersAction button">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.othersAction"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/left/GeoentityListView.html.twig":300}],254:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityOutdoorView.html.twig",data:[{type:"raw",value:'<img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"urlPano",match:["urlPano"]}]},{type:"raw",value:'" class="pano"/><div class="switchToViewIcon"></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],255:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityOutdoorViewHeader.html.twig",data:[{type:"raw",value:'<div class="GeoentityOutdoorViewHeader">	<div class="outdoorBack">		<span class="icon icon-previous"></span>	</div>	<div class="outdoorAddress">	'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"way"}]},{type:"raw",value:" <br/>	"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"zipCodes"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"city"}]},{type:"raw",value:'	</div>	<div class="outdoorGo">		<a class="itinerary-to smallButton lightBlueButton" href="#"><span class="icon icon-flag"></span>J\'y vais</a>	</div></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],256:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewItemView.html.twig",data:[{type:"raw",value:"<p>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.item.from"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"date_creation",match:["date_creation"]},{type:"Twig.expression.type.filter",value:"slice",match:["| slice","slice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:8,match:["8",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"date_creation",match:["date_creation"]},{type:"Twig.expression.type.filter",value:"slice",match:["| slice","slice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:5,match:["5",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"date_creation",match:["date_creation"]},{type:"Twig.expression.type.filter",value:"slice",match:["| slice","slice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.number",value:4,match:["4",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"overall_rating",match:["overall_rating"]},{type:"Twig.expression.type.filter",value:"rating",match:["| rating","rating"]}]},{type:"raw",value:'</p><p class="title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"title",match:["title"]}]},{type:"raw",value:"</p><p><strong>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.item.comment"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</strong> "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"comment",match:["comment"]}]},{type:"raw",value:"</p>"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"strength",match:["strength"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"strength",match:["strength"]},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}]}],output:[{type:"raw",value:"    <p><strong>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.item.like"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</strong> "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"strength",match:["strength"]}]},{type:"raw",value:"</p>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"weakness",match:["weakness"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"weakness",match:["weakness"]},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}]}],output:[{type:"raw",value:"    <p><strong>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.item.dislike"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</strong> "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weakness",match:["weakness"]}]},{type:"raw",value:"</p>"}]}}],precompiled:!0,allowInlineIncludes:!0})},{}],257:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewItemView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewView.html.twig",data:[{type:"raw",value:'<div class="PartnerView-banner">    '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"with"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:' <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"banner",match:["banner"]}]},{type:"raw",value:'"/></div><div id="GeoentityReviewView">'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"total_reviews",match:["total_reviews"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}]}],output:[{type:"raw",value:'    <div class="PartnerView-title-part">        <span class="GeoentityReviewView-counter">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"total_reviews",match:["total_reviews"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.reviews"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</span>        <span class="GeoentityReviewView-rating">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.overall_rating"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"overall_review_rating",match:["overall_review_rating"]},{type:"Twig.expression.type.filter",value:"rating",match:["| rating","rating"]}]},{type:"raw",value:'</span>    </div>    <ul class="reviews block">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"review",expression:[{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.key.period",key:"reviews"}],output:[{type:"raw",value:'                <li class="review">'},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewItemView.html.twig"}],withStack:[{type:"Twig.expression.type.variable",value:"review",match:["review"]}]}},{type:"raw",value:"</li>            "}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    </ul>"}]}},{type:"raw",value:'    <div class="block block-center">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"total_reviews",match:["total_reviews"]},{type:"Twig.expression.type.number",value:3,match:["3",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'                <a target="_blank" href="http://www.pagesjaunes.fr/pros/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"pjRatingId",match:["pjRatingId"]}]},{type:"raw",value:'#onglet-avis" class="all-reviews">> '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.display_all_reviews"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a><br />        "}]}},{type:"raw",value:"       "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"pjBlocId",match:["pjBlocId"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"pjBlocId",match:["pjBlocId"]},{type:"Twig.expression.type.null",value:null},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"pjBlocId",match:["pjBlocId"]},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'               <a target="_blank" href="http://www.pagesjaunes.fr/contribution/avis/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"pjRatingId",match:["pjRatingId"]}]},{type:"raw",value:'" class="add-review button">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.add_review"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a>               "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"total_reviews",match:["total_reviews"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:'                       <p class="write-review">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.review.add_first_review"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</p>               "}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewItemView.html.twig":256}],258:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/PartnerView.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewView.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/GeoentityOthersView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityView.html.twig",data:[{type:"raw",value:'<div id="GeoentityView" class="clearfix'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"contents"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"<=",precidence:8,associativity:"leftToRight",operator:"<="},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"reviewCollection"},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"reviewCollection"},{type:"Twig.expression.type.test",filter:"empty"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"visible"},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"visible"},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"displayOutdoorView",match:["displayOutdoorView"]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:' noContent"'}]}},{type:"raw",value:'">    <div class="GeoentityView-partners">        <div id="GeoentityPartnerTabView">            <div class="GeoentityPartnerTabView-sliderContainer">                <div class="carousel">                    <ul>                        '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"content",expression:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"contents"}],output:[{type:"raw",value:'                            <li class="tab '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]},{type:"Twig.expression.type.key.period",key:"visibility"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"isolatedTabId",match:["isolatedTabId"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"isolatedTabId",match:["isolatedTabId"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"isolatedTabId",match:["isolatedTabId"]},{type:"Twig.expression.type.variable",value:"content",match:["content"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:" hidden"}]}},{type:"raw",value:'" data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"]},{type:"Twig.expression.type.key.period",key:"tabLabel"}]},{type:"raw",value:"</li>                        "}]}},{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"visible"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"visible"},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"displayOutdoorView",match:["displayOutdoorView"]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                            <li class="tab normal" data-id="outdoor">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"outdoorview"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"</li>                        "}]}},{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"reviewCollection"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"reviewCollection"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'                            <li class="tab normal" data-id="reviews">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"reviews"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"</li>                        "}]}},{type:"raw",value:'                    </ul>                </div>                <a href="#" class="jcarousel-control jcarousel-prev disable icon icon-previous"></a>                <a href="#" class="jcarousel-control jcarousel-next icon icon-next"></a>            </div>        </div>        <div id="GeoentityPartnerViewContainer">          <div id="GeoentityPartnerView">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"origin",
match:["origin"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.string",value:"SEO"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"              "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"partner",expression:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"contents"}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"partner",match:["partner"]},{type:"Twig.expression.type.key.period",key:"visibility"},{type:"Twig.expression.type.string",value:"normal"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"                  "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/GeoentityView/PartnerView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"partner"},{type:"Twig.expression.type.variable",value:"partner",match:["partner"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"tabs"},{type:"Twig.expression.type.variable",value:"partner",match:["partner"]},{type:"Twig.expression.type.key.period",key:"tabs"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"banner"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"partner",match:["partner"]},{type:"Twig.expression.type.key.period",key:"banner"}]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"appURL"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"geoentityAppAssetsUrl",match:["geoentityAppAssetsUrl"]},{type:"Twig.expression.type.variable",value:"partner",match:["partner"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"origin"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"              "}]}},{type:"raw",value:"            "}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.key.period",key:"context"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.key.period",key:"context"},{type:"Twig.expression.type.key.period",key:"total_reviews"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"              "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"banner"},{type:"Twig.expression.type.variable",value:"banner",match:["banner"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"pjBlocId"},{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"pjBlocId"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"pjRatingId"},{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"pjRatingId"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"total_reviews"},{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.key.period",key:"context"},{type:"Twig.expression.type.key.period",key:"total_reviews"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"overall_review_rating"},{type:"Twig.expression.type.variable",value:"reviews",match:["reviews"]},{type:"Twig.expression.type.key.period",key:"context"},{type:"Twig.expression.type.key.period",key:"overall_review_rating"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"            "}]}},{type:"raw",value:'          </div>        </div>        <div class="GeoentityPartnerTabView-applink">            <p class="button"><img src="" /><span></span></p>        </div>        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"pjId"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"            <div class='suggestChange'>                <h2>Suggérer une modification</h2>                <p>Une information est erronée ou n'est plus à jour ?</p>                <p>Vous pouvez modifier l'adresse, la position sur la carte, les horaires d'ouverture, le numéro de téléphone...</p>                <a href=\"http://www.pagesjaunes.fr/pros/cqfd?epj="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"pjId"}]},{type:"raw",value:'" target="_blank" title="En vous connectant au service de mise à jour de PagesJaunes.fr !" class="linkc">                    En vous connectant au service de mise à jour de PagesJaunes.fr !                </a>            </div>        '}]}},{type:"raw",value:'        <div id="GeoentitySocialView">            <div class="share">                <p>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"GeoentityView-share"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p>                <a href="#" class="facebook"><span class="icon icon-facebook"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_facebook"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>                <a href="#" class="twitter"><span class="icon icon-twitter"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_twitter"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>                <a href="#" class="mail"><span class="icon icon-email"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_mail"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>                <a href="#" class="link"><span class="icon icon-link"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_link"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>            </div>        </div>    </div>    <div id="GeoentityOthersView">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/GeoentityView/GeoentityOthersView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"geoentities"},{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"origin"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/GeoentityOthersView.html.twig":253,"../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/GeoentityReviewView.html.twig":257,"../../../../../../FastBundle/Resources/views/shared/center/GeoentityView/PartnerView.html.twig":259}],259:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/mixins/TabSelectFilterView.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/center/partner/blocks.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/PartnerView.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"banner",match:["banner"]}],output:[{type:"raw",value:'<div class="PartnerView-banner">    '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"with"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:' <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"banner",match:["banner"]}]},{type:"raw",value:'"/></div>'}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"tabs",match:["tabs"]},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"	"},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/mixins/TabSelectFilterView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"tabs"},{type:"Twig.expression.type.variable",value:"tabs",match:["tabs"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}}]}},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"tab",expression:[{type:"Twig.expression.type.variable",value:"tabs",match:["tabs"]}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-tab" data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tab",match:["tab"]},{type:"Twig.expression.type.key.period",key:"context"}]},{type:"raw",value:'" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"first"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'style="display:none;"'}]}},{type:"raw",value:">    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"block",expression:[{type:"Twig.expression.type.variable",value:"tab",match:["tab"]},{type:"Twig.expression.type.key.period",key:"blocks"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/partner/blocks.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"partner"},{type:"Twig.expression.type.variable",value:"partner",match:["partner"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"block"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"</div>"}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/center/partner/blocks.html.twig":268,"../../../../../../FastBundle/Resources/views/shared/mixins/TabSelectFilterView.html.twig":323}],260:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/availability.html.twig",data:[{type:"raw",value:'<div class="HotelContentWidgetView">    <div id="HotelContentWidgetView-header" class="clearfix">        <h3>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.availability"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:",        <br/> "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_from"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"from",match:["from"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_to"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"to",match:["to"]}]},{type:"raw",value:'        <a href="#" id="HotelContentWidgetView-change-dates">            ('},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.changeDates"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:')        </a></h3>        <div class="banner">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"with"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:' <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"banner",match:["banner"]}]},{type:"raw",value:'"/></div>    </div>    <div id="HotelContentWidgetView-options" class="hideOverflow">        <div class="table">            <div class="type-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"capacity",match:["capacity"]}]},{type:"raw",value:'"><span class="icon icon-2-persons"></span></div>            <div class="text">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.from"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"price",match:["price"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"currency",match:["currency"]}]},{type:"raw",value:'</strong></div>            <div><a target="_blank" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"reservationUrl",match:["reservationUrl"]},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"book"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" class="button orangeButton reservation"><span class="icon icon-cat-hotel"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"book"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a></div>        </div>        <div class="HotelContentWidgetView-partner">            <a target="_blank" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"reservationUrl",match:["reservationUrl"]},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" class="alink otherRooms">                <strong>></strong> <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.moreRooms"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>            </a>        </div>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],261:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/loading.html.twig",data:[{type:"raw",value:'<div class="HotelContentWidgetView">    <div id="HotelContentWidgetView-loading">        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"hotelcontentwidgetview-loader.gif"},{type:"Twig.expression.type.filter",value:"img_path",match:["|img_path","img_path"]}]},{type:"raw",value:'" />        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.loading1"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"        <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:"</strong>        "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.loading2"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"    	<strong>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_from"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"from",match:["from"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_to"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"to",match:["to"]}]},{type:"raw",value:"</strong>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],262:[function(e,t,i){e("../../../../../../../../FastBundle/Resources/views/shared/mixins/DatePickers.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/main.html.twig",data:[{type:"raw",value:'<div class="HotelContentWidgetView">    <div id="HotelContentWidgetView-header" class="clearfix">        <span>            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"minPrice"}],output:[{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.roomFrom"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"minPrice"}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"currency"}]},{type:"raw",value:"</strong>            "}]}},{type:"raw",value:'        </span>        <span>            <a id="HotelContentWidgetView-reservation" target="_blank" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"templatizedUrl"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"book"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" class="button orangeButton reservation"><span class="icon icon-cat-hotel"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"book"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>        </span>        <div class="banner">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"with"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:' <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"data",match:["data"]},{type:"Twig.expression.type.key.period",key:"banner"}]},{type:"raw",value:'"/></div>    </div>    <div id="HotelContentWidgetView-options" class="bordertop">        <form id="HotelContentWidgetView-form" class="clearfix">            <div class="hotelFormLabel">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"hotels_reservation_filter"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" :</div>            "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/mixins/DatePickers.html.twig"}]}},{type:"raw",value:"        </form>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../../../FastBundle/Resources/views/shared/mixins/DatePickers.html.twig":320}],263:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/GeoentityView/contentWidgets/HotelContentWidgetView/notAvailable.html.twig",data:[{type:"raw",value:'<div class="HotelContentWidgetView">    <div id="HotelContentWidgetView-header" class="clearfix">         <h3>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.notAvailable"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"         "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_from"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"from",match:["from"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_to"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"to",match:["to"]}]},{type:"raw",value:'</h3>        <div class="banner">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"with"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:' <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"banner",match:["banner"]}]},{type:"raw",value:'"/></div>    </div>    <div id="HotelContentWidgetView-options">        <a href="#" id="HotelContentWidgetView-change-dates" class="alink">        	<strong>></strong> <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.changeDates"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",
value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</span>        </a>        <a href="#" id="HotelContentWidgetView-more-hotels" class="alink">        	<strong>></strong> <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"app.contentwidget.hotel.moreHotels"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>        </a>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],264:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/IndoorView.html.twig",data:[{type:"raw",value:'<div id="'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"IndoorView"}]}},{type:"raw",value:'">    <a class="switchToViewIcon"></a>    <div id="'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"IndoorView"}]}},{type:"raw",value:'Player"></div>    <span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"views",match:["views"]},{type:"Twig.expression.type.key.period",key:"0"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</span>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"views",match:["views"]},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'        <div class="carousel">            <div class="jcarousel">                <ul>                    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"view",expression:[{type:"Twig.expression.type.variable",value:"views",match:["views"]}],output:[{type:"raw",value:'                    <li class="jcarousel-item">                        <a data-descriptor="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"view",match:["view"]},{type:"Twig.expression.type.key.period",key:"descriptor"}]},{type:"raw",value:'" href="">                            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"view",match:["view"]},{type:"Twig.expression.type.key.period",key:"thumbnail"}]},{type:"raw",value:'" />                            <span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"view",match:["view"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</span>                        </a>                    </li>                    "}]}},{type:"raw",value:'                </ul>            </div>            <a href="#" class="jcarousel-control jcarousel-prev disable icon icon-previous"></a>            <a href="#" class="jcarousel-control jcarousel-next disable icon icon-next"></a>        </div>    '}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],265:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/TooltipView/AddressTipView.html.twig",data:[{type:"raw",value:'<table class="TooltipView AddressTipView">    <tr>        <td class="TooltipView-leftBlock">            <h4 data-event="address_click" class="AddressLabel">                <span class="AddressLabelMainAddress">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"separatedText"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]},{type:"raw",value:"</span>                "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"text",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"separatedText"},{type:"Twig.expression.type.filter",value:"slice",match:["|slice","slice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],output:[{type:"raw",value:'                    <span class="AddressLabelSubAddress">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"text",match:["text"]}]},{type:"raw",value:"</span>                "}]}},{type:"raw",value:'            </h4>            <span class="icon icon-arrow-list AddressLabel" data-event="address_click"></span>            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rawAddress"}],output:[{type:"raw",value:'            <ul class="TooltipView-links TooltipView-actions">                <li><a href="#" class="smallButton lightBlueButton" data-event="itinerary_to_click"><span class="icon icon-flag"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"go_there"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></li>            </ul>            "}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_FR"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                <ul class="TooltipView-links TooltipView-discover">                    <li>                        <span class="icon icon-cat-hotel"></span>                        <a class="discoverLinkLabel" href="#" data-event="hotel_click">                            '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"addressview.category.hotel"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"common"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"                        </a>                    </li>                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"country"},{type:"Twig.expression.type.string",value:"France"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                    <li>                        <span class="icon icon-cat-restaurant"></span>                        <a class="discoverLinkLabel" href="#" data-event="restaurant_click">                            '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"addressview.category.restaurant"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"common"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:'                        </a>                    </li>                    <li>                        <span class="icon icon-cat-parking"></span>                        <a class="discoverLinkLabel" href="#" data-event="parking_click">                            '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"addressview.category.parking"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"common"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"                        </a>                    </li>                    "}]}},{type:"raw",value:"                </ul>            "}]}},{type:"raw",value:'        </td>        <td class="TooltipView-immersiveViewThumbnail cropImage" data-event="immersive_view_thumbnail_click">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"has3dSupport",match:["has3dSupport"]}],output:[{type:"raw",value:'                <a class="switchToViewIcon"></a>            '}]}},{type:"raw",value:"        </td>    </tr></table>"}],precompiled:!0,allowInlineIncludes:!0})},{}],266:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/TooltipView/GeoentityTipView.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.set",key:"zipcodes",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"zipCodes"},{type:"Twig.expression.type.filter",value:"join",match:["| join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:", "},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"isTooltipFull"}],output:[{type:"raw",value:'<table class="TooltipView GeoentityTipView">        <tr>        <td class="TooltipView-leftBlock">            <h4 data-event="details_click" class="GeoentityName">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:'</h4>            <span class="icon icon-arrow-list"></span>            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"street"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'            <p class="TooltipView-address">                <span class="TooltipView-address-street">'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"streetNumber"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"streetNumber"}]},{type:"raw",value:" "}]}},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"street"}]},{type:"raw",value:'</span>                <span class="TooltipView-address-city">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"zipcodes",match:["zipcodes"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"city"}]},{type:"raw",value:"</span>            </p>            "}]}},{type:"raw",value:'            <ul class="TooltipView-links TooltipView-actions">                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_FR"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                    <li class="buttonShowDetail">                        <a href="#" class="smallButton greenButton" data-event="details_click">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"more_infos"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"common"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a>                    </li>                "}]}},{type:"raw",value:'                <li class="buttonItineraryTo">                    <a href="#" class="smallButton lightBlueButton" data-event="itinerary_to_click"><span class="icon icon-flag"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"go_there"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>                </li>            </ul>        </td>        <td class="TooltipView-immersiveViewThumbnail cropImage" data-event="immersive_view_thumbnail_click">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"has3dSupport",match:["has3dSupport"]}],output:[{type:"raw",value:'                <a class="switchToViewIcon"></a>            '}]}},{type:"raw",value:"        </td>    </tr></table>"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'<div class="TooltipView GeoentityTipView">    <div class="TooltipView-simpleBlock">        <h4 class="GeoentityName">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</h4>        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"street"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'        <p class="TooltipView-address">            <span class="TooltipView-address-street">'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"streetNumber"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"streetNumber"}]},{type:"raw",value:" "}]}},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"street"}]},{type:"raw",value:'</span>            <span class="TooltipView-address-city">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"zipcodes",match:["zipcodes"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"city"}]},{type:"raw",value:"</span>        </p>        "}]}},{type:"raw",value:"    </div></div>"}]}}],precompiled:!0,allowInlineIncludes:!0})},{}],267:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/UpiPopin.html.twig",data:[{type:"raw",value:'<div id="upiPopin">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"error",match:["error"]},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:'    <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"screenShotURL",match:["screenShotURL"]}]},{type:"raw",value:'" width="230" height="130" />    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'    <div class="upiError">        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"centerview.noImmersiveView"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"    </div>    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],268:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/center/partner/blocks.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/center/partner/blocks.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/center/IndoorView.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/center/partner/blocks.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/center/partner/blocks.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"appURL",match:["appURL"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"appURL",expression:[{type:"Twig.expression.type.variable",value:"appURL",match:["appURL"]}]}}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"title-productTitle"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <div class="PartnerView-block PartnerView-title-product">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"illustrationUrl"}],output:[{type:"raw",value:'            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"illustrationUrl"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" />'},{type:"raw",value:"        "}]}},{type:"raw",value:"        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"    </div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"title-contentTitle"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <div class="PartnerView-block PartnerView-title-content">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"illustrationUrl"}],output:[{type:"raw",value:'            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"illustrationUrl"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" />'},{type:"raw",value:"        "}]}},{type:"raw",value:"        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"    </div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"title-partTitle"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <h2 class="PartnerView-block PartnerView-title-part">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"illustrationUrl"}],output:[{type:"raw",value:'            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"illustrationUrl"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:'" />'},{type:"raw",value:"        "}]}},{type:"raw",value:"        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"    </h2>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"text-normal"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-text-normal">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"text"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"text-quote"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-text-quote">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"text"}]},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"text-html"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-text-html">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"text"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"text-bulleted"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<li class="PartnerView-block PartnerView-text-bulleted">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"text"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</li>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"text_list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-textlist">    '},{type:"logic",token:{type:"Twig.logic.type.set",key:"_textList",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"textList"}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"list"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"_textList",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"list"}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"text",expression:[{type:"Twig.expression.type.variable",value:"_textList",match:["_textList"]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/partner/blocks.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"block"},{type:"Twig.expression.type.variable",value:"text",match:["text"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"link-link"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",
value:'<div class="PartnerView-block PartnerView-link-link">    <a target="_blank" href="'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"@"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"mailto:"}]}},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" class="linkc">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</a></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"link-button"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-link-button">    <a target="_blank" href="'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"@"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"mailto:"}]}},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" class="button reservation">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</a></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"link-title"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-link-title">    <a target="_blank" href="'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.string",value:"@"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"mailto:"}]}},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</a></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"horizontalRule"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-hr"></div>'}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"image"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"normal"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"logo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"illustrationFiche"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-image-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"}]},{type:"raw",value:'">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"link"}],output:[{type:"raw",value:'<a target="_blank" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'">'}]}},{type:"raw",value:'    <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"source"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"\" onerror=\"this.onerror=''; this.src='"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"errorSource"}]},{type:"raw",value:'\';" style="'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"width"}],output:[{type:"raw",value:"max-width:"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"width"}]},{type:"raw",value:"px; "}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"height"}],output:[{type:"raw",value:" max-height:"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"height"}]},{type:"raw",value:"px; "}]}},{type:"raw",value:'"/>    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"link"}],output:[{type:"raw",value:"</a>"}]}},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"image-thumbnail"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-image-thumbnail'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"link"}],output:[{type:"raw",value:" carousel"}]}},{type:"raw",value:'">    <img data-url="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'" src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"source"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" /></div>'}]}},{type:"logic",token:{type:"Twig.logic.type.set",key:"_imageList",expression:[{type:"Twig.expression.type.string",value:""}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"images"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"_imageList",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"images"}]}}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"list"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"_imageList",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"list"}]}}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"image_list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"_imageList",match:["_imageList"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-images carousel">    <div class="jcarousel">        <ul>            '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"image",expression:[{type:"Twig.expression.type.variable",value:"_imageList",match:["_imageList"]}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.set",key:"rowIndex",expression:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]}},{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.set",key:"_imageSource",expression:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"source"}]}},{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"image"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"_imageSource",expression:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"image"}]}},{type:"raw",value:"                "}]}},{type:"raw",value:'                <li class="jcarousel-item">                    <div>                        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rowIndex",match:["rowIndex"]},{type:"Twig.expression.type.number",value:3,match:["3",null]},{type:"Twig.expression.type.operator.binary",value:"<=",precidence:8,associativity:"leftToRight",operator:"<="}],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"src",expression:[{type:"Twig.expression.type.variable",value:"_imageSource",match:["_imageSource"]},{type:"Twig.expression.type.string",value:"error.png"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"_imageSource",match:["_imageSource"]},{type:"Twig.expression.type.filter",value:"img_path",match:["| img_path","img_path"]},{type:"Twig.expression.type.variable",value:"_imageSource",match:["_imageSource"]},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:"                        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"src",expression:[{type:"Twig.expression.type.string",value:""}]}},{type:"raw",value:"                        "}]}},{type:"raw",value:'                        <img class="lazy" data-original="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"_imageSource",match:["_imageSource"]}]},{type:"raw",value:'" src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"src",match:["src"]}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'"                        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"link"}],output:[{type:"raw",value:'data-url="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"link"}]},{type:"raw",value:'"'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'style="cursor:default;"'}]}},{type:"raw",value:'                        data-aspect="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"aspect"}]},{type:"raw",value:'" />                    </div>                </li>            '}]}},{type:"raw",value:'        </ul>    </div>    <a href="#" class="jcarousel-control jcarousel-prev disable icon icon-previous"></a>    <a href="#" class="jcarousel-control jcarousel-next icon icon-next"></a></div>'}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"table"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"background"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-table-background">'}]}},{type:"raw",value:'<table class="PartnerView-block PartnerView-table '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"catalog"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:" PartnerView-table-catalog "}]}},{type:"raw",value:'">  '},{type:"logic",token:{type:"Twig.logic.type.set",key:"maxLength",expression:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"column",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"columns"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"column",match:["column"]},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.variable",value:"maxLength",match:["maxLength"]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"maxLength",expression:[{type:"Twig.expression.type.variable",value:"column",match:["column"]},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"blockRows",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rows"}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rows"},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"table"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"blockRows",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"table"}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"row",expression:[{type:"Twig.expression.type.variable",value:"blockRows",match:["blockRows"]}],output:[{type:"raw",value:"    <tr>        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"rowIndex",expression:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"column",expression:[{type:"Twig.expression.type.variable",value:"row",match:["row"]}],output:[{type:"raw",value:'        <td class="PartnerView-table-td'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"first"}],output:[{type:"raw",value:" first"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"last"}],output:[{type:"raw",value:" last"}]}},{type:"raw",value:'" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rowIndex",match:["rowIndex"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"columns"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]}]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'rowspan="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"maxLength",match:["maxLength"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"columns"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]}]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:'"'}]}},{type:"raw",value:">            "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/partner/blocks.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"block"},{type:"Twig.expression.type.variable",value:"column",match:["column"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"        </td>        "}]}},{type:"raw",value:"    </tr>    "}]}},{type:"raw",value:"</table>"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"background"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"</div>"}]}}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"key_value"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-keyvalue">    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"item",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"keyValue"}],output:[{type:"raw",value:"        <p>            <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"key"}]},{type:"raw",value:" : </span>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"values"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"values"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"value",expression:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"values"}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"value",match:["value"]},{type:"Twig.expression.type.key.period",key:"iconUrl"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"value",match:["value"]},{type:"Twig.expression.type.key.period",key:"iconUrl"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"value",match:["value"]},{type:"Twig.expression.type.key.period",key:"iconUrl"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"value",match:["value"]},{type:"Twig.expression.type.key.period",key:"text"}]},{type:"raw",value:'" />'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"last"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:" , "}]}},{type:"raw",value:"                    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"value",match:["value"]},{type:"Twig.expression.type.key.period",key:"text"}]},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"last"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:", "}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"            "}]}},{type:"raw",value:"        </p>    "}]}},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"service_list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-services '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"}]},{type:"raw",value:'">    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"service",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"services"}],output:[{type:"raw",value:"        <div>"},{type:"logic",token:{type:"Twig.logic.type.set",key:"src",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"services"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.key.period",key:"source"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"src",match:["src"]},{type:"Twig.expression.type.test",filter:"empty"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"src",expression:[{type:"Twig.expression.type.string",value:"servicelist_nodata.png"},{type:"Twig.expression.type.filter",value:"img_path",match:["|img_path","img_path"]}]}}]}},{type:"raw",value:'            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"src",match:["src"]}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"services"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" />            <span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"services"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.key.period",key:"label"
}]},{type:"raw",value:"</span>        </div>    "}]}},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"indoor_tour"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-indoor">    '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/IndoorView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"views"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"views"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"id"},{type:"Twig.expression.type.string",value:"IndoorViewTab"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:'    <p class="PartnerView-annoucer">        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"announcer_report"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"    </p></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"rating"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"star"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"star_max"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"custom"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"custom_max"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-rating">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rate"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"star_max"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"custom_max"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"i",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rate"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"max"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"},{type:"Twig.expression.type.operator.binary",value:"..",precidence:20,associativity:"leftToRight",operator:".."}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"star_max"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                <img src="},{type:"output",stack:[{type:"Twig.expression.type.string",value:"rating-empty-partner-view.png"},{type:"Twig.expression.type.filter",value:"geoentity_common_icon",match:["|geoentity_common_icon","geoentity_common_icon"]}]},{type:"raw",value:">            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"appURL",match:["appURL"]}]},{type:"raw",value:'/images/rating-empty.png">            '}]}},{type:"raw",value:"            "}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"i",expression:[{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rate"},{type:"Twig.expression.type.operator.binary",value:"..",precidence:20,associativity:"leftToRight",operator:".."}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"star"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"star_max"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"            <img src="},{type:"output",stack:[{type:"Twig.expression.type.string",value:"rating-partner-view.png"},{type:"Twig.expression.type.filter",value:"geoentity_common_icon",match:["|geoentity_common_icon","geoentity_common_icon"]}]},{type:"raw",value:">        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"appURL",match:["appURL"]}]},{type:"raw",value:'/images/rating.png">        '}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"rating"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"aspect"},{type:"Twig.expression.type.string",value:"meter_max"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-rating-meter">    <span class="rating-meter">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"}],output:[{type:"raw",value:'<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" target="_blank"'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"nofollow"}],output:[{type:"raw",value:' rel="nofollow"'}]}},{type:"raw",value:">"}]}},{type:"raw",value:'        <span style="width:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"percent"}]},{type:"raw",value:'%">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rate"}]},{type:"raw",value:"</span>        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"}],output:[{type:"raw",value:"</a>"}]}},{type:"raw",value:"    </span>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"}],output:[{type:"raw",value:'<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" target="_blank"'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"nofollow"}],output:[{type:"raw",value:' rel="nofollow"'}]}},{type:"raw",value:">"}]}},{type:"raw",value:"        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"label"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"url"}],output:[{type:"raw",value:"</a>"}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"    "},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"        "},{type:"raw",value:'        <div itemscope itemprop="aggregateRating" itemtype="http://schema.org/AggregateRating" class="rs-aggregateRating">            <meta itemprop="itemReviewed" class="rs-itemReviewed" content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'" />            <meta itemprop="ratingValue" class="rs-ratingValue"content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rate"}]},{type:"raw",value:'" />            <meta itemprop="bestRating" class="rs-bestRating" content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"max"}]},{type:"raw",value:'" />            <meta itemprop="reviewCount" class="rs-reviewCount" content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"reviews"}]},{type:"raw",value:'" />        </div>    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"        "},{type:"raw",value:'        <div itemprop="review" itemscope itemtype="http://schema.org/Review" class="rs-review">            <meta itemprop="name" class="rs-itemReviewed" content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'" />            <meta itemprop="author" class="rs-authorReviewed" content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"partner",match:["partner"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:'" />            <div itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating" class="rs-rating">                <meta itemprop="ratingValue" class="rs-ratingValue"content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"rate"}]},{type:"raw",value:'" />                <meta itemprop="bestRating" class="rs-bestRating" content="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"max"}]},{type:"raw",value:'" />            </div>        </div>    '}]}},{type:"raw",value:"</div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"content_widget"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'<div class="PartnerView-block PartnerView-content-widget">    <div class="PartnerView-content-widget-alternative">        '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/center/partner/blocks.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"block"},{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"alt"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:'    </div>    <div class="PartnerView-content-widget-body" data-content-widget-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" data-params="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"params"},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"html"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">    </div></div>'}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"price_list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <div class="PartnerView-block PartnerView-price-list">        '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"section",expression:[{type:"Twig.expression.type.variable",value:"block",match:["block"]},{type:"Twig.expression.type.key.period",key:"sections"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                <div class="PartnerView-price-list-section-title"><span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</span></div>            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                <div class="PartnerView-price-list-separator"></div>            '}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"item",expression:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"items"}],output:[{type:"raw",value:'                <div class="PartnerView-price-list-item clearfix">                    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <span class="PartnerView-price-list-item-title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</span>                    "}]}},{type:"raw",value:'                    <span class="PartnerView-price-list-item-description">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"description"}]},{type:"raw",value:"</span>                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <span class="PartnerView-price-list-item-value">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</span>                    "}]}},{type:"raw",value:"                </div>            "}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    </div>"}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/center/IndoorView.html.twig":264,"../../../../../../FastBundle/Resources/views/shared/center/partner/blocks.html.twig":268}],269:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/pushes/blablacar.html.twig",data:[{type:"raw",value:'<div class="pushItiSummary blablacar">    <h3>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.covoiturage.title"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:'</h3>    <div class="info">        <h4 class="blablacar">Blablacar</h4>        <p class="cities">            '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.covoiturage.got"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'            <select>                <option value="1">1</option>                <option value="2">2</option>                <option value="3" selected="selected">3</option>                <option value="4">4</option>            </select>            '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.covoiturage.free_places"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"            <br/>            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.covoiturage.cities"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%from%"},{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.filter",value:"truncate",match:["| truncate","truncate"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:14,match:["14",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%to%"},{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.filter",value:"truncate",match:["| truncate","truncate"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:14,match:["14",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:'        </p>        <p class="price">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.covoiturage.price"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%price%"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.number",value:.065,match:["0.065",".065"]},{type:"Twig.expression.type.variable",value:"distance",match:["distance"]},{type:"Twig.expression.type.operator.binary",value:"*",precidence:5,associativity:"leftToRight",operator:"*"},{type:"Twig.expression.type.number",value:1e3,match:["1000",null]},{type:"Twig.expression.type.operator.binary",value:"/",precidence:5,associativity:"leftToRight",operator:"/"},{type:"Twig.expression.type.number",value:3,match:["3",null]},{type:"Twig.expression.type.operator.binary",value:"*",precidence:5,associativity:"leftToRight",operator:"*"}]},{type:"Twig.expression.type.filter",value:"number_format",match:["| number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:'</p>    </div>    <a href="http://www.blablacar.fr/publier-annonce?hide_map=1&from='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.filter",value:"url_encode",match:["| url_encode","url_encode"]}]},{type:"raw",value:"&to="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.filter",value:"url_encode",match:["| url_encode","url_encode"]}]},{type:"raw",value:'&utm_source=MAPPY&utm_medium=API&utm_content=&utm_campaign=MAPPY_DRVR_none&comuto_cmkt=FR_MAPPY_none&p=mappy" target="_blank" class="redirect">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.covoiturage.redirect"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],270:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/pushes/driiveme.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.set",key:"driiveme_query_string",expression:[{type:"Twig.expression.type.string",value:"cityDepartureName="},{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"&cityDestinationName="},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"city"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"driiveme_date",match:["driiveme_date"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"driiveme_query_string",expression:[{type:"Twig.expression.type.variable",value:"driiveme_query_string",match:["driiveme_query_string"]},{type:"Twig.expression.type.string",value:"&date="},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"driiveme_date",match:["driiveme_date"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}}]}},{type:"raw",value:'<iframe class="pushItiSummary carrental" src="https://www.driiveme.com/webservice/widget/mappy.php?'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"driiveme_query_string",match:["driiveme_query_string"]}]},{type:"raw",value:'" frameborder="0" scrolling="no" height="250px" width="100%"></iframe>'}],precompiled:!0,allowInlineIncludes:!0})},{}],271:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/pushes/ouibus.html.twig",data:[{type:"raw",value:'<div class="pushItiSummary ouibus">    <h3>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.ouibus.title"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:'</h3>    <div class="info">        <h4 class="ouibus">Ouibus</h4>        <p class="cities"><strong>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"start",match:["start"]},{type:"Twig.expression.type.key.period",key:"short_name"},{type:"Twig.expression.type.filter",value:"truncate",match:["| truncate","truncate"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:30,match:["30",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</strong> - <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"end",match:["end"]},{type:"Twig.expression.type.key.period",key:"short_name"},{type:"Twig.expression.type.filter",value:"truncate",match:["| truncate","truncate"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:30,match:["30",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</strong></p>        <p class="ouibusfrequency">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"nbFares",match:["nbFares"]
}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.ouibus.busfrequency"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p>        <p class="price">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.ouibus.price"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%price%"},{type:"Twig.expression.type.variable",value:"bestFare",match:["bestFare"]},{type:"Twig.expression.type.key.period",key:"price"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:'</p>        <p class="ouibusConditions">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.ouibus.conditions"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p>    </div>    <a href="http://action.metaffiliation.com/trk.php?mclic=P484A756821D171&redir=https%3A%2F%2Fbooking.ouibus.com%2Ffr-FR%2Forientation%2Fdeep-link%3Ftarget%3Droutes%26origin%3D'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"startId",match:["startId"]}]},{type:"raw",value:"%26destination%3D"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"endId",match:["endId"]}]},{type:"raw",value:"%26outboundDate%3D"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"bestFare",match:["bestFare"]},{type:"Twig.expression.type.key.period",key:"departure"},{type:"Twig.expression.type.filter",value:"datetimeToTsp",match:["| datetimeToTsp","datetimeToTsp"]},{type:"Twig.expression.type.filter",value:"date",match:["| date","date"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"Y-M-D"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'%26passengers%5B0%5D%5Btype%5D%3DA%26utm_campaign%3DFR_16_acquisition_generique%26utm_medium%3D3_itineraires%26utm_source%3Dmappy_flux" target="_blank" class="redirect">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.push.ouibus.redirect"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],272:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/pushes/uber.html.twig",data:[{type:"raw",value:'<div>    <h4>Uber</h4>    <div class="pushUberDetail">        <div class="title">Allez-y avec <strong>Uber</strong></div>        <div class="uberEta">Arrivée du véhicule dans '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"eta",match:["eta"]},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:'</div>        <div class="uberPriceDuration">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"lowEstimate",match:["lowEstimate"]},{type:"Twig.expression.type.variable",value:"highEstimate",match:["highEstimate"]},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}]}],output:[{type:"raw",value:'                <span class="uberPrice">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"lowEstimate",match:["lowEstimate"]}]},{type:"raw",value:" - "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"highEstimate",match:["highEstimate"]}]},{type:"raw",value:" €</span>            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                <span class="uberPrice">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"lowEstimate",match:["lowEstimate"]}]},{type:"raw",value:" €</span>            "}]}},{type:"raw",value:'            <span class="uberDurationLabel">Durée du trajet </span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"duration",match:["duration"]},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:'        </div>        <a target="_blank" class="button lightBlueButton">Commander maintenant</a>    </div>    <div class="uberPromo"><strong>15€ offerts</strong> sur votre 1ère course avec le code <strong>MAPPY15</strong></div></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],273:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/center/pushes/voyages-sncf.html.twig",data:[{type:"raw",value:'<iframe class="pushItiSummary vsc" src="https://vignette.voyages-sncf.com/mappy.html?origin='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.key.period",key:"lat"},{type:"Twig.expression.type.filter",value:"number_format",match:["| number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:5,match:["5",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:","},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.key.period",key:"lng"},{type:"Twig.expression.type.filter",value:"number_format",match:["| number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:5,match:["5",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"&destination="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"lat"},{type:"Twig.expression.type.filter",value:"number_format",match:["| number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:5,match:["5",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:","},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"lng"},{type:"Twig.expression.type.filter",value:"number_format",match:["| number_format","number_format"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:5,match:["5",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" frameborder="0" scrolling="no" height="250px" width="100%"></iframe>'}],precompiled:!0,allowInlineIncludes:!0})},{}],274:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/header/CategoryContainerView.html.twig",data:[{type:"raw",value:'<div id="CategoryContainerView" class="layerOnInnerLeft">    <p class="nearby-title"></p>    <a class="previous"><span class="icon icon-previous"></span></a>    <a class="next"><span class="icon icon-next"></span></a>    <div>        <div class="categoriesMenu">            <ul class="categories">                '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"category",expression:[{type:"Twig.expression.type.variable",value:"categories",match:["categories"]}],output:[{type:"raw",value:'                    <li>                    <a href="#" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"subcategories"},{type:"Twig.expression.type.test",filter:"empty"}],output:[{type:"raw",value:"data-subcategory"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"data-category"}]}},{type:"raw",value:'="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'">                            <div class="menuAliveKeeper"></div>                            <span class="icon icon-cat-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"iconId"}]},{type:"raw",value:'"></span>                            <span class="label">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'</span>                            <p class="shortLabel">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"shortLabel"}]},{type:"raw",value:"</p>                        </a>                    </li>                "}]}},{type:"raw",value:"            </ul>        </div>        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"category",expression:[{type:"Twig.expression.type.variable",value:"categories",match:["categories"]}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"isRetina",match:["isRetina"]}]}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.set",key:"image",expression:[{type:"Twig.expression.type.string",value:"menu/"},{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"@2x.jpg"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.set",key:"image",expression:[{type:"Twig.expression.type.string",value:"menu/"},{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:".jpg"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]}},{type:"raw",value:"            "}]}},{type:"raw",value:'            <div class="categoriesSubmenus '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" data-category="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'"                 style="background-image: url(\''},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.filter",value:"img_path",match:["| img_path","img_path"]}]},{type:"raw",value:'\')">                <p class="intro">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"intro"}]},{type:"raw",value:'<span class="icon icon-close"></span></p>                <div class="scrollableMenu">                    <div class="subcategories '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"apps"},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"apps"},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]},{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.string",value:"loisir-culture"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"noRecomandation"}]}},{type:"raw",value:'">                        <p class="title">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"categories.title.subcategories"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p>                        <ul class="ArrowList">                            '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"subcategory",expression:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"subcategories"}],output:[{type:"raw",value:'                                <li>                                    <a href="#" data-rubricids="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"rubricIds"},{type:"Twig.expression.type.filter",value:"join",match:["|join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">                                        <span class="icon icon-arrow-list"></span>                                        <span class="icon icon-cat-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"iconId"}]},{type:"raw",value:' iconSubCategory"></span>                                        <span class="text">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</span>                                    </a>                                </li>                            "}]}},{type:"raw",value:"                        </ul>                    </div>                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"apps"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"apps"},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                    <div class="recommendations">                        <p class="title">                            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.string",value:"loisir-culture"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"Localiser les lieux de l’Euro 2016"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"                            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"categories.title.premiumApps"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"                            "}]}},{type:"raw",value:"                        </p>                        <ul>                            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"appId",expression:[{type:"Twig.expression.type.variable",value:"category",match:["category"]},{type:"Twig.expression.type.key.period",key:"apps"}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applications",match:["applications"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                                    <li "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applications",match:["applications"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"Twig.expression.type.key.period",key:"published"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:' style="display:none;"'}]}},{type:"raw",value:'>                                        <a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"apps"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"appName"},{type:"Twig.expression.type.variable",value:"appId",match:["appId"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" data-appId="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"raw",value:'" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applications",match:["applications"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"Twig.expression.type.key.period",key:"published"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:'rel="nofollow"'}]}},{type:"raw",value:">                                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applications",match:["applications"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"Twig.expression.type.key.period",key:"menu"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'                                                <img data-src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applications",match:["applications"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"Twig.expression.type.key.period",key:"menu"}]},{type:"raw",value:'" />                                            '}]}},{type:"raw",value:"                                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applications",match:["applications"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'                                                <span class="name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applications",match:["applications"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"appId",match:["appId"]}]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</span>                                            "}]}},{type:"raw",value:"                                        </a>                                    </li>                                "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                        </ul>                    </div>                    "}]}},{type:"raw",value:"                </div>            </div>        "}]}},{type:"raw",value:"    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],275:[function(e,t,i){e("../../../../../FastBundle/Resources/views/shared/mixins/DatePickers.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/PushHotelView.html.twig",data:[{type:"raw",value:'<div class="PushHotelView">    <div class="PushHotelView-header">        <span class="PushHotelView-logo icon icon-cat-hotel"></span>        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"city",match:["city"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"city",match:["city"]},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'        <p class="push-title">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.pushhotel.titleWithCity"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%city%"},{type:"Twig.expression.type.variable",value:"city",match:["city"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</p>        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'            <p class="push-title">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.pushhotel.title"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</p>        "}]}},{type:"raw",value:"        <form>            "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/mixins/DatePickers.html.twig"}]}},{type:"raw",value:'        </form>    </div>    <div id="PushHotelView-geoentities" class="jcarousel">    </div>    <a href="#" class="jcarousel-control jcarousel-prev disable icon icon-previous"></a>    <a href="#" class="jcarousel-control jcarousel-next disable icon icon-next"></a></div>'}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../FastBundle/Resources/views/shared/mixins/DatePickers.html.twig":320}],276:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/transportIcons.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/action/end.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/action/ped-to-urban-bike.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/action/start.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/action/transport.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/action/urban-bike-to-ped.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/action/actionSubSteps.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/action/action.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"transport"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"media",match:["media"]},{type:"Twig.expression.type.string",value:"print"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'        <li class="action"            data-coordX="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"x"}]},{type:"raw",value:'"            data-coordY="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"y"}]},{type:"raw",value:'"            data-plIdx="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"polyLineIndex"}]},{type:"raw",value:'"            data-plIdxTo="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"polylineIndexTo"}]},{type:"raw",value:'">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"walk-end"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"appCDN",match:["appCDN"]}]},{type:"raw",value:"images/itinerary/print/step/roadbook-step-"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'.png">            '}]}},{type:"raw",value:"    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <li class="action action'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:" itineraryIcon itineraryIcon"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadSign",match:["roadSign"]}]},{type:"raw",value:'">    '}]}}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'    <li class="action action'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:'">        '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/transportIcons.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"action"},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}}]}},{type:"raw",value:"    "},{type:"logic",
token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"end"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/action/end.html.twig"}]}},{type:"raw",value:"    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"ped-to-urban-bike"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/action/ped-to-urban-bike.html.twig"}]}},{type:"raw",value:"    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"start"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/action/start.html.twig"}]}},{type:"raw",value:"    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"transport"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/action/transport.html.twig"}]}},{type:"raw",value:"    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"urban-bike-to-ped"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/action/urban-bike-to-ped.html.twig"}]}},{type:"raw",value:"    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <p>            <span class="number">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"index",match:["index"]}]},{type:"raw",value:".</span>            "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"label"},{type:"Twig.expression.type.filter",value:"boldify",match:["| boldify","boldify"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"distance"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"                "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.action.and_continue"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"                "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"distance"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"            "}]}},{type:"raw",value:'            <span class="actionRight">                <span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"meter"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"</span>                <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"sec"},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:"</span>            </span>        </p>        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"roadPois"},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/action/actionSubSteps.html.twig"}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"state"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"state"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'            <span class="itineraryIcon trafficState trafficState'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"state"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"trafficState."},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"state"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'"></span>        '}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"</li>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/action/actionSubSteps.html.twig":277,"../../../../../../FastBundle/Resources/views/shared/itinerary/action/end.html.twig":278,"../../../../../../FastBundle/Resources/views/shared/itinerary/action/ped-to-urban-bike.html.twig":279,"../../../../../../FastBundle/Resources/views/shared/itinerary/action/start.html.twig":280,"../../../../../../FastBundle/Resources/views/shared/itinerary/action/transport.html.twig":281,"../../../../../../FastBundle/Resources/views/shared/itinerary/action/urban-bike-to-ped.html.twig":282,"../../../../../../FastBundle/Resources/views/shared/itinerary/transportIcons.html.twig":295}],277:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/action/actionSubSteps.html.twig",data:[{type:"raw",value:'<div class="subSteps">    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"roadPoi",expression:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"roadPois"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"townSign"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'        <p class="townSign">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</p>        "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"traffic-event"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'        <div class="subStep itineraryIcon itineraryIconTraffic'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"codeAlert"}]},{type:"raw",value:'">            <p>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</p>        </div>        "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"shield"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'        <div class="shield">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"heads"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'                <div class="hat">                    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"head",expression:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"heads"}],output:[{type:"raw",value:'                        <span class="name" style="background: '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"head",match:["head"]},{type:"Twig.expression.type.key.period",key:"color"}]},{type:"raw",value:"; color: "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"head",match:["head"]},{type:"Twig.expression.type.key.period",key:"fontColor"}]},{type:"raw",value:'}">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"head",match:["head"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</span>                    "}]}},{type:"raw",value:"                </div>            "}]}},{type:"raw",value:"            <ul>                "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"line",expression:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"lines"}],output:[{type:"raw",value:"                    <li>                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"text"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                            <span class="name">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</span>                        "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"num"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                            <span class="name" style="background: '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"color"}]},{type:"raw",value:"; color: "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"fontColor"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</span>                        "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"street"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                            <span class="streetname">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</span>                        "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"picto"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"appCDN",match:["appCDN"]}]},{type:"raw",value:"images/itinerary/shield/picto"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:'.gif">                        '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                            <span class="other">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"line",match:["line"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:"</span>                        "}]}},{type:"raw",value:"                    </li>                "}]}},{type:"raw",value:"            </ul>        </div>        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <div class="subStep itineraryIcon itineraryIcon'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:'">            <p>                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"media",match:["media"]},{type:"Twig.expression.type.string",value:"print"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                    <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"appCDN",match:["appCDN"]}]},{type:"raw",value:"images/itinerary/print/roadPoi/sprite_"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:'.24.png">                '}]}},{type:"raw",value:"                "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadPoi",match:["roadPoi"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"            </p>        </div>        "}]}},{type:"raw",value:"    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],278:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/action/end.html.twig",data:[{type:"raw",value:"<h2>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</h2>"}],precompiled:!0,allowInlineIncludes:!0})},{}],279:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/action/ped-to-urban-bike.html.twig",data:[{type:"raw",value:"	<p>		<em>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"stationName"}]},{type:"raw",value:"</em>		"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"		<em>"},{type:"output",stack:[{type:"Twig.expression.type.string",value:"roadbook.urbanbike.available_bikes"},{type:"Twig.expression.type.filter",value:"transchoice",match:["| transchoice","transchoice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"freeBikes"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%count%"},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"freeBikes"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"messages"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</em>	</p>"}],precompiled:!0,allowInlineIncludes:!0})},{}],280:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/action/start.html.twig",data:[{type:"raw",value:"    <h2>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</h2>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"closed",match:["closed"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"closed",match:["closed"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"        <em>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.summary.traffic.beware_closed_section"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</em>    "}]}}],precompiled:!0,allowInlineIncludes:!0})},{}],281:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/action/transport.html.twig",data:[{type:"raw",value:"    <p>        <em>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"depStation"}]},{type:"raw",value:" <span>("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"depDate"},{type:"Twig.expression.type.filter",value:"tspToString",match:["| tspToString","tspToString"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:")</span></em>        "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.tc.in_direction"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%station%"},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"lineDir"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"        <em>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"arrStation"}]},{type:"raw",value:" <span>("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"arrDate"},{type:"Twig.expression.type.filter",value:"tspToString",match:["| tspToString","tspToString"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:")</span></em>    </p>"}],precompiled:!0,allowInlineIncludes:!0})},{}],282:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/action/urban-bike-to-ped.html.twig",data:[{type:"raw",value:"	<p>		<em>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"stationName"}]},{type:"raw",value:"</em>		"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"		<em>"},{type:"output",stack:[{type:"Twig.expression.type.string",value:"roadbook.urbanbike.available_blocks"},{type:"Twig.expression.type.filter",value:"transchoice",match:["| transchoice","transchoice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"freeBlocks"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%count%"},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"freeBlocks"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"messages"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</em>	</p>"}],precompiled:!0,allowInlineIncludes:!0})},{}],283:[function(e,t,i){e("../../../../../FastBundle/Resources/views/shared/itinerary/summary/auto.html.twig"),e("../../../../../FastBundle/Resources/views/shared/itinerary/summary/pieton.html.twig"),e("../../../../../FastBundle/Resources/views/shared/itinerary/summary/tc.html.twig"),e("../../../../../FastBundle/Resources/views/shared/itinerary/summary/velo.html.twig"),e("../../../../../FastBundle/Resources/views/shared/itinerary/roadbook/index.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/index.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.set",key:"timestamp",expression:[{type:"Twig.expression.type._function",fn:"random",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:1e10,match:["10000000000",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"printUrl",match:["printUrl"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"printUrl",expression:[{type:"Twig.expression.type.string",value:""}]}}]}},{type:"logic",token:{type:"Twig.logic.type.set",key:"params",expression:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"mode"},{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"source"},{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"destination"},{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"summary"},{type:"Twig.expression.type.variable",value:"route",match:["route"]},{type:"Twig.expression.type.key.period",key:"summary"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"route"},{type:"Twig.expression.type.variable",value:"route",match:["route"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"printUrl"},{type:"Twig.expression.type.variable",value:"printUrl",match:["printUrl"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:'<div id="roadbookAdvBanner"></div><h1>    <span class="icon icon-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]}]},{type:"raw",value:'"></span>    '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.header.itinerary_to"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%from%"},{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.key.period",key:"label"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%to%"},{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"label"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:"</h1>"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/auto.html.twig"}],withStack:[{type:"Twig.expression.type.variable",value:"params",match:["params"]}]}}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.string",value:"pieton"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/pieton.html.twig"}],withStack:[{type:"Twig.expression.type.variable",value:"params",match:["params"]}]}}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.string",
value:"tc"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/tc.html.twig"}],withStack:[{type:"Twig.expression.type.variable",value:"params",match:["params"]}]}}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.string",value:"velo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/velo.html.twig"}],withStack:[{type:"Twig.expression.type.variable",value:"params",match:["params"]}]}}]}},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/roadbook/index.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"source"},{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"destination"},{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"transportMode"},{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"route"},{type:"Twig.expression.type.variable",value:"route",match:["route"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"multimodal"},{type:"Twig.expression.type.bool",value:!1},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"timestamp"},{type:"Twig.expression.type.bool",value:!1},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../FastBundle/Resources/views/shared/itinerary/roadbook/index.html.twig":289,"../../../../../FastBundle/Resources/views/shared/itinerary/summary/auto.html.twig":290,"../../../../../FastBundle/Resources/views/shared/itinerary/summary/pieton.html.twig":291,"../../../../../FastBundle/Resources/views/shared/itinerary/summary/tc.html.twig":293,"../../../../../FastBundle/Resources/views/shared/itinerary/summary/velo.html.twig":294}],284:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/overview/auto.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewTitle",output:[{type:"raw",value:"       "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.overview.passing_by"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%road_name%"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewDescription",output:[{type:"raw",value:"    "},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"totalGasCost"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"toll"},{type:"Twig.expression.type.key.period",key:"amount"},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"Twig.expression.type.filter",value:"floatToPrice",match:["| floatToPrice","floatToPrice"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"toll"},{type:"Twig.expression.type.key.period",key:"currency"},{type:"Twig.expression.type.filter",value:"stringToCurrency",match:["| stringToCurrency","stringToCurrency"]}]},{type:"raw",value:" -    "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig":285}],285:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig",data:[{type:"raw",value:'<div class="overview '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"itiIdx",match:["itiIdx"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"active"}]}},{type:"raw",value:'">    <p class="title">'},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewTitle",output:[]}},{type:"raw",value:"</p>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"itiIdx",match:["itiIdx"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'        <p class="title-small">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itinerary_recommended"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</p>    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <p class="title-small">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itinerary_alternative"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</p>    "}]}},{type:"raw",value:'    <p class="description">    '},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewDescription",output:[]}},{type:"raw",value:'    </p>    <span class="duration">'},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:'</span>    <a href="#" class="more">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.overview.show_roadbook"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],286:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/overview/pieton.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewTitle",output:[{type:"raw",value:"    "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itinerary.mode.pieton"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewDescription",output:[{type:"raw",value:"    "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig":285}],287:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/overview/tc.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewTitle",output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"options",match:["options"]},{type:"Twig.expression.type.key.period",key:"transport_mode"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"options",match:["options"]},{type:"Twig.expression.type.key.period",key:"transport_mode"},{type:"Twig.expression.type.string",value:"bus"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itineraryForm_option_tc_modes_bustram"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"        "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"options",match:["options"]},{type:"Twig.expression.type.key.period",key:"transport_mode"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"options",match:["options"]},{type:"Twig.expression.type.key.period",key:"transport_mode"},{type:"Twig.expression.type.string",value:"railway"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itineraryForm_option_tc_modes_railway"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itineraryForm_option_tc_modes_all"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"        "}]}},{type:"raw",value:",        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"options",match:["options"]},{type:"Twig.expression.type.key.period",key:"criteria"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"itineraryForm_option_tc_critera_"},{type:"Twig.expression.type.variable",value:"options",match:["options"]},{type:"Twig.expression.type.key.period",key:"criteria"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"        "}]}}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewDescription",output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"summary"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"noimage"},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig":285,"../../../../../../FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig":296}],288:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/overview/velo.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewTitle",output:[{type:"raw",value:"    "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.overview.passing_by"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%road_name%"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"overviewDescription",output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"bikewayKilometers",expression:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"lengthOnFacilities"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"lengthOnFacilities"},{type:"Twig.expression.type.null",value:null},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"bikewayKilometers",match:["bikewayKilometers"]},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"velo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"		"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.velo.overview.facilities"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%count%"},{type:"Twig.expression.type.variable",value:"bikewayKilometers",match:["bikewayKilometers"]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"    	"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"    "}]}}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/overview/overview.html.twig":285}],289:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/action/action.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/PushHotelView.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/PushHotelView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/roadbook/index.html.twig",data:[{type:"raw",value:'<div class="roadbook '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]}]},{type:"raw",value:' clearfix">    <ul class="roadbookLeft">        <div class="mobAdBanner"></div>        '},{type:"logic",token:{type:"Twig.logic.type.set",key:"step",expression:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"mode",expression:[{type:"Twig.expression.type.variable",value:"route",match:["route"]},{type:"Twig.expression.type.key.period",key:"stages"}],output:[{type:"raw",value:'            <li class="mode mode'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:'">                <ul class="actions">                '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"modeAction",expression:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.key.period",key:"actions"}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"params",expression:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"action"},{type:"Twig.expression.type.variable",value:"modeAction",match:["modeAction"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"index"},{type:"Twig.expression.type.variable",value:"step",match:["step"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"source"},{type:"Twig.expression.type.variable",value:"source",match:["source"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"destination"},{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"roadSign"},{type:"Twig.expression.type.variable",value:"modeAction",match:["modeAction"]},{type:"Twig.expression.type.key.period",key:"roadSign"},{type:"Twig.expression.type.variable",value:"modeAction",match:["modeAction"]},{type:"Twig.expression.type.key.period",key:"roadSign"},{type:"Twig.expression.type.string",value:"None"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/action/action.html.twig"}],withStack:[{type:"Twig.expression.type.variable",value:"params",match:["params"]}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"modeAction",match:["modeAction"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"ped-to-urban-bike"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.variable",value:"modeAction",match:["modeAction"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"urban-bike-to-ped"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"step",expression:[{type:"Twig.expression.type.variable",value:"step",match:["step"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"                </ul>            </li>        "}]}},{type:"raw",value:'    </ul>    <div class="roadbookRight">        <div id="roadbookAdvBlock"></div>        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"pushes",match:["pushes"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.string",value:"hotel"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"pushes",match:["pushes"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'        <div id="PushHotelView-right">            '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/PushHotelView.html.twig"}]}},{type:"raw",value:"        </div>        "}]}},{type:"raw",value:'        <div id="roadbookOASBlock" class="roadbookRight-last"></div>    </div>    <a class="backToTop" href="">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"back_to_top"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></div>"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"pushes",match:["pushes"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.string",value:"hotel"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"pushes",match:["pushes"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'<div id="PushHotelView-footer">    '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/PushHotelView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"city"},{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"town"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"</div>"}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/PushHotelView.html.twig":275,"../../../../../../FastBundle/Resources/views/shared/itinerary/action/action.html.twig":276}],290:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/summary/auto.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryInfos",output:[{type:"raw",value:"    <li>        <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.duration"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",
value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>        <span>"},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:"</span>    </li>    <li>        <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.distance"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>        <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"</span>    </li>    <li>        <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.gas"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>        <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"totalGasCost"},{type:"Twig.expression.type.filter",value:"floatToPrice",match:["| floatToPrice","floatToPrice"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"toll"},{type:"Twig.expression.type.key.period",key:"currency"},{type:"Twig.expression.type.filter",value:"stringToCurrency",match:["| stringToCurrency","stringToCurrency"]}]},{type:"raw",value:"</span>    </li>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"toll"},{type:"Twig.expression.type.key.period",key:"amount"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"        <li>            <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.tolls"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>            <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"toll"},{type:"Twig.expression.type.key.period",key:"amount"},{type:"Twig.expression.type.filter",value:"floatToPrice",match:["| floatToPrice","floatToPrice"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"toll"},{type:"Twig.expression.type.key.period",key:"currency"},{type:"Twig.expression.type.filter",value:"stringToCurrency",match:["| stringToCurrency","stringToCurrency"]}]},{type:"raw",value:"</span>        </li>    "}]}}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryDetails",output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"extraTrafficTime",expression:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"extraTrafficTime",match:["extraTrafficTime"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.variable",value:"extraTrafficTime",match:["extraTrafficTime"]},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]},{type:"Twig.expression.type.string",value:"0 min"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'        <span class="traffic"><i class="icon icon-traffic"></i>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.traffic_time"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%time%"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"extraTrafficTime",match:["extraTrafficTime"]},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>    "}]}}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"itineraryPartners",output:[{type:"raw",value:'    <div id="roadbookPushes" class="clearfix"></div>'}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig":292}],291:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/summary/pieton.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryInfos",output:[{type:"raw",value:"<li>    <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.duration"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>    <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:"</span></li><li>    <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.distance"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>    <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"</span></li>"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"itineraryPartners",output:[{type:"raw",value:'    <div id="roadbookPushes" class="clearfix"></div>'}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig":292}],292:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.set",key:"siteLocale",expression:[{type:"Twig.expression.type.variable",value:"locale",match:["locale"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"locale",match:["locale"]},{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:'<div class="summary '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]}]},{type:"raw",value:'">    <div class="summaryLeft">        <ul>'},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryInfos",output:[]}},{type:"raw",value:"</ul>        <div>            "},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryDetails",output:[]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"date",expression:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"departDateTime"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"departDateTime"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"date"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"dateend",expression:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"date",match:["date"]},{type:"Twig.expression.type.filter",value:"datetimeToTsp",match:["|datetimeToTsp","datetimeToTsp"]}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"trafficTime"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]}]}},{type:"raw",value:'            <span class="datelight">                '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.start"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" : "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"date",match:["date"]},{type:"Twig.expression.type.filter",value:"datetimeToTsp",match:["|datetimeToTsp","datetimeToTsp"]},{type:"Twig.expression.type.filter",value:"date",match:["|date","date"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"Hhi"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" |                "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.end"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" : "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"dateend",match:["dateend"]},{type:"Twig.expression.type.filter",value:"date",match:["|date","date"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"Hhi"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'            </span>            <span class="datefull">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.start"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" : "},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"date",match:["date"]}]},{type:"Twig.expression.type.filter",value:"datetimeToTsp",match:["| datetimeToTsp","datetimeToTsp"]},{type:"Twig.expression.type.filter",value:"tspToString",match:["| tspToString","tspToString"]}]},{type:"raw",value:'</span>            <span class="datefull">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.end"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" : "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"dateend",match:["dateend"]},{type:"Twig.expression.type.filter",value:"tspToString",match:["|tspToString","tspToString"]}]},{type:"raw",value:'</span>        </div>    </div>    <div class="summaryRight">        <ul>            <li>                <a class="button print" href="#" data-link="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"printUrl",match:["printUrl"]}]},{type:"raw",value:'">                    <span class="icon icon-print"></span>                    <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.share.print"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>                </a>            </li>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"siteLocale",match:["siteLocale"]},{type:"Twig.expression.type.string",value:"fr_FR"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                <li>                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"expenseUrl",match:["expenseUrl"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'                        <a class="button expense" href="#" data-link="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"expenseUrl",match:["expenseUrl"]}]},{type:"raw",value:'">                    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                        <a class="button expense" href="#" data-link="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"MappyFastBundle_expense_print"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.variable",value:"app",match:["app"]},{type:"Twig.expression.type.key.period",key:"request"},{type:"Twig.expression.type.key.period",key:"attributes"},{type:"Twig.expression.type.key.period",key:"get",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"_route_params"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"?"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"app",match:["app"]},{type:"Twig.expression.type.key.period",key:"request"},{type:"Twig.expression.type.key.period",key:"queryString"}]},{type:"raw",value:'">                    '}]}},{type:"raw",value:'                            <span class="icon icon-euro"></span>                            <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.expense.title"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>                        </a>                </li>            "}]}},{type:"raw",value:'            <li>                <a class="button share" href="">                    <span class="icon icon-share"></span>                    <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.share.toolbar"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</span>                </a>            </li>            <li class="mobile buttonRoadbook">                <a class="button showroadbook" href="">                    <span class="icon icon-list"></span>                    <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"display_roadbook"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>                </a>            </li>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"siteLocale",match:["siteLocale"]},{type:"Twig.expression.type.string",value:"fr_FR"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'            <li class="mobile buttonGps">                <a class="button gps" href=""                    data-ios-store="https://itunes.apple.com/fr/app/mappygps-free-la-navigation/id525006323"                    data-ios-app="mi9://navigateTo?lat='},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"y"}]},{type:"raw",value:"&lon="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"destination",match:["destination"]},{type:"Twig.expression.type.key.period",key:"x"}]},{type:"raw",value:'"                    data-android-store="https://play.google.com/store/apps/details?id=com.mappy.androidpagesjaunes&hl=fr"                    data-windows-store="http://www.windowsphone.com/fr-fr/store/app/mappygps/1edc2707-5057-4493-a824-187713ec2866">                    <span><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"appCDN",match:["appCDN"]}]},{type:"raw",value:'images/mappy_gps_free.png" width="28"/></span>                    <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"open_gps"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>                </a>            </li>            "}]}},{type:"raw",value:"        </ul>    </div></div>"},{type:"logic",token:{type:"Twig.logic.type.block",block:"itineraryPartners",output:[]}}],precompiled:!0,allowInlineIncludes:!0})},{}],293:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/transportIcons.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/summary/tc.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryInfos",output:[{type:"raw",value:"<li>    <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.duration"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>    <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:"</span></li><li>    <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.transport_mode"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"</span>    <span>        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"first",expression:[{type:"Twig.expression.type.bool",value:!0}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"mode",expression:[{type:"Twig.expression.type.variable",value:"route",match:["route"]},{type:"Twig.expression.type.key.period",key:"stages"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"action",expression:[{type:"Twig.expression.type.variable",value:"mode",match:["mode"]},{type:"Twig.expression.type.key.period",key:"actions"}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"transport"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"first",match:["first"]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:'                        <span class="icon icon-next"></span>                    '}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"first",expression:[{type:"Twig.expression.type.bool",value:!1}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/transportIcons.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"action"},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"            "}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    </span></li><li>    <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.tarif_zone"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>    <span>"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"fareZone"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"fareZone"}]}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",
value:"roadbook.nozone"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}]}},{type:"raw",value:"</span></li><li>    <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.nb_correspondances"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>    <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"nbCorrespondances"}]},{type:"raw",value:"</span></li>"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"itineraryPartners",output:[{type:"raw",value:'    <div id="roadbookPushes" class="clearfix"></div>    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"isPrint",match:["isPrint"]},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"summary"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"    "}]}}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig":292,"../../../../../../FastBundle/Resources/views/shared/itinerary/transportIcons.html.twig":295,"../../../../../../FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig":296}],294:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/summary/velo.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.extends",stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig"}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryInfos",output:[{type:"raw",value:"    <li>        <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.duration"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>        <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.filter",value:"secToDuration",match:["| secToDuration","secToDuration"]}]},{type:"raw",value:"</span>    </li>    <li>        <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.distance"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>        <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"</span>    </li>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"freeBikes"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"freeBikes"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"        <li>            <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.departure_bikes"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>            <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"freeBikes"}]},{type:"raw",value:"</span>        </li>        <li>            <span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.arrival_blocks"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>            <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"freeBlocks"}]},{type:"raw",value:"</span>        </li>    "}]}}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"itineraryPartners",output:[{type:"raw",value:'    <div id="roadbookPushes" class="clearfix"></div>    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerUrl"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"summary"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"    "}]}}]}},{type:"logic",token:{type:"Twig.logic.type.block",block:"summaryDetails",output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"bikewayKilometers",expression:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"lengthOnFacilities"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"lengthOnFacilities"},{type:"Twig.expression.type.null",value:null},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"bikewayKilometers",match:["bikewayKilometers"]},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"velo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'        <div class="bikewayDistance">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.velo.facilities"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%count%"},{type:"Twig.expression.type.variable",value:"bikewayKilometers",match:["bikewayKilometers"]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>    "}]}}]}}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/itinerary/summary/summary.html.twig":292,"../../../../../../FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig":296}],295:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/transportIcons.html.twig",data:[{type:"raw",value:'<span class="transportIcons">    <img src="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"services.logotc"},{type:"Twig.expression.type.filter",value:"get_config",match:["| get_config","get_config"]}]},{type:"raw",value:"desktop/modes/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"mode"}]},{type:"raw",value:'.png" />    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"dataProvider"},{type:"Twig.expression.type.string",value:"STIF"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"mode"},{type:"Twig.expression.type.string",value:"bus"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"services.logotc"},{type:"Twig.expression.type.filter",value:"get_config",match:["| get_config","get_config"]}]},{type:"raw",value:"desktop/lines/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"dataProvider"},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:"_"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"mode"}]},{type:"raw",value:"_"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"lineName"},{type:"Twig.expression.type.filter",value:"lower",match:["| lower","lower"]}]},{type:"raw",value:'.png" />    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"        <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"action",match:["action"]},{type:"Twig.expression.type.key.period",key:"lineName"}]},{type:"raw",value:"</span>    "}]}},{type:"raw",value:"</span>"}],precompiled:!0,allowInlineIncludes:!0})},{}],296:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/transportPartnership.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerUrl"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerNetwork"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerLogoRetina"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'    <span class="provider">        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"roadbook.timeline.in_partnership_with"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"noimage",match:["noimage"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerUrl"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'            <a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerUrl"}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerNetwork"}]},{type:"raw",value:"</a>            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerNetwork"}]},{type:"raw",value:"            "}]}},{type:"raw",value:"        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerUrl"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'            <a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerUrl"}]},{type:"raw",value:'" target="_blank"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerLogoRetina"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerNetwork"}]},{type:"raw",value:'" /></a>            '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerLogoRetina"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"summary",match:["summary"]},{type:"Twig.expression.type.key.period",key:"providerNetwork"}]},{type:"raw",value:'" />            '}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    </span>"}]}}],precompiled:!0,allowInlineIncludes:!0})},{}],297:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/itinerary/urbanbikeIcons.html.twig",data:[{type:"raw",value:'<span class="urbanbikeIcon icon icon-bike"></span>'}],precompiled:!0,allowInlineIncludes:!0})},{}],298:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/AdvertisingBLView.html.twig",data:[{type:"raw",value:"<span>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"advertising_label"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</span><div class="AdvertisingBLView-iframe">    <iframe src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"previousUrl",match:["previousUrl"]}]},{type:"raw",value:'" height="250" width="300" marginwidth="0" marginheight="0" scrolling="no" frameBorder="0"></iframe></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],299:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/GeoentityFullListView.html.twig",data:[{type:"raw",value:'<ul class="ListView GeoentityListView" id="ScrollableRightView">    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"model",expression:[{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"additionalInfo",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"additionalInfo"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"additionalInfo"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"auberge-de-jeunesse"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"bar-club"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"cafe"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"camping"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"chambre-d-hotes"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"hotel"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"location-gite"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"restaurant"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"station-service"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"velos-en-libre-service"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"isNotRubricDefault",expression:[{type:"Twig.expression.type.bool",value:!0}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"auberge-de-jeunesse"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"camping"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"chambre-d-hotes"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"hotel"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"location-gite"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"isHotel",expression:[{type:"Twig.expression.type.bool",value:!0}]}},{type:"raw",value:"        "}]}},{type:"raw",value:'        <li>            <div class="geoentity">                <div class="picto-list">                    <div class="big-marker">                        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"brandId"}],output:[{type:"raw",value:'                            <div class="marker"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.filter",value:"geoentity_branding_icon",match:["| geoentity_branding_icon","geoentity_branding_icon"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"map"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"isRetina",match:["isRetina"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"isRetina",match:["isRetina"]},{type:"Twig.expression.type.bool",value:!1},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"brandId"}]},{type:"raw",value:'" width="40" height="50"/></div>                        '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                            <div class="marker marker-blue">                                <span class="icon icon-rub-default icon-rub-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"iconIdParent"}]},{type:"raw",value:" icon-rub-"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"iconId"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricLabel"}]},{type:"raw",value:'"></span>                            </div>                        '}]}},{type:"raw",value:"                    </div>                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                        <p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"street"}]},{type:"raw",value:"</p>                        <p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"zipCodes"},{type:"Twig.expression.type.key.period",key:"0"}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"city"}]},{type:"raw",value:"</p>                    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                        <p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"way"}]},{type:"raw",value:"</p>                        <p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"pCode"}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"town"}]},{type:"raw",value:"</p>                    "}]}},{type:"raw",value:'                </div>                <div class="description-list">                    <div class="content-description-list">                        <h2>                            <a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"poi"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"uuid"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</a>                        </h2>                        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"rubricLabel",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",
key:"rubricLabel"}]}},{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rubrique",match:["rubrique"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"rubricLabel",expression:[{type:"Twig.expression.type.variable",value:"rubrique",match:["rubrique"]}]}},{type:"raw",value:"                        "}]}},{type:"raw",value:"                        <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubricLabel",match:["rubricLabel"]}]},{type:"raw",value:'</strong>                        <span class="rating">                            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"isHotel",match:["isHotel"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <span class="rating-column">Etoiles <br>                                        <b>                                            '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"i",expression:[{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.operator.binary",value:"..",precidence:20,associativity:"leftToRight",operator:".."}],output:[{type:"raw",value:'                                            <span class="rating-start"></span>                                            '}]}},{type:"raw",value:"                                        </b>                                    </span>                                "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"velos-en-libre-service"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.variable",value:"isHotel",match:["isHotel"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"openingHours"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"openingHours"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <span class="rating-column">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"openingHours"}]},{type:"raw",value:" <br>&nbsp;</span>                                "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"velos-en-libre-service"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"averageNote"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"averageNote"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"averageNote"},{type:"Twig.expression.type.string",value:"0"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"numberOfReviews"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"numberOfReviews"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'                                    <span class="rating-column">                                        '},{type:"logic",token:{type:"Twig.logic.type.set",key:"reviewTitle",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"numberOfReviews"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"numberOfReviews"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"numberOfReviews"},{type:"Twig.expression.type.string",value:" Avis"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:"Avis"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:"                                        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"reviewTitle",match:["reviewTitle"]}]},{type:"raw",value:"                                        <br>                                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"averageNote"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"averageNote"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"averageNote"},{type:"Twig.expression.type.string",value:"0"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                                            <b>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"averageNote"}]},{type:"raw",value:"</b>/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"reviews"},{type:"Twig.expression.type.key.period",key:"maxNote"}]},{type:"raw",value:"                                        "}]}},{type:"raw",value:"                                    </span>                                "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"restaurant"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"isHotel",match:["isHotel"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"price"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"price"},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"price"},{type:"Twig.expression.type.key.period",key:"value"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <span class="rating-column">À partir de<br><em>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"price"},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"price"},{type:"Twig.expression.type.key.period",key:"currency"}]},{type:"raw",value:"</em></span>                                "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"station-service"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"teasing"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"teasing"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <span class="rating-column">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"teasing"},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:" <br>&nbsp;</span>                                "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"cornerShops"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"cornerShops"},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                <span class="rating-column">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"corner_shop_here"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"<br>                                    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"shop",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"cornerShops"}],output:[{type:"raw",value:"                                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"shop",match:["shop"]},{type:"Twig.expression.type.key.period",key:"iconUrl"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'                                            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"shop",match:["shop"]},{type:"Twig.expression.type.key.period",key:"iconUrl"},{type:"Twig.expression.type.filter",value:"replace",match:["| replace","replace"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:".png"},{type:"Twig.expression.type.string",value:"-web.png"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"shop",match:["shop"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"shop",match:["shop"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" />                                        '}]}},{type:"raw",value:"                                    "}]}},{type:"raw",value:"                                </span>                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"velos-en-libre-service"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"freeBike"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"freeBike"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <span class="rating-column">Vélos disponibles : <br>                                        '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"freeBike"}]},{type:"raw",value:"                                    </span>                                "}]}},{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"freePlace"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"freePlace"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <span class="rating-column">Places disponibles : <br>                                        '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"freePlace"}]},{type:"raw",value:"                                    </span>                                "}]}},{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"lastUpdate"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"lastUpdate"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <span class="rating-column">Dernière mise à jour : <br>                                        '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"dispos"},{type:"Twig.expression.type.key.period",key:"lastUpdate"}]},{type:"raw",value:"                                    </span>                                "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                        </span>                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"velos-en-libre-service"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"description"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"description"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                                <p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"description"}]},{type:"raw",value:"...</p>                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"prestations"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"prestations"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                <p class="prestations">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"prestations"},{type:"Twig.expression.type.filter",value:"truncate",match:["| truncate","truncate"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:80,match:["80",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</p>                            "}]}},{type:"raw",value:"                        "}]}},{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"restaurant"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"isHotel",match:["isHotel"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_FR"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_BE"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"                                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.string",value:"SEO"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"reservationTemplatizedUrl"},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"reservationTemplatizedUrl"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                    <a class="link-description-list" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"reservationTemplatizedUrl"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" target="_blank">Réservation immédiate</a>                                '}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                        "}]}},{type:"raw",value:"                        <button>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"more_infos"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</button>                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"restaurant"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"bar-club"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"cafe"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"promo"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"promo"},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"promoLabel"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                                <q>PROMO : "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"promoLabel"}]},{type:"raw",value:"</q>                            "}]}},{type:"raw",value:"                        "}]}},{type:"raw",value:"                    </div>                </div>                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",
value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                    <div class="picture-list illustration cropImage illustration cropImage" style="background-image: url('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:');">                        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                            <div class="distance">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>                            "}]}},{type:"raw",value:"                    </div>                "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                    <div class="picture-list illustration cropImage illustration cropImage">                        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <div class="distance noBackground">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"</div>                        "}]}},{type:"raw",value:"                    </div>                "}]}},{type:"raw",value:"            </div>        </li>    "}]}},{type:"raw",value:'    <li>        <div class="picture-list">            <span class="mappy-button-footer-expand">***</span>        </div>    </li></ul>'}],precompiled:!0,allowInlineIncludes:!0})},{}],300:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/GeoentityListView.html.twig",data:[{type:"raw",value:'<ul class="ListView GeoentityListView">    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"model",expression:[{type:"Twig.expression.type.variable",value:"models",match:["models"]}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"additionalInfo",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"additionalInfo"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"additionalInfo"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:'        <li class="geoentity">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"promo"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"promo"},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                <div class="promo">                    <div>PROMO</div>                </div>            '}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"brandId"}],output:[{type:"raw",value:'            <div class="marker"><img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.filter",value:"geoentity_branding_icon",match:["| geoentity_branding_icon","geoentity_branding_icon"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"map"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"isRetina",match:["isRetina"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"isRetina",match:["isRetina"]},{type:"Twig.expression.type.bool",value:!1},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"brandId"}]},{type:"raw",value:'" width="40" height="50"/></div>            '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'            <div class="marker marker-blue"><span class="icon icon-rub-default icon-rub-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"iconIdParent"}]},{type:"raw",value:" icon-rub-"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"iconId"}]},{type:"raw",value:'" alt="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rubricLabel"}]},{type:"raw",value:'"></span></div>            '}]}},{type:"raw",value:'            <div class="informations">                <h3>                    <a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"poi"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"uuid"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"i",expression:[{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.operator.binary",value:"..",precidence:20,associativity:"leftToRight",operator:".."}],output:[{type:"raw",value:"*"}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                    </a>                </h3>                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"cornerShops"},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'                <div class="cornerShopHere">                    <div class="wording">                        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"corner_shop_here"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:' :                    </div>                    <div class="imgContainer">                    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"cornerShop",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"cornerShops"}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"isRetina",match:["isRetina"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'                            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cornerShop",match:["cornerShop"]},{type:"Twig.expression.type.key.period",key:"iconUrl"},{type:"Twig.expression.type.filter",value:"replace",match:["| replace","replace"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:".png"},{type:"Twig.expression.type.string",value:"-webhd.png"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" />                        '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                            <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cornerShop",match:["cornerShop"]},{type:"Twig.expression.type.key.period",key:"iconUrl"}]},{type:"raw",value:'" />                        '}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                    </div>                </div>                "}]}},{type:"raw",value:'                <p class="address">                    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"addressStr"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"addressStr"}]},{type:"raw",value:"                    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                        "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"zipCodes"},{type:"Twig.expression.type.key.period",key:"0"}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"city"}]},{type:"raw",value:"                    "}]}},{type:"raw",value:"                </p>                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_FR"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_BE"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"openingHours"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"openingHours"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                    <p class="additional">                        <span class="opening-hours"><span class="icon"></span> '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"openingHours"}]},{type:"raw",value:"</span>                    </p>                    "}]}},{type:"raw",value:'                    <p class="reservation-info">                    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"teasing"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"teasing"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <span class="teasing">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"teasing"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</span>                    "}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.string",value:"SEO"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"reservationTemplatizedUrl"},{type:"Twig.expression.type.test",filter:"defined"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"reservationTemplatizedUrl"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <a class="button orangeButton" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"reservationTemplatizedUrl"},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"book"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a>                    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                        <span class="button more-info" href="#" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"more_infos"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>                    "}]}},{type:"raw",value:"                    </p>                "}]}},{type:"raw",value:"            </div>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                <div class="illustration cropImage" style="background-image: url('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"additionalInfo",match:["additionalInfo"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:');">                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                    <div class="distance">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>                "}]}},{type:"raw",value:"                </div>            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                <div class="illustration cropImage">                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.period",key:"length"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                    <div class="distance noBackground">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"distances",match:["distances"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"}]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]}]},{type:"raw",value:"</div>                "}]}},{type:"raw",value:"                </div>            "}]}},{type:"raw",value:"        </li>    "}]}},{type:"raw",value:"</ul>"}],precompiled:!0,allowInlineIncludes:!0})},{}],301:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/left/ItineraryFormView/step.html.twig",data:[{type:"raw",value:'<div class="clearfix stepLine stepFormField">    <a href="#" class="itineraryOptionRemoveStep"><span class="icon icon-remove"></span></a>    <div class="formField">        '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"name"},{type:"Twig.expression.type.string",value:"step-"},{type:"Twig.expression.type.variable",value:"stepIdx",match:["stepIdx"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"value"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"placeholder"},{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"header_form_placeholder_itinerary_step"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:" "},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"stepIdx",match:["stepIdx"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"tabIndex"},{type:"Twig.expression.type.variable",value:"stepIdx",match:["stepIdx"]},{type:"Twig.expression.type.number",value:3,match:["3",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig":303}],302:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/LocationListView.html.twig",data:[{type:"raw",value:'<div class="ListView LocationListView">'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"model",expression:[{type:"Twig.expression.type.variable",value:"models",match:["models"]}],output:[{type:"raw",value:'    <div class="location">      <div class="marker marker-green">        <span class="icon icon-dot"></span>      </div>        <div class="informations">            <h2>                <span class="locationMainAddress">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"separatedText"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]},{type:"raw",value:"</span>                "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"text",expression:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"separatedText"},{type:"Twig.expression.type.filter",value:"slice",match:["|slice","slice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],output:[{type:"raw",value:'                    <span class="locationSubAddress">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"text",match:["text"]}]},{type:"raw",value:"</span>                "}]}},{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"thoroughfareLabel"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"thoroughfareLabel"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                <strong>("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"thoroughfareLabel"}]},{type:"raw",value:")</strong>                "}]}},{type:"raw",value:"            </h2>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"rawAddress"}],output:[{type:"raw",value:'            <div>                <a class="smallButton lightBlueButton" href="#"><span class="icon icon-flag"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{
type:"Twig.expression.type.string",value:"go_there"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a>            </div>            "}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"description"},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"            <p>                "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"model",match:["model"]},{type:"Twig.expression.type.key.period",key:"description"}]},{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fullDescription",match:["fullDescription"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"}],output:[{type:"raw",value:'<a class="readMore" href="#"> '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"read_more"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a>"}]}},{type:"raw",value:"            </p>            "}]}},{type:"raw",value:"        </div>    </div>"}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],303:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig",data:[{type:"raw",value:'<div class="TextfieldView">    <input type="text" name="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:'" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"value",match:["value"]}]},{type:"raw",value:'" tabindex="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tabIndex",match:["tabIndex"]}]},{type:"raw",value:'" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"placeholder",match:["placeholder"]}]},{type:"raw",value:'" autocomplete="off" autocorrect="off" autocapitalize="off"/>    <span class="icon icon-close"></span></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],304:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/AddressTabView.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'<div id="AddressTabView">    <div id="address-background"></div>    <div class="identity">        <a class="backToSearch disabled" href="#"><span class="icon icon-previous"></span></a>        <div class="address">            <h1>                '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"separatedText"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]}]},{type:"raw",value:" <br />                "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"text",expression:[{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"separatedText"},{type:"Twig.expression.type.filter",value:"slice",match:["|slice","slice"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],output:[{type:"raw",value:"                    "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"text",match:["text"]}]},{type:"raw",value:"                "}]}},{type:"raw",value:"            </h1>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"distance",match:["distance"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"distance",match:["distance"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                <span class="distance">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"distance",match:["distance"]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>            "}]}},{type:"raw",value:'        </div>        <a class="itinerary-to smallButton lightBlueButton" href="#"><span class="icon icon-flag"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"go_there"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a>    </div></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'<div class="AddressTabView"></div>'}]}}],precompiled:!0,allowInlineIncludes:!0})},{}],305:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/left/GeoentityFullListView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/CategoryTabFullListView.html.twig",data:[{type:"raw",value:'<div class="CategoryTabFullListView-spacer">&nbsp;</div><div class="CategoryTabFullListView">    <div class="CategoryTabFullListView-list ListContainer">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.string",value:"SEO"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/GeoentityFullListView.html.twig"}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"    </div>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.test",filter:"empty"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'        <div class="CategoryTabFullListView-noresults">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"no_results_full_list"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>    "}]}},{type:"raw",value:'    <div class="CategoryTabFullListView-throbber throbber"></div></div>'}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/left/GeoentityFullListView.html.twig":299}],306:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/CategoryTabView.html.twig",data:[{type:"raw",value:'<div class="CategoryTabView">    <div class="resultsContainer">    	<div class="CategoryTabView-category ListContainer"></div>    	<div class="CategoryTabView-throbber throbber"></div>    </div>    <div class="CategoryTabView-noresults">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"no_results"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],307:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/GeoentityTabView.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'<div id="GeoentityTabView">    <div class="Geoentity-navigation">        <a class="backToResults disabled" href="#"><span class="icon icon-previous"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"back_to_results"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>        <a class="backToSearch disabled" href="#"><span class="icon icon-previous"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"back_to_search"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>        <a class="backToGeoentity" href="#"><span class="icon icon-previous"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"back"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>        <span>            <a class="back disabled" href="#"></a>            <a class="next disabled" href="#"></a>        </span>    </div>'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'    <div class="identity withBackgroundPicture" style="background-image:url('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:"); filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"}]},{type:"raw",value:"', sizingMethod='scale');\">"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'    <div class="identity">'}]}},{type:"raw",value:'    <div class="name">        '},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"indoors"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"illustration"},{type:"Twig.expression.type.key.period",key:"url"},{type:"Twig.expression.type.filter",value:"contains",match:["| contains","contains"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"iit"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'        <a class="switchToViewIcon"></a>        '}]}},{type:"raw",value:"        <h1>            "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"rubricId"},{type:"Twig.expression.type.string",value:"hotel"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"additionalInfo"},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"i",expression:[{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"additionalInfo"},{type:"Twig.expression.type.key.period",key:"rating"},{type:"Twig.expression.type.operator.binary",value:"..",precidence:20,associativity:"leftToRight",operator:".."}],output:[{type:"raw",value:"*"}]}},{type:"raw",value:"            "}]}},{type:"raw",value:"        </h1>        <h2>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"rubricLabel"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:"</h2>        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"distance",match:["distance"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"distance",match:["distance"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'            <span class="distance">                '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"distance_sentence"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%distance%"},{type:"Twig.expression.type.variable",value:"distance",match:["distance"]},{type:"Twig.expression.type.filter",value:"meterToDistance",match:["| meterToDistance","meterToDistance"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"            </span>        "}]}},{type:"raw",value:'    </div>    <div class="address">        <h2>            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"streetNumber"}],output:[{type:"raw",value:"                "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"streetNumber"}]},{type:"raw",value:"            "}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"street"}],output:[{type:"raw",value:"                "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"street"}]},{type:"raw",value:"<br/>            "}]}},{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"zipCodes"},{type:"Twig.expression.type.key.period",key:"0"}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"location"},{type:"Twig.expression.type.key.period",key:"city"}]},{type:"raw",value:'        </h2>        <ul class="contacts">            <li class="smallButton lightBlueButton">                <span class="icon icon-flag"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"go_there"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"            </li>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"hideContactInformations",match:["hideContactInformations"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"hideContactInformations",match:["hideContactInformations"]},{type:"Twig.expression.type.bool",value:!1},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.test",filter:"null"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"number"}],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"displayTelClickToShow",match:["displayTelClickToShow"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"displayTelClickToShow",match:["displayTelClickToShow"]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                                <li class="tel smallButton greenButton clickToShow">                                    <span class="icon icon-phone"></span> '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"display_phone"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"                                </li>                            "}]}},{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"category"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]}],output:[{type:"raw",value:'                                <li class="tel tel_sva '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"category"}]},{type:"raw",value:" "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"displayTelClickToShow",match:["displayTelClickToShow"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"displayTelClickToShow",match:["displayTelClickToShow"]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"hide"}]}},{type:"raw",value:'">                                    <a href="tel:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"number"}]},{type:"raw",value:'">                                        <b>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"number"}]},{type:"raw",value:"</b>                                        <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"text"}]},{type:"raw",value:"</strong>                                    </a>                                    <span>                                        <b>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"number"}]},{type:"raw",value:"</b>                                        <strong>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"text"}]},{type:"raw",value:"</strong>                                    </span>                                </li>                            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                                <li class="tel smallButton telSimple '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"displayTelClickToShow",match:["displayTelClickToShow"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"displayTelClickToShow",match:["displayTelClickToShow"]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"hide"}]}},{type:"raw",value:'">                                    <a href="tel:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"number"}]},{type:"raw",value:'">                                        <span class="icon icon-phone"></span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"number"}]},{type:"raw",value:"                                    </a>                                    <span>                                        "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"phone"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:" : "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"phone"},{type:"Twig.expression.type.key.period",key:"number"}]},{type:"raw",value:"                                    </span>                                </li>                            "}]}},{type:"raw",value:"                        "}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"website"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.variable",value:"reservationUrl",match:["reservationUrl"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.unary",value:"not",precidence:3,associativity:"rightToLeft",operator:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <li class="url"><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"website"}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"website"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></li>                    "}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"email"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]}],output:[{type:"raw",value:'                        <li class="email"><a href="mailto:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"communication"},{type:"Twig.expression.type.key.period",key:"email"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"email"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></li>                    "}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"            "}]}},{type:"raw",value:"            "
},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"reservationUrl",match:["reservationUrl"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'                 <li class="url"><a class="reservation" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"reservationUrl",match:["reservationUrl"]},{type:"Twig.expression.type.filter",value:"geoentity_templatized_url",match:["| geoentity_templatized_url","geoentity_templatized_url"]}]},{type:"raw",value:'" target="_blank">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"website"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></li>            "}]}},{type:"raw",value:"        </ul>        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"provider"},{type:"Twig.expression.type.string",value:"pagesjaunes"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"provider"},{type:"Twig.expression.type.string",value:"pj"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"phoneRateMsg"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'            <p class="clearfix">                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"provider"},{type:"Twig.expression.type.string",value:"pagesjaunes"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"geoentityModel",match:["geoentityModel"]},{type:"Twig.expression.type.key.period",key:"provider"},{type:"Twig.expression.type.string",value:"pj"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'                    <span class="left">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"origin_pagesjaunes"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>                "}]}},{type:"raw",value:"            </p>        "}]}},{type:"raw",value:"    </div></div></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'<div class="GeoentityTabView"></div>'}]}}],precompiled:!0,allowInlineIncludes:!0})},{}],308:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/HomeTabView.html.twig",data:[{type:"raw",value:'<div id="HomeTabView">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_FR"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type._function",fn:"getLocale",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.string",value:"fr_BE"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'        <div class="categories">            <h2>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.home.categoriesTitle"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:'</h2>            <ul class="ArrowList">                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"quickAccessSubcategories",match:["quickAccessSubcategories"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"subcategory",expression:[{type:"Twig.expression.type.variable",value:"quickAccessSubcategories",match:["quickAccessSubcategories"]}],output:[{type:"raw",value:'                    <li>                        <a data-rubricids="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"rubricIds"},{type:"Twig.expression.type.filter",value:"join",match:["|join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" href="#">                            <span class="icon icon-cat-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"iconId"}]},{type:"raw",value:'"></span>                            <span class="icon icon-arrow-list"></span>                            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"                        </a>                    </li>                "}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"            </ul>        </div>    "}]}},{type:"raw",value:'    <div class="seoLocations">        <h1>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.home.discoverTitle"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h1>        <h2>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.home.citiesTitle"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</h2>        <ul>            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"location",expression:[{type:"Twig.expression.type.variable",value:"seoLocationsLV",match:["seoLocationsLV"]}],output:[{type:"raw",value:'            <li>                <a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"city"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"zip"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"zip"},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"city"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">                  '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"map_url"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%town%"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"                </a>            </li>            "}]}},{type:"raw",value:"        </ul>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],309:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/HotelTabView.html.twig",data:[{type:"raw",value:'<div id="HotelTabView">    <h1>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.hotel.title"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h1>    <h2>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.hotel.description"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h2>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoHotelLV",match:["seoHotelLV"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    <h2>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.hotel.listtitle"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h2>    <ul>        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"location",expression:[{type:"Twig.expression.type.variable",value:"seoHotelLV",match:["seoHotelLV"]}],output:[{type:"raw",value:'        <li><a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"activity"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"rubrique"},{type:"Twig.expression.type.string",value:"hotel"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"zip"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"zip"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"city"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"hotels"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"common"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</a></li>        "}]}},{type:"raw",value:"        </ul>    </ul>    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],310:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/ItineraryHomeTabView.html.twig",data:[{type:"raw",value:'<div id="ItineraryHomeTabView">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoItinerariesLV",match:["seoItinerariesLV"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'    <div class="seoitineraries">        <h1>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"title.hpitinerary."},{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</h1>        <h2 class="description">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.string",value:"seo.description."},{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h2>        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.string",value:"pieton"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'        <h2 class="headline">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tab_pane_itinerary_hp_title"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h2>        <ul>            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"itinerary",expression:[{type:"Twig.expression.type.variable",value:"seoItinerariesLV",match:["seoItinerariesLV"]}],output:[{type:"raw",value:"            <li>                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"href",expression:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itinerary"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"from"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromZip"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromName"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"to"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toZip"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toName"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}},{type:"raw",value:"                "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.string",value:"tc"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"seoItineraryMode",expression:[{type:"Twig.expression.type.string",value:"transports-en-commun"}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.set",key:"href",expression:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itinerary_mode"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"mode"},{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"from"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromZip"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromName"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"to"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toZip"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toName"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]}},{type:"raw",value:"                "}]}},{type:"raw",value:'                <a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"href",match:["href"]}]},{type:"raw",value:'">                    '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itinerary_url"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%from%"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromName"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%to%"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toName"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"                </a>            </li> |            "}]}},{type:"raw",value:"        </ul>        "}]}},{type:"raw",value:"    </div>    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],311:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/ItineraryTabView.html.twig",data:[{type:"raw",value:'<div id="ItineraryTabView">    <div id="ItineraryTabView-message"></div>    <div id="ItineraryTabView-throbber" class="throbber"></div>    <div id="ItineraryTabView-stif">        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"stif.png"},{type:"Twig.expression.type.filter",value:"img_path",match:["|img_path","img_path"]}]},{type:"raw",value:'" />    </div>    <div id="ItineraryTabView-body">        <div class="itineraryTitle">            <a class="back" href="#"><span class="icon icon-previous"></span></a>        </div>        <div class="overviews"></div>        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"roadbook",match:["roadbook"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"            "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"roadbook",match:["roadbook"]},{type:"Twig.expression.type.key.period",key:"routes"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"routeIdx",match:["routeIdx"]}]},{type:"Twig.expression.type.key.period",key:"overviewHtml"},{type:"Twig.expression.type.filter",value:"raw",match:["|raw","raw"]}]},{type:"raw",value:"        "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"seoItinerariesLV",match:["seoItinerariesLV"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'            <div id="ItineraryTabView-seoitineraries">                <h1>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"title.hpitinerary."},{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</h1>                <h2 class="description">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"seo.description."},{type:"Twig.expression.type.variable",value:"seoItineraryMode",match:["seoItineraryMode"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</h2>                <h2 class="headline">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tab_pane_itinerary_hp_title"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h2>                <ul>                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoRouteModeParam",match:["seoRouteModeParam"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"seoRouteModeParam",match:["seoRouteModeParam"]},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"route",expression:[{type:"Twig.expression.type.string",value:"itinerary_mode"}]}},{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"routeMode",expression:[{type:"Twig.expression.type.variable",value:"seoRouteModeParam",match:["seoRouteModeParam"]}]}},{type:"raw",value:"                    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"route",expression:[{type:"Twig.expression.type.string",value:"itinerary"}]}},{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.set",key:"routeMode",expression:[{type:"Twig.expression.type.string",value:"auto"}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"itinerary",expression:[{type:"Twig.expression.type.variable",value:"seoItinerariesLV",match:["seoItinerariesLV"]}],output:[{type:"raw",value:'                    <li>                        <a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"route",match:["route"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"mode"},{type:"Twig.expression.type.variable",value:"routeMode",match:["routeMode"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"from"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromZip"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromName"},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"to"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toZip"},{type:"Twig.expression.type.string",value:"-"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toName"},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">                            '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"itinerary_url"
},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%from%"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"fromName"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%to%"},{type:"Twig.expression.type.variable",value:"itinerary",match:["itinerary"]},{type:"Twig.expression.type.key.period",key:"toName"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"                        </a>                    </li>                    "}]}},{type:"raw",value:"                </ul>            </div>        "}]}},{type:"raw",value:"    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],312:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/left/LocationListView.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/left/GeoentityListView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/SearchTabView.html.twig",data:[{type:"raw",value:'<div id="SearchTabView" class="leftPaneTabBody">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rubrique",match:["rubrique"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"        <h1>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubrique",match:["rubrique"]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:" <span>à "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"town"}]},{type:"raw",value:"</span></h1>    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"fullGeoentity",match:["fullGeoentity"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"        <h1>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"seo.city.h1"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%name%"},{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"town"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h1>    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"keyword",match:["keyword"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"        <h1>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tab_pane_search_message"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%keyword%"},{type:"Twig.expression.type.variable",value:"keyword",match:["keyword"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h1>    "}]}},{type:"raw",value:'    <div id="SearchTabView-message"></div>    <div id="SearchTabView-content">        <div id="SearchTabView-results" class="ListContainer">            <div class="mobAdBanner"></div>            <div id="SearchTabView-results-locations" class="SearchTabView-result" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"locations",match:["locations"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'style="display: block;"'}]}},{type:"raw",value:">                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"locations",match:["locations"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/LocationListView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"models"},{type:"Twig.expression.type.variable",value:"locations",match:["locations"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"            </div>            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.test",filter:"defined",modifier:"not"},{type:"Twig.expression.type.variable",value:"origin",match:["origin"]},{type:"Twig.expression.type.string",value:"SEO"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}]}],output:[{type:"raw",value:'            <div id="SearchTabView-results-geoentities" class="SearchTabView-result" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.test",filter:"defined",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"locations",match:["locations"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"locations",match:["locations"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:'style="display:block;"'}]}},{type:"raw",value:">                <h2>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.search.geoentities"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:"</h2>                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/GeoentityListView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"models"},{type:"Twig.expression.type.variable",value:"geoentities",match:["geoentities"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"                "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                    <div class="categories">                        <ul class="ArrowList">                            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"quickAccessSubcategories",match:["quickAccessSubcategories"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"subcategory",expression:[{type:"Twig.expression.type.variable",value:"quickAccessSubcategories",match:["quickAccessSubcategories"]}],output:[{type:"raw",value:'                                <li>                                    <a data-rubricids="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"rubricIds"},{type:"Twig.expression.type.filter",value:"join",match:["|join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" href="#">                                        <span class="icon icon-cat-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"iconId"}]},{type:"raw",value:'"></span>                                        <span class="icon icon-arrow-list"></span>                                        '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"subcategory",match:["subcategory"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"                                    </a>                                </li>                            "}]}},{type:"raw",value:"                            "}]}},{type:"raw",value:"                        </ul>                    </div>                "}]}},{type:"raw",value:"            </div>            "}]}},{type:"raw",value:"        </div>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/left/GeoentityListView.html.twig":300,"../../../../../../FastBundle/Resources/views/shared/left/LocationListView.html.twig":302}],313:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"),e("../../../../../../FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/ShoppingTabView.html.twig",data:[{type:"raw",value:'<div id="ShoppingTabView">    <h2>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.shopping.search"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:'</h2>    <form action="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"services.shopping"},{type:"Twig.expression.type.filter",value:"get_config",match:["| get_config","get_config"]}]},{type:"raw",value:'/recherche?">        '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"name"},{type:"Twig.expression.type.string",value:"whatSearchInput"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"value"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"placeholder"},{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.shopping.search.what"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"tabIndex"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"name"},{type:"Twig.expression.type.string",value:"fullAddress"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"value"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"placeholder"},{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.shopping.search.where"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"tabIndex"},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:'        <input type="submit" value="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.shopping.search.find"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" class="button blueButton" />        <span class="closeButton icon icon-geolocation"></span>    </form>    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"signs",match:["signs"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'        <div class="signs">            <h2>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.shopping.partners"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"raw",match:["| raw","raw"]}]},{type:"raw",value:'</h2>            <ul class="clearfix">                '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"sign",expression:[{type:"Twig.expression.type.variable",value:"signs",match:["signs"]}],output:[{type:"raw",value:'                    <li><a href="'},{type:"output",stack:[{type:"Twig.expression.type.string",value:"services.shopping"},{type:"Twig.expression.type.filter",value:"get_config",match:["| get_config","get_config"]}]},{type:"raw",value:"/recherche?signs="},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sign",match:["sign"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sign",match:["sign"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'">                        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"sign",match:["sign"]},{type:"Twig.expression.type.key.period",key:"images"},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"format",match:["format"]}]}]},{type:"raw",value:'" />                    </a></li>                '}]}},{type:"raw",value:"            </ul>        </div>    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig":303}],314:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/TrafficHomeTabView.html.twig",data:[{type:"raw",value:'<div id="TrafficHomeTabView">    <h1>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.traffic.title"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</h1>    <h2 class="description">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.traffic.description"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h2>    <h2>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.traffic.topInfo"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h2>    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoTrafficLV",match:["seoTrafficLV"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    <ul>        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"location",expression:[{type:"Twig.expression.type.variable",value:"seoTrafficLV",match:["seoTrafficLV"]}],output:[{type:"raw",value:'        <li><a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"traffic"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"zip"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"zip"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"city"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"traffic_seo"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</a></li>        "}]}},{type:"raw",value:"    </ul>    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],315:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/left/tab/TrafficTabView.html.twig",data:[{type:"raw",value:'<div id="TrafficTabView">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"        <h1>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.traffic.citytitle"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%city%"},{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"town"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%zip%"},{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"zip"},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</h1>        <h2>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"description",match:["description"]}]},{type:"raw",value:"</h2>        <p>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"tabview.traffic.citydescription"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"%city%"},{type:"Twig.expression.type.variable",value:"address",match:["address"]},{type:"Twig.expression.type.key.period",key:"town"},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</p>    "}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"seoTrafficLV",match:["seoTrafficLV"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    <ul>        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"location",expression:[{type:"Twig.expression.type.variable",value:"seoTrafficLV",match:["seoTrafficLV"]}],output:[{type:"raw",value:'        <li><a href="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"path",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"traffic"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"zip"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"zip"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"city"},{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"slugify",match:["| slugify","slugify"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"traffic_seo"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"capitalize",match:["| capitalize","capitalize"]}]},{type:"raw",value:" "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"location",match:["location"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</a></li>        "}]}},{type:"raw",value:"    </ul>    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],316:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/AddressSuggestView.html.twig",data:[{type:"raw",value:'<div class="SuggestView AddressSuggestView layerOnLeft">    <ul>        '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"row",expression:[{type:"Twig.expression.type.variable",value:"rows",match:["rows"]}],output:[{type:"raw",value:'        <li class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'" data-label="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'" data-subtype="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"subtype"}]},{type:"raw",value:'">                <span '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"isIconImage"}],output:[{type:"raw",value:" class='iconBrand' style='background-image: url("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"brandIconUrl"}]},{type:"raw",value:")' "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                 class="icon icon-default-suggest '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"iconCssClass"}]},{type:"raw",value:'" '}]}},{type:"raw",value:"></span>                <div>                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"address"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"name"}]}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"address"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"                        <br/><i>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"address"}]},{type:"raw",value:"</i>                    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"address"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]}],output:[{type:"raw",value:"                        <div>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"address"}]},{type:"raw",value:"</div>                    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"isDefined",match:["| isDefined","isDefined"]}],output:[{type:"raw",value:"                        <div>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</div>                    "}]}},{type:"raw",value:"                </div>            </li>        "}]}},{type:"raw",value:"    </ul>    <a>"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"flush_history"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</a></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],317:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/AmbiguityView.html.twig",data:[{type:"raw",value:'<div class="AmbiguityView-ambigous AddressSuggestView SuggestView">    <ul>    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"i",expression:[{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.variable",value:"limit",match:["limit"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",
precidence:6,associativity:"leftToRight",operator:"-"},{type:"Twig.expression.type.operator.binary",value:"..",precidence:20,associativity:"leftToRight",operator:".."}],output:[{type:"raw",value:'    <li class="AmbiguityView-ambigous-address" data-location="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"i",match:["i"]}]},{type:"raw",value:'">        <i class="icon icon-default-suggest"></i>        <div>            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"addresses",match:["addresses"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"i",match:["i"]}]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"addresses",match:["addresses"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"i",match:["i"]}]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"address"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"            <br/><i>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"addresses",match:["addresses"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"i",match:["i"]}]},{type:"Twig.expression.type.key.period",key:"address"}]},{type:"raw",value:"</i>            "}]}},{type:"raw",value:"        </div>    </li>    "}]}},{type:"raw",value:"    </ul></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],318:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/ApplicationHeaderView.html.twig",data:[{type:"raw",value:'<div class="'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"isOtherApp"}],output:[{type:"raw",value:"otherApp "}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"size",match:["size"]},{type:"Twig.expression.type.number",value:3,match:["3",null]},{type:"Twig.expression.type.operator.binary",value:"<",precidence:8,associativity:"leftToRight",operator:"<"}],output:[{type:"raw",value:"small"}]}},{type:"raw",value:'" style="background-color: rgb('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"backgroundColor"},{type:"Twig.expression.type.filter",value:"join",match:["| join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"); color: rgb("},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"textColor"},{type:"Twig.expression.type.filter",value:"join",match:["| join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:')">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"headerlarge"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'        <div class="ApplicationHeader-header" style="background-image: url('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"size",match:["size"]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"headerlarge"},{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"header"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:');">    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <div class="ApplicationHeader-header">    '}]}},{type:"raw",value:'        <div class="appInfos '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"backgroundSize"}],output:[{type:"raw",value:"backgroundSize"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"backgroundSize"}]}]}},{type:"raw",value:'">            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"foregroundIcon"}],output:[{type:"raw",value:'                <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"size",match:["size"]},{type:"Twig.expression.type.number",value:2,match:["2",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"foregroundIcon"},{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"wm_foregroundIcon"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'" />            '}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"description"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"},{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"isOtherApp"},{type:"Twig.expression.type.operator.binary",value:"or",precidence:14,associativity:"leftToRight",operator:"or"}],output:[{type:"raw",value:"            <div>                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"title"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                    <h2>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</h2>                "}]}},{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"isOtherApp"}],output:[{type:"raw",value:"                    <h1>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</h1>                "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"description"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"                    <h1>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"description"}]},{type:"raw",value:"</h1>                "}]}},{type:"raw",value:"            </div>            "}]}},{type:"raw",value:'            <a style="color: rgb('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"textColor"},{type:"Twig.expression.type.filter",value:"join",match:["| join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:')">                <span class="icon icon-close backButton"></span>            </a>        </div>        <span class="detailListButton switch-list icon icon-map icon-list" style="color: rgb('},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"applicationModel",match:["applicationModel"]},{type:"Twig.expression.type.key.period",key:"textColor"},{type:"Twig.expression.type.filter",value:"join",match:["| join","join"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:","},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:')"></span>    </div>    <div class="bottom">        <div class="filters"></div>    </div></div><div class="filterComponents"></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],319:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/CategoryHeaderView.html.twig",data:[{type:"raw",value:'<div class="background">    <div class="top">        <a class="backButton"><span class="icon icon-previous"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"categories.header.home"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</a>    </div>    <div class="detailListButton list '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"show",match:["show"]},{type:"Twig.expression.type.string",value:"map"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"active"}]}},{type:"raw",value:'"><span class="icon icon-list"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"categories.header.gotolist"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</div>    <div class="detailListButton map '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"show",match:["show"]},{type:"Twig.expression.type.string",value:"list"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"active"}]}},{type:"raw",value:'"><span class="icon icon-map"></span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"categories.header.gotomap"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</div>    <div class="bottom">        <div class="name  '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"filters",match:["filters"]},{type:"Twig.expression.type.filter",value:"length",match:["| length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"noFilters"}]}},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:'</div>            <div class="filters"></div>    </div></div><div class="filterComponents"></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],320:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/DatePickers.html.twig",data:[{type:"raw",value:'<div class="DatePickers">    <label>        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_from"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'        <input type="text" name="date-start" value="JJ/MM/AAAA">        <span class="icon icon-calendar"></span>    </label>    <label>        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"fromto_to"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'        <input type="text" name="date-end" value="JJ/MM/AAAA">        <span class="icon icon-calendar"></span>    </label>    <input type="submit" name="submit" class="button" value="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"ok"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" data-event-location="Calendrier" /></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],321:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/FilterTitleView.html.twig",data:[{type:"raw",value:'<div class="filter filter-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"filter",match:["filter"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'" data-index="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"index",match:["index"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"filter",match:["filter"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:' <span class="bottomArrow"></span></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],322:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/ProductSuggestView.html.twig",data:[{type:"raw",value:'<div class="SuggestView ProductSuggestView layerOnLeft">    <ul>        '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"row",expression:[{type:"Twig.expression.type.variable",value:"rows",match:["rows"]}],output:[{type:"raw",value:'            <li data-label="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"name"},{type:"Twig.expression.type.filter",value:"striptags",match:["| striptags","striptags"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"row",match:["row"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:"</li>        "}]}},{type:"raw",value:"    </ul></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],323:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/TabSelectFilterView.html.twig",data:[{type:"raw",value:'<div class="FilterView TabFilterView">    <div>        '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"geoentity.tabsselect"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"        <span></span>    </div>    <ul>        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"tab",expression:[{type:"Twig.expression.type.variable",value:"tabs",match:["tabs"]}],output:[{type:"raw",value:'            <li><a href="#" data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tab",match:["tab"]},{type:"Twig.expression.type.key.period",key:"context"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tab",match:["tab"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</a></li>        "}]}},{type:"raw",value:"    </ul></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],324:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/TouchGallery.html.twig",data:[{type:"raw",value:'<div class="sliderHolder" data-elem="sliderHolder">    <div class="slider" data-elem="slider" data-options="" data-show="" data-hide="">        <a><span class="icon icon-close"></span></a>        <div data-elem="slides" data-options="preloaderUrl:/ajax-loader.gif; loadIndexOnly:false;" ></div>        <ul data-elem="items">            '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"image",expression:[{type:"Twig.expression.type.variable",value:"images",match:["images"]}],output:[{type:"raw",value:'                <li><a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"href"}]},{type:"raw",value:'"></a></li>            '}]}},{type:"raw",value:"        </ul>    </div></div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],325:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/ViewerTitle.html.twig",data:[{type:"raw",value:'<div>    <a href="javascript:'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"i",match:["i"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"void(0)"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"$.fancybox.jumpto(0);"}]}},{type:"raw",value:'" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"i",match:["i"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:' class="disable" '}]}},{type:"raw",value:'><<</a>    <a href="javascript:$.fancybox.prev();" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"i",match:["i"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:' class="disable" '}]}},{type:"raw",value:"><</a>    <span>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"i",match:["i"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:"  / "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"pageCount",match:["pageCount"]}]},{type:"raw",value:'</span>    <a href="javascript:$.fancybox.next();" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"i",match:["i"]},{type:"Twig.expression.type.variable",value:"pageCount",match:["pageCount"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:' class="disable" '}]}},{type:"raw",value:'>></a>    <a href="javascript:'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"i",match:["i"]},{type:"Twig.expression.type.variable",value:"pageCount",match:["pageCount"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:"void(0)"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"$.fancybox.jumpto('"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"pageCount",match:["pageCount"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:"');"}]}},{type:"raw",value:'" '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"i",match:["i"]},{type:"Twig.expression.type.variable",value:"pageCount",match:["pageCount"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:' class="disable" '}]}},{type:"raw",value:'>>></a>    <div class="print">        <a href="#" target="blank">            <span class="label">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"print"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</span>            <span class="icon icon-print"></span>        </a>    </div></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],326:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/filters/CheckboxFilterView.html.twig",data:[{type:"raw",value:'<span>	<input type="checkbox" value="checkboxFilter" id="checkboxFilter" />	<label for="checkboxFilter">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:"</label></span>"}],precompiled:!0,allowInlineIncludes:!0})},{}],327:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/filters/DatePickerFilterView.html.twig",data:[{type:"raw",value:'<label class="label">Dates</label><div class="field">	<input type="text" class="from" name="date-start" placeholder="Arrivée"/>	<span class="icon icon-calendar"></span></div><div class="field">	<input type="text" class="to" name="date-end" placeholder="Départ"/>	<span class="icon icon-calendar"></span></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],328:[function(e,t,i){e("../../../../../../FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"),t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/filters/LocationFilterView.html.twig",data:[{type:"raw",value:'<label class="label">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:'</label><div class="field">    '},{type:"logic",token:{type:"Twig.logic.type.include",only:!1,includeMissing:!1,stack:[{type:"Twig.expression.type.string",value:"FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig"}],withStack:[{type:"Twig.expression.type.object.start",value:"{",match:["{"]},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"name"},{type:"Twig.expression.type.string",value:"city"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"value"},{type:"Twig.expression.type.variable",value:"value",match:["value"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.operator.binary",value:":",precidence:16,associativity:"rightToLeft",operator:":",key:"tabIndex"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.object.end",value:"}",match:["}"]}]}},{type:"raw",value:'    <span class="closeButton icon icon-geolocation"></span></div>'}],precompiled:!0,allowInlineIncludes:!0})},{"../../../../../../FastBundle/Resources/views/shared/left/form/TextfieldView.html.twig":303}],329:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/filters/MosaicFilterView.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"rubricsWithImages",match:["rubricsWithImages"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"logic",token:{type:"Twig.logic.type.set",key:"rubricClass",expression:[{type:"Twig.expression.type.variable",value:"rubricsWithoutImages",match:["rubricsWithoutImages"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"},{type:"Twig.expression.type.string",value:"listSeparator"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]},{type:"Twig.expression.type.test",filter:"defined"},{type:"Twig.expression.type.variable",value:"label",match:["label"]},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:"    <label>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:"</label>"}]}},{type:"raw",value:'<ul class="images '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubricClass",match:["rubricClass"]}]},{type:"raw",value:'">'},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"rubric",expression:[{type:"Twig.expression.type.variable",value:"rubricsWithImages",match:["rubricsWithImages"]}],output:[{type:"raw",value:'    <li data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubric",match:["rubric"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'">        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubric",match:["rubric"]},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'"/>        <span class="title">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubric",match:["rubric"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</span>    </li>"}]}},{type:"raw",value:"</ul>"}]}},{type:"raw",value:"<ul>"},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"rubric",expression:[{type:"Twig.expression.type.variable",value:"rubricsWithoutImages",match:["rubricsWithoutImages"]}],output:[{type:"raw",value:'    <li data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubric",match:["rubric"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"rubric",match:["rubric"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</li>"}]}},{type:"raw",value:"</ul>"}],precompiled:!0,allowInlineIncludes:!0})},{}],330:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/filters/MultiSelectFilterView.html.twig",data:[{type:"raw",value:'<div class="multiSelectOptions">    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:'		<div class="filterLabel">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:"</div>	"}]}},{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"values",match:["values"]}],output:[{type:"raw",value:'    <div data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" class="multiSelectOption '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"isSelected"}],output:[{type:"raw",value:"active"}]}},{type:"raw",value:'">    	<div>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</div>    	"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"description"},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"    		<p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"description"}]},{type:"raw",value:"</p>    	"}]}},{type:"raw",value:"    </div>    "}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],331:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/filters/SelectFilterView.html.twig",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]},{type:"Twig.expression.type.test",filter:"defined"}],output:[{type:"raw",value:"	<label>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:"</label>"}]}},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"section",expression:[{type:"Twig.expression.type.variable",value:"sections",match:["sections"]}],output:[{type:"raw",value:'    <div class="selectOptions clearfix">        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"section",
match:["section"]},{type:"Twig.expression.type.key.period",key:"label"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'        <span class="sectionTitle">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</span>        "}]}},{type:"raw",value:"        <ul>        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"section",match:["section"]},{type:"Twig.expression.type.key.period",key:"values"}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"label"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.set",key:"activeClass",expression:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.string",value:"discarded"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:" active"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}},{type:"raw",value:'            <li>                <label class="selectOption'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"activeClass",match:["activeClass"]}]},{type:"raw",value:'" data-id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'"><span class="icon"></span>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</label>            </li>            "}]}},{type:"raw",value:"        "}]}},{type:"raw",value:"        </ul>    </div>"}]}},{type:"raw",value:"</div>"}],precompiled:!0,allowInlineIncludes:!0})},{}],332:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/filters/SliderFilterView.html.twig",data:[{type:"raw",value:"<label>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"]}]},{type:"raw",value:'</label><div class="sliderContainer"></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],333:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/survey/Form.html.twig",data:[{type:"raw",value:'<div class="surveyForm">    <form>    <span class="icon icon-close"></span>    <h1>Votre avis compte pour nous</h1>    <div class="survey-page active">        <h2>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'</h2>        <div class="survey-radio">        '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"options"}],output:[{type:"raw",value:'            <div>                <label class="radio-label-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" id="label_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" for="field_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'"> </label>                <input class="radio-option-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" id="field_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" name="field_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:0,match:["0",null]}]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:'" />            </div>        '}]}},{type:"raw",value:"        </div>        <h2>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]}]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'</h2>        <div class="survey-list">        '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]}]},{type:"Twig.expression.type.key.period",key:"options"}],output:[{type:"raw",value:'            <div>                <input type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]}]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'" id="field'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]}]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'" name="field_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]}]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'[]" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"value"}]},{type:"raw",value:'" />                <label for="field'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:1,match:["1",null]}]},{type:"Twig.expression.type.key.period",key:"id"},{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:"</label>            </div>        "}]}},{type:"raw",value:'        </div>        <input type="button" class="narrowButton blueButton survey-next" value="Envoyer">    </div>    <div class="survey-page">        <h2>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:2,match:["2",null]}]},{type:"Twig.expression.type.key.period",key:"label"}]},{type:"raw",value:'</h2>        <textarea name="field_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:2,match:["2",null]}]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" maxlength="5000"></textarea>        <input type="button" class="narrowButton blueButton survey-submit" value="Envoyer">    </div>    <div class="survey-error">        Merci de sélectionner une réponse    </div>    <input type="hidden" name="field_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"questions",match:["questions"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.number",value:3,match:["3",null]}]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'" value="">    </form></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],334:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/mixins/survey/Thumbnail.html.twig",data:[{type:"raw",value:'<div class="surveyThumbnail">    <span class="icon icon-close"></span>    <h1>Votre avis compte pour nous</h1>    <input type="button" class="narrowButton blueButton open-survey" value="Êtes-vous satisfait ?"></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],335:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/overlay/DownloadAppView.html.twig",data:[{type:"raw",value:'<div class="icon icon-remove"></div><div class="image"></div><div class="logo"></div><div class="edito">    <p class="title">MAPPY</p>    <p class="smartban">Vous n\'utilisez toujours pas l\'application ?</p></div><div class="open-button">    <button class="button greenButton open">Ouvrir</button></div>'}],precompiled:!0,allowInlineIncludes:!0})},{}],336:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/overlay/ShareView.html.twig",data:[{type:"raw",value:'<p class="title">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_page"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</p>"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.string",value:"all"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]}],output:[{type:"raw",value:'<div class="section first">    <p class="title">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_by_social_networks"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p>    <div class="content content-social-networks">        <div class="column">            <a href="#" class="social-network">                <span class="icon icon-facebook facebook"></span>                '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"facebook"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'            </a>            <a href="#" class="social-network">                <span class="icon icon-twitter twitter"></span>                '},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"twitter"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"            </a>        </div>    </div></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.string",value:"mail"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}]}],output:[{type:"raw",value:'<div class="section '},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.string",value:"link"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]},{type:"Twig.expression.type.string",value:"first"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'">    <p class="title">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_link"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p>    <div class="content content-link">        <textarea class="column" readonly>'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"link",match:["link"]}]},{type:"raw",value:"</textarea>    </div></div>"}]}},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.string",value:"link"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}]}],output:[{type:"raw",value:'<div class="section '},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"type",match:["type"]},{type:"Twig.expression.type.string",value:"mail"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}]},{type:"Twig.expression.type.string",value:"first"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'">    <p class="title">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_by_email"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p>    <form class="content content-email">        <div class="row">            <label for="share-to">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_to"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</label>            <input type="text" id="share-to" class="column" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_email_mandatory"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" value="" />        </div>        <div class="row">            <label for="share-message">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_message"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</label>            <textarea id="share-message" class="column"></textarea>        </div>        <div>            <span class="error error-message">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"share_error"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</span>            <input type="submit" class="button" value="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"submit"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">        </div>    </form></div>'}]}}],precompiled:!0,allowInlineIncludes:!0})},{}],337:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/overlay/UserSurveyView.html.twig",data:[{type:"raw",value:'<div class="userSurveyLogo"></div><p class="userSurveyTitle">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"user_survey.title"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</p><span class="userSurveyDescription">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"user_survey.description"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</span><button class="button blueButton userSurveyOkButton">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"user_survey.ok_button"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</button><button class="button userSurveyNoButton">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"user_survey.no_button"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</button><span class="userSurveyInfo">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"__",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"user_survey.info"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>"}],precompiled:!0,allowInlineIncludes:!0})},{}],338:[function(e,t,i){t.exports=twig({id:"FastBundle/Resources/views/shared/overlay/VDEAdView.html.twig",data:[{type:"raw",value:'<a href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"editoLinkUrl"}]},{type:"raw",value:'" target="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"editoLinkTarget"}]},{type:"raw",value:'" style="background-image: url(\''},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"imgUrlGE"}]},{type:"raw",value:'\')" class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'" data-title="En ce moment">        <div class="mobileVDE"  style="background-image: url(\''},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"imgUrlPE"}]},{type:"raw",value:"')\"></div>        <h4>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</h4>        <p>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"description"}]},{type:"raw",value:'</p>        <button class="button blueButton">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"vde",match:["vde"]},{type:"Twig.expression.type.key.period",key:"buttonLabel"}]},{type:"raw",value:'</button>        <span class="closeButton icon icon-close"></span></a>'}],precompiled:!0,allowInlineIncludes:!0})},{}],339:[function(e,t,i){t.exports={index:{path:"/"},AppleAppSiteAssociation:{path:"/apple-app-site-association"},MappyFastBundle_map_print:{path:"/print/map/:coordX/:coordY/:zoom/:viewmodes"},activity:{path:"/activite/:rubrique/:zip-:city"},geoip:{path:"/front-services/geoip"},city:{path:"/plan/:zip-:city"},traffic:{path:"/info-trafic/:zip-:city"},reviews:{path:"/front-services/reviews/:id"},shoppingSigns:{path:"/front-services/shopping-signs"},shoppingProductSuggestService:{path:"/front-services/shopping-product-suggest"},uberTime:{path:"/front-services/uber/time"},uberPrice:{path:"/front-services/uber/price"},ouibusFare:{path:"/front-services/ouibus/fare"},MappyFastBundle_city_map:{path:"/front-services/map/:zip-:city"},getSurvey:{path:"/front-services/survey/:catid"},setSurvey:{path:"/front-services/survey/:catid"},sharer:{path:"/front-services/sharer/"},old_poi_url:{path:"/activite/:rubric/:zip-:city/:name/:uuid"},configuration:{path:"/configuration"},poi:{path:"/poi/:uuid"},shopping:{path:"/shopping"},itinerary_mode:{mode:"auto",path:"/itineraire/:mode/:from/:to"},itinerary:{path:"/itineraire/:from/:to"},itinerary_hp:{path:"/itineraire"},itinerary_hp_mode:{mode:"auto",path:"/itineraire/:mode"},MappyFastBundle_expense_print:{path:"/print/expense/auto/:from/:to"},apps:{path:"/app/:appName"},traffic_hp:{path:"/info-trafic"},city_list:{path:"/annuaire-ville/page:n"},activity_list:{path:"/activite/liste/:zip-:city/page:n"},city_pois_list:{path:"/poi/liste/:zip-:city/page:n"},activity_ovm_list:{path:"/poi/populaire/:rubric/:zip-:city/page:n"},city_ovm_list:{path:"/poi/populaire/:zip-:city/page:n"},hotel_hp:{path:"/hotel"}}},{}]},{},[158]);
//# sourceMappingURL=portal.js.map